<!-- 综合看板页面内容 -->
<div class="dashboard-header">
    <div class="dashboard-title-area">
        <h1 class="dashboard-title">
            <i class="fas fa-tachometer-alt"></i>
            综合看板
        </h1>
        <p class="dashboard-subtitle">实时监控所有产品设备的运行状态和关键指标</p>
    </div>
    <div class="dashboard-controls">
        <div class="time-range-selector">
            <select class="form-select" id="timeRange">
                <option value="realtime">实时数据</option>
                <option value="1h">近1小时</option>
                <option value="24h" selected>近24小时</option>
                <option value="7d">近7天</option>
                <option value="30d">近30天</option>
            </select>
        </div>
        <button type="button" class="btn btn-primary" id="refreshBtn">
            <i class="fas fa-sync-alt"></i>
            刷新数据
        </button>
        <div class="auto-refresh-toggle">
            <label class="switch">
                <input type="checkbox" id="autoRefresh" checked>
                <span class="slider"></span>
            </label>
            <span class="toggle-label">自动刷新</span>
        </div>
    </div>
</div>

<!-- 实时监控头部 -->
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; padding: 20px; background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
    <div>
        <h2 style="color: #333; margin: 0 0 8px 0; font-size: 1.4rem;">实时监控中心</h2>
        <p style="color: #6c757d; margin: 0;">最后更新：<span id="lastUpdate"></span></p>
    </div>
    <div style="display: flex; align-items: center; gap: 15px;">
        <select style="padding: 8px 12px; border: 1px solid #e9ecef; border-radius: 6px; background: white; color: #333;">
            <option>最近1小时</option>
            <option>最近6小时</option>
            <option>最近24小时</option>
            <option>最近7天</option>
        </select>
        <button id="autoRefreshBtn" style="padding: 8px 16px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem; display: flex; align-items: center; gap: 6px;">
            <i class="fas fa-play"></i>
            <span>自动刷新</span>
        </button>
        <button onclick="refreshData()" style="padding: 8px 16px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">
            <i class="fas fa-sync-alt"></i>
            刷新数据
        </button>
    </div>
</div>

<!-- 核心指标面板 -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; margin-bottom: 30px;">
    <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); position: relative; overflow: hidden;">
        <div style="position: absolute; top: -20px; right: -20px; width: 80px; height: 80px; background: rgba(255,255,255,0.1); border-radius: 50%;"></div>
        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px; position: relative;">
            <div style="width: 55px; height: 55px; background: rgba(255,255,255,0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-wifi" style="font-size: 1.6rem;"></i>
            </div>
            <div style="text-align: right;">
                <div style="font-size: 2.2rem; font-weight: bold; margin-bottom: 5px;">95.02%</div>
                <div style="font-size: 1rem; opacity: 0.9;">设备在线率</div>
            </div>
        </div>
        <div style="display: flex; justify-content: space-between; font-size: 0.85rem; opacity: 0.9;">
            <span>在线: 1,186</span>
            <span>离线: 62</span>
        </div>
        <div style="position: absolute; bottom: 10px; right: 15px; font-size: 0.8rem; opacity: 0.7;">
            ↗ +2.1% 较昨日
        </div>
    </div>

    <div style="background: linear-gradient(135deg, #28a745, #20c997); color: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3); position: relative; overflow: hidden;">
        <div style="position: absolute; top: -20px; right: -20px; width: 80px; height: 80px; background: rgba(255,255,255,0.1); border-radius: 50%;"></div>
        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px; position: relative;">
            <div style="width: 55px; height: 55px; background: rgba(255,255,255,0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-heartbeat" style="font-size: 1.6rem;"></i>
            </div>
            <div style="text-align: right;">
                <div style="font-size: 2.2rem; font-weight: bold; margin-bottom: 5px;">88.5</div>
                <div style="font-size: 1rem; opacity: 0.9;">设备健康度</div>
            </div>
        </div>
        <div style="display: flex; justify-content: space-between; font-size: 0.85rem; opacity: 0.9;">
            <span>优秀: 952</span>
            <span>良好: 251</span>
        </div>
        <div style="position: absolute; bottom: 10px; right: 15px; font-size: 0.8rem; opacity: 0.7;">
            ↗ +1.8% 较昨日
        </div>
    </div>

    <div style="background: linear-gradient(135deg, #ffc107, #fd7e14); color: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(255, 193, 7, 0.3); position: relative; overflow: hidden;">
        <div style="position: absolute; top: -20px; right: -20px; width: 80px; height: 80px; background: rgba(255,255,255,0.1); border-radius: 50%;"></div>
        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px; position: relative;">
            <div style="width: 55px; height: 55px; background: rgba(255,255,255,0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-bell" style="font-size: 1.6rem;"></i>
            </div>
            <div style="text-align: right;">
                <div style="font-size: 2.2rem; font-weight: bold; margin-bottom: 5px;">92.3%</div>
                <div style="font-size: 1rem; opacity: 0.9;">告警处理率</div>
            </div>
        </div>
        <div style="display: flex; justify-content: space-between; font-size: 0.85rem; opacity: 0.9;">
            <span>已处理: 1,847</span>
            <span>待处理: 154</span>
        </div>
        <div style="position: absolute; bottom: 10px; right: 15px; font-size: 0.8rem; opacity: 0.7;">
            ↗ +3.2% 较昨日
        </div>
    </div>

    <div style="background: linear-gradient(135deg, #17a2b8, #6f42c1); color: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(23, 162, 184, 0.3); position: relative; overflow: hidden;">
        <div style="position: absolute; top: -20px; right: -20px; width: 80px; height: 80px; background: rgba(255,255,255,0.1); border-radius: 50%;"></div>
        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px; position: relative;">
            <div style="width: 55px; height: 55px; background: rgba(255,255,255,0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-clock" style="font-size: 1.6rem;"></i>
            </div>
            <div style="text-align: right;">
                <div style="font-size: 2.2rem; font-weight: bold; margin-bottom: 5px;">156.7h</div>
                <div style="font-size: 1rem; opacity: 0.9;">平均运行时长</div>
            </div>
        </div>
        <div style="display: flex; justify-content: space-between; font-size: 0.85rem; opacity: 0.9;">
            <span>最长: 342h</span>
            <span>最短: 8h</span>
        </div>
        <div style="position: absolute; bottom: 10px; right: 15px; font-size: 0.8rem; opacity: 0.7;">
            ↗ +12.5h 较昨日
        </div>
    </div>
</div>

<!-- 实时运行状态监控 -->
<div style="background: white; border-radius: 12px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 30px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h3 style="color: #333; margin: 0; font-size: 1.3rem; display: flex; align-items: center; gap: 10px;">
            <i class="fas fa-chart-line" style="color: #667eea;"></i>
            实时运行状态监控
        </h3>
        <div style="display: flex; align-items: center; gap: 10px;">
            <select id="paramSelect" style="padding: 6px 12px; border: 1px solid #e9ecef; border-radius: 6px; background: white; color: #333; font-size: 0.9rem;">
                <option value="temperature">温度</option>
                <option value="pressure">压力</option>
                <option value="vibration">振动</option>
                <option value="power">功率</option>
            </select>
            <button onclick="toggleFullscreen()" style="padding: 6px 12px; background: #f8f9fa; color: #667eea; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                <i class="fas fa-expand"></i>
                全屏
            </button>
        </div>
    </div>
    <div style="height: 320px; background: #f8f9fa; border-radius: 8px; position: relative; padding: 20px;">
        <!-- 模拟实时图表 -->
        <div style="display: flex; align-items: end; height: 100%; width: 100%; gap: 8px;">
            <div id="chart-container" style="display: flex; align-items: end; height: 100%; width: 100%; gap: 8px;">
                <!-- 动态生成的图表数据点 -->
            </div>
        </div>
        <!-- 图表标签 -->
        <div style="position: absolute; top: 20px; left: 20px; background: white; padding: 12px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
            <div style="font-size: 0.9rem; color: #666; margin-bottom: 5px;">当前值</div>
            <div style="font-size: 1.5rem; font-weight: bold; color: #333;" id="currentValue">75.2°C</div>
            <div style="font-size: 0.8rem; color: #28a745; margin-top: 3px;">
                <i class="fas fa-arrow-up"></i>
                +2.1°C
            </div>
        </div>
        <div style="position: absolute; top: 20px; right: 20px; background: white; padding: 12px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
            <div style="font-size: 0.9rem; color: #666; margin-bottom: 5px;">预警阈值</div>
            <div style="font-size: 1.2rem; font-weight: bold; color: #ffc107;" id="thresholdValue">85°C</div>
        </div>
    </div>
</div>

<!-- 设备状态分布和地域分布 -->
<div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 25px; margin-bottom: 30px;">
    <!-- 设备状态分布 -->
    <div style="background: white; border-radius: 12px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h3 style="color: #333; margin: 0; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-chart-pie" style="color: #28a745;"></i>
                设备状态分布
            </h3>
            <span style="font-size: 0.85rem; color: #6c757d;">实时更新</span>
        </div>
        <div style="height: 280px; display: flex; align-items: center; justify-content: space-between;">
            <div style="width: 160px; height: 160px; border-radius: 50%; background: conic-gradient(from 0deg, #28a745 0deg 300deg, #ffc107 300deg 330deg, #dc3545 330deg 350deg, #6c757d 350deg 360deg); display: flex; align-items: center; justify-content: center; position: relative;">
                <div style="width: 100px; height: 100px; background: white; border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center;">
                    <div style="font-size: 1.3rem; font-weight: bold; color: #333;">1,248</div>
                    <div style="font-size: 0.8rem; color: #666;">总数</div>
                </div>
                <!-- 动态指示器 -->
                <div id="statusIndicator" style="position: absolute; width: 12px; height: 12px; background: #667eea; border-radius: 50%; animation: pulse 2s infinite;"></div>
            </div>
            <div style="flex: 1; margin-left: 25px;">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; padding: 12px; background: #f8f9fa; border-radius: 8px;">
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <div style="width: 12px; height: 12px; background: #28a745; border-radius: 50%;"></div>
                        <span style="color: #333; font-size: 0.9rem;">正常运行</span>
                    </div>
                    <div style="text-align: right;">
                        <div style="color: #28a745; font-weight: 600; font-size: 1rem;">1,186</div>
                        <div style="color: #6c757d; font-size: 0.8rem;">95.0%</div>
                    </div>
                </div>
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; padding: 12px; background: #f8f9fa; border-radius: 8px;">
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <div style="width: 12px; height: 12px; background: #ffc107; border-radius: 50%;"></div>
                        <span style="color: #333; font-size: 0.9rem;">告警状态</span>
                    </div>
                    <div style="text-align: right;">
                        <div style="color: #ffc107; font-weight: 600; font-size: 1rem;">45</div>
                        <div style="color: #6c757d; font-size: 0.8rem;">3.6%</div>
                    </div>
                </div>
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; padding: 12px; background: #f8f9fa; border-radius: 8px;">
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <div style="width: 12px; height: 12px; background: #dc3545; border-radius: 50%;"></div>
                        <span style="color: #333; font-size: 0.9rem;">故障状态</span>
                    </div>
                    <div style="text-align: right;">
                        <div style="color: #dc3545; font-weight: 600; font-size: 1rem;">12</div>
                        <div style="color: #6c757d; font-size: 0.8rem;">1.0%</div>
                    </div>
                </div>
                <div style="display: flex; align-items: center; justify-content: space-between; padding: 12px; background: #f8f9fa; border-radius: 8px;">
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <div style="width: 12px; height: 12px; background: #6c757d; border-radius: 50%;"></div>
                        <span style="color: #333; font-size: 0.9rem;">离线状态</span>
                    </div>
                    <div style="text-align: right;">
                        <div style="color: #6c757d; font-weight: 600; font-size: 1rem;">5</div>
                        <div style="color: #6c757d; font-size: 0.8rem;">0.4%</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 地域分布热力图 -->
    <div style="background: white; border-radius: 12px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h3 style="color: #333; margin: 0; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-map-marked-alt" style="color: #17a2b8;"></i>
                地域分布热力图
            </h3>
            <button onclick="viewMapDetails()" style="padding: 6px 12px; background: #f8f9fa; color: #17a2b8; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                查看详情
            </button>
        </div>
        <div style="height: 280px; background: #f8f9fa; border-radius: 8px; display: flex; flex-direction: column; position: relative; padding: 20px;">
            <!-- 模拟中国地图 -->
            <div style="flex: 1; display: flex; justify-content: center; align-items: center; position: relative;">
                <i class="fas fa-globe-asia" style="font-size: 6rem; color: #e9ecef;"></i>
                
                <!-- 热点标记 -->
                <div style="position: absolute; top: 30%; left: 60%; width: 40px; height: 40px; background: radial-gradient(circle, rgba(40,167,69,0.8), rgba(40,167,69,0.2)); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 0.8rem; animation: pulse 2s infinite;">
                    568
                </div>
                <div style="position: absolute; top: 60%; left: 45%; width: 35px; height: 35px; background: radial-gradient(circle, rgba(255,193,7,0.8), rgba(255,193,7,0.2)); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 0.8rem; animation: pulse 2s infinite 0.5s;">
                    425
                </div>
                <div style="position: absolute; top: 25%; left: 45%; width: 30px; height: 30px; background: radial-gradient(circle, rgba(23,162,184,0.8), rgba(23,162,184,0.2)); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 0.7rem; animation: pulse 2s infinite 1s;">
                    255
                </div>
            </div>
            
            <!-- 图例 -->
            <div style="display: flex; justify-content: center; gap: 20px; margin-top: 15px; font-size: 0.85rem;">
                <div style="display: flex; align-items: center; gap: 8px;">
                    <div style="width: 12px; height: 12px; background: #28a745; border-radius: 50%;"></div>
                    <span style="color: #333;">华东地区 (568台)</span>
                </div>
                <div style="display: flex; align-items: center; gap: 8px;">
                    <div style="width: 12px; height: 12px; background: #ffc107; border-radius: 50%;"></div>
                    <span style="color: #333;">华南地区 (425台)</span>
                </div>
                <div style="display: flex; align-items: center; gap: 8px;">
                    <div style="width: 12px; height: 12px; background: #17a2b8; border-radius: 50%;"></div>
                    <span style="color: #333;">华北地区 (255台)</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 告警趋势分析和效率指标 -->
<div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 25px; margin-bottom: 30px;">
    <!-- 告警趋势分析 -->
    <div style="background: white; border-radius: 12px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h3 style="color: #333; margin: 0; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-chart-area" style="color: #dc3545;"></i>
                告警趋势分析
            </h3>
            <select style="padding: 6px 12px; border: 1px solid #e9ecef; border-radius: 6px; background: white; color: #333; font-size: 0.85rem;">
                <option>最近24小时</option>
                <option>最近7天</option>
                <option>最近30天</option>
            </select>
        </div>
        <div style="height: 220px; background: #f8f9fa; border-radius: 8px; display: flex; align-items: end; justify-content: space-around; padding: 20px; position: relative;">
            <!-- 模拟趋势图 -->
            <div style="display: flex; align-items: end; height: 100%; width: 100%; gap: 12px;">
                <div style="display: flex; flex-direction: column; align-items: center; flex: 1;">
                    <div style="height: 60%; background: linear-gradient(to top, #dc3545, #e74c3c); width: 12px; border-radius: 6px; margin-bottom: 8px; position: relative;">
                        <div style="position: absolute; top: -20px; left: 50%; transform: translateX(-50%); font-size: 0.7rem; color: #dc3545; font-weight: bold;">15</div>
                    </div>
                    <span style="font-size: 0.7rem; color: #666;">00:00</span>
                </div>
                <div style="display: flex; flex-direction: column; align-items: center; flex: 1;">
                    <div style="height: 40%; background: linear-gradient(to top, #ffc107, #fd7e14); width: 12px; border-radius: 6px; margin-bottom: 8px; position: relative;">
                        <div style="position: absolute; top: -20px; left: 50%; transform: translateX(-50%); font-size: 0.7rem; color: #ffc107; font-weight: bold;">8</div>
                    </div>
                    <span style="font-size: 0.7rem; color: #666;">04:00</span>
                </div>
                <div style="display: flex; flex-direction: column; align-items: center; flex: 1;">
                    <div style="height: 30%; background: linear-gradient(to top, #28a745, #20c997); width: 12px; border-radius: 6px; margin-bottom: 8px; position: relative;">
                        <div style="position: absolute; top: -20px; left: 50%; transform: translateX(-50%); font-size: 0.7rem; color: #28a745; font-weight: bold;">5</div>
                    </div>
                    <span style="font-size: 0.7rem; color: #666;">08:00</span>
                </div>
                <div style="display: flex; flex-direction: column; align-items: center; flex: 1;">
                    <div style="height: 80%; background: linear-gradient(to top, #dc3545, #e74c3c); width: 12px; border-radius: 6px; margin-bottom: 8px; position: relative;">
                        <div style="position: absolute; top: -20px; left: 50%; transform: translateX(-50%); font-size: 0.7rem; color: #dc3545; font-weight: bold;">22</div>
                    </div>
                    <span style="font-size: 0.7rem; color: #666;">12:00</span>
                </div>
                <div style="display: flex; flex-direction: column; align-items: center; flex: 1;">
                    <div style="height: 90%; background: linear-gradient(to top, #dc3545, #e74c3c); width: 12px; border-radius: 6px; margin-bottom: 8px; position: relative;">
                        <div style="position: absolute; top: -20px; left: 50%; transform: translateX(-50%); font-size: 0.7rem; color: #dc3545; font-weight: bold;">28</div>
                    </div>
                    <span style="font-size: 0.7rem; color: #666;">16:00</span>
                </div>
                <div style="display: flex; flex-direction: column; align-items: center; flex: 1;">
                    <div style="height: 70%; background: linear-gradient(to top, #ffc107, #fd7e14); width: 12px; border-radius: 6px; margin-bottom: 8px; position: relative;">
                        <div style="position: absolute; top: -20px; left: 50%; transform: translateX(-50%); font-size: 0.7rem; color: #ffc107; font-weight: bold;">18</div>
                    </div>
                    <span style="font-size: 0.7rem; color: #666;">20:00</span>
                </div>
            </div>
        </div>
        <div style="display: flex; justify-content: center; gap: 15px; margin-top: 15px; font-size: 0.85rem;">
            <div style="display: flex; align-items: center; gap: 6px;">
                <div style="width: 10px; height: 10px; background: #dc3545; border-radius: 2px;"></div>
                <span style="color: #333;">严重告警</span>
            </div>
            <div style="display: flex; align-items: center; gap: 6px;">
                <div style="width: 10px; height: 10px; background: #ffc107; border-radius: 2px;"></div>
                <span style="color: #333;">警告告警</span>
            </div>
            <div style="display: flex; align-items: center; gap: 6px;">
                <div style="width: 10px; height: 10px; background: #28a745; border-radius: 2px;"></div>
                <span style="color: #333;">提示告警</span>
            </div>
        </div>
    </div>

    <!-- 效率指标雷达图 -->
    <div style="background: white; border-radius: 12px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h3 style="color: #333; margin: 0; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-chart-radar" style="color: #6f42c1;"></i>
                效率指标雷达图
            </h3>
            <button onclick="exportReport()" style="padding: 6px 12px; background: #f8f9fa; color: #6f42c1; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                导出报告
            </button>
        </div>
        <div style="height: 220px; display: flex; align-items: center; justify-content: center; position: relative;">
            <!-- 模拟雷达图 -->
            <div style="width: 180px; height: 180px; border: 2px solid #e9ecef; border-radius: 50%; position: relative; display: flex; align-items: center; justify-content: center;">
                <div style="width: 120px; height: 120px; border: 1px solid #e9ecef; border-radius: 50%; position: absolute;"></div>
                <div style="width: 60px; height: 60px; border: 1px solid #e9ecef; border-radius: 50%; position: absolute;"></div>
                
                <!-- 雷达图数据点 -->
                <div style="position: absolute; top: 10px; left: 50%; transform: translateX(-50%); width: 8px; height: 8px; background: #667eea; border-radius: 50%;"></div>
                <div style="position: absolute; top: 30px; right: 20px; width: 8px; height: 8px; background: #28a745; border-radius: 50%;"></div>
                <div style="position: absolute; bottom: 30px; right: 20px; width: 8px; height: 8px; background: #ffc107; border-radius: 50%;"></div>
                <div style="position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); width: 8px; height: 8px; background: #dc3545; border-radius: 50%;"></div>
                <div style="position: absolute; bottom: 30px; left: 20px; width: 8px; height: 8px; background: #17a2b8; border-radius: 50%;"></div>
                <div style="position: absolute; top: 30px; left: 20px; width: 8px; height: 8px; background: #fd7e14; border-radius: 50%;"></div>
                
                <!-- 标签 -->
                <div style="position: absolute; top: -15px; left: 50%; transform: translateX(-50%); font-size: 0.7rem; color: #333; font-weight: bold;">运行效率<br/>88%</div>
                <div style="position: absolute; top: 20px; right: -25px; font-size: 0.7rem; color: #333; font-weight: bold;">在线率<br/>95%</div>
                <div style="position: absolute; bottom: 20px; right: -25px; font-size: 0.7rem; color: #333; font-weight: bold;">响应速度<br/>92%</div>
                <div style="position: absolute; bottom: -15px; left: 50%; transform: translateX(-50%); font-size: 0.7rem; color: #333; font-weight: bold;">故障率<br/>2.1%</div>
                <div style="position: absolute; bottom: 20px; left: -25px; font-size: 0.7rem; color: #333; font-weight: bold;">维护及时性<br/>86%</div>
                <div style="position: absolute; top: 20px; left: -25px; font-size: 0.7rem; color: #333; font-weight: bold;">能耗效率<br/>91%</div>
            </div>
        </div>
    </div>
</div>

<!-- 实时数据流 -->
<div style="background: white; border-radius: 12px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 30px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h3 style="color: #333; margin: 0; font-size: 1.3rem; display: flex; align-items: center; gap: 10px;">
            <i class="fas fa-stream" style="color: #17a2b8;"></i>
            实时数据流
        </h3>
        <div style="display: flex; align-items: center; gap: 10px;">
            <button id="pauseDataBtn" onclick="toggleDataStream()" style="padding: 6px 12px; background: #ffc107; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                <i class="fas fa-pause"></i>
                暂停
            </button>
            <button onclick="clearDataLog()" style="padding: 6px 12px; background: #dc3545; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                <i class="fas fa-trash"></i>
                清空
            </button>
        </div>
    </div>
    <div id="dataStreamContainer" style="height: 200px; background: #f8f9fa; border-radius: 8px; padding: 15px; overflow-y: auto; font-family: 'Courier New', monospace; font-size: 0.85rem; line-height: 1.4;">
        <div style="color: #28a745; margin-bottom: 5px;">[15:30:25] 设备 AC-001 温度正常 - 74.2°C</div>
        <div style="color: #17a2b8; margin-bottom: 5px;">[15:30:26] 设备 IM-012 压力稳定 - 8.5 MPa</div>
        <div style="color: #ffc107; margin-bottom: 5px;">[15:30:27] 设备 PR-005 振动轻微异常 - 2.1 mm/s</div>
        <div style="color: #28a745; margin-bottom: 5px;">[15:30:28] 设备 WD-008 功率正常 - 15.6 kW</div>
        <div style="color: #dc3545; margin-bottom: 5px;">[15:30:29] 设备 AC-003 温度告警 - 86.1°C</div>
        <div style="color: #28a745; margin-bottom: 5px;">[15:30:30] 设备 IM-015 运行正常 - 运行时长 156h</div>
    </div>
</div>

<style>
@keyframes pulse {
    0% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.7; transform: scale(1.1); }
    100% { opacity: 1; transform: scale(1); }
}
</style>

<script>
// 更新时间戳
function updateTimestamp() {
    const now = new Date();
    const timeString = now.toLocaleTimeString('zh-CN');
    document.getElementById('lastUpdate').textContent = timeString;
}

// 自动刷新功能
let autoRefreshInterval;
function toggleAutoRefresh() {
    const btn = document.getElementById('autoRefreshBtn');
    if (autoRefreshInterval) {
        clearInterval(autoRefreshInterval);
        autoRefreshInterval = null;
        btn.innerHTML = '<i class="fas fa-play"></i><span>自动刷新</span>';
        btn.style.background = '#28a745';
    } else {
        autoRefreshInterval = setInterval(refreshData, 5000);
        btn.innerHTML = '<i class="fas fa-pause"></i><span>停止刷新</span>';
        btn.style.background = '#dc3545';
    }
}

// 刷新数据
function refreshData() {
    updateTimestamp();
    updateChartData();
    addDataStreamLog();
}

// 更新图表数据
function updateChartData() {
    const chartContainer = document.getElementById('chart-container');
    if (chartContainer) {
        // 模拟动态更新图表数据
        const newHeight = Math.random() * 80 + 20;
        const newBar = document.createElement('div');
        newBar.style.cssText = `
            height: ${newHeight}%;
            background: linear-gradient(to top, #667eea, #764ba2);
            width: 6px;
            border-radius: 3px;
            margin-bottom: 10px;
        `;
        chartContainer.appendChild(newBar);
        
        // 保持最多50个数据点
        if (chartContainer.children.length > 50) {
            chartContainer.removeChild(chartContainer.firstChild);
        }
    }
}

// 添加数据流日志
function addDataStreamLog() {
    const container = document.getElementById('dataStreamContainer');
    if (container && !container.dataset.paused) {
        const now = new Date();
        const timeString = now.toLocaleTimeString('zh-CN');
        const devices = ['AC-001', 'IM-012', 'PR-005', 'WD-008', 'AC-003', 'IM-015'];
        const statuses = [
            { text: '温度正常', color: '#28a745', value: (Math.random() * 10 + 70).toFixed(1) + '°C' },
            { text: '压力稳定', color: '#17a2b8', value: (Math.random() * 2 + 8).toFixed(1) + ' MPa' },
            { text: '运行正常', color: '#28a745', value: '运行时长 ' + Math.floor(Math.random() * 200 + 100) + 'h' },
            { text: '振动异常', color: '#ffc107', value: (Math.random() * 1 + 2).toFixed(1) + ' mm/s' }
        ];
        
        const device = devices[Math.floor(Math.random() * devices.length)];
        const status = statuses[Math.floor(Math.random() * statuses.length)];
        
        const newLog = document.createElement('div');
        newLog.style.cssText = `color: ${status.color}; margin-bottom: 5px;`;
        newLog.textContent = `[${timeString}] 设备 ${device} ${status.text} - ${status.value}`;
        
        container.appendChild(newLog);
        container.scrollTop = container.scrollHeight;
        
        // 保持最多100条日志
        if (container.children.length > 100) {
            container.removeChild(container.firstChild);
        }
    }
}

// 切换数据流
function toggleDataStream() {
    const container = document.getElementById('dataStreamContainer');
    const btn = document.getElementById('pauseDataBtn');
    
    if (container.dataset.paused) {
        container.dataset.paused = '';
        btn.innerHTML = '<i class="fas fa-pause"></i> 暂停';
        btn.style.background = '#ffc107';
    } else {
        container.dataset.paused = 'true';
        btn.innerHTML = '<i class="fas fa-play"></i> 继续';
        btn.style.background = '#28a745';
    }
}

// 清空数据日志
function clearDataLog() {
    const container = document.getElementById('dataStreamContainer');
    container.innerHTML = '';
}

// 初始化
document.addEventListener('DOMContentLoaded', function() {
    updateTimestamp();
    
    // 自动刷新按钮事件
    document.getElementById('autoRefreshBtn').addEventListener('click', toggleAutoRefresh);
    
    // 参数选择事件
    document.getElementById('paramSelect').addEventListener('change', function() {
        const param = this.value;
        const currentValue = document.getElementById('currentValue');
        const thresholdValue = document.getElementById('thresholdValue');
        
        switch(param) {
            case 'temperature':
                currentValue.textContent = '75.2°C';
                thresholdValue.textContent = '85°C';
                break;
            case 'pressure':
                currentValue.textContent = '8.5 MPa';
                thresholdValue.textContent = '10 MPa';
                break;
            case 'vibration':
                currentValue.textContent = '2.1 mm/s';
                thresholdValue.textContent = '3.0 mm/s';
                break;
            case 'power':
                currentValue.textContent = '15.6 kW';
                thresholdValue.textContent = '20 kW';
                break;
        }
    });
    
    // 启动自动数据流
    setInterval(addDataStreamLog, 2000);
});

// 其他功能函数
function toggleFullscreen() {
    alert('全屏功能开发中...');
}

function viewMapDetails() {
    alert('地图详情页面开发中...');
}

function exportReport() {
    alert('报告导出功能开发中...');
}
</script> 