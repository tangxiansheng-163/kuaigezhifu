<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>个人空间 - 快哥智服平台</title>
    <link rel="stylesheet" href="../styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        .layout {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* 头部样式 */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 0 32px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 40px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .logo i {
            color: #ffd700;
        }

        .space-switcher {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-left: 40px;
        }

        .space-btn {
            background: rgba(255,255,255,0.1);
            border: none;
            color: white;
            padding: 8px 18px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .space-btn:hover {
            background: rgba(255,255,255,0.2);
        }

        .space-btn.active {
            background: rgba(255,255,255,0.3);
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
            cursor: pointer;
        }

        .user-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }

        .user-dropdown {
            display: none;
            position: absolute;
            top: 45px;
            right: 0;
            min-width: 140px;
            background: #fff;
            box-shadow: 0 4px 16px rgba(0,0,0,0.12);
            border-radius: 8px;
            z-index: 1001;
            padding: 8px 0;
            flex-direction: column;
        }

        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            color: #495057;
            text-decoration: none;
            font-size: 0.98rem;
            transition: background 0.2s, color 0.2s;
        }

        .dropdown-item:hover {
            background: #f0f4ff;
            color: #667eea;
        }

        .user-info:hover .user-dropdown {
            display: flex;
        }

        .header-btn {
            background: rgba(255,255,255,0.1);
            border: none;
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.95rem;
            transition: background 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .header-btn:hover {
            background: rgba(255,255,255,0.2);
        }

        /* 主体区域 */
        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* 左侧菜单 */
        .sidebar {
            width: 250px;
            background: white;
            border-right: 1px solid #e9ecef;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0,0,0,0.05);
        }

        .menu-section {
            padding: 20px 0;
        }

        .menu-title {
            padding: 0 20px 10px;
            font-size: 0.8rem;
            color: #6c757d;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .menu-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            color: #495057;
            text-decoration: none;
            transition: all 0.3s;
            cursor: pointer;
            border-left: 3px solid transparent;
        }

        .menu-item:hover {
            background: #f8f9fa;
            color: #667eea;
            border-left: 3px solid #667eea;
        }

        .menu-item.active {
            background: #667eea;
            color: white;
            border-left: 3px solid #667eea;
        }

        .menu-item i {
            width: 20px;
            text-align: center;
        }

        /* 主内容区域 */
        .content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            background: #f5f7fa;
            transition: margin-left 0.3s cubic-bezier(.4,2,.6,1);
        }

        /* 页面内容宽度控制 */
        .main-content {
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }

        .content-header {
            margin-bottom: 30px;
        }

        .content-title {
            font-size: 1.8rem;
            color: #333;
            margin-bottom: 10px;
        }

        .content-subtitle {
            color: #6c757d;
            font-size: 1rem;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .dashboard-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .dashboard-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
        }

        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: white;
        }

        .card-icon.blue { background: #667eea; }
        .card-icon.green { background: #28a745; }
        .card-icon.orange { background: #fd7e14; }
        .card-icon.purple { background: #6f42c1; }

        .card-content {
            color: #6c757d;
            line-height: 1.6;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #6c757d;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .space-switcher {
                display: none;
            }
            
            .sidebar {
                position: fixed;
                left: -250px;
                top: 60px;
                height: calc(100vh - 60px);
                z-index: 999;
                transition: left 0.3s;
            }

            .sidebar.open {
                left: 0;
            }

            .content {
                padding: 20px;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }

        .collapsible { cursor: pointer; user-select: none; display: flex; align-items: center; justify-content: space-between; }
        .menu-group { transition: all 0.3s; }
        .submenu { padding-left: 30px; background: #f8f9fa; }
        .has-children { position: relative; display: flex; align-items: center; justify-content: space-between; }
        .submenu-arrow { margin-left: 8px; transition: transform 0.3s; }

        .main-content { max-width: 1200px; margin: 0 auto; background: #fff; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.06); padding: 40px; }
        /* 个人档案专用样式 */
        #page-profile .content-header { margin-bottom: 30px; }
        #page-profile .content-title { color: #667eea; font-size: 1.8rem; margin-bottom: 8px; }
        #page-profile .content-subtitle { color: #6c757d; font-size: 1rem; }
        
        .profile-section { margin-bottom: 40px; }
        .section-title { color: #333; font-size: 1.2rem; font-weight: 600; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid #f0f0f0; }
        
        .profile-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
        .profile-row { display: flex; align-items: center; padding: 12px 0; border-bottom: 1px solid #f8f9fa; }
        .profile-row:last-child { border-bottom: none; }
        .profile-label { width: 120px; color: #6c757d; font-weight: 500; font-size: 0.95rem; }
        .profile-value { flex: 1; color: #333; font-weight: 500; }
        
        .status-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .status-item { display: flex; align-items: center; gap: 15px; padding: 20px; background: #f8f9fa; border-radius: 10px; border-left: 4px solid #28a745; }
        .status-icon { width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; }
        .status-icon.verified { background: #d4edda; color: #28a745; }
        .status-icon.pending { background: #fff3cd; color: #ffc107; }
        .status-info { flex: 1; }
        .status-title { color: #333; font-weight: 600; margin-bottom: 4px; }
        .status-desc { color: #6c757d; font-size: 0.9rem; }
        
        .profile-actions { display: flex; gap: 15px; margin-top: 30px; padding-top: 20px; border-top: 1px solid #f0f0f0; }
        .btn-primary, .btn-secondary { display: flex; align-items: center; gap: 8px; padding: 12px 24px; border: none; border-radius: 8px; font-size: 1rem; font-weight: 500; cursor: pointer; transition: all 0.3s; }
        .btn-primary { background: #667eea; color: #fff; }
        .btn-primary:hover { background: #5a6fd8; transform: translateY(-1px); }
        .btn-secondary { background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; }
        .btn-secondary:hover { background: #e9ecef; color: #495057; }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .profile-grid { grid-template-columns: 1fr; }
            .status-grid { grid-template-columns: 1fr; }
            .profile-actions { flex-direction: column; }
        }

        /* 个人档案美化样式（强制覆盖） */
        .profile-layout { display: flex; gap: 32px; align-items: flex-start; }
        .profile-main { flex: 1; min-width: 0; }
        .profile-aside { width: 320px; min-width: 260px; display: flex; flex-direction: column; gap: 24px; }
        .profile-usercard {
          display: flex; gap: 32px; align-items: center;
          background: linear-gradient(120deg, #f5f8ff 60%, #e9edfb 100%);
          border-radius: 18px; padding: 36px 40px 28px 40px; margin-bottom: 38px;
          box-shadow: 0 4px 24px rgba(102,126,234,0.10); border: 1.5px solid #e3e8f7;
        }
        .avatar-box { flex-shrink: 0; }
        .avatar { width: 100px; height: 100px; border-radius: 50%; background: #fff; border: 4px solid #667eea; box-shadow: 0 4px 16px rgba(102,126,234,0.13); }
        .user-info-box { flex: 1; min-width: 0; }
        .user-name-row { display: flex; align-items: center; gap: 18px; font-size: 1.45rem; font-weight: 700; color: #333; margin-bottom: 10px; }
        .user-role { font-size: 1.05rem; color: #fff; background: linear-gradient(90deg,#667eea 60%,#764ba2 100%); border-radius: 8px; padding: 2px 16px; margin-left: 6px; box-shadow: 0 2px 8px rgba(102,126,234,0.10); }
        .user-badge { font-size: 1.02rem; color: #28a745; margin-left: 8px; display: flex; align-items: center; gap: 3px; background: #eafbe7; border-radius: 6px; padding: 2px 10px; }
        .user-badge.verified i { color: #28a745; }
        .user-desc { color: #6c757d; font-size: 1.08rem; margin-bottom: 14px; font-style: italic; }
        .user-meta-row { display: flex; gap: 36px; color: #888; font-size: 1.01rem; margin-bottom: 14px; }
        .user-meta b { color: #667eea; font-weight: 700; }
        .user-actions { display: flex; gap: 18px; margin-top: 10px; }
        .user-actions .btn-primary, .user-actions .btn-secondary { padding: 10px 28px; font-size: 1.05rem; border-radius: 8px; }
        .user-actions .btn-primary { background: linear-gradient(90deg,#667eea 60%,#764ba2 100%); border: none; color: #fff; box-shadow: 0 2px 8px rgba(102,126,234,0.10); }
        .user-actions .btn-primary:hover { background: #5a6fd8; }
        .user-actions .btn-secondary { background: #fff; color: #667eea; border: 1.5px solid #e3e8f7; }
        .user-actions .btn-secondary:hover { background: #f5f8ff; color: #5a6fd8; }
        .aside-card {
          background: linear-gradient(120deg, #f8faff 60%, #f3f5fa 100%);
          border-radius: 14px;
          box-shadow: 0 2px 12px rgba(102,126,234,0.08);
          padding: 32px 32px 22px 32px;
          border: 1.5px solid #e3e8f7;
          margin-bottom: 12px;
        }
        .aside-title {
          font-size: 1.12rem;
          font-weight: 700;
          color: #667eea;
          margin-bottom: 16px;
          display: flex;
          align-items: center;
          gap: 8px;
        }
        .aside-list { list-style: none; padding: 0; margin: 0; }
        .aside-list li { margin-bottom: 12px; }
        .aside-list li:last-child { margin-bottom: 0; }
        .aside-list a {
          color: #495057;
          text-decoration: none;
          font-size: 1.01rem;
          display: flex;
          align-items: center;
          gap: 8px;
          transition: color 0.2s, background 0.2s;
          border-radius: 6px;
          padding: 4px 8px;
        }
        .aside-list a:hover { color: #fff; background: #667eea; }
        .aside-announcement {
          color: #6c757d;
          font-size: 1.08rem;
          line-height: 1.8;
          background: #f8f9fa;
          border-radius: 10px;
          padding: 18px 24px;
          min-width: 220px;
          text-align: left;
        }
        @media (max-width: 1100px) {
          .profile-layout { flex-direction: column; }
          .profile-aside { width: 100%; min-width: 0; flex-direction: row; gap: 16px; }
          .aside-card { flex: 1; }
        }
        @media (max-width: 768px) {
          .profile-layout { flex-direction: column; gap: 0; }
          .profile-main, .profile-aside { width: 100%; min-width: 0; }
          .profile-usercard { flex-direction: column; align-items: flex-start; padding: 20px 12px 16px 12px; }
          .avatar { width: 70px; height: 70px; }
          .user-meta-row { flex-direction: column; gap: 8px; }
          .user-actions { flex-direction: column; gap: 8px; width: 100%; }
          .aside-card { padding: 14px 10px 10px 10px; }
        }

        /* 通用页面美化样式 */
        .main-content { max-width: 1200px; margin: 0 auto; background: #fff; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.06); padding: 40px; }
        .main-content h1 { color: #667eea; font-size: 1.8rem; margin-bottom: 30px; font-weight: 600; }
        
        /* 筛选栏样式 */
        .filter-bar { display: flex; gap: 15px; margin-bottom: 25px; align-items: center; padding: 20px; background: #f8f9fa; border-radius: 10px; }
        .filter-bar select { padding: 10px 15px; border: 1px solid #e9ecef; border-radius: 6px; background: #fff; color: #495057; font-size: 0.95rem; }
        .filter-bar input { padding: 10px 15px; border: 1px solid #e9ecef; border-radius: 6px; background: #fff; color: #495057; font-size: 0.95rem; }
        .filter-bar .btn-primary { padding: 10px 20px; background: #667eea; color: #fff; border: none; border-radius: 6px; cursor: pointer; font-size: 0.95rem; transition: background 0.3s; }
        .filter-bar .btn-primary:hover { background: #5a6fd8; }
        
        /* 表格样式 */
        .table-list { width: 100%; border-collapse: collapse; background: #fff; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .table-list thead { background: #f8f9fa; }
        .table-list th { padding: 15px 12px; text-align: left; font-weight: 600; color: #495057; border-bottom: 2px solid #e9ecef; font-size: 0.95rem; }
        .table-list td { padding: 15px 12px; border-bottom: 1px solid #f1f3f4; color: #495057; font-size: 0.95rem; }
        .table-list tbody tr:hover { background: #f8f9fa; }
        
        /* 状态标签样式 */
        .status-pending { background: #fff3cd; color: #856404; padding: 4px 12px; border-radius: 20px; font-size: 0.85rem; font-weight: 500; }
        .status-processing { background: #d1ecf1; color: #0c5460; padding: 4px 12px; border-radius: 20px; font-size: 0.85rem; font-weight: 500; }
        .status-completed { background: #d4edda; color: #155724; padding: 4px 12px; border-radius: 20px; font-size: 0.85rem; font-weight: 500; }
        .status-cancelled { background: #f8d7da; color: #721c24; padding: 4px 12px; border-radius: 20px; font-size: 0.85rem; font-weight: 500; }
        
        /* 按钮样式 */
        .btn-primary { background: #667eea; color: #fff; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 0.9rem; transition: all 0.3s; }
        .btn-primary:hover { background: #5a6fd8; transform: translateY(-1px); }
        .btn-link { background: none; color: #667eea; border: none; padding: 6px 12px; cursor: pointer; font-size: 0.9rem; text-decoration: underline; transition: color 0.3s; }
        .btn-link:hover { color: #5a6fd8; }
        
        /* 文档类型标签 */
        .doc-type { background: #e3f2fd; color: #1976d2; padding: 3px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: 500; }
        
        /* 评分样式 */
        .rating { color: #ffc107; font-size: 0.9rem; }
        
        /* 表单样式 */
        .form-group { margin-bottom: 20px; }
        .form-group label, .form-label { display: block; margin-bottom: 8px; color: #333; font-weight: 500; font-size: 0.95rem; }
        .form-group input, .form-group select, .form-group textarea, .form-control, .form-select, .form-textarea { 
            width: 100%; 
            padding: 12px 14px; 
            border: 1px solid #ddd; 
            border-radius: 8px; 
            background: #fff; 
            color: #333; 
            font-size: 1rem; 
            transition: border-color 0.3s; 
        }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus, .form-control:focus, .form-select:focus, .form-textarea:focus { 
            outline: none; 
            border-color: #667eea; 
            box-shadow: 0 0 0 2px rgba(102,126,234,0.1); 
        }
        .form-group textarea, .form-textarea { min-height: 100px; resize: vertical; }
        .upload-tip { color: #6c757d; font-size: 0.85rem; margin-top: 5px; }
        
        /* 状态信息样式 */
        .status-info { background: #e3f2fd; color: #1976d2; padding: 15px 20px; border-radius: 8px; margin-bottom: 25px; border-left: 4px solid #1976d2; font-size: 0.95rem; }
        .desc { color: #6c757d; font-size: 1rem; line-height: 1.6; }
        
        /* 安全设置页面样式 */
        .security-section { margin-bottom: 40px; }
        .security-item { display: flex; align-items: center; justify-content: space-between; padding: 20px; background: #f8f9fa; border-radius: 10px; margin-bottom: 15px; border: 1px solid #e9ecef; }
        .security-info { flex: 1; }
        .device-list { display: flex; flex-direction: column; gap: 15px; }
        .device-item { display: flex; align-items: center; justify-content: space-between; padding: 15px 20px; background: #f8f9fa; border-radius: 8px; border: 1px solid #e9ecef; }
        .device-info { flex: 1; }
        
        /* 弹窗样式 */
        body.modal-open { overflow: hidden; }
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1050; display: none; justify-content: center; align-items: center; backdrop-filter: blur(3px); }
        .modal { background: white; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); max-width: 700px; width: 90%; max-height: 90vh; display: flex; flex-direction: column; overflow: hidden; }
        .modal-header { padding: 20px 24px; border-bottom: 1px solid #e9ecef; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; }
        .modal-title { font-size: 1.2rem; font-weight: 600; }
        .modal-close { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #6c757d; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: background 0.2s; }
        .modal-close:hover { background: #f1f3f5; }
        .modal-body { padding: 24px; overflow-y: auto; flex-grow: 1; }
        .modal-footer { padding: 20px 24px; border-top: 1px solid #e9ecef; display: flex; justify-content: flex-end; gap: 12px; flex-shrink: 0; }

        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
        .btn-cancel { padding: 10px 20px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.3s; }
        .btn-cancel:hover { background: #e9ecef; }
        .btn-save { padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.3s; }
        .btn-save:hover { background: #5a6fd8; }
        .upload-area { border: 2px dashed #ddd; border-radius: 8px; padding: 30px; text-align: center; cursor: pointer; transition: border-color .2s; }
        .upload-area:hover { border-color: #667eea; }
        .upload-icon { font-size: 2.5rem; color: #667eea; margin-bottom: 15px; }
        .detail-item { background-color: #f8f9fa; padding: 16px; border-radius: 8px; margin-bottom: 12px; }
        .detail-label { color: #6c757d; font-size: 0.9rem; font-weight: 500; margin-bottom: 4px; }
        .detail-value { color: #343a40; font-weight: 600; }
        
        /* 新增的文档详情样式 */
        .document-detail .detail-item {
            margin-bottom: 15px;
            background: transparent;
            padding: 0;
        }

        .document-detail .detail-label {
            font-size: 0.85rem;
            color: #6c757d;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .document-detail .detail-value {
            font-size: 0.95rem;
            color: #333;
            padding: 8px 12px;
            background: #f8f9fa;
            border-radius: 6px;
            border: 1px solid #e9ecef;
            font-weight: normal;
        }

        /* 表单标签增强样式 */
        .form-label:after {
            content: " *";
            color: #dc3545;
            display: none;
        }

        .form-label.required:after {
            display: inline;
        }

        /* 单选按钮和复选框样式 */
        input[type="radio"],
        input[type="checkbox"] {
            margin-right: 8px;
            transform: scale(1.1);
            vertical-align: middle;
        }

        /* 弹窗中的单选按钮和复选框组合样式 */
        #batchExportModal .modal-body div[style*="display: flex"] input[type="radio"],
        #batchExportModal .modal-body div[style*="display: flex"] input[type="checkbox"] {
            width: 16px;
            height: 16px;
            margin: 0;
            margin-right: 8px;
            cursor: pointer;
        }

        #batchExportModal .modal-body div[style*="display: flex"] span {
            color: #333 !important;
            font-size: 14px !important;
            line-height: 1.5 !important;
            display: inline-block !important;
            cursor: pointer;
        }

        #batchExportModal .modal-body div[style*="display: flex"] {
            cursor: pointer;
        }

        #batchExportModal .modal-body div[style*="display: flex"]:hover span {
            color: #667eea !important;
        }

        /* 改进的选择框样式 */
        .form-select {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 12px center;
            background-repeat: no-repeat;
            background-size: 16px;
            padding-right: 40px;
            appearance: none;
        }

        .form-select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1);
        }
    </style>
</head>
<body>
    <div class="layout">
        <!-- 头部 -->
        <header class="header">
            <div class="header-left">
                <div class="logo">
                    <i class="fas fa-cogs"></i>
                    <span>快哥智服</span>
                </div>
                <div class="space-switcher">
                    <button class="space-btn active" onclick="location.href='index.html'">
                        <i class="fas fa-user"></i>
                        个人空间
                    </button>
                    <button class="space-btn" onclick="location.href='../enterprise/index.html'">
                        <i class="fas fa-building"></i>
                        企业空间
                    </button>
                    <button class="space-btn" onclick="location.href='../dashboard/debug-index.html'">
                        <i class="fas fa-tachometer-alt"></i>
                        操作台
                    </button>
                </div>
            </div>
            <div class="header-right">
                <div class="user-info user-dropdown-trigger">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <span>张三</span>
                    <div class="user-dropdown">
                        <a href="#" class="dropdown-item"><i class="fas fa-user-edit"></i> 个人资料</a>
                        <a href="#" class="dropdown-item"><i class="fas fa-key"></i> 密码重置</a>
                        <a href="#" class="dropdown-item"><i class="fas fa-shield-alt"></i> 安全设置</a>
                    </div>
                </div>
                <button class="header-btn">
                    <i class="fas fa-bell"></i>
                    消息
                </button>
                <button class="header-btn">
                    <i class="fas fa-cog"></i>
                    设置
                </button>
                <button class="header-btn" onclick="location.href='../index.html'">
                    <i class="fas fa-sign-out-alt"></i>
                    退出
                </button>
            </div>
        </header>

        <!-- 主体区域 -->
        <div class="main-container">
            <!-- 左侧菜单 -->
            <nav class="sidebar">
                <div class="menu-section">
                    <div class="menu-title">个人中心</div>
                    <div class="menu-item active" onclick="showPage('dashboard')">
                        <i class="fas fa-home"></i>
                        <span>工作台</span>
                    </div>
                    <div class="menu-item" onclick="showPage('shop')">
                        <i class="fas fa-store"></i>
                        <span>店铺管理</span>
                    </div>
                    <div class="menu-item" onclick="showPage('teaching')">
                        <i class="fas fa-chalkboard-teacher"></i>
                        <span>教学管理</span>
                    </div>
                </div>

                <div class="menu-section">
                    <div class="menu-title">工单管理</div>
                    <div class="menu-item" onclick="showPage('repair-order')">
                        <i class="fas fa-tools"></i>
                        <span>维修工单</span>
                    </div>
                    <div class="menu-item" onclick="showPage('install-order')">
                        <i class="fas fa-cog"></i>
                        <span>安装工单</span>
                    </div>
                    <div class="menu-item" onclick="showPage('debug-order')">
                        <i class="fas fa-sliders-h"></i>
                        <span>调试工单</span>
                    </div>
                </div>

                <div class="menu-section">
                    <div class="menu-title">远程协助</div>
                    <div class="menu-item" onclick="showPage('assist-launch')">
                        <i class="fas fa-handshake"></i>
                        <span>发起协助</span>
                    </div>
                    <div class="menu-item" onclick="showPage('assist-record')">
                        <i class="fas fa-history"></i>
                        <span>协助记录</span>
                    </div>
                    <div class="menu-item" onclick="showPage('assist-order')">
                        <i class="fas fa-clipboard-list"></i>
                        <span>协助工单</span>
                    </div>
                </div>

                <div class="menu-section">
                    <div class="menu-title">知识库管理</div>
                    <div class="menu-item" onclick="showPage('knowledge')">
                        <i class="fas fa-book"></i>
                        <span>知识库</span>
                    </div>
                </div>

                <div class="menu-section">
                    <div class="menu-title">资质认证</div>
                    <div class="menu-item" onclick="showPage('auth-real')">
                        <i class="fas fa-id-card"></i>
                        <span>实名认证</span>
                    </div>
                    <div class="menu-item" onclick="showPage('auth-repair')">
                        <i class="fas fa-tools"></i>
                        <span>维修认证</span>
                    </div>
                    <div class="menu-item" onclick="showPage('auth-expert')">
                        <i class="fas fa-certificate"></i>
                        <span>专家认证</span>
                    </div>
                    <div class="menu-item" onclick="showPage('auth-shop')">
                        <i class="fas fa-store-alt"></i>
                        <span>商家认证</span>
                    </div>
                </div>

                <div class="menu-section">
                    <div class="menu-title">企业管理</div>
                    <div class="menu-item" onclick="showPage('company-manage')">
                        <i class="fas fa-cogs"></i>
                        <span>我的企业</span>
                    </div>
                </div>

                <div class="menu-section">
                    <div class="menu-title">个人资料</div>
                    <div class="menu-item" onclick="showPage('profile')">
                        <i class="fas fa-user-edit"></i>
                        <span>个人档案</span>
                    </div>
                    <div class="menu-item" onclick="showPage('password')">
                        <i class="fas fa-key"></i>
                        <span>密码重置</span>
                    </div>
                    <div class="menu-item" onclick="showPage('security')">
                        <i class="fas fa-shield-alt"></i>
                        <span>安全设置</span>
                    </div>
                </div>
            </nav>

            <!-- 主内容区域 -->
            <main class="content" id="main-content">
                <!-- 动态内容区域 -->
                <div class="main-content" id="page-dashboard" style="display:block">
                    <div class="content-header">
                        <h1 class="content-title">工作台</h1>
                        <p class="content-subtitle">欢迎回来，张三！这里是您的个人工作中心</p>
                    </div>

                    <!-- 核心数据概览 -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-bottom: 30px;">
                        <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                                <div style="width: 50px; height: 50px; background: rgba(255,255,255,0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-tasks" style="font-size: 1.5rem;"></i>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 2rem; font-weight: bold;">176</div>
                                    <div style="font-size: 0.9rem; opacity: 0.9;">总工单数</div>
                            </div>
                                </div>
                            <div style="display: flex; justify-content: space-between; font-size: 0.85rem; opacity: 0.9;">
                                <span>待处理: 12</span>
                                <span>进行中: 8</span>
                                <span>已完成: 156</span>
                                </div>
                                </div>

                        <div style="background: linear-gradient(135deg, #28a745, #20c997); color: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                                <div style="width: 50px; height: 50px; background: rgba(255,255,255,0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-yen-sign" style="font-size: 1.5rem;"></i>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 2rem; font-weight: bold;">¥18,405</div>
                                    <div style="font-size: 0.9rem; opacity: 0.9;">总收入</div>
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between; font-size: 0.85rem; opacity: 0.9;">
                                <span>工单: ¥15,680</span>
                                <span>专家: ¥2,580</span>
                                <span>知识库: ¥145</span>
                            </div>
                        </div>

                        <div style="background: linear-gradient(135deg, #ffc107, #fd7e14); color: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(255, 193, 7, 0.3);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                                <div style="width: 50px; height: 50px; background: rgba(255,255,255,0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-coins" style="font-size: 1.5rem;"></i>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 2rem; font-weight: bold;">1,456</div>
                                    <div style="font-size: 0.9rem; opacity: 0.9;">积分余额</div>
                            </div>
                                    </div>
                            <div style="display: flex; justify-content: space-between; font-size: 0.85rem; opacity: 0.9;">
                                <span>可提现: ¥89.2</span>
                                <span>本月+126</span>
                                    </div>
                                </div>

                        <div style="background: linear-gradient(135deg, #17a2b8, #6f42c1); color: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(23, 162, 184, 0.3);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                                <div style="width: 50px; height: 50px; background: rgba(255,255,255,0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-star" style="font-size: 1.5rem;"></i>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 2rem; font-weight: bold;">4.8</div>
                                    <div style="font-size: 0.9rem; opacity: 0.9;">综合评分</div>
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between; font-size: 0.85rem; opacity: 0.9;">
                                <span>服务态度: 4.9</span>
                                <span>技术水平: 4.7</span>
                            </div>
                            </div>
                        </div>



                    <!-- 认证状态和快捷操作 -->
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 25px; margin-bottom: 30px;">
                        <!-- 认证状态 -->
                        <div style="background: white; border-radius: 12px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <h3 style="color: #333; margin: 0; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                                    <i class="fas fa-certificate" style="color: #667eea;"></i>
                                    认证状态
                                </h3>
                                <button onclick="showPage('auth-real')" style="padding: 6px 12px; background: #f8f9fa; color: #667eea; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">管理认证</button>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px;">
                                <div style="text-align: center; padding: 15px; background: linear-gradient(135deg, #e8f5e8, #f0fff0); border-radius: 8px; border: 1px solid #28a745;">
                                    <div style="width: 40px; height: 40px; background: #28a745; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px; color: white;">
                                        <i class="fas fa-check" style="font-size: 1.2rem;"></i>
                                    </div>
                                    <div style="font-size: 1.5rem; font-weight: bold; color: #28a745; margin-bottom: 5px;">3</div>
                                    <div style="font-size: 0.8rem; color: #6c757d;">已通过</div>
                                </div>
                                <div style="text-align: center; padding: 15px; background: linear-gradient(135deg, #fff8e1, #fffbf0); border-radius: 8px; border: 1px solid #ffc107;">
                                    <div style="width: 40px; height: 40px; background: #ffc107; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px; color: white;">
                                        <i class="fas fa-clock" style="font-size: 1.2rem;"></i>
                                    </div>
                                    <div style="font-size: 1.5rem; font-weight: bold; color: #ffc107; margin-bottom: 5px;">1</div>
                                    <div style="font-size: 0.8rem; color: #6c757d;">待认证</div>
                                </div>
                            </div>
                            <div style="border-top: 1px solid #f0f0f0; padding-top: 15px;">
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; padding: 8px; background: #f8f9fa; border-radius: 6px;">
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <div style="width: 24px; height: 24px; background: #28a745; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                            <i class="fas fa-user-check" style="color: white; font-size: 0.7rem;"></i>
                                    </div>
                                        <span style="color: #333; font-weight: 500; font-size: 0.9rem;">实名认证</span>
                                    </div>
                                    <span style="color: #28a745; font-weight: 500; font-size: 0.85rem;"><i class="fas fa-check-circle" style="margin-right: 4px;"></i>已通过</span>
                                </div>
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; padding: 8px; background: #f8f9fa; border-radius: 6px;">
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <div style="width: 24px; height: 24px; background: #fd7e14; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                            <i class="fas fa-tools" style="color: white; font-size: 0.7rem;"></i>
                                    </div>
                                        <span style="color: #333; font-weight: 500; font-size: 0.9rem;">维修认证</span>
                                    </div>
                                    <span style="color: #28a745; font-weight: 500; font-size: 0.85rem;"><i class="fas fa-check-circle" style="margin-right: 4px;"></i>已通过</span>
                                </div>
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; padding: 8px; background: #f8f9fa; border-radius: 6px;">
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <div style="width: 24px; height: 24px; background: #17a2b8; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                            <i class="fas fa-graduation-cap" style="color: white; font-size: 0.7rem;"></i>
                                    </div>
                                        <span style="color: #333; font-weight: 500; font-size: 0.9rem;">专家认证</span>
                                </div>
                                    <span style="color: #28a745; font-weight: 500; font-size: 0.85rem;"><i class="fas fa-check-circle" style="margin-right: 4px;"></i>已通过</span>
                            </div>
                                <div style="display: flex; align-items: center; justify-content: space-between; padding: 8px; background: #fff3cd; border-radius: 6px; border: 1px solid #ffc107;">
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <div style="width: 24px; height: 24px; background: #ffc107; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                            <i class="fas fa-store" style="color: white; font-size: 0.7rem;"></i>
                        </div>
                                        <span style="color: #333; font-weight: 500; font-size: 0.9rem;">商家认证</span>
                    </div>
                                    <span style="color: #ffc107; font-weight: 500; cursor: pointer; font-size: 0.85rem;" onclick="showPage('auth-personal-shop')"><i class="fas fa-clock" style="margin-right: 4px;"></i>待认证</span>
                </div>
                            </div>
                                </div>

                        <!-- 快捷操作 -->
                        <div style="background: white; border-radius: 12px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <h3 style="color: #333; margin: 0; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                                    <i class="fas fa-bolt" style="color: #fd7e14;"></i>
                                    快捷操作
                                </h3>
                                </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px;">
                                <div style="text-align: center; padding: 15px; background: linear-gradient(135deg, #ffe6e6, #fff0f0); border-radius: 8px; border: 1px solid #dc3545;">
                                    <div style="width: 40px; height: 40px; background: #dc3545; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px; color: white;">
                                        <i class="fas fa-exclamation" style="font-size: 1.2rem;"></i>
                                </div>
                                    <div style="font-size: 1.5rem; font-weight: bold; color: #dc3545; margin-bottom: 5px;">12</div>
                                    <div style="font-size: 0.8rem; color: #6c757d;">待处理</div>
                                </div>
                                <div style="text-align: center; padding: 15px; background: linear-gradient(135deg, #e8f5e8, #f0fff0); border-radius: 8px; border: 1px solid #28a745;">
                                    <div style="width: 40px; height: 40px; background: #28a745; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px; color: white;">
                                        <i class="fas fa-check" style="font-size: 1.2rem;"></i>
                                    </div>
                                    <div style="font-size: 1.5rem; font-weight: bold; color: #28a745; margin-bottom: 5px;">156</div>
                                    <div style="font-size: 0.8rem; color: #6c757d;">已完成</div>
                                </div>
                            </div>
                            <div style="border-top: 1px solid #f0f0f0; padding-top: 15px;">
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; padding: 12px; background: #f8f9fa; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;" onclick="showPage('repair-order')" onmouseover="this.style.background='#e9ecef'" onmouseout="this.style.background='#f8f9fa'">
                                    <div style="display: flex; align-items: center; gap: 12px;">
                                        <div style="width: 36px; height: 36px; background: #667eea; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                            <i class="fas fa-wrench" style="color: white; font-size: 1rem;"></i>
                                        </div>
                                        <span style="color: #333; font-weight: 500; font-size: 0.95rem;">接新工单</span>
                                    </div>
                                    <i class="fas fa-chevron-right" style="color: #667eea;"></i>
                                </div>
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; padding: 12px; background: #f8f9fa; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;" onclick="showPage('assist-launch')" onmouseover="this.style.background='#e9ecef'" onmouseout="this.style.background='#f8f9fa'">
                                    <div style="display: flex; align-items: center; gap: 12px;">
                                        <div style="width: 36px; height: 36px; background: #28a745; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                            <i class="fas fa-hands-helping" style="color: white; font-size: 1rem;"></i>
                                        </div>
                                        <span style="color: #333; font-weight: 500; font-size: 0.95rem;">发起协助</span>
                                    </div>
                                    <i class="fas fa-chevron-right" style="color: #28a745;"></i>
                                </div>
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; padding: 12px; background: #f8f9fa; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;" onclick="showPage('knowledge')" onmouseover="this.style.background='#e9ecef'" onmouseout="this.style.background='#f8f9fa'">
                                    <div style="display: flex; align-items: center; gap: 12px;">
                                        <div style="width: 36px; height: 36px; background: #17a2b8; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                            <i class="fas fa-upload" style="color: white; font-size: 1rem;"></i>
                                        </div>
                                        <span style="color: #333; font-weight: 500; font-size: 0.95rem;">上传文档</span>
                                    </div>
                                    <i class="fas fa-chevron-right" style="color: #17a2b8;"></i>
                                </div>
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; padding: 12px; background: linear-gradient(135deg, #fff5e6, #fff8f0); border-radius: 8px; cursor: pointer; border: 1px solid #fd7e14; transition: all 0.3s ease;" onclick="showPage('teaching')" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                                    <div style="display: flex; align-items: center; gap: 12px;">
                                        <div style="width: 36px; height: 36px; background: #fd7e14; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                            <i class="fas fa-play-circle" style="color: white; font-size: 1rem;"></i>
                                        </div>
                                        <span style="color: #fd7e14; font-weight: 600; font-size: 0.95rem;">创建课程</span>
                                    </div>
                                    <i class="fas fa-chevron-right" style="color: #fd7e14;"></i>
                                </div>
                                <div style="display: flex; align-items: center; justify-content: space-between; padding: 12px; background: linear-gradient(135deg, #fde8f1, #fef0f7); border-radius: 8px; cursor: pointer; border: 1px solid #e83e8c; transition: all 0.3s ease;" onclick="showWithdrawModal()" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                                    <div style="display: flex; align-items: center; gap: 12px;">
                                        <div style="width: 36px; height: 36px; background: #e83e8c; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                            <i class="fas fa-money-bill-wave" style="color: white; font-size: 1rem;"></i>
                                        </div>
                                        <span style="color: #e83e8c; font-weight: 600; font-size: 0.95rem;">积分提现</span>
                                    </div>
                                    <i class="fas fa-chevron-right" style="color: #e83e8c;"></i>
                                </div>
                            </div>
                            </div>
                        </div>

                    <!-- 最近活动 -->
                    <div style="background: white; border-radius: 12px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 30px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="color: #333; margin: 0; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-history" style="color: #6f42c1;"></i>
                                最近活动
                            </h3>
                            <button onclick="viewAllActivities()" style="padding: 6px 12px; background: #f8f9fa; color: #6f42c1; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">查看全部</button>
                                </div>
                        <div style="display: flex; flex-direction: column; gap: 15px; margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <i class="fas fa-check-circle" style="color: #28a745; font-size: 1.2rem;"></i>
                                    <div>
                                        <div style="font-weight: 500; color: #333; font-size: 0.95rem;">完成工单 #202412001</div>
                                        <div style="font-size: 0.85rem; color: #6c757d;">空压机故障维修</div>
                                </div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 0.85rem; color: #28a745; font-weight: 500;">+¥180</div>
                                    <div style="font-size: 0.8rem; color: #6c757d;">2小时前</div>
                                </div>
                                </div>

                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <i class="fas fa-clock" style="color: #ffc107; font-size: 1.2rem;"></i>
                                    <div>
                                        <div style="font-weight: 500; color: #333; font-size: 0.95rem;">收到专家求助请求</div>
                                        <div style="font-size: 0.85rem; color: #6c757d;">PLC编程故障诊断</div>
                                </div>
                            </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 0.85rem; color: #667eea; font-weight: 500;">+¥80</div>
                                    <div style="font-size: 0.8rem; color: #6c757d;">4小时前</div>
                                </div>
                        </div>

                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <i class="fas fa-coins" style="color: #ffc107; font-size: 1.2rem;"></i>
                                    <div>
                                        <div style="font-weight: 500; color: #333; font-size: 0.95rem;">获得积分奖励</div>
                                        <div style="font-size: 0.85rem; color: #6c757d;">文档被浏览20次</div>
                                    </div>
                                    </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 0.85rem; color: #ffc107; font-weight: 500;">+40积分</div>
                                    <div style="font-size: 0.8rem; color: #6c757d;">1天前</div>
                                </div>
                                    </div>

                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <i class="fas fa-book" style="color: #fd7e14; font-size: 1.2rem;"></i>
                                    <div>
                                        <div style="font-weight: 500; color: #333; font-size: 0.95rem;">上传新文档</div>
                                        <div style="font-size: 0.85rem; color: #6c757d;">《空压机保养指南》</div>
                                    </div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 0.85rem; color: #28a745; font-weight: 500;">已通过</div>
                                    <div style="font-size: 0.8rem; color: #6c757d;">2天前</div>
                                </div>
                            </div>

                        </div>
                        <div style="border-top: 1px solid #f0f0f0; padding-top: 15px;">
                            <div style="display: flex; justify-content: space-between; font-size: 0.9rem;">
                                <span style="color: #6c757d;">本月活动总数</span>
                                <span style="color: #667eea; font-weight: 500;">28项</span>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="main-content" id="page-profile" style="display:none">
                    <div class="page-header">
                        <div class="header-left">
                            <h1><i class="fas fa-user-edit"></i> 个人档案</h1>
                            <p class="page-desc">管理您的个人信息，保持资料的准确性和完整性</p>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button onclick="openModal('editProfileModal')" style="display: flex; align-items: center; gap: 8px; padding: 10px 16px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">
                                <i class="fas fa-edit"></i>
                                编辑资料
                            </button>
                            <button onclick="exportProfile()" style="display: flex; align-items: center; gap: 8px; padding: 10px 16px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">
                                <i class="fas fa-download"></i>
                                导出档案
                            </button>
                        </div>
                    </div>

                    <!-- 个人信息概览 -->
                            <div style="background: white; border-radius: 12px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                                <div style="display: flex; align-items: center; gap: 25px;">
                                    <div style="position: relative;">
                                        <img src="https://api.dicebear.com/7.x/miniavs/svg?seed=zhangsan" style="width: 100px; height: 100px; border-radius: 50%; border: 4px solid #f8f9fa;" alt="头像">
                                        <button onclick="changeAvatar()" style="position: absolute; bottom: -5px; right: -5px; width: 32px; height: 32px; background: #667eea; color: white; border: none; border-radius: 50%; cursor: pointer; font-size: 0.8rem;">
                                            <i class="fas fa-camera"></i>
                                        </button>
                                    </div>
                                    <div style="flex: 1;">
                                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 10px;">
                                            <h2 style="color: #333; margin: 0; font-size: 1.5rem;">张三</h2>
                                            <span style="padding: 4px 12px; background: #e3f2fd; color: #1976d2; border-radius: 12px; font-size: 0.8rem; font-weight: 500;">技术工程师</span>
                                        </div>
                                        <!-- 认证标签区域 -->
                                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px; flex-wrap: wrap;">
                                            <span style="padding: 3px 10px; background: #e8f5e8; color: #2e7d32; border-radius: 10px; font-size: 0.75rem; font-weight: 500; display: flex; align-items: center; gap: 4px;">
                                                <i class="fas fa-id-card" style="font-size: 0.7rem;"></i> 实名认证
                                            </span>
                                            <span style="padding: 3px 10px; background: #e3f2fd; color: #1976d2; border-radius: 10px; font-size: 0.75rem; font-weight: 500; display: flex; align-items: center; gap: 4px;">
                                                <i class="fas fa-tools" style="font-size: 0.7rem;"></i> 维修认证
                                            </span>
                                            <span style="padding: 3px 10px; background: #fff3cd; color: #856404; border-radius: 10px; font-size: 0.75rem; font-weight: 500; display: flex; align-items: center; gap: 4px;">
                                                <i class="fas fa-graduation-cap" style="font-size: 0.7rem;"></i> 专家认证
                                            </span>
                                            <span style="padding: 3px 10px; background: #f8d7da; color: #721c24; border-radius: 10px; font-size: 0.75rem; font-weight: 500; display: flex; align-items: center; gap: 4px;">
                                                <i class="fas fa-clock" style="font-size: 0.7rem;"></i> 商家审核中
                                            </span>
                                        </div>
                                        <p style="color: #6c757d; margin: 0 0 15px 0; line-height: 1.6;">热爱技术，专注设备运维10年，服务客户100+，致力于让设备更高效运行！</p>
                                        <div style="display: flex; gap: 20px; font-size: 0.9rem;">
                                            <div style="display: flex; align-items: center; gap: 6px; color: #667eea;">
                                                <i class="fas fa-coins"></i>
                                                <span>积分：<strong>1,456</strong></span>
                                            </div>
                                            <div style="display: flex; align-items: center; gap: 6px; color: #28a745;">
                                                <i class="fas fa-chart-line"></i>
                                                <span>等级：<strong>Lv.5</strong></span>
                                            </div>
                                            <div style="display: flex; align-items: center; gap: 6px; color: #ffc107;">
                                                <i class="fas fa-star"></i>
                                                <span>评分：<strong>4.8</strong></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- 基本信息 -->
                            <div style="background: white; border-radius: 12px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                                <h3 style="color: #333; margin-bottom: 20px; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                                    <i class="fas fa-user" style="color: #667eea;"></i>
                                    基本信息
                                </h3>
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                                    <div style="display: flex; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                        <div style="width: 40px; height: 40px; background: #667eea; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                            <i class="fas fa-id-card" style="color: white; font-size: 1rem;"></i>
                                        </div>
                                        <div>
                                            <div style="font-size: 0.8rem; color: #6c757d; margin-bottom: 3px;">姓名</div>
                                            <div style="font-weight: 500; color: #333;">张三</div>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                        <div style="width: 40px; height: 40px; background: #28a745; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                            <i class="fas fa-phone" style="color: white; font-size: 1rem;"></i>
                                        </div>
                                        <div>
                                            <div style="font-size: 0.8rem; color: #6c757d; margin-bottom: 3px;">手机号</div>
                                            <div style="font-weight: 500; color: #333;">138****8888</div>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                        <div style="width: 40px; height: 40px; background: #17a2b8; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                            <i class="fas fa-envelope" style="color: white; font-size: 1rem;"></i>
                                        </div>
                                        <div>
                                            <div style="font-size: 0.8rem; color: #6c757d; margin-bottom: 3px;">邮箱</div>
                                            <div style="font-weight: 500; color: #333;">zhangsan@example.com</div>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                        <div style="width: 40px; height: 40px; background: #fd7e14; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                            <i class="fas fa-birthday-cake" style="color: white; font-size: 1rem;"></i>
                                        </div>
                                        <div>
                                            <div style="font-size: 0.8rem; color: #6c757d; margin-bottom: 3px;">生日</div>
                                            <div style="font-weight: 500; color: #333;">1990-03-15</div>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                        <div style="width: 40px; height: 40px; background: #6f42c1; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                            <i class="fas fa-venus-mars" style="color: white; font-size: 1rem;"></i>
                                        </div>
                                        <div>
                                            <div style="font-size: 0.8rem; color: #6c757d; margin-bottom: 3px;">性别</div>
                                            <div style="font-weight: 500; color: #333;">男</div>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                        <div style="width: 40px; height: 40px; background: #dc3545; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                            <i class="fas fa-map-marker-alt" style="color: white; font-size: 1rem;"></i>
                                        </div>
                                        <div>
                                            <div style="font-size: 0.8rem; color: #6c757d; margin-bottom: 3px;">地址</div>
                                            <div style="font-weight: 500; color: #333;">北京市朝阳区</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 职业信息 -->
                                <h3 style="color: #333; margin: 30px 0 20px 0; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                                    <i class="fas fa-briefcase" style="color: #28a745;"></i>
                                    职业信息
                                </h3>
                                
                                <!-- 所属企业列表 -->
                                <div style="margin-bottom: 25px;">
                                    <h4 style="color: #333; margin-bottom: 15px; font-size: 1rem; display: flex; align-items: center; gap: 8px;">
                                        <i class="fas fa-building" style="color: #28a745; font-size: 0.9rem;"></i>
                                        所属企业
                                    </h4>
                                    <div style="display: flex; flex-direction: column; gap: 12px;">
                                        <!-- 企业1 -->
                                        <div style="display: flex; align-items: center; justify-content: space-between; padding: 15px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #28a745;">
                                            <div style="display: flex; align-items: center; gap: 12px;">
                                                <div style="width: 35px; height: 35px; background: #28a745; border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                                                    <i class="fas fa-building" style="color: white; font-size: 0.9rem;"></i>
                                                </div>
                                                <div>
                                                    <div style="font-weight: 500; color: #333; margin-bottom: 2px;">快哥智服科技有限公司</div>
                                                    <div style="font-size: 0.8rem; color: #6c757d;">高级技术工程师 • 2020年至今</div>
                                                </div>
                                            </div>
                                            <span style="padding: 3px 8px; background: #e8f5e8; color: #2e7d32; border-radius: 10px; font-size: 0.75rem; font-weight: 500;">主要企业</span>
                                        </div>
                                        
                                        <!-- 企业2 -->
                                        <div style="display: flex; align-items: center; justify-content: space-between; padding: 15px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #17a2b8;">
                                            <div style="display: flex; align-items: center; gap: 12px;">
                                                <div style="width: 35px; height: 35px; background: #17a2b8; border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                                                    <i class="fas fa-building" style="color: white; font-size: 0.9rem;"></i>
                                                </div>
                                                <div>
                                                    <div style="font-weight: 500; color: #333; margin-bottom: 2px;">北京机械设备有限公司</div>
                                                    <div style="font-size: 0.8rem; color: #6c757d;">技术顾问 • 2023年至今</div>
                                                </div>
                                            </div>
                                            <span style="padding: 3px 8px; background: #e3f2fd; color: #1976d2; border-radius: 10px; font-size: 0.75rem; font-weight: 500;">兼职</span>
                                        </div>
                                        
                                        <!-- 企业3 -->
                                        <div style="display: flex; align-items: center; justify-content: space-between; padding: 15px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #ffc107;">
                                            <div style="display: flex; align-items: center; gap: 12px;">
                                                <div style="width: 35px; height: 35px; background: #ffc107; border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                                                    <i class="fas fa-building" style="color: white; font-size: 0.9rem;"></i>
                                                </div>
                                                <div>
                                                    <div style="font-weight: 500; color: #333; margin-bottom: 2px;">上海工业维保集团</div>
                                                    <div style="font-size: 0.8rem; color: #6c757d;">专家顾问 • 2022年至今</div>
                                                </div>
                                            </div>
                                            <span style="padding: 3px 8px; background: #fff3cd; color: #856404; border-radius: 10px; font-size: 0.75rem; font-weight: 500;">顾问</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- 其他职业信息 -->
                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;">
                                    <div style="display: flex; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                        <div style="width: 40px; height: 40px; background: #ffc107; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                            <i class="fas fa-clock" style="color: white; font-size: 1rem;"></i>
                                        </div>
                                        <div>
                                            <div style="font-size: 0.8rem; color: #6c757d; margin-bottom: 3px;">从业年限</div>
                                            <div style="font-weight: 500; color: #333;">10年</div>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                        <div style="width: 40px; height: 40px; background: #6f42c1; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                            <i class="fas fa-tools" style="color: white; font-size: 1rem;"></i>
                                        </div>
                                        <div>
                                            <div style="font-size: 0.8rem; color: #6c757d; margin-bottom: 3px;">专业技能</div>
                                            <div style="font-weight: 500; color: #333;">机械维修、电气维修</div>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                        <div style="width: 40px; height: 40px; background: #dc3545; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                            <i class="fas fa-trophy" style="color: white; font-size: 1rem;"></i>
                                        </div>
                                        <div>
                                            <div style="font-size: 0.8rem; color: #6c757d; margin-bottom: 3px;">综合评级</div>
                                            <div style="font-weight: 500; color: #333;">5星专家</div>
                                        </div>
                                    </div>
                                </div>
                            </div>



                            <!-- 活动统计与快捷操作 -->
                            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 25px;">
                                <!-- 活动统计 -->
                                <div style="background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                                    <h3 style="color: #333; margin-bottom: 15px; font-size: 1.1rem; display: flex; align-items: center; gap: 10px;">
                                        <i class="fas fa-chart-bar" style="color: #17a2b8;"></i>
                                        活动统计
                                    </h3>
                                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
                                        <div style="text-align: center; padding: 15px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 8px; color: white;">
                                            <div style="font-size: 1.8rem; font-weight: bold; margin-bottom: 5px;">176</div>
                                            <div style="font-size: 0.8rem; opacity: 0.9;">完成工单数</div>
                                        </div>
                                        <div style="text-align: center; padding: 15px; background: linear-gradient(135deg, #28a745, #20c997); border-radius: 8px; color: white;">
                                            <div style="font-size: 1.8rem; font-weight: bold; margin-bottom: 5px;">42</div>
                                            <div style="font-size: 0.8rem; opacity: 0.9;">发布文档数</div>
                                        </div>
                                        <div style="text-align: center; padding: 15px; background: linear-gradient(135deg, #ffc107, #fd7e14); border-radius: 8px; color: white;">
                                            <div style="font-size: 1.8rem; font-weight: bold; margin-bottom: 5px;">186</div>
                                            <div style="font-size: 0.8rem; opacity: 0.9;">培训学员数</div>
                                        </div>
                                    </div>
                                    
                                    <!-- 月度对比 -->
                                    <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid #f0f0f0;">
                                        <div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.9rem;">
                                            <div style="display: flex; align-items: center; gap: 6px; color: #28a745;">
                                                <i class="fas fa-arrow-up"></i>
                                                <span>本月新增工单: +23</span>
                                            </div>
                                            <div style="display: flex; align-items: center; gap: 6px; color: #17a2b8;">
                                                <i class="fas fa-trophy"></i>
                                                <span>服务满意度: 98.5%</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 快捷操作 -->
                                <div style="background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                                    <h3 style="color: #333; margin-bottom: 15px; font-size: 1.1rem; display: flex; align-items: center; gap: 10px;">
                                        <i class="fas fa-bolt" style="color: #fd7e14;"></i>
                                        快捷操作
                                    </h3>
                                    <div style="display: flex; flex-direction: column; gap: 10px;">
                                        <button onclick="showPage('password')" style="display: flex; align-items: center; gap: 10px; padding: 12px; background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; cursor: pointer; font-size: 0.9rem; color: #333; transition: all 0.3s; text-align: left;">
                                            <div style="width: 32px; height: 32px; background: #667eea; border-radius: 6px; display: flex; align-items: center; justify-content: center; color: white;">
                                                <i class="fas fa-key"></i>
                                            </div>
                                            <span>修改密码</span>
                                        </button>
                                        <button onclick="showPage('security')" style="display: flex; align-items: center; gap: 10px; padding: 12px; background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; cursor: pointer; font-size: 0.9rem; color: #333; transition: all 0.3s; text-align: left;">
                                            <div style="width: 32px; height: 32px; background: #28a745; border-radius: 6px; display: flex; align-items: center; justify-content: center; color: white;">
                                                <i class="fas fa-shield-alt"></i>
                                            </div>
                                            <span>安全设置</span>
                                        </button>
                                        <button onclick="exportProfile()" style="display: flex; align-items: center; gap: 10px; padding: 12px; background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; cursor: pointer; font-size: 0.9rem; color: #333; transition: all 0.3s; text-align: left;">
                                            <div style="width: 32px; height: 32px; background: #17a2b8; border-radius: 6px; display: flex; align-items: center; justify-content: center; color: white;">
                                                <i class="fas fa-download"></i>
                                            </div>
                                            <span>导出档案</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                </div>
                <div class="main-content" id="page-shop" style="display:none">
                    <div class="page-header">
                        <div class="header-left">
                            <h1><i class="fas fa-store"></i> 店铺管理</h1>
                            <p class="page-desc">管理您的线上店铺，提供专业的设备服务</p>
                    </div>
                        <div style="display: flex; gap: 10px;">
                            <button onclick="showSalesReport()" style="display: flex; align-items: center; gap: 8px; padding: 10px 16px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">
                                <i class="fas fa-chart-line"></i>
                                销售报告
                            </button>
                            <button style="display: flex; align-items: center; gap: 8px; padding: 10px 16px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem;" onclick="showAddProductModal()">
                                <i class="fas fa-plus"></i>
                                添加商品
                            </button>
                        </div>
                    </div>

                    <!-- 店铺统计 -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 25px;">
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">总销售额</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #28a745, #20c997); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-dollar-sign"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">¥28,680</div>
                            <div style="font-size: 0.8rem; color: #28a745; margin-top: 8px;">
                                <i class="fas fa-arrow-up"></i> +12.5% 较上月
                            </div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">商品数量</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-boxes"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">56</div>
                            <div style="font-size: 0.8rem; color: #6c757d; margin-top: 8px;">
                                <i class="fas fa-plus"></i> 3个新增商品
                            </div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">待处理订单</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #ffc107, #fd7e14); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                        <i class="fas fa-clock"></i>
                                    </div>
                                    </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">8</div>
                            <div style="font-size: 0.8rem; color: #dc3545; margin-top: 8px;">
                                <i class="fas fa-exclamation-triangle"></i> 需及时处理
                                </div>
                            </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">客户评分</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #17a2b8, #6f42c1); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-star"></i>
                        </div>
                    </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">4.8</div>
                            <div style="font-size: 0.8rem; color: #ffc107; margin-top: 8px;">
                                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>
                        </div>
                        </div>
                </div>

                    <!-- 店铺信息管理 -->
                    <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 25px;">
                        <h3 style="color: #333; margin-bottom: 20px; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-info-circle" style="color: #667eea;"></i>
                            店铺基本信息
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                            <div>
                                <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">店铺名称</label>
                                <input type="text" value="张师傅设备维修服务" readonly style="width: 100%; padding: 10px 12px; border: 1px solid #e9ecef; border-radius: 6px; font-size: 0.95rem; background-color: #f8f9fa; color: #6c757d; cursor: not-allowed;">
                    </div>
                            <div>
                                <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">联系电话</label>
                                <input type="tel" value="138-8888-8888" readonly style="width: 100%; padding: 10px 12px; border: 1px solid #e9ecef; border-radius: 6px; font-size: 0.95rem; background-color: #f8f9fa; color: #6c757d; cursor: not-allowed;">
                            </div>
                            <div>
                                <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">营业时间</label>
                                <input type="text" value="周一至周日 8:00-18:00" readonly style="width: 100%; padding: 10px 12px; border: 1px solid #e9ecef; border-radius: 6px; font-size: 0.95rem; background-color: #f8f9fa; color: #6c757d; cursor: not-allowed;">
                            </div>
                            <div>
                                <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">服务区域</label>
                                <input type="text" value="北京市及周边地区" readonly style="width: 100%; padding: 10px 12px; border: 1px solid #e9ecef; border-radius: 6px; font-size: 0.95rem; background-color: #f8f9fa; color: #6c757d; cursor: not-allowed;">
                            </div>
                        </div>
                        <div style="margin-top: 20px;">
                            <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">店铺简介</label>
                            <textarea readonly style="width: 100%; padding: 12px; border: 1px solid #e9ecef; border-radius: 6px; font-size: 0.95rem; min-height: 100px; resize: none; background-color: #f8f9fa; color: #6c757d; cursor: not-allowed;">专业从事工业设备维修服务10余年，拥有丰富的空压机、制冷设备、锅炉等设备维修经验。团队技术过硬，服务态度良好，已为300+企业提供优质服务，客户满意度高达98%。</textarea>
                        </div>
                        <div style="margin-top: 20px; text-align: center;">
                            <div style="background: #e3f2fd; border: 1px solid #bbdefb; border-radius: 6px; padding: 12px; color: #1565c0; font-size: 0.9rem;">
                                <i class="fas fa-info-circle" style="margin-right: 8px;"></i>
                                以上信息来自商家认证时提交的资料，如需修改请联系客服
                            </div>
                        </div>
                    </div>

                    <!-- 商品管理 -->
                    <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 25px;">
                        <h3 style="color: #333; margin-bottom: 20px; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-shopping-bag" style="color: #667eea;"></i>
                            商品管理
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">
                            <div style="border: 1px solid #e9ecef; border-radius: 8px; overflow: hidden; transition: all 0.3s;">
                                <div style="position: relative; background: linear-gradient(135deg, #667eea, #764ba2); height: 100px; display: flex; align-items: center; justify-content: center; color: white;">
                                    <div style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.2); padding: 3px 8px; border-radius: 10px; font-size: 0.7rem;">
                                        热销
                                    </div>
                                    <i class="fas fa-tools" style="font-size: 1.8rem; opacity: 0.8;"></i>
                                </div>
                                <div style="padding: 15px;">
                                    <h4 style="color: #333; margin-bottom: 8px; font-size: 1rem;">空压机维修服务</h4>
                                    <p style="color: #6c757d; font-size: 0.85rem; margin-bottom: 10px;">专业空压机故障诊断和维修，包含螺杆式、活塞式等各类型空压机</p>
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                        <span style="color: #667eea; font-weight: bold; font-size: 1.1rem;">¥800-1500</span>
                                        <span style="font-size: 0.8rem; color: #28a745;">已售 45 次</span>
                                    </div>
                                    <div style="display: flex; gap: 5px;">
                                        <button style="flex: 1; padding: 6px; background: #667eea; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.8rem;" onclick="editService('service1', '空压机维修', 'repair', '300')">编辑</button>
                                        <button style="padding: 6px 10px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 4px; cursor: pointer; font-size: 0.8rem;" onclick="toggleServiceStatus('service1', '上架')">下架</button>
                                    </div>
                                </div>
                            </div>
                            <div style="border: 1px solid #e9ecef; border-radius: 8px; overflow: hidden; transition: all 0.3s;">
                                <div style="position: relative; background: linear-gradient(135deg, #28a745, #20c997); height: 100px; display: flex; align-items: center; justify-content: center; color: white;">
                                    <div style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.2); padding: 3px 8px; border-radius: 10px; font-size: 0.7rem;">
                                        推荐
                                    </div>
                                    <i class="fas fa-calendar-check" style="font-size: 1.8rem; opacity: 0.8;"></i>
                                </div>
                                <div style="padding: 15px;">
                                    <h4 style="color: #333; margin-bottom: 8px; font-size: 1rem;">设备保养服务</h4>
                                    <p style="color: #6c757d; font-size: 0.85rem; margin-bottom: 10px;">定期设备维护保养，延长设备使用寿命，提高运行效率</p>
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                        <span style="color: #667eea; font-weight: bold; font-size: 1.1rem;">¥300-800</span>
                                        <span style="font-size: 0.8rem; color: #28a745;">已售 28 次</span>
                                    </div>
                                    <div style="display: flex; gap: 5px;">
                                        <button style="flex: 1; padding: 6px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.8rem;" onclick="editService('service2', '设备保养', 'maintenance', '200')">编辑</button>
                                        <button style="padding: 6px 10px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 4px; cursor: pointer; font-size: 0.8rem;" onclick="toggleServiceStatus('service2', '上架')">下架</button>
                                    </div>
                                </div>
                            </div>
                            <div style="border: 1px solid #e9ecef; border-radius: 8px; overflow: hidden; transition: all 0.3s;">
                                <div style="position: relative; background: linear-gradient(135deg, #17a2b8, #6f42c1); height: 100px; display: flex; align-items: center; justify-content: center; color: white;">
                                    <i class="fas fa-search" style="font-size: 1.8rem; opacity: 0.8;"></i>
                                </div>
                                <div style="padding: 15px;">
                                    <h4 style="color: #333; margin-bottom: 8px; font-size: 1rem;">巡检服务</h4>
                                    <p style="color: #6c757d; font-size: 0.85rem; margin-bottom: 10px;">定期设备巡检，及时发现潜在问题，预防故障发生</p>
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                        <span style="color: #667eea; font-weight: bold; font-size: 1.1rem;">¥200-500</span>
                                        <span style="font-size: 0.8rem; color: #28a745;">已售 36 次</span>
                                    </div>
                                    <div style="display: flex; gap: 5px;">
                                        <button style="flex: 1; padding: 6px; background: #17a2b8; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.8rem;" onclick="editService('service3', '巡检服务', 'inspection', '300')">编辑</button>
                                        <button style="padding: 6px 10px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 4px; cursor: pointer; font-size: 0.8rem;" onclick="toggleServiceStatus('service3', '上架')">下架</button>
                                    </div>
                                </div>
                            </div>
                            <div style="border: 1px solid #e9ecef; border-radius: 8px; overflow: hidden; transition: all 0.3s;">
                                <div style="position: relative; background: linear-gradient(135deg, #ffc107, #fd7e14); height: 100px; display: flex; align-items: center; justify-content: center; color: white;">
                                    <i class="fas fa-wrench" style="font-size: 1.8rem; opacity: 0.8;"></i>
                                </div>
                                <div style="padding: 15px;">
                                    <h4 style="color: #333; margin-bottom: 8px; font-size: 1rem;">安装调试</h4>
                                    <p style="color: #6c757d; font-size: 0.85rem; margin-bottom: 10px;">新设备安装调试，确保设备正常运行，提供技术指导</p>
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                        <span style="color: #667eea; font-weight: bold; font-size: 1.1rem;">¥500-1200</span>
                                        <span style="font-size: 0.8rem; color: #28a745;">已售 22 次</span>
                                    </div>
                                    <div style="display: flex; gap: 5px;">
                                        <button style="flex: 1; padding: 6px; background: #ffc107; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.8rem;" onclick="editService('service4', '安装调试', 'installation', '800')">编辑</button>
                                        <button style="padding: 6px 10px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 4px; cursor: pointer; font-size: 0.8rem;" onclick="toggleServiceStatus('service4', '上架')">下架</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 近期订单 -->
                    <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <h3 style="color: #333; margin-bottom: 20px; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-receipt" style="color: #667eea;"></i>
                            近期订单
                        </h3>
                        <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                                <tr style="border-bottom: 2px solid #f0f0f0;">
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">订单号</th>
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">客户</th>
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">服务项目</th>
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">金额</th>
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">状态</th>
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">下单时间</th>
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">操作</th>
                            </tr>
                        </thead>
                        <tbody>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 12px 8px;">
                                        <span style="color: #667eea; font-weight: 500;">#SP20240601001</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <div>
                                            <div style="font-weight: 500; color: #333;">北京机械厂</div>
                                            <div style="font-size: 0.8rem; color: #6c757d;">李经理</div>
                                        </div>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.9rem; color: #333;">空压机维修服务</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="color: #28a745; font-weight: 600;">¥1,200</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.8rem; font-weight: 500; background: #fff3cd; color: #856404;">处理中</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.85rem; color: #6c757d;">2024-06-01 09:30</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; gap: 5px;">
                                            <button style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: none; background: #667eea; color: white; cursor: pointer;" onclick="showOrderDetail('SP20240601001', 'shop')">详情</button>
                                            <button style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer;" onclick="contactCustomer('138-0001-0001')">联系</button>
                                        </div>
                                </td>
                            </tr>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 12px 8px;">
                                        <span style="color: #667eea; font-weight: 500;">#SP20240531008</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <div>
                                            <div style="font-weight: 500; color: #333;">上海化工公司</div>
                                            <div style="font-size: 0.8rem; color: #6c757d;">王总</div>
                                        </div>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.9rem; color: #333;">设备保养服务</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="color: #28a745; font-weight: 600;">¥650</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.8rem; font-weight: 500; background: #d4edda; color: #155724;">已完成</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.85rem; color: #6c757d;">2024-05-31 14:20</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; gap: 5px;">
                                            <button style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: none; background: #28a745; color: white; cursor: pointer;" onclick="showOrderAction('evaluate', 'SP20240531008')">评价</button>
                                            <button style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer;" onclick="showOrderDetail('SP20240531008', 'shop')">详情</button>
                                        </div>
                                </td>
                            </tr>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 12px 8px;">
                                        <span style="color: #667eea; font-weight: 500;">#SP20240530015</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <div>
                                            <div style="font-weight: 500; color: #333;">广州电子科技</div>
                                            <div style="font-size: 0.8rem; color: #6c757d;">张工</div>
                                        </div>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.9rem; color: #333;">巡检服务</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="color: #28a745; font-weight: 600;">¥350</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.8rem; font-weight: 500; background: #d1ecf1; color: #0c5460;">进行中</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.85rem; color: #6c757d;">2024-05-30 16:45</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; gap: 5px;">
                                            <button style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: none; background: #17a2b8; color: white; cursor: pointer;" onclick="showOrderAction('progress', 'SP20240530015')">进度</button>
                                            <button style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer;" onclick="showOrderDetail('SP20240530015', 'shop')">详情</button>
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                </div>
                <div class="main-content" id="page-repair-order" style="display:none">
                    <div class="page-header">
                        <div class="header-left">
                            <h1><i class="fas fa-tools"></i> 维修工单管理</h1>
                            <p class="page-desc">管理您的设备维修工单，跟踪服务进度</p>
                        </div>
                    </div>

                    <!-- 统计卡片 -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 25px;">
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">总工单数</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-clipboard-list"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">156</div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">待处理</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #ffc107, #fd7e14); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-clock"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">12</div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">进行中</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #17a2b8, #20c997); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-spinner"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">8</div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">已完成</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #28a745, #20c997); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">136</div>
                        </div>
                    </div>

                    <!-- 筛选区域 -->
                    <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 20px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 15px;">
                            <div>
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">工单状态</label>
                                <select style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                            <option>全部状态</option>
                                    <option>待处理</option>
                            <option>进行中</option>
                            <option>已完成</option>
                            <option>已取消</option>
                        </select>
                    </div>
                            <div>
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">优先级</label>
                                <select style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                                    <option>全部优先级</option>
                                    <option>紧急</option>
                                    <option>高</option>
                                    <option>中</option>
                                    <option>低</option>
                                </select>
                            </div>
                            <div>
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">设备类型</label>
                                <select style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                                    <option>全部设备</option>
                                    <option>空压机</option>
                                    <option>制冷设备</option>
                                    <option>通风设备</option>
                                    <option>其他</option>
                                </select>
                            </div>
                        </div>
                        <div style="display: flex; gap: 10px; align-items: end;">
                            <div style="flex: 1;">
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">工单编号</label>
                                <input type="text" placeholder="请输入工单编号..." style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                            </div>
                            <button style="padding: 8px 20px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">
                                <i class="fas fa-search"></i> 搜索
                            </button>
                        </div>
                    </div>

                    <!-- 工单列表 -->
                    <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="color: #333; font-size: 1.2rem; display: flex; align-items: center; gap: 10px; margin: 0;">
                                <i class="fas fa-list" style="color: #667eea;"></i>
                                维修工单列表
                            </h3>
                            <button style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                                <i class="fas fa-download"></i>
                                导出数据
                            </button>
                        </div>
                                                <table style="width: 100%; border-collapse: collapse; table-layout: fixed;">
                        <thead>
                                <tr style="border-bottom: 2px solid #f0f0f0;">
                                    <th style="padding: 10px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 12%;">工单号</th>
                                    <th style="padding: 10px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 16%;">客户信息</th>
                                    <th style="padding: 10px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 15%;">设备信息</th>
                                    <th style="padding: 10px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 18%;">故障描述</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 10%;">优先级</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 10%;">状态</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 11%;">创建时间</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 8%;">操作</th>
                            </tr>
                        </thead>
                        <tbody>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <span style="color: #667eea; font-weight: 500; font-size: 0.85rem;">#RO20240601001</span>
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <div>
                                            <div style="font-weight: 500; color: #333; font-size: 0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">北京机械制造厂</div>
                                            <div style="font-size: 0.75rem; color: #6c757d; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">李经理 | 138-0001-0001</div>
                                        </div>
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <span style="font-size: 0.8rem; color: #333; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: block;">螺杆式空压机 | SA-75A</span>
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <span style="font-size: 0.8rem; color: #333; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; line-height: 1.3;">设备启动时有异响，压力不稳定</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #ffe6e6; color: #d63384; white-space: nowrap;">紧急</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #fff3cd; color: #856404; white-space: nowrap;">待处理</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="font-size: 0.8rem; color: #6c757d; white-space: nowrap;">06-01<br/>09:30</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="display: flex; gap: 3px;">
                                            <button style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: none; background: #667eea; color: white; cursor: pointer; white-space: nowrap;" onclick="showOrderAction('accept', 'RO20240601001')">接单</button>
                                            <button style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer; white-space: nowrap;" onclick="showOrderDetail('RO20240601001', 'repair')">详情</button>
                                        </div>
                                </td>
                            </tr>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <span style="color: #667eea; font-weight: 500; font-size: 0.85rem;">#RO20240531008</span>
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <div>
                                            <div style="font-weight: 500; color: #333; font-size: 0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">上海化工有限公司</div>
                                            <div style="font-size: 0.75rem; color: #6c757d; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">王总 | 186-0002-0002</div>
                                        </div>
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <span style="font-size: 0.8rem; color: #333; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: block;">离心式制冷机 | CR-200</span>
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <span style="font-size: 0.8rem; color: #333; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; line-height: 1.3;">制冷效果明显下降，冷凝器温度过高</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #ffeaa7; color: #d68910; white-space: nowrap;">高</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #d1ecf1; color: #0c5460; white-space: nowrap;">进行中</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="font-size: 0.8rem; color: #6c757d; white-space: nowrap;">05-31<br/>14:20</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="display: flex; gap: 3px;">
                                            <button style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: none; background: #17a2b8; color: white; cursor: pointer; white-space: nowrap;" onclick="showOrderAction('progress', 'RO20240531008')">进度</button>
                                            <button style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer; white-space: nowrap;" onclick="showOrderDetail('RO20240531008', 'repair')">详情</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <span style="color: #667eea; font-weight: 500; font-size: 0.85rem;">#RO20240530015</span>
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <div>
                                            <div style="font-weight: 500; color: #333; font-size: 0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">广州电子科技</div>
                                            <div style="font-size: 0.75rem; color: #6c757d; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">张工 | 139-0003-0003</div>
                                        </div>
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <span style="font-size: 0.8rem; color: #333; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: block;">工业锅炉 | WNS-4</span>
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <span style="font-size: 0.8rem; color: #333; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; line-height: 1.3;">锅炉水位控制器故障，需要更换</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #e7f3ff; color: #0066cc; white-space: nowrap;">普通</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #d4edda; color: #155724; white-space: nowrap;">已完成</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="font-size: 0.8rem; color: #6c757d; white-space: nowrap;">05-30<br/>16:45</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="display: flex; gap: 3px;">
                                            <button style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: none; background: #28a745; color: white; cursor: pointer; white-space: nowrap;">评价</button>
                                            <button style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer; white-space: nowrap;">详情</button>
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                        <!-- 分页 -->
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid #f0f0f0;">
                            <div style="color: #6c757d; font-size: 0.9rem;">
                                共 <span style="color: #333; font-weight: 500;">156</span> 条记录，第 <span style="color: #333; font-weight: 500;">1</span> 页，共 <span style="color: #333; font-weight: 500;">16</span> 页
                </div>
                            <div style="display: flex; gap: 5px;">
                                <button style="padding: 8px 12px; border: 1px solid #e0e3ea; background: #f8f9fa; color: #6c757d; border-radius: 6px; cursor: not-allowed;" disabled>
                                    <i class="fas fa-angle-left"></i> 上一页
                                </button>
                                <button style="padding: 8px 12px; border: 1px solid #667eea; background: #667eea; color: white; border-radius: 6px; cursor: pointer;">1</button>
                                <button style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;">2</button>
                                <button style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;">3</button>
                                <span style="padding: 8px 12px; color: #6c757d;">...</span>
                                <button style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;">16</button>
                                <button style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;">
                                    下一页 <i class="fas fa-angle-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 工单详情模态框已移到统一位置 -->

                    <script>
                        // 已移除重复的showOrderDetail函数，使用统一的版本
                    </script>
                </div>
                <div class="main-content" id="page-install-order" style="display:none">
                    <div class="page-header">
                        <div class="header-left">
                            <h1><i class="fas fa-cog"></i> 安装工单管理</h1>
                            <p class="page-desc">管理设备安装工单，确保安装质量和进度</p>
                        </div>
                    </div>

                    <!-- 统计卡片 -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 25px;">
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">总安装工单</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-cog"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">89</div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">待安装</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #ffc107, #fd7e14); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-clock"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">6</div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">安装中</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #17a2b8, #20c997); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-spinner"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">4</div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">已完成</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #28a745, #20c997); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">79</div>
                        </div>
                    </div>

                    <!-- 筛选区域 -->
                    <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 20px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 15px;">
                            <div>
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">工单状态</label>
                                <select style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                            <option>全部状态</option>
                                    <option>待安装</option>
                                    <option>安装中</option>
                            <option>已完成</option>
                            <option>已取消</option>
                        </select>
                    </div>
                            <div>
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">设备类型</label>
                                <select style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                                    <option>全部设备</option>
                                    <option>空调系统</option>
                                    <option>通风设备</option>
                                    <option>制冷设备</option>
                                    <option>其他</option>
                                </select>
                            </div>
                            <div>
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">安装类型</label>
                                <select style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                                    <option>全部类型</option>
                                    <option>新装</option>
                                    <option>改装</option>
                                    <option>扩容</option>
                                    <option>迁移</option>
                                </select>
                            </div>
                        </div>
                        <div style="display: flex; gap: 10px; align-items: end;">
                            <div style="flex: 1;">
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">工单编号</label>
                                <input type="text" placeholder="请输入工单编号..." style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                            </div>
                            <button style="padding: 8px 20px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">
                                <i class="fas fa-search"></i> 搜索
                            </button>
                        </div>
                    </div>

                    <!-- 工单列表 -->
                    <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="color: #333; font-size: 1.2rem; display: flex; align-items: center; gap: 10px; margin: 0;">
                                <i class="fas fa-list" style="color: #667eea;"></i>
                                安装工单列表
                            </h3>
                            <button style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                                <i class="fas fa-download"></i>
                                导出数据
                            </button>
                        </div>
                        <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                                <tr style="border-bottom: 2px solid #f0f0f0;">
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">工单号</th>
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">客户信息</th>
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">设备信息</th>
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">安装地址</th>
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">状态</th>
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">创建时间</th>
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">操作</th>
                            </tr>
                        </thead>
                        <tbody>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 12px 8px;">
                                        <span style="color: #667eea; font-weight: 500;">#IO20240601001</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <div>
                                            <div style="font-weight: 500; color: #333;">北京科技大厦</div>
                                            <div style="font-size: 0.8rem; color: #6c757d;">李经理 | 138-0001-0001</div>
                                        </div>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.9rem; color: #333;">中央空调系统 | 型号：VRV-X</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.9rem; color: #333;">北京市朝阳区CBD核心区</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.8rem; font-weight: 500; background: #fff3cd; color: #856404;">待安装</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.85rem; color: #6c757d;">2024-06-01 10:00</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; gap: 5px;">
                                            <button onclick="showInstallAction('accept', 'IO20240601001')" style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: none; background: #667eea; color: white; cursor: pointer;">接单</button>
                                            <button onclick="showInstallDetail('IO20240601001')" style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer;">详情</button>
                                        </div>
                                </td>
                            </tr>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 12px 8px;">
                                        <span style="color: #667eea; font-weight: 500;">#IO20240531005</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <div>
                                            <div style="font-weight: 500; color: #333;">上海工业园区</div>
                                            <div style="font-size: 0.8rem; color: #6c757d;">王总 | 139-0002-0002</div>
                                        </div>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.9rem; color: #333;">新风系统 | 型号：ERV-500</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.9rem; color: #333;">上海市浦东新区张江园区</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.8rem; font-weight: 500; background: #d1ecf1; color: #0c5460;">安装中</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.85rem; color: #6c757d;">2024-05-31 14:30</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; gap: 5px;">
                                            <button onclick="showInstallAction('progress', 'IO20240531005')" style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: none; background: #17a2b8; color: white; cursor: pointer;">进度</button>
                                            <button onclick="showInstallDetail('IO20240531005')" style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer;">详情</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 12px 8px;">
                                        <span style="color: #667eea; font-weight: 500;">#IO20240530008</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <div>
                                            <div style="font-weight: 500; color: #333;">广州制造基地</div>
                                            <div style="font-size: 0.8rem; color: #6c757d;">张工 | 136-0003-0003</div>
                                        </div>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.9rem; color: #333;">冷库制冷设备 | 型号：CR-2000</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.9rem; color: #333;">广州市天河区科技园</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.8rem; font-weight: 500; background: #d4edda; color: #155724;">已完成</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.85rem; color: #6c757d;">2024-05-30 09:15</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; gap: 5px;">
                                            <button onclick="showInstallAction('evaluate', 'IO20240530008')" style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: none; background: #28a745; color: white; cursor: pointer;">评价</button>
                                            <button onclick="showInstallDetail('IO20240530008')" style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer;">详情</button>
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <!-- 分页 -->
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid #f0f0f0;">
                        <div style="color: #6c757d; font-size: 0.9rem;">
                            共 <span style="color: #333; font-weight: 500;">89</span> 条记录，第 <span style="color: #333; font-weight: 500;">1</span> 页，共 <span style="color: #333; font-weight: 500;">9</span> 页
                </div>
                        <div style="display: flex; gap: 5px;">
                            <button style="padding: 8px 12px; border: 1px solid #e0e3ea; background: #f8f9fa; color: #6c757d; border-radius: 6px; cursor: not-allowed;" disabled>
                                <i class="fas fa-angle-left"></i> 上一页
                            </button>
                            <button style="padding: 8px 12px; border: 1px solid #667eea; background: #667eea; color: white; border-radius: 6px; cursor: pointer;">1</button>
                            <button style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;">2</button>
                            <button style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;">3</button>
                            <span style="padding: 8px 12px; color: #6c757d;">...</span>
                            <button style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;">9</button>
                            <button style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;">
                                下一页 <i class="fas fa-angle-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
                </div>

                <div class="main-content" id="page-debug-order" style="display:none">
                    <div class="page-header">
                        <div class="header-left">
                            <h1><i class="fas fa-sliders-h"></i> 调试工单管理</h1>
                            <p class="page-desc">管理设备调试工单，确保设备运行状态最优</p>
                        </div>
                    </div>

                    <!-- 统计卡片 -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 25px;">
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">总调试工单</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-sliders-h"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">67</div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">待调试</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #ffc107, #fd7e14); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-clock"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">5</div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">调试中</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #17a2b8, #20c997); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-spinner"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">3</div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">已完成</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #28a745, #20c997); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">59</div>
                        </div>
                    </div>

                    <!-- 筛选区域 -->
                    <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 20px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 15px;">
                            <div>
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">工单状态</label>
                                <select id="debug-status-filter" onchange="filterDebugOrders()" style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                            <option value="">全部状态</option>
                                    <option value="待调试">待调试</option>
                                    <option value="调试中">调试中</option>
                            <option value="已完成">已完成</option>
                            <option value="已取消">已取消</option>
                        </select>
                    </div>
                            <div>
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">设备类型</label>
                                <select id="debug-device-filter" onchange="filterDebugOrders()" style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                                    <option value="">全部设备</option>
                                    <option value="PLC控制系统">PLC控制系统</option>
                                    <option value="变频器">变频器</option>
                                    <option value="传感器系统">传感器系统</option>
                                    <option value="其他">其他</option>
                                </select>
                            </div>
                            <div>
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">调试类型</label>
                                <select id="debug-type-filter" onchange="filterDebugOrders()" style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                                    <option value="">全部类型</option>
                                    <option value="程序调试">程序调试</option>
                                    <option value="参数优化">参数优化</option>
                                    <option value="性能测试">性能测试</option>
                                    <option value="故障排除">故障排除</option>
                                </select>
                            </div>
                        </div>
                        <div style="display: flex; gap: 10px; align-items: end;">
                            <div style="flex: 1;">
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">工单编号</label>
                                <input type="text" id="debug-search-input" placeholder="请输入工单编号..." onkeypress="if(event.key==='Enter') searchDebugOrders()" style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                            </div>
                            <button onclick="searchDebugOrders()" style="padding: 8px 20px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">
                                <i class="fas fa-search"></i> 搜索
                            </button>
                        </div>
                    </div>

                    <!-- 工单列表 -->
                    <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="color: #333; font-size: 1.2rem; display: flex; align-items: center; gap: 10px; margin: 0;">
                                <i class="fas fa-list" style="color: #667eea;"></i>
                                调试工单列表
                            </h3>
                            <button onclick="exportDebugData()" style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                                <i class="fas fa-download"></i>
                                导出数据
                            </button>
                        </div>
                        <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                                <tr style="border-bottom: 2px solid #f0f0f0;">
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">工单号</th>
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">客户信息</th>
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">设备信息</th>
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">调试内容</th>
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">状态</th>
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">创建时间</th>
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">操作</th>
                            </tr>
                        </thead>
                        <tbody>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 12px 8px;">
                                        <span style="color: #667eea; font-weight: 500;">#DO20240601001</span>
                                </td>
                                    <td style="padding: 12px 8px;">
                                        <div>
                                            <div style="font-weight: 500; color: #333;">智能制造公司</div>
                                            <div style="font-size: 0.8rem; color: #6c757d;">联系人：刘工 | 138-0001-0001</div>
                                        </div>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.9rem; color: #333;">PLC控制系统 | 型号：S7-1500</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.9rem; color: #333;">生产线自动化程序调试</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.8rem; font-weight: 500; background: #fff3cd; color: #856404;">待调试</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.85rem; color: #6c757d;">2024-06-01 11:00</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; gap: 5px;">
                                            <button onclick="showDebugAccept('DO20240601001')" style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: none; background: #667eea; color: white; cursor: pointer;">接单</button>
                                            <button onclick="showDebugDetail('DO20240601001')" style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer;">详情</button>
                                        </div>
                                </td>
                            </tr>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 12px 8px;">
                                        <span style="color: #667eea; font-weight: 500;">#DO20240531006</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <div>
                                            <div style="font-weight: 500; color: #333;">精密仪器厂</div>
                                            <div style="font-size: 0.8rem; color: #6c757d;">联系人：陈总 | 139-0002-0002</div>
                </div>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.9rem; color: #333;">变频器 | 型号：ABB-ACS880</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.9rem; color: #333;">电机控制参数优化调试</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.8rem; font-weight: 500; background: #d1ecf1; color: #0c5460;">调试中</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.85rem; color: #6c757d;">2024-05-31 15:30</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; gap: 5px;">
                                            <button onclick="showDebugProgress('DO20240531006')" style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: none; background: #17a2b8; color: white; cursor: pointer;">进度</button>
                                            <button onclick="showDebugDetail('DO20240531006')" style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer;">详情</button>
                    </div>
                                </td>
                            </tr>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 12px 8px;">
                                        <span style="color: #667eea; font-weight: 500;">#DO20240530009</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <div>
                                            <div style="font-weight: 500; color: #333;">自动化设备厂</div>
                                            <div style="font-size: 0.8rem; color: #6c757d;">联系人：王工 | 136-0003-0003</div>
                                        </div>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.9rem; color: #333;">传感器系统 | 型号：IFM-IO-Link</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.9rem; color: #333;">数据采集系统调试验证</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.8rem; font-weight: 500; background: #d4edda; color: #155724;">已完成</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.85rem; color: #6c757d;">2024-05-30 16:45</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; gap: 5px;">
                                            <button onclick="showDebugReport('DO20240530009')" style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: none; background: #28a745; color: white; cursor: pointer;">报告</button>
                                            <button onclick="showDebugDetail('DO20240530009')" style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer;">详情</button>
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                        
                        <!-- 分页 -->
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid #f0f0f0;">
                            <div style="color: #6c757d; font-size: 0.9rem;" id="debug-pagination-info">
                                共 <span style="color: #333; font-weight: 500;" id="debug-total-count">67</span> 条记录，第 <span style="color: #333; font-weight: 500;" id="debug-current-page">1</span> 页，共 <span style="color: #333; font-weight: 500;" id="debug-total-pages">7</span> 页
                </div>
                            <div style="display: flex; gap: 5px;" id="debug-pagination-buttons">
                                <button onclick="goToDebugPage(1)" style="padding: 8px 12px; border: 1px solid #e0e3ea; background: #f8f9fa; color: #6c757d; border-radius: 6px; cursor: not-allowed;" disabled>
                                    <i class="fas fa-angle-left"></i> 上一页
                                </button>
                                <button onclick="goToDebugPage(1)" style="padding: 8px 12px; border: 1px solid #667eea; background: #667eea; color: white; border-radius: 6px; cursor: pointer;">1</button>
                                <button onclick="goToDebugPage(2)" style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;">2</button>
                                <button onclick="goToDebugPage(3)" style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;">3</button>
                                <span style="padding: 8px 12px; color: #6c757d;">...</span>
                                <button onclick="goToDebugPage(7)" style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;">7</button>
                                <button onclick="goToDebugPage(2)" style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;">
                                    下一页 <i class="fas fa-angle-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="main-content" id="page-assist-launch" style="display:none">
                    <div class="page-header">
                        <h1><i class="fas fa-handshake"></i> 发起远程协助</h1>
                        <p class="page-desc">遇到技术难题？立即联系专业技术专家，获得实时指导和解决方案</p>
                    </div>

                    <div style="padding: 15px 20px; background: #d1ecf1; color: #0c5460; border-left: 4px solid #17a2b8; border-radius: 8px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-info-circle"></i>
                        <span>选择协助方式后，系统将为您匹配最合适的专家。协助过程中，专家将为您提供专业的技术指导。</span>
                    </div>

                    <!-- 协助方式选择 -->
                    <div style="background: white; border-radius: 12px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 25px;">
                        <h3 style="color: #333; margin-bottom: 20px; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-video" style="color: #667eea;"></i>
                            选择协助方式
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">
                            <div onclick="selectAssistType('video')" style="border: 2px solid #e9ecef; border-radius: 10px; padding: 20px; cursor: pointer; transition: all 0.3s; text-align: center;" id="assist-video">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, #667eea, #764ba2); color: white; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; margin: 0 auto 15px;">
                                    <i class="fas fa-video"></i>
                                </div>
                                <div style="font-weight: 600; color: #333; margin-bottom: 8px; font-size: 1.1rem;">视频协助</div>
                                <div style="color: #6c757d; font-size: 0.9rem; margin-bottom: 10px;">面对面实时指导，直观高效</div>
                                <div style="color: #667eea; font-weight: bold; font-size: 1.2rem;">¥200/小时</div>
                            </div>
                            <div onclick="selectAssistType('audio')" style="border: 2px solid #e9ecef; border-radius: 10px; padding: 20px; cursor: pointer; transition: all 0.3s; text-align: center;" id="assist-audio">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, #28a745, #20c997); color: white; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; margin: 0 auto 15px;">
                                    <i class="fas fa-phone"></i>
                                </div>
                                <div style="font-weight: 600; color: #333; margin-bottom: 8px; font-size: 1.1rem;">语音协助</div>
                                <div style="color: #6c757d; font-size: 0.9rem; margin-bottom: 10px;">语音沟通，专业解答</div>
                                <div style="color: #667eea; font-weight: bold; font-size: 1.2rem;">¥150/小时</div>
                            </div>
                            <div onclick="selectAssistType('text')" style="border: 2px solid #e9ecef; border-radius: 10px; padding: 20px; cursor: pointer; transition: all 0.3s; text-align: center;" id="assist-text">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, #17a2b8, #6f42c1); color: white; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; margin: 0 auto 15px;">
                                    <i class="fas fa-comments"></i>
                                </div>
                                <div style="font-weight: 600; color: #333; margin-bottom: 8px; font-size: 1.1rem;">文字协助</div>
                                <div style="color: #6c757d; font-size: 0.9rem; margin-bottom: 10px;">文字交流，详细记录</div>
                                <div style="color: #667eea; font-weight: bold; font-size: 1.2rem;">¥100/小时</div>
                            </div>
                        </div>
                    </div>

                    <!-- 问题详情 -->
                    <div style="background: white; border-radius: 12px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 25px;">
                        <h3 style="color: #333; margin-bottom: 20px; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-edit" style="color: #667eea;"></i>
                            描述您的问题
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px;">
                            <div>
                                <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">设备类型 <span style="color: #dc3545;">*</span></label>
                                <select style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                                    <option value="">请选择设备类型</option>
                                    <option value="compressor">空压机系统</option>
                                    <option value="cooling">制冷设备</option>
                                    <option value="boiler">工业锅炉</option>
                                    <option value="automation">电气自动化</option>
                                    <option value="mechanical">机械传动</option>
                                    <option value="hydraulic">液压系统</option>
                                    <option value="environmental">环保设备</option>
                                    <option value="other">其他设备</option>
                                </select>
                            </div>
                            <div>
                                <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">设备型号</label>
                                <input type="text" placeholder="请输入设备型号" style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                            </div>
                        </div>
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">问题描述 <span style="color: #dc3545;">*</span></label>
                            <textarea placeholder="请详细描述您遇到的问题，包括故障现象、发生时间、可能原因等" style="width: 100%; padding: 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem; min-height: 100px; resize: vertical; line-height: 1.6;"></textarea>
                        </div>
                        <div>
                            <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">相关文件</label>
                            <div style="border: 2px dashed #e0e3ea; border-radius: 8px; padding: 30px; text-align: center; cursor: pointer; transition: border-color 0.3s;">
                                <i class="fas fa-cloud-upload-alt" style="font-size: 2rem; color: #6c757d; margin-bottom: 10px;"></i>
                                <div style="color: #6c757d; margin-bottom: 5px;">点击上传或拖拽文件至此</div>
                                <div style="font-size: 0.85rem; color: #999;">支持图片、视频、文档等格式，单个文件不超过20M</div>
                            </div>
                        </div>
                    </div>

                    <!-- 紧急程度 -->
                    <div style="background: white; border-radius: 12px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 25px;">
                        <h3 style="color: #333; margin-bottom: 20px; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-exclamation-triangle" style="color: #667eea;"></i>
                            紧急程度
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <div onclick="selectUrgency('urgent')" style="border: 2px solid #e9ecef; border-radius: 8px; padding: 15px; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; gap: 12px;" id="urgency-urgent">
                                <div style="width: 20px; height: 20px; border: 2px solid #e0e3ea; border-radius: 50%; position: relative; transition: all 0.3s;"></div>
                                <div>
                                    <div style="font-weight: 600; color: #dc3545; margin-bottom: 2px;">紧急</div>
                                    <div style="font-size: 0.85rem; color: #6c757d;">生产停滞，急需解决</div>
                                </div>
                            </div>
                            <div onclick="selectUrgency('normal')" style="border: 2px solid #e9ecef; border-radius: 8px; padding: 15px; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; gap: 12px;" id="urgency-normal">
                                <div style="width: 20px; height: 20px; border: 2px solid #e0e3ea; border-radius: 50%; position: relative; transition: all 0.3s;"></div>
                                <div>
                                    <div style="font-weight: 600; color: #ffc107; margin-bottom: 2px;">一般</div>
                                    <div style="font-size: 0.85rem; color: #6c757d;">有一定影响，尽快处理</div>
                                </div>
                            </div>
                            <div onclick="selectUrgency('low')" style="border: 2px solid #e9ecef; border-radius: 8px; padding: 15px; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; gap: 12px;" id="urgency-low">
                                <div style="width: 20px; height: 20px; border: 2px solid #e0e3ea; border-radius: 50%; position: relative; transition: all 0.3s;"></div>
                                <div>
                                    <div style="font-weight: 600; color: #28a745; margin-bottom: 2px;">不紧急</div>
                                    <div style="font-size: 0.85rem; color: #6c757d;">预防性咨询，不影响运行</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 专家推荐 -->
                    <div style="background: white; border-radius: 12px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 25px;">
                        <h3 style="color: #333; margin-bottom: 20px; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-user-tie" style="color: #667eea;"></i>
                            推荐专家
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                            <div onclick="selectExpert('expert1')" style="border: 2px solid #e9ecef; border-radius: 10px; padding: 20px; cursor: pointer; transition: all 0.3s;" id="expert-expert1">
                                <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                    <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #667eea, #764ba2); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem; font-weight: bold;">张</div>
                                    <div style="flex: 1;">
                                        <div style="font-weight: 600; color: #333; margin-bottom: 4px;">张工程师</div>
                                        <div style="color: #6c757d; font-size: 0.9rem;">高级机械工程师</div>
                                        <div style="display: flex; align-items: center; gap: 5px; color: #ffc107; font-size: 0.9rem; margin-top: 2px;">
                                            <span>★★★★★</span>
                                            <span style="color: #6c757d;">4.9分</span>
                                        </div>
                                    </div>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 0.85rem; color: #6c757d;">
                                    <span>经验: 12年</span>
                                    <span>服务: 286次</span>
                                </div>
                                <div style="display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 15px;">
                                    <span style="padding: 3px 8px; background: #e9ecef; border-radius: 12px; font-size: 0.75rem; color: #6c757d;">空压机</span>
                                    <span style="padding: 3px 8px; background: #e9ecef; border-radius: 12px; font-size: 0.75rem; color: #6c757d;">机械维修</span>
                                    <span style="padding: 3px 8px; background: #e9ecef; border-radius: 12px; font-size: 0.75rem; color: #6c757d;">故障诊断</span>
                                </div>
                                <div style="text-align: center; padding-top: 15px; border-top: 1px solid #f0f0f0;">
                                    <div style="color: #667eea; font-weight: bold; font-size: 1.1rem;">视频：¥200/小时</div>
                                    <div style="color: #6c757d; font-size: 0.85rem;">语音：¥150/小时</div>
                                </div>
                            </div>
                            <div onclick="selectExpert('expert2')" style="border: 2px solid #e9ecef; border-radius: 10px; padding: 20px; cursor: pointer; transition: all 0.3s;" id="expert-expert2">
                                <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                    <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #28a745, #20c997); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem; font-weight: bold;">李</div>
                                    <div style="flex: 1;">
                                        <div style="font-weight: 600; color: #333; margin-bottom: 4px;">李专家</div>
                                        <div style="color: #6c757d; font-size: 0.9rem;">资深设备维护专家</div>
                                        <div style="display: flex; align-items: center; gap: 5px; color: #ffc107; font-size: 0.9rem; margin-top: 2px;">
                                            <span>★★★★★</span>
                                            <span style="color: #6c757d;">4.8分</span>
                                        </div>
                                    </div>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 0.85rem; color: #6c757d;">
                                    <span>经验: 15年</span>
                                    <span>服务: 352次</span>
                                </div>
                                <div style="display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 15px;">
                                    <span style="padding: 3px 8px; background: #e9ecef; border-radius: 12px; font-size: 0.75rem; color: #6c757d;">制冷设备</span>
                                    <span style="padding: 3px 8px; background: #e9ecef; border-radius: 12px; font-size: 0.75rem; color: #6c757d;">系统优化</span>
                                    <span style="padding: 3px 8px; background: #e9ecef; border-radius: 12px; font-size: 0.75rem; color: #6c757d;">能效分析</span>
                                </div>
                                <div style="text-align: center; padding-top: 15px; border-top: 1px solid #f0f0f0;">
                                    <div style="color: #667eea; font-weight: bold; font-size: 1.1rem;">视频：¥220/小时</div>
                                    <div style="color: #6c757d; font-size: 0.85rem;">语音：¥160/小时</div>
                                </div>
                            </div>
                            <div onclick="selectExpert('expert3')" style="border: 2px solid #e9ecef; border-radius: 10px; padding: 20px; cursor: pointer; transition: all 0.3s;" id="expert-expert3">
                                <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                    <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #17a2b8, #6f42c1); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem; font-weight: bold;">王</div>
                                    <div style="flex: 1;">
                                        <div style="font-weight: 600; color: #333; margin-bottom: 4px;">王技师</div>
                                        <div style="color: #6c757d; font-size: 0.9rem;">电气自动化专家</div>
                                        <div style="display: flex; align-items: center; gap: 5px; color: #ffc107; font-size: 0.9rem; margin-top: 2px;">
                                            <span>★★★★☆</span>
                                            <span style="color: #6c757d;">4.7分</span>
                                        </div>
                                    </div>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 0.85rem; color: #6c757d;">
                                    <span>经验: 10年</span>
                                    <span>服务: 198次</span>
                                </div>
                                <div style="display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 15px;">
                                    <span style="padding: 3px 8px; background: #e9ecef; border-radius: 12px; font-size: 0.75rem; color: #6c757d;">PLC编程</span>
                                    <span style="padding: 3px 8px; background: #e9ecef; border-radius: 12px; font-size: 0.75rem; color: #6c757d;">变频器</span>
                                    <span style="padding: 3px 8px; background: #e9ecef; border-radius: 12px; font-size: 0.75rem; color: #6c757d;">控制系统</span>
                                </div>
                                <div style="text-align: center; padding-top: 15px; border-top: 1px solid #f0f0f0;">
                                    <div style="color: #667eea; font-weight: bold; font-size: 1.1rem;">视频：¥180/小时</div>
                                    <div style="color: #6c757d; font-size: 0.85rem;">语音：¥130/小时</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 联系信息 -->
                    <div style="background: white; border-radius: 12px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 25px;">
                        <h3 style="color: #333; margin-bottom: 20px; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-phone" style="color: #667eea;"></i>
                            联系信息
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                            <div>
                                <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">联系人 <span style="color: #dc3545;">*</span></label>
                                <input type="text" placeholder="请输入联系人姓名" style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                            </div>
                            <div>
                                <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">联系电话 <span style="color: #dc3545;">*</span></label>
                                <input type="tel" placeholder="请输入联系电话" style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                            </div>
                            <div>
                                <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">设备地址</label>
                                <input type="text" placeholder="请输入设备所在地址" style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                            </div>
                            <div>
                                <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">期望时间</label>
                                <input type="datetime-local" style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                            </div>
                        </div>
                    </div>

                    <!-- 提交按钮 -->
                    <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
                        <button onclick="submitAssistRequest()" style="display: flex; align-items: center; gap: 8px; padding: 12px 30px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: 500; transition: all 0.3s;">
                            <i class="fas fa-paper-plane"></i>
                            发起协助申请
                        </button>
                        <button style="display: flex; align-items: center; gap: 8px; padding: 12px 30px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: 500;">
                            <i class="fas fa-save"></i>
                            保存草稿
                        </button>
                    </div>

                    <script>
                        let selectedAssistType = '';
                        let selectedUrgency = '';
                        let selectedExpert = '';

                        function selectAssistType(type) {
                            // 重置所有选项
                            document.querySelectorAll('[id^="assist-"]').forEach(el => {
                                el.style.borderColor = '#e9ecef';
                                el.style.background = 'white';
                            });
                            
                            // 设置选中样式
                            const selected = document.getElementById('assist-' + type);
                            selected.style.borderColor = '#667eea';
                            selected.style.background = '#f0f4ff';
                            
                            selectedAssistType = type;
                        }

                        function selectUrgency(urgency) {
                            // 重置所有选项
                            document.querySelectorAll('[id^="urgency-"]').forEach(el => {
                                el.style.borderColor = '#e9ecef';
                                el.style.background = 'white';
                                const radio = el.querySelector('div');
                                radio.style.background = 'transparent';
                                radio.style.borderColor = '#e0e3ea';
                            });
                            
                            // 设置选中样式
                            const selected = document.getElementById('urgency-' + urgency);
                            selected.style.borderColor = '#667eea';
                            selected.style.background = '#f0f4ff';
                            const radio = selected.querySelector('div');
                            radio.style.background = '#667eea';
                            radio.style.borderColor = '#667eea';
                            
                            selectedUrgency = urgency;
                        }

                        function selectExpert(expert) {
                            // 重置所有选项
                            document.querySelectorAll('[id^="expert-"]').forEach(el => {
                                el.style.borderColor = '#e9ecef';
                                el.style.background = 'white';
                            });
                            
                            // 设置选中样式
                            const selected = document.getElementById('expert-' + expert);
                            selected.style.borderColor = '#667eea';
                            selected.style.background = '#f0f4ff';
                            
                            selectedExpert = expert;
                        }

                        function submitAssistRequest() {
                            if (!selectedAssistType) {
                                alert('请选择协助方式');
                                return;
                            }
                            if (!selectedExpert) {
                                alert('请选择专家');
                                return;
                            }
                            
                            // 这里可以添加实际的提交逻辑
                            alert('协助申请已提交！专家将在5分钟内联系您。');
                        }

                        // 初始化默认选择
                        document.addEventListener('DOMContentLoaded', function() {
                            selectAssistType('video');
                            selectUrgency('normal');
                            selectExpert('expert1');
                        });
                    </script>
                </div>
                <div class="main-content" id="page-assist-order" style="display:none">
                    <div class="page-header">
                        <div class="header-left">
                            <h1><i class="fas fa-hands-helping"></i> 协助工单管理</h1>
                            <p class="page-desc">接收和处理协助请求，提供专业技术支持</p>
                        </div>
                    </div>

                    <!-- 统计卡片 -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 25px;">
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">总协助数</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-hands-helping"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">48</div>
                            <div style="font-size: 0.8rem; color: #28a745; margin-top: 8px;">
                                <i class="fas fa-arrow-up"></i> +8 本月
                            </div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">待接单</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #ffc107, #fd7e14); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-clock"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">5</div>
                            <div style="font-size: 0.8rem; color: #dc3545; margin-top: 8px;">
                                <i class="fas fa-exclamation-triangle"></i> 需及时处理
                            </div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">进行中</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #17a2b8, #20c997); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-spinner"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">3</div>
                            <div style="font-size: 0.8rem; color: #17a2b8; margin-top: 8px;">
                                <i class="fas fa-play"></i> 正在协助
                            </div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">本月收入</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #28a745, #20c997); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-dollar-sign"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">¥3,680</div>
                            <div style="font-size: 0.8rem; color: #28a745; margin-top: 8px;">
                                <i class="fas fa-arrow-up"></i> +15.2% 较上月
                            </div>
                        </div>
                    </div>

                    <!-- 筛选区域 -->
                    <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 20px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 15px;">
                            <div>
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">协助状态</label>
                                <select style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                            <option>全部状态</option>
                            <option>待接单</option>
                                    <option>协助中</option>
                            <option>已完成</option>
                            <option>已取消</option>
                        </select>
                    </div>
                            <div>
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">协助类型</label>
                                <select style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                                    <option>全部类型</option>
                                    <option>视频协助</option>
                                    <option>语音协助</option>
                                    <option>文字协助</option>
                                    <option>远程协助</option>
                                </select>
                            </div>
                            <div>
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">紧急程度</label>
                                <select style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                                    <option>全部级别</option>
                                    <option>紧急</option>
                                    <option>一般</option>
                                    <option>不紧急</option>
                                </select>
                            </div>
                        </div>
                        <div style="display: flex; gap: 10px; align-items: end;">
                            <div style="flex: 1;">
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">协助编号</label>
                                <input type="text" placeholder="请输入协助编号..." style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                            </div>
                            <button style="padding: 8px 20px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">
                                <i class="fas fa-search"></i> 搜索
                            </button>
                        </div>
                    </div>

                    <!-- 协助工单列表 -->
                    <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="color: #333; font-size: 1.2rem; display: flex; align-items: center; gap: 10px; margin: 0;">
                                <i class="fas fa-list" style="color: #667eea;"></i>
                                协助工单列表
                            </h3>
                            <button style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                                <i class="fas fa-download"></i>
                                导出数据
                            </button>
                        </div>
                        <table style="width: 100%; border-collapse: collapse; table-layout: fixed;">
                        <thead>
                                <tr style="border-bottom: 2px solid #f0f0f0;">
                                    <th style="padding: 10px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 12%;">协助编号</th>
                                    <th style="padding: 10px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 18%;">协助标题</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 12%;">协助类型</th>
                                    <th style="padding: 10px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 12%;">发起人</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 8%;">紧急度</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 8%;">价格</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 10%;">状态</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 12%;">创建时间</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 8%;">操作</th>
                            </tr>
                        </thead>
                        <tbody>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <span style="color: #667eea; font-weight: 500; font-size: 0.85rem;">#AS20240601001</span>
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <div style="font-weight: 500; color: #333; font-size: 0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">空压机异响问题诊断</div>
                                        <div style="font-size: 0.75rem; color: #6c757d; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">螺杆式空压机启动异响</div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #e3f2fd; color: #1976d2; white-space: nowrap;">视频协助</span>
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <div style="font-weight: 500; color: #333; font-size: 0.85rem;">张工程师</div>
                                        <div style="font-size: 0.75rem; color: #6c757d;">北京机械厂</div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #ffe6e6; color: #d63384; white-space: nowrap;">紧急</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="color: #28a745; font-weight: 600; font-size: 0.85rem;">¥200</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #fff3cd; color: #856404; white-space: nowrap;">待接单</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="font-size: 0.8rem; color: #6c757d; white-space: nowrap;">06-01<br/>10:30</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="display: flex; gap: 3px; flex-direction: column;">
                                            <button style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: none; background: #667eea; color: white; cursor: pointer; white-space: nowrap;" onclick="showAssistOrderAction('accept', 'AS20240601001')">接单</button>
                                            <button style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer; white-space: nowrap;" onclick="showAssistOrderDetail('AS20240601001')">详情</button>
                                        </div>
                                </td>
                            </tr>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <span style="color: #667eea; font-weight: 500; font-size: 0.85rem;">#AS20240531008</span>
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <div style="font-weight: 500; color: #333; font-size: 0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">制冷系统调试指导</div>
                                        <div style="font-size: 0.75rem; color: #6c757d; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">离心式制冷机组参数调整</div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #f3e5f5; color: #7b1fa2; white-space: nowrap;">语音协助</span>
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <div style="font-weight: 500; color: #333; font-size: 0.85rem;">李技术员</div>
                                        <div style="font-size: 0.75rem; color: #6c757d;">上海化工</div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #ffeaa7; color: #d68910; white-space: nowrap;">一般</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="color: #28a745; font-weight: 600; font-size: 0.85rem;">¥150</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #d1ecf1; color: #0c5460; white-space: nowrap;">进行中</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="font-size: 0.8rem; color: #6c757d; white-space: nowrap;">05-31<br/>14:20</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="display: flex; gap: 3px; flex-direction: column;">
                                            <button style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: none; background: #17a2b8; color: white; cursor: pointer; white-space: nowrap;" onclick="showAssistOrderAction('complete', 'AS20240531008')">完成</button>
                                            <button style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer; white-space: nowrap;" onclick="showAssistOrderDetail('AS20240531008')">详情</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <span style="color: #667eea; font-weight: 500; font-size: 0.85rem;">#AS20240530015</span>
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <div style="font-weight: 500; color: #333; font-size: 0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">PLC程序优化协助</div>
                                        <div style="font-size: 0.75rem; color: #6c757d; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">西门子S7-1200程序调试</div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #e8f5e8; color: #2e7d32; white-space: nowrap;">远程协助</span>
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <div style="font-weight: 500; color: #333; font-size: 0.85rem;">王程序员</div>
                                        <div style="font-size: 0.75rem; color: #6c757d;">广州电子</div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #e8f5e8; color: #2e7d32; white-space: nowrap;">不紧急</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="color: #28a745; font-weight: 600; font-size: 0.85rem;">¥300</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #d4edda; color: #155724; white-space: nowrap;">已完成</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="font-size: 0.8rem; color: #6c757d; white-space: nowrap;">05-30<br/>16:45</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="display: flex; gap: 3px; flex-direction: column;">
                                            <button style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: none; background: #28a745; color: white; cursor: pointer; white-space: nowrap;" onclick="showAssistOrderAction('evaluate', 'AS20240530015')">评价</button>
                                            <button style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer; white-space: nowrap;" onclick="showAssistOrderDetail('AS20240530015')">详情</button>
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                        
                        <!-- 分页 -->
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid #f0f0f0;">
                            <div style="color: #6c757d; font-size: 0.9rem;" id="assistOrderPaginationInfo">
                                共 <span style="color: #333; font-weight: 500;" id="assistOrderTotalRecords">48</span> 条记录，第 <span style="color: #333; font-weight: 500;" id="assistOrderCurrentPage">1</span> 页，共 <span style="color: #333; font-weight: 500;" id="assistOrderTotalPages">5</span> 页
                </div>
                            <div style="display: flex; gap: 5px;" id="assistOrderPagination">
                                <button style="padding: 6px 12px; border: 1px solid #e0e3ea; background: #f8f9fa; color: #6c757d; border-radius: 6px; cursor: not-allowed; font-size: 0.85rem;" onclick="assistOrderPrevPage()" disabled>
                                    <i class="fas fa-chevron-left"></i> 上一页
                                </button>
                                <button style="padding: 6px 12px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.85rem;" onclick="assistOrderGoToPage(1)">1</button>
                                <button style="padding: 6px 12px; border: 1px solid #e0e3ea; background: white; color: #6c757d; border-radius: 6px; cursor: pointer; font-size: 0.85rem;" onclick="assistOrderGoToPage(2)">2</button>
                                <button style="padding: 6px 12px; border: 1px solid #e0e3ea; background: white; color: #6c757d; border-radius: 6px; cursor: pointer; font-size: 0.85rem;" onclick="assistOrderGoToPage(3)">3</button>
                                <span style="padding: 6px 8px; color: #6c757d; font-size: 0.85rem;">...</span>
                                <button style="padding: 6px 12px; border: 1px solid #e0e3ea; background: white; color: #6c757d; border-radius: 6px; cursor: pointer; font-size: 0.85rem;" onclick="assistOrderGoToPage(5)">5</button>
                                <button style="padding: 6px 12px; border: 1px solid #e0e3ea; background: white; color: #667eea; border-radius: 6px; cursor: pointer; font-size: 0.85rem;" onclick="assistOrderNextPage()">
                                    下一页 <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="main-content" id="page-assist-record" style="display:none">
                    <div class="page-header">
                        <div class="header-left">
                            <h1><i class="fas fa-history"></i> 协助记录管理</h1>
                            <p class="page-desc">查看历史协助记录，统计协助成果与收益</p>
                        </div>
                    </div>

                    <!-- 统计卡片 -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 25px;">
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">累计协助</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #28a745, #20c997); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">156</div>
                            <div style="font-size: 0.8rem; color: #28a745; margin-top: 8px;">
                                <i class="fas fa-arrow-up"></i> +12 本月
                            </div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">平均评分</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #ffc107, #fd7e14); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-star"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">4.8</div>
                            <div style="font-size: 0.8rem; color: #ffc107; margin-top: 8px;">
                                <i class="fas fa-star"></i> 优秀评价
                            </div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">累计收入</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-coins"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">¥28,560</div>
                            <div style="font-size: 0.8rem; color: #28a745; margin-top: 8px;">
                                <i class="fas fa-arrow-up"></i> +18.5% 较上月
                            </div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">响应时间</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #17a2b8, #20c997); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-clock"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">8分钟</div>
                            <div style="font-size: 0.8rem; color: #17a2b8; margin-top: 8px;">
                                <i class="fas fa-bolt"></i> 快速响应
                            </div>
                        </div>
                    </div>

                    <!-- 筛选区域 -->
                    <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 20px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 15px;">
                            <div>
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">协助类型</label>
                                <select style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                                    <option>全部类型</option>
                                    <option>视频协助</option>
                                    <option>语音协助</option>
                                    <option>文字协助</option>
                                    <option>远程协助</option>
                        </select>
                    </div>
                            <div>
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">评分筛选</label>
                                <select style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                                    <option>全部评分</option>
                                    <option>5星</option>
                                    <option>4星及以上</option>
                                    <option>3星及以上</option>
                                    <option>2星及以下</option>
                                </select>
                            </div>
                            <div>
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">时间范围</label>
                                <select style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                                    <option>全部时间</option>
                                    <option>今天</option>
                                    <option>本周</option>
                                    <option>本月</option>
                                    <option>近3个月</option>
                                </select>
                            </div>
                        </div>
                        <div style="display: flex; gap: 10px; align-items: end;">
                            <div style="flex: 1;">
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">关键词搜索</label>
                                <input type="text" placeholder="协助标题、设备名称、协助对象..." style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                            </div>
                            <button style="padding: 8px 20px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">
                                <i class="fas fa-search"></i> 搜索
                            </button>
                        </div>
                    </div>

                    <!-- 协助记录列表 -->
                    <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="color: #333; font-size: 1.2rem; display: flex; align-items: center; gap: 10px; margin: 0;">
                                <i class="fas fa-history" style="color: #667eea;"></i>
                                协助记录列表
                            </h3>
                            <div style="display: flex; gap: 10px;">
                                <button style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                                    <i class="fas fa-chart-bar"></i>
                                    统计报表
                                </button>
                                <button style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                                    <i class="fas fa-download"></i>
                                    导出数据
                                </button>
                            </div>
                        </div>
                        <table style="width: 100%; border-collapse: collapse; table-layout: fixed;">
                        <thead>
                                <tr style="border-bottom: 2px solid #f0f0f0;">
                                    <th style="padding: 10px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 12%;">协助编号</th>
                                    <th style="padding: 10px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 18%;">协助标题</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 12%;">协助类型</th>
                                    <th style="padding: 10px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 12%;">协助对象</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 8%;">收入</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 8%;">评分</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 10%;">协助时长</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 12%;">完成时间</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 8%;">操作</th>
                            </tr>
                        </thead>
                        <tbody>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <span style="color: #667eea; font-weight: 500; font-size: 0.85rem;">#AS20240530015</span>
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <div style="font-weight: 500; color: #333; font-size: 0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">PLC程序优化协助</div>
                                        <div style="font-size: 0.75rem; color: #6c757d; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">西门子S7-1200程序调试</div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #e8f5e8; color: #2e7d32; white-space: nowrap;">远程协助</span>
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <div style="font-weight: 500; color: #333; font-size: 0.85rem;">王程序员</div>
                                        <div style="font-size: 0.75rem; color: #6c757d;">广州电子有限公司</div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="color: #28a745; font-weight: 600; font-size: 0.85rem;">¥300</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="color: #ffc107; font-size: 0.9rem;">★★★★★</div>
                                        <div style="font-size: 0.7rem; color: #6c757d;">5.0分</div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="font-weight: 500; color: #333; font-size: 0.85rem;">2小时15分</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="font-size: 0.8rem; color: #6c757d; white-space: nowrap;">05-30<br/>16:45</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="display: flex; gap: 3px; flex-direction: column;">
                                            <button onclick="showAssistDetail('AS20240530015')" style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: none; background: #667eea; color: white; cursor: pointer; white-space: nowrap;">详情</button>
                                            <button onclick="showAssistReport('AS20240530015')" style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer; white-space: nowrap;">报告</button>
                                        </div>
                                </td>
                            </tr>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <span style="color: #667eea; font-weight: 500; font-size: 0.85rem;">#AS20240529022</span>
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <div style="font-weight: 500; color: #333; font-size: 0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">变频器参数设置协助</div>
                                        <div style="font-size: 0.75rem; color: #6c757d; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">ABB变频器调试参数优化</div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #e3f2fd; color: #1976d2; white-space: nowrap;">视频协助</span>
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <div style="font-weight: 500; color: #333; font-size: 0.85rem;">赵技术员</div>
                                        <div style="font-size: 0.75rem; color: #6c757d;">深圳制造科技</div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="color: #28a745; font-weight: 600; font-size: 0.85rem;">¥180</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="color: #ffc107; font-size: 0.9rem;">★★★★☆</div>
                                        <div style="font-size: 0.7rem; color: #6c757d;">4.5分</div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="font-weight: 500; color: #333; font-size: 0.85rem;">1小时30分</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="font-size: 0.8rem; color: #6c757d; white-space: nowrap;">05-29<br/>14:20</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="display: flex; gap: 3px; flex-direction: column;">
                                            <button onclick="showAssistDetail('AS20240529022')" style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: none; background: #667eea; color: white; cursor: pointer; white-space: nowrap;">详情</button>
                                            <button onclick="showAssistReport('AS20240529022')" style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer; white-space: nowrap;">报告</button>
                                        </div>
                                </td>
                            </tr>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <span style="color: #667eea; font-weight: 500; font-size: 0.85rem;">#AS20240528033</span>
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <div style="font-weight: 500; color: #333; font-size: 0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">设备安装指导协助</div>
                                        <div style="font-size: 0.75rem; color: #6c757d; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">中央空调新风系统安装</div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #f3e5f5; color: #7b1fa2; white-space: nowrap;">语音协助</span>
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <div style="font-weight: 500; color: #333; font-size: 0.85rem;">刘安装工</div>
                                        <div style="font-size: 0.75rem; color: #6c757d;">杭州建筑工程</div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="color: #28a745; font-weight: 600; font-size: 0.85rem;">¥250</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="color: #ffc107; font-size: 0.9rem;">★★★★★</div>
                                        <div style="font-size: 0.7rem; color: #6c757d;">5.0分</div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="font-weight: 500; color: #333; font-size: 0.85rem;">3小时20分</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="font-size: 0.8rem; color: #6c757d; white-space: nowrap;">05-28<br/>11:45</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="display: flex; gap: 3px; flex-direction: column;">
                                            <button onclick="showAssistDetail('AS20240528033')" style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: none; background: #667eea; color: white; cursor: pointer; white-space: nowrap;">详情</button>
                                            <button onclick="showAssistReport('AS20240528033')" style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer; white-space: nowrap;">报告</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <span style="color: #667eea; font-weight: 500; font-size: 0.85rem;">#AS20240527044</span>
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <div style="font-weight: 500; color: #333; font-size: 0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">数控机床故障诊断</div>
                                        <div style="font-size: 0.75rem; color: #6c757d; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">FANUC系统报警处理</div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #e8f5e8; color: #2e7d32; white-space: nowrap;">远程协助</span>
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <div style="font-weight: 500; color: #333; font-size: 0.85rem;">陈师傅</div>
                                        <div style="font-size: 0.75rem; color: #6c757d;">苏州精密机械</div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="color: #28a745; font-weight: 600; font-size: 0.85rem;">¥400</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="color: #ffc107; font-size: 0.9rem;">★★★★☆</div>
                                        <div style="font-size: 0.7rem; color: #6c757d;">4.8分</div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="font-weight: 500; color: #333; font-size: 0.85rem;">1小时45分</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="font-size: 0.8rem; color: #6c757d; white-space: nowrap;">05-27<br/>16:30</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="display: flex; gap: 3px; flex-direction: column;">
                                            <button onclick="showAssistDetail('AS20240527044')" style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: none; background: #667eea; color: white; cursor: pointer; white-space: nowrap;">详情</button>
                                            <button onclick="showAssistReport('AS20240527044')" style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer; white-space: nowrap;">报告</button>
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                        
                        <!-- 分页 -->
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid #f0f0f0;">
                            <div style="color: #6c757d; font-size: 0.9rem;">
                                共 <span style="color: #333; font-weight: 500;">156</span> 条记录，第 <span style="color: #333; font-weight: 500;">1</span> 页，共 <span style="color: #333; font-weight: 500;">16</span> 页
                </div>
                            <div style="display: flex; gap: 5px;">
                                <button onclick="assistRecordPrevPage()" style="padding: 6px 12px; border: 1px solid #e0e3ea; background: #f8f9fa; color: #6c757d; border-radius: 6px; cursor: not-allowed; font-size: 0.85rem;" disabled>
                                    <i class="fas fa-chevron-left"></i> 上一页
                                </button>
                                <button onclick="assistRecordGoToPage(1)" style="padding: 6px 12px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">1</button>
                                <button onclick="assistRecordGoToPage(2)" style="padding: 6px 12px; border: 1px solid #e0e3ea; background: white; color: #6c757d; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">2</button>
                                <button onclick="assistRecordGoToPage(3)" style="padding: 6px 12px; border: 1px solid #e0e3ea; background: white; color: #6c757d; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">3</button>
                                <span style="padding: 6px 8px; color: #6c757d; font-size: 0.85rem;">...</span>
                                <button onclick="assistRecordGoToPage(16)" style="padding: 6px 12px; border: 1px solid #e0e3ea; background: white; color: #6c757d; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">16</button>
                                <button onclick="assistRecordNextPage()" style="padding: 6px 12px; border: 1px solid #e0e3ea; background: white; color: #667eea; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                                    下一页 <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="main-content" id="page-knowledge" style="display:none">
                    <div class="page-header">
                        <div class="header-left">
                            <h1><i class="fas fa-book"></i> 知识库管理</h1>
                            <p class="page-desc">管理技术文档、操作规范和知识分类，构建专业知识体系</p>
                        </div>
                    </div>

                    <!-- 统计卡片 -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; margin-bottom: 25px;">
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">我的文档</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-file-alt"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">42</div>
                            <div style="font-size: 0.8rem; color: #28a745; margin-top: 8px;">
                                <i class="fas fa-arrow-up"></i> +3 本月
                            </div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">公开文档</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #28a745, #20c997); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-globe"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">28</div>
                            <div style="font-size: 0.8rem; color: #17a2b8; margin-top: 8px;">
                                <i class="fas fa-share-alt"></i> 66.7% 公开率
                            </div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">获得积分</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #ffc107, #fd7e14); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-coins"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">1,456</div>
                            <div style="font-size: 0.8rem; color: #28a745; margin-top: 8px;">
                                <i class="fas fa-arrow-up"></i> +126 本月
                            </div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">累计收益</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #17a2b8, #20c997); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-yen-sign"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">¥145.6</div>
                            <div style="font-size: 0.8rem; color: #28a745; margin-top: 8px;">
                                <i class="fas fa-arrow-up"></i> +¥12.6 本月
                            </div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">可提现余额</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #e83e8c, #fd7e14); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-wallet"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">¥89.2</div>
                            <div style="font-size: 0.8rem; color: #dc3545; margin-top: 8px; cursor: pointer;" onclick="showWithdrawModal()">
                                <i class="fas fa-hand-holding-usd"></i> 立即提现
                            </div>
                        </div>
                    </div>

                    <!-- 积分收益说明 -->
                    <div style="background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 10px; padding: 20px; margin-bottom: 20px; color: white;">
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                            <div style="width: 50px; height: 50px; background: rgba(255,255,255,0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-star" style="font-size: 1.5rem;"></i>
                            </div>
                            <div>
                                <h3 style="margin: 0 0 5px 0; font-size: 1.3rem;">知识共享积分规则</h3>
                                <p style="margin: 0; opacity: 0.9; font-size: 0.9rem;">公开文档需平台审核通过后才能获得积分奖励</p>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <div style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 15px; text-align: center;">
                                <div style="font-size: 1.2rem; font-weight: bold; margin-bottom: 5px;">+2积分</div>
                                <div style="font-size: 0.85rem; opacity: 0.9;">每次文档被浏览</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 15px; text-align: center;">
                                <div style="font-size: 1.2rem; font-weight: bold; margin-bottom: 5px;">+5积分</div>
                                <div style="font-size: 0.85rem; opacity: 0.9;">每次文档被下载</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 15px; text-align: center;">
                                <div style="font-size: 1.2rem; font-weight: bold; margin-bottom: 5px;">+10积分</div>
                                <div style="font-size: 0.85rem; opacity: 0.9;">每次文档被收藏</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 15px; text-align: center;">
                                <div style="font-size: 1.2rem; font-weight: bold; margin-bottom: 5px;">10积分=¥0.1</div>
                                <div style="font-size: 0.85rem; opacity: 0.9;">积分兑换比例</div>
                            </div>
                        </div>
                    </div>

                    <!-- 知识分类管理 -->
                    <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="color: #333; font-size: 1.2rem; display: flex; align-items: center; gap: 10px; margin: 0;">
                                <i class="fas fa-layer-group" style="color: #667eea;"></i>
                                知识分类管理
                            </h3>
                            <button style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.85rem;" onclick="showNewCategoryModal()">
                                <i class="fas fa-plus"></i>
                                新增分类
                            </button>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                            <div style="border: 1px solid #e0e3ea; border-radius: 8px; padding: 15px; background: #f8f9fa;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                    <h4 style="color: #333; font-size: 1rem; margin: 0; display: flex; align-items: center; gap: 8px;">
                                        <i class="fas fa-tools" style="color: #667eea;"></i>
                                        设备维修
                                    </h4>
                                    <div style="display: flex; gap: 5px;">
                                        <button style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #667eea; background: white; color: #667eea; cursor: pointer;" onclick="editCategory('设备维修')">编辑</button>
                                        <button style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #dc3545; background: white; color: #dc3545; cursor: pointer;" onclick="deleteCategory('设备维修')">删除</button>
                                    </div>
                                </div>
                                <p style="color: #6c757d; font-size: 0.85rem; margin: 0 0 10px 0;">设备故障诊断、维修方法、零配件更换等技术文档</p>
                                <div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.8rem; color: #6c757d;">
                                    <span>文档数量: <strong style="color: #333;">45</strong></span>
                                    <span>浏览: <strong style="color: #333;">1,256</strong></span>
                                </div>
                            </div>
                            <div style="border: 1px solid #e0e3ea; border-radius: 8px; padding: 15px; background: #f8f9fa;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                    <h4 style="color: #333; font-size: 1rem; margin: 0; display: flex; align-items: center; gap: 8px;">
                                        <i class="fas fa-calendar-check" style="color: #28a745;"></i>
                                        保养指南
                                    </h4>
                                    <div style="display: flex; gap: 5px;">
                                        <button style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #667eea; background: white; color: #667eea; cursor: pointer;" onclick="editCategory('保养指南')">编辑</button>
                                        <button style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #dc3545; background: white; color: #dc3545; cursor: pointer;" onclick="deleteCategory('保养指南')">删除</button>
                                    </div>
                                </div>
                                <p style="color: #6c757d; font-size: 0.85rem; margin: 0 0 10px 0;">定期保养计划、操作规程、安全注意事项等文档</p>
                                <div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.8rem; color: #6c757d;">
                                    <span>文档数量: <strong style="color: #333;">32</strong></span>
                                    <span>浏览: <strong style="color: #333;">956</strong></span>
                                </div>
                            </div>
                            <div style="border: 1px solid #e0e3ea; border-radius: 8px; padding: 15px; background: #f8f9fa;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                    <h4 style="color: #333; font-size: 1rem; margin: 0; display: flex; align-items: center; gap: 8px;">
                                        <i class="fas fa-search" style="color: #ffc107;"></i>
                                        巡检规范
                                    </h4>
                                    <div style="display: flex; gap: 5px;">
                                        <button style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #667eea; background: white; color: #667eea; cursor: pointer;" onclick="editCategory('巡检规范')">编辑</button>
                                        <button style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #dc3545; background: white; color: #dc3545; cursor: pointer;" onclick="deleteCategory('巡检规范')">删除</button>
                                    </div>
                                </div>
                                <p style="color: #6c757d; font-size: 0.85rem; margin: 0 0 10px 0;">设备巡检标准、检查项目、记录表格等规范文档</p>
                                <div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.8rem; color: #6c757d;">
                                    <span>文档数量: <strong style="color: #333;">28</strong></span>
                                    <span>浏览: <strong style="color: #333;">734</strong></span>
                                </div>
                            </div>
                            <div style="border: 1px solid #e0e3ea; border-radius: 8px; padding: 15px; background: #f8f9fa;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                    <h4 style="color: #333; font-size: 1rem; margin: 0; display: flex; align-items: center; gap: 8px;">
                                        <i class="fas fa-exclamation-triangle" style="color: #dc3545;"></i>
                                        常见故障
                                    </h4>
                                    <div style="display: flex; gap: 5px;">
                                        <button style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #667eea; background: white; color: #667eea; cursor: pointer;" onclick="editCategory('常见故障')">编辑</button>
                                        <button style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #dc3545; background: white; color: #dc3545; cursor: pointer;" onclick="deleteCategory('常见故障')">删除</button>
                                    </div>
                                </div>
                                <p style="color: #6c757d; font-size: 0.85rem; margin: 0 0 10px 0;">设备常见故障现象、原因分析、解决方案等资料</p>
                                <div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.8rem; color: #6c757d;">
                                    <span>文档数量: <strong style="color: #333;">67</strong></span>
                                    <span>浏览: <strong style="color: #333;">2,156</strong></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 筛选区域 -->
                    <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 20px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin-bottom: 15px;">
                            <div>
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">可见性</label>
                                <select style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                                    <option value="">全部文档</option>
                                    <option value="public">公开文档</option>
                                    <option value="private">私有文档</option>
                        </select>
                    </div>
                            <div>
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">审核状态</label>
                                <select style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                                    <option value="">全部状态</option>
                                    <option value="approved">已通过</option>
                                    <option value="pending">审核中</option>
                                    <option value="rejected">未通过</option>
                                    <option value="none">无需审核</option>
                                </select>
                            </div>
                            <div>
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">知识分类</label>
                                <select style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                                    <option>全部分类</option>
                                    <option>设备维修</option>
                                    <option>保养指南</option>
                                    <option>巡检规范</option>
                                    <option>常见故障</option>
                                    <option>安全规程</option>
                                    <option>技术标准</option>
                                    <option>操作手册</option>
                                    <option>培训资料</option>
                                </select>
                            </div>
                            <div>
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">文档类型</label>
                                <select style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                                    <option>全部类型</option>
                                    <option>PDF文档</option>
                                    <option>Word文档</option>
                                    <option>Excel表格</option>
                                    <option>PPT演示</option>
                                    <option>视频文件</option>
                                    <option>图片文件</option>
                                </select>
                            </div>
                            <div>
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">上传时间</label>
                                <select style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                                    <option>全部时间</option>
                                    <option>今天</option>
                                    <option>本周</option>
                                    <option>本月</option>
                                    <option>近3个月</option>
                                    <option>半年内</option>
                                </select>
                            </div>
                        </div>
                        <div style="display: flex; gap: 10px; align-items: end;">
                            <div style="flex: 1;">
                                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">关键词搜索</label>
                                <input type="text" placeholder="文档标题、关键词、内容描述..." style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;" id="knowledgeSearchInput">
                            </div>
                            <button style="padding: 8px 20px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem;" onclick="searchKnowledge()">
                                <i class="fas fa-search"></i> 搜索
                            </button>
                            <button style="padding: 8px 16px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-size: 0.9rem;" onclick="resetSearch()">
                                <i class="fas fa-undo"></i> 重置
                            </button>
                        </div>
                    </div>

                    <!-- 知识文档列表 -->
                    <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="color: #333; font-size: 1.2rem; display: flex; align-items: center; gap: 10px; margin: 0;">
                                <i class="fas fa-file-alt" style="color: #667eea;"></i>
                                知识文档列表
                            </h3>
                            <div style="display: flex; gap: 10px;">
                                <button style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.85rem;" onclick="showPublishKnowledgeModal()">
                                    <i class="fas fa-upload"></i>
                                    上传文档
                                </button>
                                <button style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-size: 0.85rem;" onclick="showBatchExportModal()">
                                    <i class="fas fa-download"></i>
                                    批量下载
                                </button>
                            </div>
                        </div>
                        <table style="width: 100%; border-collapse: collapse; table-layout: fixed;">
                        <thead>
                                <tr style="border-bottom: 2px solid #f0f0f0;">
                                    <th style="padding: 10px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 4%;">
                                        <input type="checkbox" style="transform: scale(1.2);">
                                    </th>
                                    <th style="padding: 10px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 25%;">文档标题</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 8%;">可见性</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 8%;">审核状态</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 9%;">知识分类</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 6%;">类型</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 7%;">浏览/下载</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 7%;">获得积分</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 8%;">上传时间</th>
                                    <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.85rem; width: 22%;">操作</th>
                            </tr>
                        </thead>
                        <tbody>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <input type="checkbox" style="transform: scale(1.1);">
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <i class="fas fa-file-pdf" style="color: #dc3545; font-size: 1.2rem;"></i>
                                            <div>
                                                <div style="font-weight: 500; color: #333; font-size: 0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">螺杆式空压机常见故障诊断与处理方法</div>
                                                <div style="font-size: 0.75rem; color: #6c757d; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">详细介绍各种故障现象、原因分析及解决方案</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #d4edda; color: #155724; white-space: nowrap;">
                                            <i class="fas fa-globe" style="margin-right: 3px;"></i>公开
                                        </span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #d4edda; color: #155724; white-space: nowrap;">
                                            <i class="fas fa-check-circle" style="margin-right: 3px;"></i>已通过
                                        </span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #ffe6e6; color: #dc3545; white-space: nowrap;">常见故障</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #f8d7da; color: #721c24; white-space: nowrap;">PDF</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="font-size: 0.8rem; color: #6c757d;">
                                            <div>156 / 89</div>
                                        </div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="font-size: 0.85rem; color: #ffc107; font-weight: 500;">
                                            <i class="fas fa-coins"></i> 623
                                        </div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="font-size: 0.8rem; color: #6c757d; white-space: nowrap;">06-01<br/>10:30</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="display: flex; gap: 2px; flex-wrap: wrap; justify-content: center;">
                                            <button style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: none; background: #667eea; color: white; cursor: pointer; white-space: nowrap;" onclick="viewDocument('DOC001')">查看</button>
                                            <button style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer; white-space: nowrap;" onclick="editDocument('DOC001')">编辑</button>
                                            <button style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: 1px solid #28a745; background: white; color: #28a745; cursor: pointer; white-space: nowrap;" onclick="toggleVisibility(this, 'public')">设私有</button>
                                            <button style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: 1px solid #dc3545; background: white; color: #dc3545; cursor: pointer; white-space: nowrap;" onclick="deleteDocument('DOC001')">删除</button>
                                        </div>
                                </td>
                            </tr>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <input type="checkbox" style="transform: scale(1.1);">
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <i class="fas fa-file-word" style="color: #2b579a; font-size: 1.2rem;"></i>
                                            <div>
                                                <div style="font-weight: 500; color: #333; font-size: 0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">工业设备年度保养计划与操作规范</div>
                                                <div style="font-size: 0.75rem; color: #6c757d; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">包含设备清单、保养周期、操作步骤等</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #d4edda; color: #155724; white-space: nowrap;">
                                            <i class="fas fa-globe" style="margin-right: 3px;"></i>公开
                                        </span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #fff3cd; color: #856404; white-space: nowrap;">
                                            <i class="fas fa-clock" style="margin-right: 3px;"></i>审核中
                                        </span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #d4edda; color: #155724; white-space: nowrap;">保养指南</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #cce5ff; color: #004085; white-space: nowrap;">DOCX</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="font-size: 0.8rem; color: #6c757d;">
                                            <div>234 / 127</div>
                                        </div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="font-size: 0.85rem; color: #ffc107; font-weight: 500;">
                                            <i class="fas fa-coins"></i> 1,103
                                        </div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="font-size: 0.8rem; color: #6c757d; white-space: nowrap;">05-30<br/>14:20</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="display: flex; gap: 2px; flex-wrap: wrap; justify-content: center;">
                                            <button style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: none; background: #667eea; color: white; cursor: pointer; white-space: nowrap;" onclick="viewDocument('DOC002')">查看</button>
                                            <button style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer; white-space: nowrap;" onclick="editDocument('DOC002')">编辑</button>
                                            <button style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: 1px solid #28a745; background: white; color: #28a745; cursor: pointer; white-space: nowrap;" onclick="toggleVisibility(this, 'public')">设私有</button>
                                            <button style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: 1px solid #dc3545; background: white; color: #dc3545; cursor: pointer; white-space: nowrap;" onclick="deleteDocument('DOC002')">删除</button>
                                        </div>
                                </td>
                            </tr>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <input type="checkbox" style="transform: scale(1.1);">
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <i class="fas fa-file-excel" style="color: #217346; font-size: 1.2rem;"></i>
                                            <div>
                                                <div style="font-weight: 500; color: #333; font-size: 0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">设备巡检记录表格及填写说明</div>
                                                <div style="font-size: 0.75rem; color: #6c757d; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">标准化巡检表格模板和详细填写指导</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #f8d7da; color: #721c24; white-space: nowrap;">
                                            <i class="fas fa-lock" style="margin-right: 3px;"></i>私有
                                        </span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #e9ecef; color: #6c757d; white-space: nowrap;">
                                            <i class="fas fa-minus" style="margin-right: 3px;"></i>无需审核
                                        </span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #fff3cd; color: #856404; white-space: nowrap;">巡检规范</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #d1f2eb; color: #0c5460; white-space: nowrap;">XLSX</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="font-size: 0.8rem; color: #6c757d;">
                                            <div>- / -</div>
                                        </div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="font-size: 0.85rem; color: #6c757d; font-weight: 500;">
                                            <i class="fas fa-coins"></i> 0
                                        </div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="font-size: 0.8rem; color: #6c757d; white-space: nowrap;">05-28<br/>16:45</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="display: flex; gap: 2px; flex-wrap: wrap; justify-content: center;">
                                            <button style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: none; background: #667eea; color: white; cursor: pointer; white-space: nowrap;" onclick="viewDocument('DOC003')">查看</button>
                                            <button style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer; white-space: nowrap;" onclick="editDocument('DOC003')">编辑</button>
                                            <button style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: 1px solid #17a2b8; background: white; color: #17a2b8; cursor: pointer; white-space: nowrap;" onclick="toggleVisibility(this, 'private')">设公开</button>
                                            <button style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: 1px solid #dc3545; background: white; color: #dc3545; cursor: pointer; white-space: nowrap;" onclick="deleteDocument('DOC003')">删除</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <input type="checkbox" style="transform: scale(1.1);">
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <i class="fas fa-file-powerpoint" style="color: #d24726; font-size: 1.2rem;"></i>
                                            <div>
                                                <div style="font-weight: 500; color: #333; font-size: 0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">制冷系统维修技术培训课件</div>
                                                <div style="font-size: 0.75rem; color: #6c757d; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">制冷原理、故障诊断、维修技巧等培训内容</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #d4edda; color: #155724; white-space: nowrap;">
                                            <i class="fas fa-globe" style="margin-right: 3px;"></i>公开
                                        </span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #d4edda; color: #155724; white-space: nowrap;">
                                            <i class="fas fa-check-circle" style="margin-right: 3px;"></i>已通过
                                        </span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #e3f2fd; color: #1976d2; white-space: nowrap;">设备维修</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #ffeaa7; color: #d68910; white-space: nowrap;">PPTX</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="font-size: 0.8rem; color: #6c757d;">
                                            <div>98 / 67</div>
                                        </div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="font-size: 0.85rem; color: #ffc107; font-weight: 500;">
                                            <i class="fas fa-coins"></i> 531
                                        </div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="font-size: 0.8rem; color: #6c757d; white-space: nowrap;">05-25<br/>11:30</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="display: flex; gap: 2px; flex-wrap: wrap; justify-content: center;">
                                            <button style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: none; background: #667eea; color: white; cursor: pointer; white-space: nowrap;" onclick="viewDocument('DOC004')">查看</button>
                                            <button style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer; white-space: nowrap;" onclick="editDocument('DOC004')">编辑</button>
                                            <button style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: 1px solid #28a745; background: white; color: #28a745; cursor: pointer; white-space: nowrap;" onclick="toggleVisibility(this, 'public')">设私有</button>
                                            <button style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: 1px solid #dc3545; background: white; color: #dc3545; cursor: pointer; white-space: nowrap;" onclick="deleteDocument('DOC004')">删除</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <input type="checkbox" style="transform: scale(1.1);">
                                    </td>
                                    <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <i class="fas fa-file-video" style="color: #6f42c1; font-size: 1.2rem;"></i>
                                            <div>
                                                <div style="font-weight: 500; color: #333; font-size: 0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">设备故障排查视频教程</div>
                                                <div style="font-size: 0.75rem; color: #6c757d; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">实际操作演示，详细故障排查步骤</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #d4edda; color: #155724; white-space: nowrap;">
                                            <i class="fas fa-globe" style="margin-right: 3px;"></i>公开
                                        </span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #f8d7da; color: #721c24; white-space: nowrap;">
                                            <i class="fas fa-times-circle" style="margin-right: 3px;"></i>未通过
                                        </span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #e3f2fd; color: #1976d2; white-space: nowrap;">设备维修</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #e1ecf4; color: #39739d; white-space: nowrap;">MP4</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="font-size: 0.8rem; color: #6c757d;">
                                            <div>- / -</div>
                                        </div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="font-size: 0.85rem; color: #6c757d; font-weight: 500;">
                                            <i class="fas fa-coins"></i> 0
                                        </div>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <span style="font-size: 0.8rem; color: #6c757d; white-space: nowrap;">05-20<br/>15:30</span>
                                    </td>
                                    <td style="padding: 10px 8px; text-align: center;">
                                        <div style="display: flex; gap: 2px; flex-wrap: wrap; justify-content: center;">
                                            <button style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: none; background: #667eea; color: white; cursor: pointer; white-space: nowrap;" onclick="viewDocument('DOC005')">查看</button>
                                            <button style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer; white-space: nowrap;" onclick="editDocument('DOC005')">编辑</button>
                                            <button style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: 1px solid #dc3545; background: white; color: #dc3545; cursor: pointer; white-space: nowrap;" onclick="showRejectReason()">查看原因</button>
                                            <button style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: 1px solid #17a2b8; background: white; color: #17a2b8; cursor: pointer; white-space: nowrap;" onclick="resubmitDocument('DOC005')">重新提交</button>
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                        
                        <!-- 分页 -->
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid #f0f0f0;">
                            <div style="color: #6c757d; font-size: 0.9rem;">
                                共 <span style="color: #333; font-weight: 500;" id="knowledgeTotalRecords">46</span> 条记录，第 <span style="color: #333; font-weight: 500;" id="knowledgeCurrentPage">1</span> 页，共 <span style="color: #333; font-weight: 500;" id="knowledgeTotalPages">5</span> 页
                </div>
                            <div style="display: flex; gap: 5px;" id="knowledgePagination">
                                <button style="padding: 6px 12px; border: 1px solid #e0e3ea; background: #f8f9fa; color: #6c757d; border-radius: 6px; cursor: not-allowed; font-size: 0.85rem;" onclick="knowledgePrevPage()">
                                    <i class="fas fa-chevron-left"></i> 上一页
                                </button>
                                <button style="padding: 6px 12px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.85rem;" onclick="knowledgeGoToPage(1)">1</button>
                                <button style="padding: 6px 12px; border: 1px solid #e0e3ea; background: white; color: #6c757d; border-radius: 6px; cursor: pointer; font-size: 0.85rem;" onclick="knowledgeGoToPage(2)">2</button>
                                <button style="padding: 6px 12px; border: 1px solid #e0e3ea; background: white; color: #6c757d; border-radius: 6px; cursor: pointer; font-size: 0.85rem;" onclick="knowledgeGoToPage(3)">3</button>
                                <button style="padding: 6px 12px; border: 1px solid #e0e3ea; background: white; color: #6c757d; border-radius: 6px; cursor: pointer; font-size: 0.85rem;" onclick="knowledgeGoToPage(4)">4</button>
                                <button style="padding: 6px 12px; border: 1px solid #e0e3ea; background: white; color: #6c757d; border-radius: 6px; cursor: pointer; font-size: 0.85rem;" onclick="knowledgeGoToPage(5)">5</button>
                                <button style="padding: 6px 12px; border: 1px solid #e0e3ea; background: white; color: #667eea; border-radius: 6px; cursor: pointer; font-size: 0.85rem;" onclick="knowledgeNextPage()">
                                    下一页 <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 提现弹窗 -->
                    <div id="withdrawModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
                        <div style="background: white; border-radius: 12px; padding: 30px; width: 90%; max-width: 500px; position: relative;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <h3 style="margin: 0; color: #333; font-size: 1.3rem;">
                                    <i class="fas fa-hand-holding-usd" style="color: #28a745; margin-right: 10px;"></i>
                                    积分提现
                                </h3>
                                <button onclick="hideWithdrawModal()" style="background: none; border: none; font-size: 1.5rem; color: #6c757d; cursor: pointer; padding: 0; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            
                            <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                    <span style="color: #6c757d; font-size: 0.9rem;">当前积分余额</span>
                                    <span style="color: #ffc107; font-weight: bold; font-size: 1.2rem;">
                                        <i class="fas fa-coins"></i> 892 积分
                                    </span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                    <span style="color: #6c757d; font-size: 0.9rem;">可提现金额</span>
                                    <span style="color: #28a745; font-weight: bold; font-size: 1.2rem;">¥89.2</span>
                                </div>
                                <div style="font-size: 0.8rem; color: #6c757d; text-align: center;">
                                    兑换比例：10积分 = ¥0.1，最低提现金额：¥10
                                </div>
                            </div>

                            <form>
                                <div style="margin-bottom: 20px;">
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">提现金额</label>
                                    <div style="position: relative;">
                                        <input type="number" id="withdrawAmount" placeholder="请输入提现金额" min="10" max="89.2" step="0.1" style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 1rem; padding-left: 35px;">
                                        <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6c757d; font-size: 1rem;">¥</span>
                                    </div>
                                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                                        <button type="button" onclick="setWithdrawAmount(10)" style="padding: 5px 12px; background: #f8f9fa; border: 1px solid #e0e3ea; border-radius: 6px; color: #6c757d; cursor: pointer; font-size: 0.85rem;">¥10</button>
                                        <button type="button" onclick="setWithdrawAmount(20)" style="padding: 5px 12px; background: #f8f9fa; border: 1px solid #e0e3ea; border-radius: 6px; color: #6c757d; cursor: pointer; font-size: 0.85rem;">¥20</button>
                                        <button type="button" onclick="setWithdrawAmount(50)" style="padding: 5px 12px; background: #f8f9fa; border: 1px solid #e0e3ea; border-radius: 6px; color: #6c757d; cursor: pointer; font-size: 0.85rem;">¥50</button>
                                        <button type="button" onclick="setWithdrawAmount(89.2)" style="padding: 5px 12px; background: #f8f9fa; border: 1px solid #e0e3ea; border-radius: 6px; color: #6c757d; cursor: pointer; font-size: 0.85rem;">全部</button>
                                    </div>
                                </div>

                                <div style="margin-bottom: 20px;">
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">提现方式</label>
                                    <select style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 1rem;">
                                        <option value="alipay">支付宝</option>
                                        <option value="wechat">微信</option>
                                        <option value="bank">银行卡</option>
                        </select>
                    </div>

                                <div style="margin-bottom: 20px;">
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">收款账号</label>
                                    <input type="text" placeholder="请输入收款账号" style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 1rem;">
                                </div>

                                <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                                    <div style="color: #856404; font-size: 0.9rem; line-height: 1.5;">
                                        <i class="fas fa-info-circle" style="margin-right: 8px;"></i>
                                        <strong>提现说明：</strong><br/>
                                        • 工作日申请，当日到账；周末申请，下个工作日到账<br/>
                                        • 提现手续费：2%，最低2元<br/>
                                        • 每日最多提现3次，单次最高¥500
                                    </div>
                                </div>

                                <div style="display: flex; gap: 15px;">
                                    <button type="button" onclick="hideWithdrawModal()" style="flex: 1; padding: 12px 20px; background: #f8f9fa; color: #6c757d; border: 1px solid #e0e3ea; border-radius: 8px; cursor: pointer; font-size: 1rem;">取消</button>
                                    <button type="submit" style="flex: 1; padding: 12px 20px; background: #28a745; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem;">
                                        <i class="fas fa-paper-plane" style="margin-right: 8px;"></i>
                                        提交申请
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- 审核拒绝原因弹窗 -->
                    <div id="rejectReasonModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
                        <div style="background: white; border-radius: 12px; padding: 30px; width: 90%; max-width: 600px; position: relative;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <h3 style="margin: 0; color: #333; font-size: 1.3rem;">
                                    <i class="fas fa-times-circle" style="color: #dc3545; margin-right: 10px;"></i>
                                    审核未通过原因
                                </h3>
                                <button onclick="hideRejectReasonModal()" style="background: none; border: none; font-size: 1.5rem; color: #6c757d; cursor: pointer; padding: 0; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            
                            <div style="background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                                <div style="color: #721c24; font-size: 0.95rem; line-height: 1.6;">
                                    <div style="font-weight: bold; margin-bottom: 10px;">审核时间：2024-05-21 09:30</div>
                                    <div style="font-weight: bold; margin-bottom: 10px;">审核员：平台管理员</div>
                                    <div style="font-weight: bold; margin-bottom: 15px;">拒绝原因：</div>
                                    <div style="background: white; padding: 15px; border-radius: 6px; border-left: 4px solid #dc3545;">
                                        1. 视频内容不够清晰，部分操作步骤无法看清<br/>
                                        2. 缺少必要的安全提醒和注意事项<br/>
                                        3. 建议增加字幕说明，提高视频质量<br/>
                                        4. 请确保内容符合平台技术标准
                                    </div>
                                </div>
                            </div>

                            <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                                <div style="color: #856404; font-size: 0.9rem; line-height: 1.5;">
                                    <i class="fas fa-lightbulb" style="margin-right: 8px;"></i>
                                    <strong>修改建议：</strong><br/>
                                    • 重新录制或编辑视频，确保画面清晰<br/>
                                    • 添加详细的文字说明和安全提醒<br/>
                                    • 可参考平台优质内容示例进行改进<br/>
                                    • 修改完成后可重新提交审核
                                </div>
                            </div>

                            <div style="display: flex; gap: 15px;">
                                <button onclick="hideRejectReasonModal()" style="flex: 1; padding: 12px 20px; background: #f8f9fa; color: #6c757d; border: 1px solid #e0e3ea; border-radius: 8px; cursor: pointer; font-size: 1rem;">知道了</button>
                                <button style="flex: 1; padding: 12px 20px; background: #17a2b8; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem;">
                                    <i class="fas fa-edit" style="margin-right: 8px;"></i>
                                    去修改
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="main-content" id="page-auth-real" style="display:none">
                    <!-- 认证状态卡片 -->
                    <div style="margin-bottom: 30px;">
                        <div style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); border-radius: 12px; padding: 25px; color: white; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 4px 20px rgba(40, 167, 69, 0.3);">
                            <div style="display: flex; align-items: center; gap: 20px;">
                                <div style="width: 60px; height: 60px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-user-check" style="font-size: 1.8rem;"></i>
                                </div>
                                <div>
                                    <h2 style="font-size: 1.5rem; margin-bottom: 5px;">实名认证</h2>
                                    <div style="display: flex; align-items: center; gap: 8px; font-size: 1.1rem;">
                                        <i class="fas fa-check-circle"></i>
                                        <span>认证已通过</span>
                                    </div>
                                    <div style="font-size: 0.9rem; opacity: 0.9; margin-top: 5px;">
                                        认证时间：2024-01-15 14:30:25 | 有效期至：2026-01-15
                                    </div>
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 0.85rem; opacity: 0.9; margin-bottom: 8px;">距离到期还有</div>
                                <div style="font-size: 1.3rem; font-weight: bold;">732天</div>
                                <button onclick="renewCertification()" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 8px 16px; border-radius: 6px; cursor: pointer; margin-top: 10px; font-size: 0.9rem; transition: all 0.3s;">
                                    提前续签
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 认证记录 -->
                    <div style="background: white; border-radius: 12px; padding: 25px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <h3 style="display: flex; align-items: center; gap: 10px; color: #333; margin-bottom: 20px; font-size: 1.3rem; padding-bottom: 15px; border-bottom: 2px solid #f0f0f0;">
                            <i class="fas fa-history" style="color: #667eea;"></i>
                            认证记录
                        </h3>
                        <div style="overflow-x: auto;">
                            <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                                    <tr style="background: #f8f9fa;">
                                        <th style="padding: 15px; text-align: left; color: #495057; font-weight: 600; border-bottom: 2px solid #dee2e6;">申请时间</th>
                                        <th style="padding: 15px; text-align: left; color: #495057; font-weight: 600; border-bottom: 2px solid #dee2e6;">认证状态</th>
                                        <th style="padding: 15px; text-align: left; color: #495057; font-weight: 600; border-bottom: 2px solid #dee2e6;">审核时间</th>
                                        <th style="padding: 15px; text-align: left; color: #495057; font-weight: 600; border-bottom: 2px solid #dee2e6;">有效期</th>
                                        <th style="padding: 15px; text-align: center; color: #495057; font-weight: 600; border-bottom: 2px solid #dee2e6;">操作</th>
                            </tr>
                        </thead>
                        <tbody>
                                    <tr style="border-bottom: 1px solid #e9ecef;">
                                        <td style="padding: 15px; color: #495057;">2024-01-15 10:20:15</td>
                                        <td style="padding: 15px;">
                                            <span style="background: #d4edda; color: #155724; padding: 4px 12px; border-radius: 20px; font-size: 0.85rem; display: inline-flex; align-items: center; gap: 5px;">
                                                <i class="fas fa-check-circle"></i>
                                                已通过
                                            </span>
                                        </td>
                                        <td style="padding: 15px; color: #495057;">2024-01-15 14:30:25</td>
                                        <td style="padding: 15px; color: #495057;">2024-01-15 ~ 2026-01-15</td>
                                        <td style="padding: 15px; text-align: center;">
                                            <button onclick="viewCertificate('real')" style="background: #667eea; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.85rem; margin-right: 5px;">
                                                查看证书
                                            </button>
                                            <button onclick="downloadCertificate('real')" style="background: #28a745; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.85rem;">
                                                下载证书
                                            </button>
                                </td>
                            </tr>
                                    <tr style="border-bottom: 1px solid #e9ecef;">
                                        <td style="padding: 15px; color: #495057;">2023-12-20 16:45:30</td>
                                        <td style="padding: 15px;">
                                            <span style="background: #f8d7da; color: #721c24; padding: 4px 12px; border-radius: 20px; font-size: 0.85rem; display: inline-flex; align-items: center; gap: 5px;">
                                                <i class="fas fa-times-circle"></i>
                                                已拒绝
                                            </span>
                                        </td>
                                        <td style="padding: 15px; color: #495057;">2023-12-21 09:15:42</td>
                                        <td style="padding: 15px; color: #6c757d;">-</td>
                                        <td style="padding: 15px; text-align: center;">
                                            <button onclick="viewRejectReason('实名认证', '照片不清晰，请重新上传高清正面照片。身份证需要四角完整，信息清晰可见。')" style="background: #dc3545; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.85rem;">
                                                查看原因
                                            </button>
                                </td>
                            </tr>
                                    <tr style="border-bottom: 1px solid #e9ecef;">
                                        <td style="padding: 15px; color: #495057;">2023-12-18 14:20:10</td>
                                        <td style="padding: 15px;">
                                            <span style="background: #fff3cd; color: #856404; padding: 4px 12px; border-radius: 20px; font-size: 0.85rem; display: inline-flex; align-items: center; gap: 5px;">
                                                <i class="fas fa-clock"></i>
                                                审核中
                                            </span>
                                        </td>
                                        <td style="padding: 15px; color: #6c757d;">-</td>
                                        <td style="padding: 15px; color: #6c757d;">-</td>
                                        <td style="padding: 15px; text-align: center;">
                                            <span style="color: #6c757d; font-size: 0.85rem;">等待审核</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                    </div>

                    <div class="page-header">
                        <h1><i class="fas fa-id-card"></i> 实名认证申请</h1>
                        <p class="page-desc">通过实名认证，确保账户安全，获得平台完整服务权限</p>
                    </div>

                    <!-- 认证进度 -->
                    <div style="display: flex; justify-content: center; align-items: center; margin-bottom: 40px; padding: 40px 20px; background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <div style="display: flex; align-items: center; justify-content: center; width: 100%; max-width: 600px; position: relative;">
                            <!-- 步骤1 -->
                            <div style="display: flex; flex-direction: column; align-items: center; z-index: 2;">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: #28a745; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.4rem; margin-bottom: 12px; box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);">1</div>
                                <div style="font-weight: 600; color: #28a745; font-size: 0.95rem; text-align: center; line-height: 1.3;">填写信息</div>
                            </div>
                            
                            <!-- 连接线1 -->
                            <div style="flex: 1; height: 3px; background: linear-gradient(to right, #28a745, #667eea); margin: 0 20px; border-radius: 2px; position: relative; top: -25px;"></div>
                            
                            <!-- 步骤2 -->
                            <div style="display: flex; flex-direction: column; align-items: center; z-index: 2;">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: #667eea; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.4rem; margin-bottom: 12px; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);">2</div>
                                <div style="font-weight: 600; color: #667eea; font-size: 0.95rem; text-align: center; line-height: 1.3;">上传证件</div>
                            </div>
                            
                            <!-- 连接线2 -->
                            <div style="flex: 1; height: 3px; background: #e9ecef; margin: 0 20px; border-radius: 2px; position: relative; top: -25px;"></div>
                            
                            <!-- 步骤3 -->
                            <div style="display: flex; flex-direction: column; align-items: center; z-index: 2;">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: #e9ecef; color: #6c757d; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.4rem; margin-bottom: 12px; border: 3px solid #dee2e6;">3</div>
                                <div style="font-weight: 600; color: #6c757d; font-size: 0.95rem; text-align: center; line-height: 1.3;">平台审核</div>
                            </div>
                            
                            <!-- 连接线3 -->
                            <div style="flex: 1; height: 3px; background: #e9ecef; margin: 0 20px; border-radius: 2px; position: relative; top: -25px;"></div>
                            
                            <!-- 步骤4 -->
                            <div style="display: flex; flex-direction: column; align-items: center; z-index: 2;">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: #e9ecef; color: #6c757d; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.4rem; margin-bottom: 12px; border: 3px solid #dee2e6;">4</div>
                                <div style="font-weight: 600; color: #6c757d; font-size: 0.95rem; text-align: center; line-height: 1.3;">认证完成</div>
                            </div>
                        </div>
                    </div>

                    <!-- 认证表单 -->
                    <form style="background: white; border-radius: 12px; padding: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 25px;">
                        <!-- 基本信息 -->
                        <div style="margin-bottom: 30px;">
                            <h3 style="display: flex; align-items: center; gap: 10px; color: #333; margin-bottom: 20px; font-size: 1.2rem; padding-bottom: 10px; border-bottom: 2px solid #f0f0f0;">
                                <i class="fas fa-user" style="color: #28a745;"></i>
                                基本信息
                            </h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">真实姓名 <span style="color: #dc3545;">*</span></label>
                                    <input type="text" placeholder="请输入真实姓名" style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">身份证号 <span style="color: #dc3545;">*</span></label>
                                    <input type="text" placeholder="请输入身份证号码" style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">联系电话 <span style="color: #dc3545;">*</span></label>
                                    <input type="tel" placeholder="请输入联系电话" style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">现居住地址</label>
                                    <input type="text" placeholder="请输入现居住地址" style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                                </div>
                            </div>
                        </div>

                        <!-- 证件上传 -->
                        <div style="margin-bottom: 30px;">
                            <h3 style="display: flex; align-items: center; gap: 10px; color: #333; margin-bottom: 20px; font-size: 1.2rem; padding-bottom: 10px; border-bottom: 2px solid #f0f0f0;">
                                <i class="fas fa-upload" style="color: #28a745;"></i>
                                证件上传
                            </h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">身份证正面 <span style="color: #dc3545;">*</span></label>
                                    <div style="border: 2px dashed #e0e3ea; border-radius: 8px; padding: 20px; text-align: center; cursor: pointer;">
                                        <i class="fas fa-cloud-upload-alt" style="font-size: 1.5rem; color: #6c757d; margin-bottom: 10px;"></i>
                                        <div style="color: #6c757d; margin-bottom: 5px;">点击上传或拖拽文件至此</div>
                                        <div style="font-size: 0.85rem; color: #999;">支持jpg/png，大小不超过5M</div>
                                    </div>
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">身份证反面 <span style="color: #dc3545;">*</span></label>
                                    <div style="border: 2px dashed #e0e3ea; border-radius: 8px; padding: 20px; text-align: center; cursor: pointer;">
                                        <i class="fas fa-cloud-upload-alt" style="font-size: 1.5rem; color: #6c757d; margin-bottom: 10px;"></i>
                                        <div style="color: #6c757d; margin-bottom: 5px;">点击上传或拖拽文件至此</div>
                                        <div style="font-size: 0.85rem; color: #999;">支持jpg/png，大小不超过5M</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 提交按钮 -->
                        <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
                            <button type="button" onclick="startAuthentication('real')" style="display: flex; align-items: center; gap: 8px; padding: 12px 30px; background: #28a745; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: 500;">
                                <i class="fas fa-paper-plane"></i>
                                提交认证申请
                            </button>
                            <button type="button" style="display: flex; align-items: center; gap: 8px; padding: 12px 30px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: 500;">
                                <i class="fas fa-save"></i>
                                保存草稿
                            </button>
                        </div>
                    </form>

                    <!-- 认证须知 -->
                    <div style="background: white; border-radius: 12px; padding: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <h3 style="display: flex; align-items: center; gap: 10px; color: #333; margin-bottom: 20px; font-size: 1.2rem;">
                            <i class="fas fa-info-circle" style="color: #17a2b8;"></i>
                            认证须知
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                            <div style="display: flex; align-items: flex-start; gap: 12px;">
                                <i class="fas fa-shield-alt" style="color: #28a745; margin-top: 3px;"></i>
                                <div>
                                    <div style="font-weight: 600; margin-bottom: 5px; color: #333;">信息安全</div>
                                    <div style="color: #6c757d; font-size: 0.9rem; line-height: 1.5;">您的个人信息将严格保密，仅用于身份验证，不会泄露给第三方。</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: flex-start; gap: 12px;">
                                <i class="fas fa-clock" style="color: #ffc107; margin-top: 3px;"></i>
                                <div>
                                    <div style="font-weight: 600; margin-bottom: 5px; color: #333;">审核时间</div>
                                    <div style="color: #6c757d; font-size: 0.9rem; line-height: 1.5;">提交后1-2个工作日内完成审核，审核结果将通过短信和站内信通知。</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: flex-start; gap: 12px;">
                                <i class="fas fa-image" style="color: #17a2b8; margin-top: 3px;"></i>
                                <div>
                                    <div style="font-weight: 600; margin-bottom: 5px; color: #333;">照片要求</div>
                                    <div style="color: #6c757d; font-size: 0.9rem; line-height: 1.5;">请确保身份证照片清晰完整，四角完整，信息清楚可见。</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: flex-start; gap: 12px;">
                                <i class="fas fa-check-circle" style="color: #28a745; margin-top: 3px;"></i>
                                <div>
                                    <div style="font-weight: 600; margin-bottom: 5px; color: #333;">认证权益</div>
                                    <div style="color: #6c757d; font-size: 0.9rem; line-height: 1.5;">认证通过后可享受完整平台服务，提升账户安全等级。</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="main-content" id="page-auth-repair" style="display:none">
                    <!-- 认证状态卡片 -->
                    <div style="margin-bottom: 30px;">
                        <div style="background: linear-gradient(135deg, #ffc107 0%, #ff8c00 100%); border-radius: 12px; padding: 25px; color: white; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 4px 20px rgba(255, 193, 7, 0.3);">
                            <div style="display: flex; align-items: center; gap: 20px;">
                                <div style="width: 60px; height: 60px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-tools" style="font-size: 1.8rem;"></i>
                                </div>
                                <div>
                                    <h2 style="font-size: 1.5rem; margin-bottom: 5px;">维修技师认证</h2>
                                    <div style="display: flex; align-items: center; gap: 8px; font-size: 1.1rem;">
                                        <i class="fas fa-check-circle"></i>
                                        <span>认证已通过</span>
                                    </div>
                                    <div style="font-size: 0.9rem; opacity: 0.9; margin-top: 5px;">
                                        认证时间：2024-02-20 16:45:30 | 有效期至：2025-02-20
                                    </div>
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 0.85rem; opacity: 0.9; margin-bottom: 8px;">距离到期还有</div>
                                <div style="font-size: 1.3rem; font-weight: bold;">365天</div>
                                <button onclick="renewCertification()" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 8px 16px; border-radius: 6px; cursor: pointer; margin-top: 10px; font-size: 0.9rem; transition: all 0.3s;">
                                    提前续签
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 认证记录 -->
                    <div style="background: white; border-radius: 12px; padding: 25px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <h3 style="display: flex; align-items: center; gap: 10px; color: #333; margin-bottom: 20px; font-size: 1.3rem; padding-bottom: 15px; border-bottom: 2px solid #f0f0f0;">
                            <i class="fas fa-history" style="color: #ffc107;"></i>
                            认证记录
                        </h3>
                        <div style="overflow-x: auto;">
                            <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                                    <tr style="background: #f8f9fa;">
                                        <th style="padding: 15px; text-align: left; color: #495057; font-weight: 600; border-bottom: 2px solid #dee2e6;">申请时间</th>
                                        <th style="padding: 15px; text-align: left; color: #495057; font-weight: 600; border-bottom: 2px solid #dee2e6;">认证状态</th>
                                        <th style="padding: 15px; text-align: left; color: #495057; font-weight: 600; border-bottom: 2px solid #dee2e6;">审核时间</th>
                                        <th style="padding: 15px; text-align: left; color: #495057; font-weight: 600; border-bottom: 2px solid #dee2e6;">有效期</th>
                                        <th style="padding: 15px; text-align: center; color: #495057; font-weight: 600; border-bottom: 2px solid #dee2e6;">操作</th>
                            </tr>
                        </thead>
                        <tbody>
                                    <tr style="border-bottom: 1px solid #e9ecef;">
                                        <td style="padding: 15px; color: #495057;">2024-02-20 14:30:20</td>
                                        <td style="padding: 15px;">
                                            <span style="background: #d4edda; color: #155724; padding: 4px 12px; border-radius: 20px; font-size: 0.85rem; display: inline-flex; align-items: center; gap: 5px;">
                                                <i class="fas fa-check-circle"></i>
                                                已通过
                                            </span>
                                </td>
                                        <td style="padding: 15px; color: #495057;">2024-02-20 16:45:30</td>
                                        <td style="padding: 15px; color: #495057;">2024-02-20 ~ 2025-02-20</td>
                                        <td style="padding: 15px; text-align: center;">
                                            <button onclick="viewCertificate('repair')" style="background: #ffc107; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.85rem; margin-right: 5px;">
                                                查看证书
                                            </button>
                                            <button onclick="downloadCertificate('repair')" style="background: #28a745; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.85rem;">
                                                下载证书
                                            </button>
                                </td>
                            </tr>
                                    <tr style="border-bottom: 1px solid #e9ecef;">
                                        <td style="padding: 15px; color: #495057;">2024-01-10 11:20:15</td>
                                        <td style="padding: 15px;">
                                            <span style="background: #f8d7da; color: #721c24; padding: 4px 12px; border-radius: 20px; font-size: 0.85rem; display: inline-flex; align-items: center; gap: 5px;">
                                                <i class="fas fa-times-circle"></i>
                                                已拒绝
                                            </span>
                                        </td>
                                        <td style="padding: 15px; color: #495057;">2024-01-12 09:30:45</td>
                                        <td style="padding: 15px; color: #6c757d;">-</td>
                                        <td style="padding: 15px; text-align: center;">
                                            <button onclick="viewRejectReason('维修技师认证', '技能证书不够清晰，工作经验描述不够详细。请重新上传高清证书照片，并详细描述您的维修经验和专业技能。')" style="background: #dc3545; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.85rem;">
                                                查看原因
                                            </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                        </div>

                    <div class="page-header">
                        <h1><i class="fas fa-tools"></i> 维修技师认证申请</h1>
                        <p class="page-desc">通过维修技师认证，成为平台认证维修专家，获得更多维修订单和收益机会</p>
                        </div>

                    <!-- 认证进度 -->
                    <div style="display: flex; justify-content: center; align-items: center; margin-bottom: 40px; padding: 40px 20px; background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <div style="display: flex; align-items: center; justify-content: center; width: 100%; max-width: 600px; position: relative;">
                            <!-- 步骤1 -->
                            <div style="display: flex; flex-direction: column; align-items: center; z-index: 2;">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: #28a745; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.4rem; margin-bottom: 12px; box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);">1</div>
                                <div style="font-weight: 600; color: #28a745; font-size: 0.95rem; text-align: center; line-height: 1.3;">填写资料</div>
                        </div>
                            
                            <!-- 连接线1 -->
                            <div style="flex: 1; height: 3px; background: linear-gradient(to right, #28a745, #ffc107); margin: 0 20px; border-radius: 2px; position: relative; top: -25px;"></div>
                            
                            <!-- 步骤2 -->
                            <div style="display: flex; flex-direction: column; align-items: center; z-index: 2;">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: #ffc107; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.4rem; margin-bottom: 12px; box-shadow: 0 4px 12px rgba(255, 193, 7, 0.3);">2</div>
                                <div style="font-weight: 600; color: #ffc107; font-size: 0.95rem; text-align: center; line-height: 1.3;">上传证明</div>
                        </div>
                            
                            <!-- 连接线2 -->
                            <div style="flex: 1; height: 3px; background: #e9ecef; margin: 0 20px; border-radius: 2px; position: relative; top: -25px;"></div>
                            
                            <!-- 步骤3 -->
                            <div style="display: flex; flex-direction: column; align-items: center; z-index: 2;">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: #e9ecef; color: #6c757d; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.4rem; margin-bottom: 12px; border: 3px solid #dee2e6;">3</div>
                                <div style="font-weight: 600; color: #6c757d; font-size: 0.95rem; text-align: center; line-height: 1.3;">平台审核</div>
                </div>
                            
                            <!-- 连接线3 -->
                            <div style="flex: 1; height: 3px; background: #e9ecef; margin: 0 20px; border-radius: 2px; position: relative; top: -25px;"></div>
                            
                            <!-- 步骤4 -->
                            <div style="display: flex; flex-direction: column; align-items: center; z-index: 2;">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: #e9ecef; color: #6c757d; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.4rem; margin-bottom: 12px; border: 3px solid #dee2e6;">4</div>
                                <div style="font-weight: 600; color: #6c757d; font-size: 0.95rem; text-align: center; line-height: 1.3;">认证通过</div>
                        </div>
                        </div>
                        </div>

                    <!-- 认证表单 -->
                    <form style="background: white; border-radius: 12px; padding: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 25px;">
                        <!-- 基本信息 -->
                        <div style="margin-bottom: 30px;">
                            <h3 style="display: flex; align-items: center; gap: 10px; color: #333; margin-bottom: 20px; font-size: 1.2rem; padding-bottom: 10px; border-bottom: 2px solid #f0f0f0;">
                                <i class="fas fa-user" style="color: #17a2b8;"></i>
                                基本信息
                            </h3>
                            <!-- 实名认证信息提示 -->
                            <div style="background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%); padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #2196f3;">
                                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                                    <i class="fas fa-info-circle" style="color: #2196f3; font-size: 1.1rem;"></i>
                                    <span style="color: #1976d2; font-weight: 500; font-size: 0.95rem;">实名认证信息</span>
                        </div>
                                <div style="color: #424242; font-size: 0.9rem; line-height: 1.4;">
                                    以下信息来自您的实名认证，如需修改请前往 <a href="#" onclick="showPage('auth-real')" style="color: #2196f3; text-decoration: none;">实名认证页面</a>
                        </div>
                </div>

                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">真实姓名</label>
                                    <div style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem; background-color: #f8f9fa; color: #6c757d; display: flex; align-items: center; gap: 8px;">
                                        <i class="fas fa-user" style="color: #28a745;"></i>
                                        <span>张三</span>
                                        <span style="margin-left: auto; font-size: 0.8rem; color: #28a745;">已认证</span>
                </div>
                        </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">联系电话 <span style="color: #dc3545;">*</span></label>
                                    <input type="tel" placeholder="请输入联系电话" style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                        </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">工作单位</label>
                                    <input type="text" placeholder="请输入工作单位" style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                        </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">从业年限 <span style="color: #dc3545;">*</span></label>
                                    <select style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                                        <option value="">请选择从业年限</option>
                                        <option value="1-3年">1-3年</option>
                                        <option value="3-5年">3-5年</option>
                                        <option value="5-10年">5-10年</option>
                                        <option value="10年以上">10年以上</option>
                                    </select>
                        </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">技术等级</label>
                                    <select style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                                        <option value="">请选择技术等级</option>
                                        <option value="初级技师">初级技师</option>
                                        <option value="中级技师">中级技师</option>
                                        <option value="高级技师">高级技师</option>
                                        <option value="特级技师">特级技师</option>
                                    </select>
                        </div>
                        </div>
                        </div>

                        <!-- 专业技能 -->
                        <div style="margin-bottom: 30px;">
                            <h3 style="display: flex; align-items: center; gap: 10px; color: #333; margin-bottom: 20px; font-size: 1.2rem; padding-bottom: 10px; border-bottom: 2px solid #f0f0f0;">
                                <i class="fas fa-cogs" style="color: #17a2b8;"></i>
                                专业技能 <span style="color: #dc3545; font-size: 0.8rem;">(可多选)</span>
                            </h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                <div onclick="toggleRepairSkill(this)" style="display: flex; align-items: center; gap: 10px; padding: 12px 15px; background: white; border-radius: 8px; border: 1px solid #e0e3ea; cursor: pointer;">
                                    <div style="width: 18px; height: 18px; border: 2px solid #e0e3ea; border-radius: 4px;"></div>
                                    <span>机械维修</span>
                                </div>
                                <div onclick="toggleRepairSkill(this)" style="display: flex; align-items: center; gap: 10px; padding: 12px 15px; background: white; border-radius: 8px; border: 1px solid #e0e3ea; cursor: pointer;">
                                    <div style="width: 18px; height: 18px; border: 2px solid #e0e3ea; border-radius: 4px;"></div>
                                    <span>电气维修</span>
                                </div>
                                <div onclick="toggleRepairSkill(this)" style="display: flex; align-items: center; gap: 10px; padding: 12px 15px; background: white; border-radius: 8px; border: 1px solid #e0e3ea; cursor: pointer;">
                                    <div style="width: 18px; height: 18px; border: 2px solid #e0e3ea; border-radius: 4px;"></div>
                                    <span>液压系统</span>
                                </div>
                                <div onclick="toggleRepairSkill(this)" style="display: flex; align-items: center; gap: 10px; padding: 12px 15px; background: white; border-radius: 8px; border: 1px solid #e0e3ea; cursor: pointer;">
                                    <div style="width: 18px; height: 18px; border: 2px solid #e0e3ea; border-radius: 4px;"></div>
                                    <span>空压机系统</span>
                                </div>
                                <div onclick="toggleRepairSkill(this)" style="display: flex; align-items: center; gap: 10px; padding: 12px 15px; background: white; border-radius: 8px; border: 1px solid #e0e3ea; cursor: pointer;">
                                    <div style="width: 18px; height: 18px; border: 2px solid #e0e3ea; border-radius: 4px;"></div>
                                    <span>制冷设备</span>
                                </div>
                                <div onclick="toggleRepairSkill(this)" style="display: flex; align-items: center; gap: 10px; padding: 12px 15px; background: white; border-radius: 8px; border: 1px solid #e0e3ea; cursor: pointer;">
                                    <div style="width: 18px; height: 18px; border: 2px solid #e0e3ea; border-radius: 4px;"></div>
                                    <span>工业锅炉</span>
                                </div>
                                <div onclick="toggleRepairSkill(this)" style="display: flex; align-items: center; gap: 10px; padding: 12px 15px; background: white; border-radius: 8px; border: 1px solid #e0e3ea; cursor: pointer;">
                                    <div style="width: 18px; height: 18px; border: 2px solid #e0e3ea; border-radius: 4px;"></div>
                                    <span>环保设备</span>
                                </div>
                                <div onclick="toggleRepairSkill(this)" style="display: flex; align-items: center; gap: 10px; padding: 12px 15px; background: white; border-radius: 8px; border: 1px solid #e0e3ea; cursor: pointer;">
                                    <div style="width: 18px; height: 18px; border: 2px solid #e0e3ea; border-radius: 4px;"></div>
                                    <span>其他设备</span>
                                </div>
                            </div>
                        </div>

                        <!-- 工作经验 -->
                        <div style="margin-bottom: 30px;">
                            <h3 style="display: flex; align-items: center; gap: 10px; color: #333; margin-bottom: 20px; font-size: 1.2rem; padding-bottom: 10px; border-bottom: 2px solid #f0f0f0;">
                                <i class="fas fa-briefcase" style="color: #17a2b8;"></i>
                                工作经验
                            </h3>
                            <textarea placeholder="请详细描述您的维修工作经验、擅长的设备类型、成功案例等" style="width: 100%; padding: 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem; min-height: 120px; resize: vertical; line-height: 1.6;"></textarea>
                        </div>

                        <!-- 证书上传 -->
                        <div style="margin-bottom: 30px;">
                            <h3 style="display: flex; align-items: center; gap: 10px; color: #333; margin-bottom: 20px; font-size: 1.2rem; padding-bottom: 10px; border-bottom: 2px solid #f0f0f0;">
                                <i class="fas fa-upload" style="color: #17a2b8;"></i>
                                证书上传
                            </h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">学历证书</label>
                                    <div style="border: 2px dashed #e0e3ea; border-radius: 8px; padding: 20px; text-align: center; cursor: pointer;">
                                        <i class="fas fa-cloud-upload-alt" style="font-size: 1.5rem; color: #6c757d; margin-bottom: 10px;"></i>
                                        <div style="color: #6c757d; margin-bottom: 5px;">点击上传或拖拽文件至此</div>
                                        <div style="font-size: 0.85rem; color: #999;">支持jpg/png/pdf，大小不超过10M</div>
                                    </div>
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">技术资格证书 <span style="color: #dc3545;">*</span></label>
                                    <div style="border: 2px dashed #e0e3ea; border-radius: 8px; padding: 20px; text-align: center; cursor: pointer;">
                                        <i class="fas fa-cloud-upload-alt" style="font-size: 1.5rem; color: #6c757d; margin-bottom: 10px;"></i>
                                        <div style="color: #6c757d; margin-bottom: 5px;">点击上传或拖拽文件至此</div>
                                        <div style="font-size: 0.85rem; color: #999;">支持jpg/png/pdf，大小不超过10M</div>
                                    </div>
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">工作经验证明</label>
                                    <div style="border: 2px dashed #e0e3ea; border-radius: 8px; padding: 20px; text-align: center; cursor: pointer;">
                                        <i class="fas fa-cloud-upload-alt" style="font-size: 1.5rem; color: #6c757d; margin-bottom: 10px;"></i>
                                        <div style="color: #6c757d; margin-bottom: 5px;">点击上传或拖拽文件至此</div>
                                        <div style="font-size: 0.85rem; color: #999;">支持jpg/png/pdf，大小不超过10M</div>
                                    </div>
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">其他相关证书</label>
                                    <div style="border: 2px dashed #e0e3ea; border-radius: 8px; padding: 20px; text-align: center; cursor: pointer;">
                                        <i class="fas fa-cloud-upload-alt" style="font-size: 1.5rem; color: #6c757d; margin-bottom: 10px;"></i>
                                        <div style="color: #6c757d; margin-bottom: 5px;">点击上传或拖拽文件至此</div>
                                        <div style="font-size: 0.85rem; color: #999;">支持jpg/png/pdf，大小不超过10M</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 提交按钮 -->
                        <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
                            <button type="submit" style="display: flex; align-items: center; gap: 8px; padding: 12px 30px; background: #17a2b8; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: 500;">
                                <i class="fas fa-paper-plane"></i>
                                提交认证申请
                            </button>
                            <button type="button" style="display: flex; align-items: center; gap: 8px; padding: 12px 30px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: 500;">
                                <i class="fas fa-save"></i>
                                保存草稿
                            </button>
                        </div>
                    </form>

                    <!-- 技师权益 -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                        <div style="background: white; border-radius: 10px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                <div style="width: 50px; height: 50px; border-radius: 12px; background: #17a2b8; color: white; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">
                                    <i class="fas fa-clipboard-list"></i>
                </div>
                                <div style="font-size: 1.1rem; font-weight: 600; color: #333;">优先派单</div>
                    </div>
                            <div style="color: #6c757d; line-height: 1.6;">认证技师在维修订单分配中享有优先权，获得更多高质量维修订单。</div>
                        </div>
                        <div style="background: white; border-radius: 10px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                <div style="width: 50px; height: 50px; border-radius: 12px; background: #28a745; color: white; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">
                                    <i class="fas fa-dollar-sign"></i>
                                </div>
                                <div style="font-size: 1.1rem; font-weight: 600; color: #333;">收益提升</div>
                            </div>
                            <div style="color: #6c757d; line-height: 1.6;">认证技师维修费用比普通技师高20%-30%，月收入显著提升。</div>
                        </div>
                        <div style="background: white; border-radius: 10px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                <div style="width: 50px; height: 50px; border-radius: 12px; background: #ffc107; color: white; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">
                                    <i class="fas fa-award"></i>
                                </div>
                                <div style="font-size: 1.1rem; font-weight: 600; color: #333;">专业标识</div>
                            </div>
                            <div style="color: #6c757d; line-height: 1.6;">获得平台认证技师标识，提升个人品牌价值和客户信任度。</div>
                        </div>
                    </div>

                    <script>
                        function toggleRepairSkill(element) {
                            const checkbox = element.querySelector('div');
                            const checkmark = checkbox.querySelector('span');
                            
                            if (element.classList.contains('selected')) {
                                // 取消选择
                                element.classList.remove('selected');
                                element.style.background = 'white';
                                element.style.borderColor = '#e0e3ea';
                                checkbox.style.background = 'transparent';
                                checkbox.style.borderColor = '#e0e3ea';
                                if (checkmark) checkmark.remove();
                            } else {
                                // 选择
                                element.classList.add('selected');
                                element.style.background = '#e8f4f8';
                                element.style.borderColor = '#17a2b8';
                                checkbox.style.background = '#17a2b8';
                                checkbox.style.borderColor = '#17a2b8';
                                if (!checkmark) {
                                    const newCheckmark = document.createElement('span');
                                    newCheckmark.innerHTML = '✓';
                                    newCheckmark.style.position = 'absolute';
                                    newCheckmark.style.top = '50%';
                                    newCheckmark.style.left = '50%';
                                    newCheckmark.style.transform = 'translate(-50%, -50%)';
                                    newCheckmark.style.color = 'white';
                                    newCheckmark.style.fontSize = '0.8rem';
                                    newCheckmark.style.fontWeight = 'bold';
                                    checkbox.appendChild(newCheckmark);
                                }
                            }
                        }
                    </script>
                </div>
                <div class="main-content" id="page-auth-expert" style="display:none">
                    <!-- 认证状态卡片 -->
                    <div style="margin-bottom: 30px;">
                        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; padding: 25px; color: white; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);">
                            <div style="display: flex; align-items: center; gap: 20px;">
                                <div style="width: 60px; height: 60px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-certificate" style="font-size: 1.8rem;"></i>
                                </div>
                                <div>
                                    <h2 style="font-size: 1.5rem; margin-bottom: 5px;">专家认证</h2>
                                    <div style="display: flex; align-items: center; gap: 8px; font-size: 1.1rem;">
                                        <i class="fas fa-check-circle"></i>
                                        <span>认证已通过</span>
                                    </div>
                                    <div style="font-size: 0.9rem; opacity: 0.9; margin-top: 5px;">
                                        认证时间：2024-03-10 10:20:15 | 有效期至：2027-03-10
                                    </div>
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 0.85rem; opacity: 0.9; margin-bottom: 8px;">距离到期还有</div>
                                <div style="font-size: 1.3rem; font-weight: bold;">1095天</div>
                                <button onclick="renewCertification()" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 8px 16px; border-radius: 6px; cursor: pointer; margin-top: 10px; font-size: 0.9rem; transition: all 0.3s;">
                                    提前续签
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 认证记录 -->
                    <div style="background: white; border-radius: 12px; padding: 25px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <h3 style="display: flex; align-items: center; gap: 10px; color: #333; margin-bottom: 20px; font-size: 1.3rem; padding-bottom: 15px; border-bottom: 2px solid #f0f0f0;">
                            <i class="fas fa-history" style="color: #667eea;"></i>
                            认证记录
                        </h3>
                        <div style="overflow-x: auto;">
                            <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                                    <tr style="background: #f8f9fa;">
                                        <th style="padding: 15px; text-align: left; color: #495057; font-weight: 600; border-bottom: 2px solid #dee2e6;">申请时间</th>
                                        <th style="padding: 15px; text-align: left; color: #495057; font-weight: 600; border-bottom: 2px solid #dee2e6;">认证状态</th>
                                        <th style="padding: 15px; text-align: left; color: #495057; font-weight: 600; border-bottom: 2px solid #dee2e6;">审核时间</th>
                                        <th style="padding: 15px; text-align: left; color: #495057; font-weight: 600; border-bottom: 2px solid #dee2e6;">有效期</th>
                                        <th style="padding: 15px; text-align: center; color: #495057; font-weight: 600; border-bottom: 2px solid #dee2e6;">操作</th>
                            </tr>
                        </thead>
                        <tbody>
                                    <tr style="border-bottom: 1px solid #e9ecef;">
                                        <td style="padding: 15px; color: #495057;">2024-03-08 09:15:30</td>
                                        <td style="padding: 15px;">
                                            <span style="background: #d4edda; color: #155724; padding: 4px 12px; border-radius: 20px; font-size: 0.85rem; display: inline-flex; align-items: center; gap: 5px;">
                                                <i class="fas fa-check-circle"></i>
                                                已通过
                                            </span>
                                        </td>
                                        <td style="padding: 15px; color: #495057;">2024-03-10 10:20:15</td>
                                        <td style="padding: 15px; color: #495057;">2024-03-10 ~ 2027-03-10</td>
                                        <td style="padding: 15px; text-align: center;">
                                            <button onclick="viewCertificate('expert')" style="background: #667eea; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.85rem; margin-right: 5px;">
                                                查看证书
                                            </button>
                                            <button onclick="downloadCertificate('expert')" style="background: #28a745; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.85rem;">
                                                下载证书
                                            </button>
                                </td>
                            </tr>
                                    <tr style="border-bottom: 1px solid #e9ecef;">
                                        <td style="padding: 15px; color: #495057;">2024-02-20 14:30:45</td>
                                        <td style="padding: 15px;">
                                            <span style="background: #f8d7da; color: #721c24; padding: 4px 12px; border-radius: 20px; font-size: 0.85rem; display: inline-flex; align-items: center; gap: 5px;">
                                                <i class="fas fa-times-circle"></i>
                                                已拒绝
                                            </span>
                                        </td>
                                        <td style="padding: 15px; color: #495057;">2024-02-22 11:45:20</td>
                                        <td style="padding: 15px; color: #6c757d;">-</td>
                                        <td style="padding: 15px; text-align: center;">
                                            <button onclick="viewRejectReason('专家认证', '专业资质证明不够完整，工作经验描述需要更详细。请补充相关职业资格证书，并详细说明您在各专业领域的实际工作经验和成果。')" style="background: #dc3545; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.85rem;">
                                                查看原因
                                            </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                    </div>

                    <div class="page-header">
                        <h1><i class="fas fa-certificate"></i> 专家认证申请</h1>
                        <p class="page-desc">通过专家认证，成为平台认证技术专家，获得更多服务机会和收益</p>
                    </div>

                    <!-- 认证进度 -->
                    <div style="display: flex; justify-content: center; align-items: center; margin-bottom: 40px; padding: 40px 20px; background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <div style="display: flex; align-items: center; justify-content: center; width: 100%; max-width: 600px; position: relative;">
                            <!-- 步骤1 -->
                            <div style="display: flex; flex-direction: column; align-items: center; z-index: 2;">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: #667eea; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.4rem; margin-bottom: 12px; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);">1</div>
                                <div style="font-weight: 600; color: #667eea; font-size: 0.95rem; text-align: center; line-height: 1.3;">填写资料</div>
                            </div>
                            
                            <!-- 连接线1 -->
                            <div style="flex: 1; height: 3px; background: #e9ecef; margin: 0 20px; border-radius: 2px; position: relative; top: -25px;"></div>
                            
                            <!-- 步骤2 -->
                            <div style="display: flex; flex-direction: column; align-items: center; z-index: 2;">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: #e9ecef; color: #6c757d; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.4rem; margin-bottom: 12px; border: 3px solid #dee2e6;">2</div>
                                <div style="font-weight: 600; color: #6c757d; font-size: 0.95rem; text-align: center; line-height: 1.3;">上传证明</div>
                            </div>
                            
                            <!-- 连接线2 -->
                            <div style="flex: 1; height: 3px; background: #e9ecef; margin: 0 20px; border-radius: 2px; position: relative; top: -25px;"></div>
                            
                            <!-- 步骤3 -->
                            <div style="display: flex; flex-direction: column; align-items: center; z-index: 2;">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: #e9ecef; color: #6c757d; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.4rem; margin-bottom: 12px; border: 3px solid #dee2e6;">3</div>
                                <div style="font-weight: 600; color: #6c757d; font-size: 0.95rem; text-align: center; line-height: 1.3;">平台审核</div>
                            </div>
                            
                            <!-- 连接线3 -->
                            <div style="flex: 1; height: 3px; background: #e9ecef; margin: 0 20px; border-radius: 2px; position: relative; top: -25px;"></div>
                            
                            <!-- 步骤4 -->
                            <div style="display: flex; flex-direction: column; align-items: center; z-index: 2;">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: #e9ecef; color: #6c757d; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.4rem; margin-bottom: 12px; border: 3px solid #dee2e6;">4</div>
                                <div style="font-weight: 600; color: #6c757d; font-size: 0.95rem; text-align: center; line-height: 1.3;">认证通过</div>
                            </div>
                        </div>
                    </div>

                    <!-- 认证表单 -->
                    <form style="background: white; border-radius: 12px; padding: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 25px;">
                        <!-- 基本信息 -->
                        <div style="margin-bottom: 30px;">
                            <h3 style="display: flex; align-items: center; gap: 10px; color: #333; margin-bottom: 20px; font-size: 1.2rem; padding-bottom: 10px; border-bottom: 2px solid #f0f0f0;">
                                <i class="fas fa-user" style="color: #667eea;"></i>
                                基本信息
                            </h3>
                            <!-- 实名认证信息提示 -->
                            <div style="background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%); padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #2196f3;">
                                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                                    <i class="fas fa-info-circle" style="color: #2196f3; font-size: 1.1rem;"></i>
                                    <span style="color: #1976d2; font-weight: 500; font-size: 0.95rem;">实名认证信息</span>
                                </div>
                                <div style="color: #424242; font-size: 0.9rem; line-height: 1.4;">
                                    以下信息来自您的实名认证，如需修改请前往 <a href="#" onclick="showPage('auth-real')" style="color: #2196f3; text-decoration: none;">实名认证页面</a>
                                </div>
                            </div>

                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">真实姓名</label>
                                    <div style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem; background-color: #f8f9fa; color: #6c757d; display: flex; align-items: center; gap: 8px;">
                                        <i class="fas fa-user" style="color: #28a745;"></i>
                                        <span>张三</span>
                                        <span style="margin-left: auto; font-size: 0.8rem; color: #28a745;">已认证</span>
                                    </div>
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">联系电话 <span style="color: #dc3545;">*</span></label>
                                    <input type="tel" placeholder="请输入联系电话" value="138-8888-8888" style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                    </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">工作单位</label>
                                    <input type="text" placeholder="请输入工作单位" value="北京工业设备有限公司" style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">职称等级</label>
                                    <select style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                                        <option value="">请选择职称等级</option>
                                        <option value="初级工程师" selected>初级工程师</option>
                                        <option value="中级工程师">中级工程师</option>
                                        <option value="高级工程师">高级工程师</option>
                                        <option value="正高级工程师">正高级工程师</option>
                        </select>
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">从业年限 <span style="color: #dc3545;">*</span></label>
                                    <select style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                                        <option value="">请选择从业年限</option>
                                        <option value="1-3年">1-3年</option>
                                        <option value="3-5年">3-5年</option>
                                        <option value="5-10年" selected>5-10年</option>
                                        <option value="10年以上">10年以上</option>
                        </select>
                    </div>
                </div>
                        </div>

                        <!-- 专业领域 -->
                        <div style="margin-bottom: 30px;">
                            <h3 style="display: flex; align-items: center; gap: 10px; color: #333; margin-bottom: 20px; font-size: 1.2rem; padding-bottom: 10px; border-bottom: 2px solid #f0f0f0;">
                                <i class="fas fa-cogs" style="color: #667eea;"></i>
                                专业领域 <span style="color: #dc3545; font-size: 0.8rem;">(可多选)</span>
                            </h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                <div onclick="toggleExpertise(this)" style="display: flex; align-items: center; gap: 10px; padding: 12px 15px; background: #f0f4ff; border-radius: 8px; border: 1px solid #667eea; cursor: pointer;" class="selected">
                                    <div style="width: 18px; height: 18px; border: 2px solid #667eea; border-radius: 4px; background: #667eea; position: relative;">
                                        <span style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 0.8rem; font-weight: bold;">✓</span>
                        </div>
                                    <span>空压机系统</span>
                        </div>
                                <div onclick="toggleExpertise(this)" style="display: flex; align-items: center; gap: 10px; padding: 12px 15px; background: white; border-radius: 8px; border: 1px solid #e0e3ea; cursor: pointer;">
                                    <div style="width: 18px; height: 18px; border: 2px solid #e0e3ea; border-radius: 4px;"></div>
                                    <span>制冷设备</span>
                        </div>
                                <div onclick="toggleExpertise(this)" style="display: flex; align-items: center; gap: 10px; padding: 12px 15px; background: #f0f4ff; border-radius: 8px; border: 1px solid #667eea; cursor: pointer;" class="selected">
                                    <div style="width: 18px; height: 18px; border: 2px solid #667eea; border-radius: 4px; background: #667eea; position: relative;">
                                        <span style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 0.8rem; font-weight: bold;">✓</span>
                        </div>
                                    <span>工业锅炉</span>
                        </div>
                                <div onclick="toggleExpertise(this)" style="display: flex; align-items: center; gap: 10px; padding: 12px 15px; background: white; border-radius: 8px; border: 1px solid #e0e3ea; cursor: pointer;">
                                    <div style="width: 18px; height: 18px; border: 2px solid #e0e3ea; border-radius: 4px;"></div>
                                    <span>电气自动化</span>
                        </div>
                                <div onclick="toggleExpertise(this)" style="display: flex; align-items: center; gap: 10px; padding: 12px 15px; background: white; border-radius: 8px; border: 1px solid #e0e3ea; cursor: pointer;">
                                    <div style="width: 18px; height: 18px; border: 2px solid #e0e3ea; border-radius: 4px;"></div>
                                    <span>机械传动</span>
                        </div>
                                <div onclick="toggleExpertise(this)" style="display: flex; align-items: center; gap: 10px; padding: 12px 15px; background: #f0f4ff; border-radius: 8px; border: 1px solid #667eea; cursor: pointer;" class="selected">
                                    <div style="width: 18px; height: 18px; border: 2px solid #667eea; border-radius: 4px; background: #667eea; position: relative;">
                                        <span style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 0.8rem; font-weight: bold;">✓</span>
                        </div>
                                    <span>液压系统</span>
                                </div>
                                <div onclick="toggleExpertise(this)" style="display: flex; align-items: center; gap: 10px; padding: 12px 15px; background: white; border-radius: 8px; border: 1px solid #e0e3ea; cursor: pointer;">
                                    <div style="width: 18px; height: 18px; border: 2px solid #e0e3ea; border-radius: 4px;"></div>
                                    <span>环保设备</span>
                                </div>
                                <div onclick="toggleExpertise(this)" style="display: flex; align-items: center; gap: 10px; padding: 12px 15px; background: white; border-radius: 8px; border: 1px solid #e0e3ea; cursor: pointer;">
                                    <div style="width: 18px; height: 18px; border: 2px solid #e0e3ea; border-radius: 4px;"></div>
                                    <span>其他设备</span>
                                </div>
                            </div>
                        </div>

                        <!-- 个人简介 -->
                        <div style="margin-bottom: 30px;">
                            <h3 style="display: flex; align-items: center; gap: 10px; color: #333; margin-bottom: 20px; font-size: 1.2rem; padding-bottom: 10px; border-bottom: 2px solid #f0f0f0;">
                                <i class="fas fa-edit" style="color: #667eea;"></i>
                                个人简介
                            </h3>
                            <textarea placeholder="请详细描述您的专业经验、技能特长和工作成果" style="width: 100%; padding: 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem; min-height: 120px; resize: vertical; line-height: 1.6;">本人从事工业设备维修保养工作10年，具有丰富的现场实践经验。主要专长包括：

1. 空压机系统：熟练掌握螺杆式、活塞式空压机的维修保养，擅长故障诊断和系统优化
2. 工业锅炉：具备锅炉操作证，熟悉各类工业锅炉的运行维护和安全管理
3. 液压系统：精通液压系统原理，擅长液压设备故障排除和性能提升

累计服务企业客户300+家，成功处理各类设备故障1000+次，客户满意度达98%以上。</textarea>
                        </div>

                        <!-- 资质证书上传 -->
                        <div style="margin-bottom: 30px;">
                            <h3 style="display: flex; align-items: center; gap: 10px; color: #333; margin-bottom: 20px; font-size: 1.2rem; padding-bottom: 10px; border-bottom: 2px solid #f0f0f0;">
                                <i class="fas fa-upload" style="color: #667eea;"></i>
                                资质证书上传
                            </h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">职业资格证书</label>
                                    <div style="border: 2px dashed #e0e3ea; border-radius: 8px; padding: 20px; text-align: center; cursor: pointer;">
                                        <i class="fas fa-cloud-upload-alt" style="font-size: 1.5rem; color: #6c757d; margin-bottom: 10px;"></i>
                                        <div style="color: #6c757d; margin-bottom: 5px;">点击上传或拖拽文件至此</div>
                                        <div style="font-size: 0.85rem; color: #999;">支持jpg/png/pdf，大小不超过10M</div>
                                    </div>
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">学历证书</label>
                                    <div style="border: 2px dashed #e0e3ea; border-radius: 8px; padding: 20px; text-align: center; cursor: pointer;">
                                        <i class="fas fa-cloud-upload-alt" style="font-size: 1.5rem; color: #6c757d; margin-bottom: 10px;"></i>
                                        <div style="color: #6c757d; margin-bottom: 5px;">点击上传或拖拽文件至此</div>
                                        <div style="font-size: 0.85rem; color: #999;">支持jpg/png/pdf，大小不超过10M</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 提交按钮 -->
                        <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
                            <button type="submit" style="display: flex; align-items: center; gap: 8px; padding: 12px 30px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: 500;">
                                <i class="fas fa-paper-plane"></i>
                                提交认证申请
                            </button>
                            <button type="button" style="display: flex; align-items: center; gap: 8px; padding: 12px 30px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: 500;">
                                <i class="fas fa-save"></i>
                                保存草稿
                            </button>
                        </div>
                    </form>

                    <!-- 专家权益 -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                        <div style="background: white; border-radius: 10px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                <div style="width: 50px; height: 50px; border-radius: 12px; background: #667eea; color: white; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">
                                    <i class="fas fa-coins"></i>
                                </div>
                                <div style="font-size: 1.1rem; font-weight: 600; color: #333;">增加收入</div>
                            </div>
                            <div style="color: #6c757d; line-height: 1.6;">成为认证专家后，可通过远程协助、技术咨询等方式获得额外收入，平均月收入增加30%-50%。</div>
                        </div>
                        <div style="background: white; border-radius: 10px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                <div style="width: 50px; height: 50px; border-radius: 12px; background: #28a745; color: white; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">
                                    <i class="fas fa-certificate"></i>
                                </div>
                                <div style="font-size: 1.1rem; font-weight: 600; color: #333;">专家标识</div>
                            </div>
                            <div style="color: #6c757d; line-height: 1.6;">获得平台官方认证标识，提升个人品牌价值和客户信任度，在平台内享受专家待遇。</div>
                        </div>
                        <div style="background: white; border-radius: 10px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                <div style="width: 50px; height: 50px; border-radius: 12px; background: #17a2b8; color: white; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">
                                    <i class="fas fa-star"></i>
                                </div>
                                <div style="font-size: 1.1rem; font-weight: 600; color: #333;">优先推荐</div>
                            </div>
                            <div style="color: #6c757d; line-height: 1.6;">认证专家在订单分配中享有优先权，获得更多高质量订单和合作机会。</div>
                        </div>
                    </div>

                    <script>
                        function toggleExpertise(element) {
                            const checkbox = element.querySelector('div');
                            const checkmark = checkbox.querySelector('span');
                            
                            if (element.classList.contains('selected')) {
                                // 取消选择
                                element.classList.remove('selected');
                                element.style.background = 'white';
                                element.style.borderColor = '#e0e3ea';
                                checkbox.style.background = 'transparent';
                                checkbox.style.borderColor = '#e0e3ea';
                                if (checkmark) checkmark.remove();
                            } else {
                                // 选择
                                element.classList.add('selected');
                                element.style.background = '#f0f4ff';
                                element.style.borderColor = '#667eea';
                                checkbox.style.background = '#667eea';
                                checkbox.style.borderColor = '#667eea';
                                if (!checkmark) {
                                    const newCheckmark = document.createElement('span');
                                    newCheckmark.innerHTML = '✓';
                                    newCheckmark.style.position = 'absolute';
                                    newCheckmark.style.top = '50%';
                                    newCheckmark.style.left = '50%';
                                    newCheckmark.style.transform = 'translate(-50%, -50%)';
                                    newCheckmark.style.color = 'white';
                                    newCheckmark.style.fontSize = '0.8rem';
                                    newCheckmark.style.fontWeight = 'bold';
                                    checkbox.appendChild(newCheckmark);
                                }
                            }
                        }
                    </script>
                </div>
                <div class="main-content" id="page-auth-shop" style="display:none">
                    <!-- 认证状态卡片 -->
                    <div style="margin-bottom: 30px;">
                        <div style="background: linear-gradient(135deg, #fd7e14 0%, #ff6b35 100%); border-radius: 12px; padding: 25px; color: white; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 4px 20px rgba(253, 126, 20, 0.3);">
                            <div style="display: flex; align-items: center; gap: 20px;">
                                <div style="width: 60px; height: 60px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-user-tie" style="font-size: 1.8rem;"></i>
                                </div>
                                <div>
                                    <h2 style="font-size: 1.5rem; margin-bottom: 5px;">个人商家认证</h2>
                                    <div style="display: flex; align-items: center; gap: 8px; font-size: 1.1rem;">
                                        <i class="fas fa-check-circle"></i>
                                        <span>认证已通过</span>
                                    </div>
                                    <div style="font-size: 0.9rem; opacity: 0.9; margin-top: 5px;">
                                        认证时间：2024-04-05 14:20:30 | 有效期至：2025-04-05
                                    </div>
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 0.85rem; opacity: 0.9; margin-bottom: 8px;">距离到期还有</div>
                                <div style="font-size: 1.3rem; font-weight: bold;">340天</div>
                                <button onclick="renewCertification()" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 8px 16px; border-radius: 6px; cursor: pointer; margin-top: 10px; font-size: 0.9rem; transition: all 0.3s;">
                                    提前续签
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 认证记录 -->
                    <div style="background: white; border-radius: 12px; padding: 25px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <h3 style="display: flex; align-items: center; gap: 10px; color: #333; margin-bottom: 20px; font-size: 1.3rem; padding-bottom: 15px; border-bottom: 2px solid #f0f0f0;">
                            <i class="fas fa-history" style="color: #fd7e14;"></i>
                            认证记录
                        </h3>
                        <div style="overflow-x: auto;">
                            <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                                    <tr style="background: #f8f9fa;">
                                        <th style="padding: 15px; text-align: left; color: #495057; font-weight: 600; border-bottom: 2px solid #dee2e6;">申请时间</th>
                                        <th style="padding: 15px; text-align: left; color: #495057; font-weight: 600; border-bottom: 2px solid #dee2e6;">认证状态</th>
                                        <th style="padding: 15px; text-align: left; color: #495057; font-weight: 600; border-bottom: 2px solid #dee2e6;">审核时间</th>
                                        <th style="padding: 15px; text-align: left; color: #495057; font-weight: 600; border-bottom: 2px solid #dee2e6;">有效期</th>
                                        <th style="padding: 15px; text-align: center; color: #495057; font-weight: 600; border-bottom: 2px solid #dee2e6;">操作</th>
                            </tr>
                        </thead>
                        <tbody>
                                    <tr style="border-bottom: 1px solid #e9ecef;">
                                        <td style="padding: 15px; color: #495057;">2024-04-03 11:45:20</td>
                                        <td style="padding: 15px;">
                                            <span style="background: #d4edda; color: #155724; padding: 4px 12px; border-radius: 20px; font-size: 0.85rem; display: inline-flex; align-items: center; gap: 5px;">
                                                <i class="fas fa-check-circle"></i>
                                                已通过
                                            </span>
                                        </td>
                                        <td style="padding: 15px; color: #495057;">2024-04-05 14:20:30</td>
                                        <td style="padding: 15px; color: #495057;">2024-04-05 ~ 2025-04-05</td>
                                        <td style="padding: 15px; text-align: center;">
                                            <button onclick="viewCertificate('shop')" style="background: #fd7e14; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.85rem; margin-right: 5px;">
                                                查看证书
                                            </button>
                                            <button onclick="downloadCertificate('shop')" style="background: #28a745; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.85rem;">
                                                下载证书
                                            </button>
                                </td>
                            </tr>
                                    <tr style="border-bottom: 1px solid #e9ecef;">
                                        <td style="padding: 15px; color: #495057;">2024-03-25 16:30:15</td>
                                        <td style="padding: 15px;">
                                            <span style="background: #f8d7da; color: #721c24; padding: 4px 12px; border-radius: 20px; font-size: 0.85rem; display: inline-flex; align-items: center; gap: 5px;">
                                                <i class="fas fa-times-circle"></i>
                                                已拒绝
                                            </span>
                                        </td>
                                        <td style="padding: 15px; color: #495057;">2024-03-26 10:15:45</td>
                                        <td style="padding: 15px; color: #6c757d;">-</td>
                                        <td style="padding: 15px; text-align: center;">
                                            <button onclick="viewRejectReason('个人商家认证', '服务信息描述不够详细，缺少相关技能证书。请补充详细的服务介绍，上传相关技能证明或工作证明，以便审核您的专业能力。')" style="background: #dc3545; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.85rem;">
                                                查看原因
                                            </button>
                                </td>
                            </tr>
                                    <tr style="border-bottom: 1px solid #e9ecef;">
                                        <td style="padding: 15px; color: #495057;">2024-03-20 09:10:30</td>
                                        <td style="padding: 15px;">
                                            <span style="background: #fff3cd; color: #856404; padding: 4px 12px; border-radius: 20px; font-size: 0.85rem; display: inline-flex; align-items: center; gap: 5px;">
                                                <i class="fas fa-clock"></i>
                                                审核中
                                            </span>
                                        </td>
                                        <td style="padding: 15px; color: #6c757d;">-</td>
                                        <td style="padding: 15px; color: #6c757d;">-</td>
                                        <td style="padding: 15px; text-align: center;">
                                            <span style="color: #6c757d; font-size: 0.85rem;">等待审核</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                        </div>

                    <div class="page-header">
                        <h1><i class="fas fa-user-tie"></i> 个人商家认证申请</h1>
                        <p class="page-desc">通过个人商家认证，成为平台认证商户，获得更多业务机会和客户信任</p>
                        </div>

                    <!-- 认证进度 -->
                    <div style="display: flex; justify-content: center; align-items: center; margin-bottom: 40px; padding: 40px 20px; background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <div style="display: flex; align-items: center; justify-content: center; width: 100%; max-width: 600px; position: relative;">
                            <!-- 步骤1 -->
                            <div style="display: flex; flex-direction: column; align-items: center; z-index: 2;">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: #28a745; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.4rem; margin-bottom: 12px; box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);">1</div>
                                <div style="font-weight: 600; color: #28a745; font-size: 0.95rem; text-align: center; line-height: 1.3;">基本信息</div>
                            </div>
                            
                            <!-- 连接线1 -->
                            <div style="flex: 1; height: 3px; background: linear-gradient(to right, #28a745, #fd7e14); margin: 0 20px; border-radius: 2px; position: relative; top: -25px;"></div>
                            
                            <!-- 步骤2 -->
                            <div style="display: flex; flex-direction: column; align-items: center; z-index: 2;">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: #fd7e14; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.4rem; margin-bottom: 12px; box-shadow: 0 4px 12px rgba(253, 126, 20, 0.3);">2</div>
                                <div style="font-weight: 600; color: #fd7e14; font-size: 0.95rem; text-align: center; line-height: 1.3;">上传证件</div>
                            </div>
                            
                            <!-- 连接线2 -->
                            <div style="flex: 1; height: 3px; background: #e9ecef; margin: 0 20px; border-radius: 2px; position: relative; top: -25px;"></div>
                            
                            <!-- 步骤3 -->
                            <div style="display: flex; flex-direction: column; align-items: center; z-index: 2;">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: #e9ecef; color: #6c757d; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.4rem; margin-bottom: 12px; border: 3px solid #dee2e6;">3</div>
                                <div style="font-weight: 600; color: #6c757d; font-size: 0.95rem; text-align: center; line-height: 1.3;">平台审核</div>
                            </div>
                            
                            <!-- 连接线3 -->
                            <div style="flex: 1; height: 3px; background: #e9ecef; margin: 0 20px; border-radius: 2px; position: relative; top: -25px;"></div>
                            
                            <!-- 步骤4 -->
                            <div style="display: flex; flex-direction: column; align-items: center; z-index: 2;">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: #e9ecef; color: #6c757d; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.4rem; margin-bottom: 12px; border: 3px solid #dee2e6;">4</div>
                                <div style="font-weight: 600; color: #6c757d; font-size: 0.95rem; text-align: center; line-height: 1.3;">认证完成</div>
                            </div>
                        </div>
                    </div>

                    <!-- 认证表单 -->
                    <form style="background: white; border-radius: 12px; padding: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 25px;">
                        <!-- 商户类型选择 -->
                        <div style="margin-bottom: 30px;">
                            <h3 style="display: flex; align-items: center; gap: 10px; color: #333; margin-bottom: 20px; font-size: 1.2rem; padding-bottom: 10px; border-bottom: 2px solid #f0f0f0;">
                                <i class="fas fa-user-check" style="color: #fd7e14;"></i>
                                商户类型
                            </h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                                <div style="border: 2px solid #e0e3ea; border-radius: 8px; padding: 20px; cursor: pointer; transition: all 0.3s;" onclick="selectMerchantType(this, 'individual')">
                                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 10px;">
                                        <div style="width: 20px; height: 20px; border: 2px solid #e0e3ea; border-radius: 50%; position: relative;">
                                            <div style="width: 10px; height: 10px; background: #fd7e14; border-radius: 50%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); display: none;"></div>
                                        </div>
                                        <i class="fas fa-user" style="color: #fd7e14; font-size: 1.2rem;"></i>
                                        <span style="font-weight: 600; color: #333;">个人商户</span>
                                    </div>
                                    <div style="color: #6c757d; font-size: 0.9rem; line-height: 1.5;">适合个人提供技术服务、维修服务等业务</div>
                                </div>
                                <div style="border: 2px solid #e0e3ea; border-radius: 8px; padding: 20px; cursor: pointer; transition: all 0.3s;" onclick="selectMerchantType(this, 'individual_business')">
                                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 10px;">
                                        <div style="width: 20px; height: 20px; border: 2px solid #e0e3ea; border-radius: 50%; position: relative;">
                                            <div style="width: 10px; height: 10px; background: #fd7e14; border-radius: 50%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); display: none;"></div>
                                        </div>
                                        <i class="fas fa-store" style="color: #fd7e14; font-size: 1.2rem;"></i>
                                        <span style="font-weight: 600; color: #333;">个体工商户</span>
                                    </div>
                                    <div style="color: #6c757d; font-size: 0.9rem; line-height: 1.5;">适合有营业执照的个体经营者</div>
                                </div>
                            </div>
                            <input type="hidden" id="merchant-type" name="merchant_type" required>
                        </div>

                        <!-- 基本信息 -->
                        <div style="margin-bottom: 30px;">
                            <h3 style="display: flex; align-items: center; gap: 10px; color: #333; margin-bottom: 20px; font-size: 1.2rem; padding-bottom: 10px; border-bottom: 2px solid #f0f0f0;">
                                <i class="fas fa-id-card" style="color: #fd7e14;"></i>
                                基本信息
                            </h3>
                            <!-- 实名认证信息提示 -->
                            <div style="background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%); padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #2196f3;">
                                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                                    <i class="fas fa-info-circle" style="color: #2196f3; font-size: 1.1rem;"></i>
                                    <span style="color: #1976d2; font-weight: 500; font-size: 0.95rem;">实名认证信息</span>
                                </div>
                                <div style="color: #424242; font-size: 0.9rem; line-height: 1.4;">
                                    以下信息来自您的实名认证，如需修改请前往 <a href="#" onclick="showPage('auth-real')" style="color: #2196f3; text-decoration: none;">实名认证页面</a>
                                </div>
                            </div>

                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">真实姓名</label>
                                    <div style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem; background-color: #f8f9fa; color: #6c757d; display: flex; align-items: center; gap: 8px;">
                                        <i class="fas fa-user" style="color: #28a745;"></i>
                                        <span>张三</span>
                                        <span style="margin-left: auto; font-size: 0.8rem; color: #28a745;">已认证</span>
                                    </div>
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">联系电话 <span style="color: #dc3545;">*</span></label>
                                    <input type="tel" placeholder="请输入联系电话" style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;" required>
                                </div>
                                <div id="business-name-field" style="display: none;">
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">店铺/工商户名称 <span style="color: #dc3545;">*</span></label>
                                    <input type="text" placeholder="请输入店铺或工商户名称" style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                                </div>
                                <div id="credit-code-field" style="display: none;">
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">统一社会信用代码</label>
                                    <input type="text" placeholder="请输入统一社会信用代码" style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">从业年限</label>
                                    <select style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                                        <option value="">请选择从业年限</option>
                                        <option value="1年以下">1年以下</option>
                                        <option value="1-3年">1-3年</option>
                                        <option value="3-5年">3-5年</option>
                                        <option value="5-10年">5-10年</option>
                                        <option value="10年以上">10年以上</option>
                                    </select>
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">所在城市 <span style="color: #dc3545;">*</span></label>
                                    <input type="text" placeholder="请输入所在城市" style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;" required>
                                </div>
                            </div>
                        </div>

                        <!-- 服务信息 -->
                        <div style="margin-bottom: 30px;">
                            <h3 style="display: flex; align-items: center; gap: 10px; color: #333; margin-bottom: 20px; font-size: 1.2rem; padding-bottom: 10px; border-bottom: 2px solid #f0f0f0;">
                                <i class="fas fa-tools" style="color: #fd7e14;"></i>
                                服务信息
                            </h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">服务类型 <span style="color: #dc3545;">*</span></label>
                                    <select style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;" required>
                                        <option value="">请选择主要服务类型</option>
                                        <option value="设备维修">设备维修</option>
                                        <option value="设备保养">设备保养</option>
                                        <option value="设备安装">设备安装</option>
                                        <option value="技术调试">技术调试</option>
                                        <option value="故障诊断">故障诊断</option>
                                        <option value="配件销售">配件销售</option>
                                        <option value="技术咨询">技术咨询</option>
                                        <option value="其他">其他</option>
                                    </select>
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">专业领域</label>
                                    <select style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                                <option value="">请选择专业领域</option>
                                        <option value="机械设备">机械设备</option>
                                        <option value="电气设备">电气设备</option>
                                        <option value="电子设备">电子设备</option>
                                        <option value="自动化设备">自动化设备</option>
                                        <option value="制冷设备">制冷设备</option>
                                        <option value="暖通设备">暖通设备</option>
                                        <option value="医疗设备">医疗设备</option>
                                        <option value="办公设备">办公设备</option>
                            </select>
                        </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">服务地址 <span style="color: #dc3545;">*</span></label>
                                    <input type="text" placeholder="请输入常驻服务地址" style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;" required>
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">服务半径</label>
                                    <select style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                                        <option value="">请选择服务半径</option>
                                        <option value="5公里内">5公里内</option>
                                        <option value="10公里内">10公里内</option>
                                        <option value="20公里内">20公里内</option>
                                        <option value="同城">同城</option>
                                        <option value="同省">同省</option>
                                        <option value="全国">全国</option>
                            </select>
                        </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">个人邮箱</label>
                                    <input type="email" placeholder="请输入个人邮箱" style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                        </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">微信号</label>
                                    <input type="text" placeholder="请输入微信号（便于客户联系）" style="width: 100%; padding: 12px 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem;">
                        </div>
                                <div style="grid-column: 1 / -1;">
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">服务介绍 <span style="color: #dc3545;">*</span></label>
                                    <textarea placeholder="请详细介绍您的服务内容、技术特长、工作经验等" style="width: 100%; padding: 15px; border: 1px solid #e0e3ea; border-radius: 8px; font-size: 0.95rem; min-height: 120px; resize: vertical; line-height: 1.6;" required></textarea>
                        </div>
                        </div>
                        </div>

                        <!-- 资质上传 -->
                        <div style="margin-bottom: 30px;">
                            <h3 style="display: flex; align-items: center; gap: 10px; color: #333; margin-bottom: 20px; font-size: 1.2rem; padding-bottom: 10px; border-bottom: 2px solid #f0f0f0;">
                                <i class="fas fa-upload" style="color: #fd7e14;"></i>
                                资质上传
                            </h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                                <div id="business-license-field" style="display: none;">
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">营业执照 <span style="color: #dc3545;">*</span></label>
                                    <div style="border: 2px dashed #e0e3ea; border-radius: 8px; padding: 20px; text-align: center; cursor: pointer;">
                                        <i class="fas fa-certificate" style="font-size: 1.5rem; color: #6c757d; margin-bottom: 10px;"></i>
                                        <div style="color: #6c757d; margin-bottom: 5px;">点击上传营业执照</div>
                                        <div style="font-size: 0.85rem; color: #999;">支持jpg/png/pdf，大小不超过10M</div>
                                    </div>
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">个人照片 <span style="color: #dc3545;">*</span></label>
                                    <div style="border: 2px dashed #e0e3ea; border-radius: 8px; padding: 20px; text-align: center; cursor: pointer;">
                                        <i class="fas fa-user-circle" style="font-size: 1.5rem; color: #6c757d; margin-bottom: 10px;"></i>
                                        <div style="color: #6c757d; margin-bottom: 5px;">点击上传个人照片</div>
                                        <div style="font-size: 0.85rem; color: #999;">用于平台展示，支持jpg/png</div>
                                    </div>
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">技能证书</label>
                                    <div style="border: 2px dashed #e0e3ea; border-radius: 8px; padding: 20px; text-align: center; cursor: pointer;">
                                        <i class="fas fa-award" style="font-size: 1.5rem; color: #6c757d; margin-bottom: 10px;"></i>
                                        <div style="color: #6c757d; margin-bottom: 5px;">点击上传技能证书</div>
                                        <div style="font-size: 0.85rem; color: #999;">如职业资格证、技能等级证等</div>
                                    </div>
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">工作证明</label>
                                    <div style="border: 2px dashed #e0e3ea; border-radius: 8px; padding: 20px; text-align: center; cursor: pointer;">
                                        <i class="fas fa-file-alt" style="font-size: 1.5rem; color: #6c757d; margin-bottom: 10px;"></i>
                                        <div style="color: #6c757d; margin-bottom: 5px;">点击上传工作证明</div>
                                        <div style="font-size: 0.85rem; color: #999;">如工作证明、推荐信等</div>
                                    </div>
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">服务案例</label>
                                    <div style="border: 2px dashed #e0e3ea; border-radius: 8px; padding: 20px; text-align: center; cursor: pointer;">
                                        <i class="fas fa-images" style="font-size: 1.5rem; color: #6c757d; margin-bottom: 10px;"></i>
                                        <div style="color: #6c757d; margin-bottom: 5px;">点击上传服务案例照片</div>
                                        <div style="font-size: 0.85rem; color: #999;">展示您的工作成果，支持jpg/png</div>
                                    </div>
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px; font-size: 0.9rem;">其他资质</label>
                                    <div style="border: 2px dashed #e0e3ea; border-radius: 8px; padding: 20px; text-align: center; cursor: pointer;">
                                        <i class="fas fa-file-upload" style="font-size: 1.5rem; color: #6c757d; margin-bottom: 10px;"></i>
                                        <div style="color: #6c757d; margin-bottom: 5px;">点击上传其他相关资质</div>
                                        <div style="font-size: 0.85rem; color: #999;">如荣誉证书、培训证明等</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 提交按钮 -->
                        <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
                            <button type="submit" style="display: flex; align-items: center; gap: 8px; padding: 12px 30px; background: #fd7e14; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: 500;">
                                <i class="fas fa-paper-plane"></i>
                                提交认证申请
                            </button>
                            <button type="button" style="display: flex; align-items: center; gap: 8px; padding: 12px 30px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: 500;">
                                <i class="fas fa-save"></i>
                                保存草稿
                            </button>
                        </div>
                    </form>

                    <!-- 认证权益 -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">
                        <div style="background: white; border-radius: 10px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                <div style="width: 50px; height: 50px; border-radius: 12px; background: #fd7e14; color: white; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">
                                    <i class="fas fa-star"></i>
                                </div>
                                <div style="font-size: 1.1rem; font-weight: 600; color: #333;">优先派单</div>
                            </div>
                            <div style="color: #6c757d; line-height: 1.6;">认证个人商户在订单分配中享有优先权，获得更多高质量订单和服务机会。</div>
                        </div>
                        <div style="background: white; border-radius: 10px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                <div style="width: 50px; height: 50px; border-radius: 12px; background: #28a745; color: white; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                <div style="font-size: 1.1rem; font-weight: 600; color: #333;">信誉保障</div>
                            </div>
                            <div style="color: #6c757d; line-height: 1.6;">获得平台认证标识，提升个人品牌形象和客户信任度，增强竞争优势。</div>
                        </div>
                        <div style="background: white; border-radius: 10px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                <div style="width: 50px; height: 50px; border-radius: 12px; background: #17a2b8; color: white; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">
                                    <i class="fas fa-coins"></i>
                                </div>
                                <div style="font-size: 1.1rem; font-weight: 600; color: #333;">收益提升</div>
                            </div>
                            <div style="color: #6c757d; line-height: 1.6;">认证商户享受更高的服务费率和奖励机制，提升个人收益水平。</div>
                        </div>
                        <div style="background: white; border-radius: 10px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                <div style="width: 50px; height: 50px; border-radius: 12px; background: #6f42c1; color: white; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">
                                    <i class="fas fa-headset"></i>
                                </div>
                                <div style="font-size: 1.1rem; font-weight: 600; color: #333;">专属服务</div>
                            </div>
                            <div style="color: #6c757d; line-height: 1.6;">享受专属客服支持、技术培训和业务指导，助力个人事业发展。</div>
                        </div>
                        <div style="background: white; border-radius: 10px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                <div style="width: 50px; height: 50px; border-radius: 12px; background: #e83e8c; color: white; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">
                                    <i class="fas fa-network-wired"></i>
                                </div>
                                <div style="font-size: 1.1rem; font-weight: 600; color: #333;">资源对接</div>
                            </div>
                            <div style="color: #6c757d; line-height: 1.6;">接入平台优质客户资源和合作伙伴网络，扩大业务覆盖范围。</div>
                        </div>
                        <div style="background: white; border-radius: 10px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                <div style="width: 50px; height: 50px; border-radius: 12px; background: #20c997; color: white; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">
                                    <i class="fas fa-graduation-cap"></i>
                                </div>
                                <div style="font-size: 1.1rem; font-weight: 600; color: #333;">技能提升</div>
                            </div>
                            <div style="color: #6c757d; line-height: 1.6;">免费参加平台组织的技能培训和行业交流活动，持续提升专业能力。</div>
                        </div>
                    </div>

                    <script>
                        // 商户类型选择
                        function selectMerchantType(element, type) {
                            // 清除所有选择状态
                            document.querySelectorAll('#page-auth-shop [onclick*="selectMerchantType"]').forEach(item => {
                                item.style.borderColor = '#e0e3ea';
                                item.style.background = 'white';
                                const radio = item.querySelector('div > div');
                                radio.style.display = 'none';
                            });
                            
                            // 设置当前选择状态
                            element.style.borderColor = '#fd7e14';
                            element.style.background = '#fff8f0';
                            const radio = element.querySelector('div > div');
                            radio.style.display = 'block';
                            
                            // 设置隐藏字段值
                            document.getElementById('merchant-type').value = type;
                            
                            // 根据类型显示/隐藏相关字段
                            const businessNameField = document.getElementById('business-name-field');
                            const creditCodeField = document.getElementById('credit-code-field');
                            const businessLicenseField = document.getElementById('business-license-field');
                            
                            if (type === 'individual_business') {
                                businessNameField.style.display = 'block';
                                creditCodeField.style.display = 'block';
                                businessLicenseField.style.display = 'block';
                                businessNameField.querySelector('input').required = true;
                                businessLicenseField.querySelector('input').required = true;
                            } else {
                                businessNameField.style.display = 'none';
                                creditCodeField.style.display = 'none';
                                businessLicenseField.style.display = 'none';
                                businessNameField.querySelector('input').required = false;
                                businessLicenseField.querySelector('input').required = false;
                            }
                        }

                        // 文件上传交互
                        document.querySelectorAll('#page-auth-shop div[style*="border: 2px dashed"]').forEach(area => {
                            area.addEventListener('click', function() {
                                const input = document.createElement('input');
                                input.type = 'file';
                                input.accept = 'image/*,application/pdf';
                                input.onchange = function(e) {
                                    const file = e.target.files[0];
                                    if (file) {
                                        area.innerHTML = `
                                            <i class="fas fa-check-circle" style="color: #28a745; font-size: 1.5rem; margin-bottom: 10px;"></i>
                                            <div style="color: #28a745; margin-bottom: 5px;">已选择: ${file.name}</div>
                                            <div style="font-size: 0.85rem; color: #999;">点击重新选择文件</div>
                                        `;
                                    }
                                };
                                input.click();
                            });
                        });

                        // 表单验证
                        document.querySelector('#page-auth-shop form').addEventListener('submit', function(e) {
                            e.preventDefault();
                            
                            // 检查商户类型是否选择
                            const merchantType = document.getElementById('merchant-type').value;
                            if (!merchantType) {
                                alert('请选择商户类型！');
                                return;
                            }
                            
                            // 简单的表单验证
                            const requiredFields = this.querySelectorAll('input[required], select[required], textarea[required]');
                            let isValid = true;
                            
                            requiredFields.forEach(field => {
                                if (!field.value.trim()) {
                                    field.style.borderColor = '#dc3545';
                                    isValid = false;
                                } else {
                                    field.style.borderColor = '#e0e3ea';
                                }
                            });
                            
                            if (isValid) {
                                const typeText = merchantType === 'individual' ? '个人商户' : '个体工商户';
                                alert(`${typeText}认证申请已提交，我们将在1-2个工作日内完成审核！`);
                            } else {
                                alert('请填写所有必填项！');
                            }
                        });
                    </script>
                </div>
                <div class="main-content" id="page-password" style="display:none">
                    <div class="page-header">
                        <div class="header-left">
                            <h1><i class="fas fa-key"></i> 密码重置</h1>
                            <p class="page-desc">为了保护您的账户安全，请定期更换密码</p>
                        </div>
                    </div>

                    <!-- 安全提示 -->
                    <div style="background: linear-gradient(135deg, #e3f2fd, #f3e5f5); border: 1px solid #2196f3; border-radius: 12px; padding: 20px; margin-bottom: 25px;">
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <div style="width: 50px; height: 50px; background: #2196f3; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-shield-alt" style="color: white; font-size: 1.5rem;"></i>
                            </div>
                            <div>
                                <h3 style="color: #1976d2; margin: 0 0 8px 0; font-size: 1.1rem;">密码安全提示</h3>
                                <ul style="color: #424242; margin: 0; padding-left: 20px; font-size: 0.9rem; line-height: 1.6;">
                                    <li>新密码长度8-20位，必须包含大小写字母、数字和特殊字符</li>
                                    <li>不要使用与其他网站相同的密码</li>
                                    <li>建议每3-6个月更换一次密码</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- 密码重置表单 -->
                    <div style="background: white; border-radius: 12px; padding: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <form id="passwordResetForm" onsubmit="return resetPassword(event)">
                            <div style="display: grid; grid-template-columns: 1fr; gap: 25px; max-width: 500px;">
                                <!-- 当前密码 -->
                        <div class="form-group">
                                    <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px; color: #333; font-weight: 500;">
                                        <i class="fas fa-lock" style="color: #667eea;"></i>
                                        当前密码 <span style="color: #dc3545;">*</span>
                                    </label>
                                    <div style="position: relative;">
                                        <input type="password" id="currentPassword" placeholder="请输入当前密码" required style="width: 100%; padding: 12px 45px 12px 15px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 0.95rem; transition: border-color 0.3s;">
                                        <button type="button" onclick="togglePassword('currentPassword')" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); background: none; border: none; color: #6c757d; cursor: pointer;">
                                            <i class="fas fa-eye"></i>
                                        </button>
                        </div>
                                </div>

                                <!-- 新密码 -->
                        <div class="form-group">
                                    <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px; color: #333; font-weight: 500;">
                                        <i class="fas fa-key" style="color: #28a745;"></i>
                                        新密码 <span style="color: #dc3545;">*</span>
                                    </label>
                                    <div style="position: relative;">
                                        <input type="password" id="newPassword" placeholder="请输入新密码" required style="width: 100%; padding: 12px 45px 12px 15px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 0.95rem; transition: border-color 0.3s;" oninput="checkPasswordStrength()">
                                        <button type="button" onclick="togglePassword('newPassword')" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); background: none; border: none; color: #6c757d; cursor: pointer;">
                                            <i class="fas fa-eye"></i>
                                        </button>
                        </div>
                                    <!-- 密码强度指示器 -->
                                    <div id="passwordStrength" style="margin-top: 10px;">
                                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                            <span style="font-size: 0.8rem; color: #6c757d;">密码强度：</span>
                                            <span id="strengthText" style="font-size: 0.8rem; font-weight: 500; color: #dc3545;">弱</span>
                                        </div>
                                        <div style="height: 6px; background: #f8f9fa; border-radius: 3px; overflow: hidden;">
                                            <div id="strengthBar" style="height: 100%; width: 0%; background: #dc3545; transition: all 0.3s; border-radius: 3px;"></div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 确认新密码 -->
                        <div class="form-group">
                                    <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px; color: #333; font-weight: 500;">
                                        <i class="fas fa-check-circle" style="color: #17a2b8;"></i>
                                        确认新密码 <span style="color: #dc3545;">*</span>
                                    </label>
                                    <div style="position: relative;">
                                        <input type="password" id="confirmPassword" placeholder="请再次输入新密码" required style="width: 100%; padding: 12px 45px 12px 15px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 0.95rem; transition: border-color 0.3s;" oninput="checkPasswordMatch()">
                                        <button type="button" onclick="togglePassword('confirmPassword')" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); background: none; border: none; color: #6c757d; cursor: pointer;">
                                            <i class="fas fa-eye"></i>
                                        </button>
                        </div>
                                    <div id="passwordMatch" style="margin-top: 8px; font-size: 0.8rem; display: none;"></div>
                                </div>

                                <!-- 手机验证码 -->
                        <div class="form-group">
                                    <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px; color: #333; font-weight: 500;">
                                        <i class="fas fa-mobile-alt" style="color: #fd7e14;"></i>
                                        手机验证码 <span style="color: #dc3545;">*</span>
                                    </label>
                                    <div style="display: flex; gap: 12px;">
                                        <input type="text" id="verificationCode" placeholder="请输入6位验证码" required style="flex: 1; padding: 12px 15px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 0.95rem; transition: border-color 0.3s;" maxlength="6">
                                        <button type="button" id="sendCodeBtn" onclick="sendVerificationCode()" style="padding: 12px 20px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 0.9rem; white-space: nowrap; transition: background 0.3s;">
                                            获取验证码
                                        </button>
                            </div>
                                    <div style="font-size: 0.8rem; color: #6c757d; margin-top: 8px;">
                                        验证码将发送至手机号：138****8888
                        </div>
                                </div>
                            </div>

                            <!-- 操作按钮 -->
                            <div style="display: flex; gap: 15px; margin-top: 30px; max-width: 500px;">
                                <button type="submit" style="flex: 1; padding: 12px; background: #28a745; color: white; border: none; border-radius: 8px; font-size: 1rem; font-weight: 500; cursor: pointer; transition: background 0.3s;">
                                    <i class="fas fa-check"></i> 确认修改
                                </button>
                                <button type="button" onclick="resetForm()" style="padding: 12px 20px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 8px; font-size: 1rem; cursor: pointer; transition: all 0.3s;">
                                    <i class="fas fa-undo"></i> 重置
                                </button>
                            </div>
                    </form>
                    </div>

                    <!-- 密码管理建议 -->
                    <div style="background: white; border-radius: 12px; padding: 25px; margin-top: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <h3 style="color: #333; margin-bottom: 20px; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-lightbulb" style="color: #ffc107;"></i>
                            密码管理建议
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                            <div style="display: flex; align-items: center; gap: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                <div style="width: 40px; height: 40px; background: #28a745; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-random" style="color: white; font-size: 1rem;"></i>
                                </div>
                                <div>
                                    <div style="font-weight: 500; color: #333; margin-bottom: 3px;">使用复杂密码</div>
                                    <div style="font-size: 0.8rem; color: #6c757d;">包含大小写字母、数字和符号</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                <div style="width: 40px; height: 40px; background: #17a2b8; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-sync-alt" style="color: white; font-size: 1rem;"></i>
                                </div>
                                <div>
                                    <div style="font-weight: 500; color: #333; margin-bottom: 3px;">定期更换</div>
                                    <div style="font-size: 0.8rem; color: #6c757d;">建议每3-6个月更换一次</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                <div style="width: 40px; height: 40px; background: #fd7e14; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-ban" style="color: white; font-size: 1rem;"></i>
                                </div>
                                <div>
                                    <div style="font-weight: 500; color: #333; margin-bottom: 3px;">避免重复使用</div>
                                    <div style="font-size: 0.8rem; color: #6c757d;">不要在多个网站使用相同密码</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <script>
                        function togglePassword(inputId) {
                            const input = document.getElementById(inputId);
                            const icon = input.nextElementSibling.querySelector('i');
                            
                            if (input.type === 'password') {
                                input.type = 'text';
                                icon.className = 'fas fa-eye-slash';
                            } else {
                                input.type = 'password';
                                icon.className = 'fas fa-eye';
                            }
                        }

                        function checkPasswordStrength() {
                            const password = document.getElementById('newPassword').value;
                            const strengthBar = document.getElementById('strengthBar');
                            const strengthText = document.getElementById('strengthText');
                            
                            let strength = 0;
                            let text = '弱';
                            let color = '#dc3545';
                            
                            if (password.length >= 8) strength++;
                            if (/[a-z]/.test(password)) strength++;
                            if (/[A-Z]/.test(password)) strength++;
                            if (/[0-9]/.test(password)) strength++;
                            if (/[^A-Za-z0-9]/.test(password)) strength++;
                            
                            switch (strength) {
                                case 1:
                                case 2:
                                    text = '弱';
                                    color = '#dc3545';
                                    break;
                                case 3:
                                    text = '中';
                                    color = '#ffc107';
                                    break;
                                case 4:
                                    text = '强';
                                    color = '#28a745';
                                    break;
                                case 5:
                                    text = '极强';
                                    color = '#17a2b8';
                                    break;
                            }
                            
                            strengthBar.style.width = (strength * 20) + '%';
                            strengthBar.style.background = color;
                            strengthText.textContent = text;
                            strengthText.style.color = color;
                        }

                        function checkPasswordMatch() {
                            const newPassword = document.getElementById('newPassword').value;
                            const confirmPassword = document.getElementById('confirmPassword').value;
                            const matchDiv = document.getElementById('passwordMatch');
                            
                            if (confirmPassword.length > 0) {
                                matchDiv.style.display = 'block';
                                if (newPassword === confirmPassword) {
                                    matchDiv.textContent = '✓ 密码匹配';
                                    matchDiv.style.color = '#28a745';
                                } else {
                                    matchDiv.textContent = '✗ 密码不匹配';
                                    matchDiv.style.color = '#dc3545';
                                }
                            } else {
                                matchDiv.style.display = 'none';
                            }
                        }

                        function sendVerificationCode() {
                            const btn = document.getElementById('sendCodeBtn');
                            let countdown = 60;
                            
                            btn.disabled = true;
                            btn.textContent = `${countdown}秒后重发`;
                            btn.style.background = '#6c757d';
                            
                            const timer = setInterval(() => {
                                countdown--;
                                btn.textContent = `${countdown}秒后重发`;
                                
                                if (countdown <= 0) {
                                    clearInterval(timer);
                                    btn.disabled = false;
                                    btn.textContent = '获取验证码';
                                    btn.style.background = '#667eea';
                                }
                            }, 1000);
                            
                            // 这里应该调用实际的发送验证码API
                            console.log('发送验证码到 138****8888');
                        }

                        function resetPassword(event) {
                            event.preventDefault();
                            
                            const currentPassword = document.getElementById('currentPassword').value;
                            const newPassword = document.getElementById('newPassword').value;
                            const confirmPassword = document.getElementById('confirmPassword').value;
                            const verificationCode = document.getElementById('verificationCode').value;
                            
                            if (newPassword !== confirmPassword) {
                                alert('新密码和确认密码不匹配');
                                return false;
                            }
                            
                            if (verificationCode.length !== 6) {
                                alert('请输入6位验证码');
                                return false;
                            }
                            
                            // 这里应该调用实际的密码重置API
                            alert('密码重置成功！');
                            return false;
                        }

                        function resetForm() {
                            document.getElementById('passwordResetForm').reset();
                            document.getElementById('passwordMatch').style.display = 'none';
                            document.getElementById('strengthBar').style.width = '0%';
                            document.getElementById('strengthText').textContent = '弱';
                        }
                    </script>
                </div>
                <div class="main-content" id="page-security" style="display:none">
                    <div class="page-header">
                        <div class="header-left">
                            <h1><i class="fas fa-shield-alt"></i> 安全设置</h1>
                            <p class="page-desc">保护您的账户安全，管理登录设备和验证方式</p>
                        </div>
                    </div>

                    <!-- 安全状态概览 -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-bottom: 30px;">
                        <div style="background: linear-gradient(135deg, #28a745, #20c997); color: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);">
                            <div style="display: flex; align-items: center; gap: 15px;">
                                <div style="width: 50px; height: 50px; background: rgba(255,255,255,0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-shield-check" style="font-size: 1.5rem;"></i>
                            </div>
                                <div>
                                    <div style="font-size: 1.3rem; font-weight: bold; margin-bottom: 3px;">高</div>
                                    <div style="font-size: 0.9rem; opacity: 0.9;">安全等级</div>
                        </div>
                            </div>
                        </div>
                        <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);">
                            <div style="display: flex; align-items: center; gap: 15px;">
                                <div style="width: 50px; height: 50px; background: rgba(255,255,255,0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-mobile-alt" style="font-size: 1.5rem;"></i>
                                </div>
                                <div>
                                    <div style="font-size: 1.3rem; font-weight: bold; margin-bottom: 3px;">2</div>
                                    <div style="font-size: 0.9rem; opacity: 0.9;">已绑定设备</div>
                                </div>
                            </div>
                        </div>
                        <div style="background: linear-gradient(135deg, #17a2b8, #6f42c1); color: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(23, 162, 184, 0.3);">
                            <div style="display: flex; align-items: center; gap: 15px;">
                                <div style="width: 50px; height: 50px; background: rgba(255,255,255,0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-clock" style="font-size: 1.5rem;"></i>
                                </div>
                                <div>
                                    <div style="font-size: 1.1rem; font-weight: bold; margin-bottom: 3px;">2小时前</div>
                                    <div style="font-size: 0.9rem; opacity: 0.9;">最后登录</div>
                                </div>
                            </div>
                        </div>
                        <div style="background: linear-gradient(135deg, #ffc107, #fd7e14); color: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(255, 193, 7, 0.3);">
                            <div style="display: flex; align-items: center; gap: 15px;">
                                <div style="width: 50px; height: 50px; background: rgba(255,255,255,0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-check-double" style="font-size: 1.5rem;"></i>
                                </div>
                                <div>
                                    <div style="font-size: 1.3rem; font-weight: bold; margin-bottom: 3px;">开启</div>
                                    <div style="font-size: 0.9rem; opacity: 0.9;">二次验证</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 二次验证设置 -->
                    <div style="background: white; border-radius: 12px; padding: 25px; margin-bottom: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <h3 style="color: #333; margin-bottom: 20px; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-key" style="color: #ffc107;"></i>
                            二次验证
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                            <!-- 手机验证 -->
                            <div style="border: 2px solid #e8f5e8; border-radius: 12px; padding: 20px; background: #f8fff8;">
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                                    <div style="display: flex; align-items: center; gap: 12px;">
                                        <div style="width: 40px; height: 40px; background: #28a745; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                            <i class="fas fa-mobile-alt" style="color: white; font-size: 1rem;"></i>
                                        </div>
                                        <div>
                                            <div style="font-weight: 600; color: #333;">手机验证</div>
                                            <div style="font-size: 0.8rem; color: #28a745;">已启用</div>
                                        </div>
                                    </div>
                                    <span style="padding: 4px 8px; background: #28a745; color: white; border-radius: 12px; font-size: 0.75rem;">
                                        <i class="fas fa-check"></i>
                                    </span>
                                </div>
                                <div style="color: #6c757d; font-size: 0.9rem; margin-bottom: 15px;">
                                    已绑定手机：<strong>138****8888</strong>
                                </div>
                                <button onclick="changePhone()" style="width: 100%; padding: 8px; background: #f8f9fa; color: #28a745; border: 1px solid #28a745; border-radius: 6px; cursor: pointer; font-size: 0.9rem; transition: all 0.3s;">
                                    更换手机号
                                </button>
                            </div>

                            <!-- 邮箱验证 -->
                            <div style="border: 2px solid #e8f5e8; border-radius: 12px; padding: 20px; background: #f8fff8;">
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                                    <div style="display: flex; align-items: center; gap: 12px;">
                                        <div style="width: 40px; height: 40px; background: #17a2b8; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                            <i class="fas fa-envelope" style="color: white; font-size: 1rem;"></i>
                                        </div>
                                        <div>
                                            <div style="font-weight: 600; color: #333;">邮箱验证</div>
                                            <div style="font-size: 0.8rem; color: #28a745;">已启用</div>
                                        </div>
                                    </div>
                                    <span style="padding: 4px 8px; background: #28a745; color: white; border-radius: 12px; font-size: 0.75rem;">
                                        <i class="fas fa-check"></i>
                                    </span>
                                </div>
                                <div style="color: #6c757d; font-size: 0.9rem; margin-bottom: 15px;">
                                    已绑定邮箱：<strong>zhangsan@example.com</strong>
                                </div>
                                <button onclick="changeEmail()" style="width: 100%; padding: 8px; background: #f8f9fa; color: #17a2b8; border: 1px solid #17a2b8; border-radius: 6px; cursor: pointer; font-size: 0.9rem; transition: all 0.3s;">
                                    更换邮箱
                                </button>
                            </div>

                            <!-- 动态令牌 -->
                            <div style="border: 2px solid #fff3cd; border-radius: 12px; padding: 20px; background: #fffbf0;">
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                                    <div style="display: flex; align-items: center; gap: 12px;">
                                        <div style="width: 40px; height: 40px; background: #ffc107; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                            <i class="fas fa-shield-alt" style="color: white; font-size: 1rem;"></i>
                                        </div>
                                        <div>
                                            <div style="font-weight: 600; color: #333;">动态令牌</div>
                                            <div style="font-size: 0.8rem; color: #856404;">未启用</div>
                                        </div>
                                    </div>
                                    <span style="padding: 4px 8px; background: #6c757d; color: white; border-radius: 12px; font-size: 0.75rem;">
                                        <i class="fas fa-times"></i>
                                    </span>
                                </div>
                                <div style="color: #6c757d; font-size: 0.9rem; margin-bottom: 15px;">
                                    使用Google Authenticator等应用生成动态密码
                                </div>
                                <button onclick="enableTOTP()" style="width: 100%; padding: 8px; background: #ffc107; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem; transition: all 0.3s;">
                                    启用动态令牌
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 登录历史 -->
                    <div style="background: white; border-radius: 12px; padding: 25px; margin-bottom: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="color: #333; margin: 0; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-history" style="color: #6f42c1;"></i>
                                登录历史
                            </h3>
                            <div style="display: flex; gap: 10px;">
                                <select style="padding: 6px 12px; border: 1px solid #e9ecef; border-radius: 6px; font-size: 0.9rem;">
                                    <option>最近7天</option>
                                    <option>最近30天</option>
                                    <option>最近90天</option>
                                </select>
                                <button onclick="exportLoginHistory()" style="padding: 6px 12px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">
                                    <i class="fas fa-download"></i> 导出
                                </button>
                            </div>
                        </div>
                        <div style="overflow-x: auto;">
                            <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                    <tr style="background: #f8f9fa;">
                                        <th style="padding: 12px 15px; text-align: left; border-bottom: 2px solid #e9ecef; color: #495057; font-weight: 600; font-size: 0.9rem;">时间</th>
                                        <th style="padding: 12px 15px; text-align: left; border-bottom: 2px solid #e9ecef; color: #495057; font-weight: 600; font-size: 0.9rem;">地点</th>
                                        <th style="padding: 12px 15px; text-align: left; border-bottom: 2px solid #e9ecef; color: #495057; font-weight: 600; font-size: 0.9rem;">设备</th>
                                        <th style="padding: 12px 15px; text-align: left; border-bottom: 2px solid #e9ecef; color: #495057; font-weight: 600; font-size: 0.9rem;">IP地址</th>
                                        <th style="padding: 12px 15px; text-align: left; border-bottom: 2px solid #e9ecef; color: #495057; font-weight: 600; font-size: 0.9rem;">状态</th>
                                </tr>
                            </thead>
                            <tbody>
                                    <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                        <td style="padding: 15px; color: #333; font-size: 0.9rem;">
                                            <div style="font-weight: 500;">2024-06-01</div>
                                            <div style="color: #6c757d; font-size: 0.8rem;">09:12:45</div>
                                        </td>
                                        <td style="padding: 15px; color: #333; font-size: 0.9rem;">
                                            <div style="display: flex; align-items: center; gap: 8px;">
                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; font-size: 0.8rem;"></i>
                                                <span>北京市朝阳区</span>
                                            </div>
                                        </td>
                                        <td style="padding: 15px; color: #333; font-size: 0.9rem;">
                                            <div style="display: flex; align-items: center; gap: 8px;">
                                                <i class="fab fa-windows" style="color: #0078d4; font-size: 0.9rem;"></i>
                                                <span>Windows · Chrome</span>
                                            </div>
                                        </td>
                                        <td style="padding: 15px; color: #6c757d; font-size: 0.9rem;">192.168.1.100</td>
                                        <td style="padding: 15px;">
                                            <span style="padding: 4px 12px; background: #d4edda; color: #155724; border-radius: 12px; font-size: 0.8rem; font-weight: 500;">
                                                <i class="fas fa-check-circle"></i> 成功
                                            </span>
                                        </td>
                                </tr>
                                    <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                        <td style="padding: 15px; color: #333; font-size: 0.9rem;">
                                            <div style="font-weight: 500;">2024-05-30</div>
                                            <div style="color: #6c757d; font-size: 0.8rem;">20:45:23</div>
                                        </td>
                                        <td style="padding: 15px; color: #333; font-size: 0.9rem;">
                                            <div style="display: flex; align-items: center; gap: 8px;">
                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; font-size: 0.8rem;"></i>
                                                <span>北京市海淀区</span>
                                            </div>
                                        </td>
                                        <td style="padding: 15px; color: #333; font-size: 0.9rem;">
                                            <div style="display: flex; align-items: center; gap: 8px;">
                                                <i class="fab fa-android" style="color: #3ddc84; font-size: 0.9rem;"></i>
                                                <span>Android · 微信小程序</span>
                                            </div>
                                        </td>
                                        <td style="padding: 15px; color: #6c757d; font-size: 0.9rem;">192.168.1.101</td>
                                        <td style="padding: 15px;">
                                            <span style="padding: 4px 12px; background: #d4edda; color: #155724; border-radius: 12px; font-size: 0.8rem; font-weight: 500;">
                                                <i class="fas fa-check-circle"></i> 成功
                                            </span>
                                        </td>
                                </tr>
                                    <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                        <td style="padding: 15px; color: #333; font-size: 0.9rem;">
                                            <div style="font-weight: 500;">2024-05-28</div>
                                            <div style="color: #6c757d; font-size: 0.8rem;">14:22:18</div>
                                        </td>
                                        <td style="padding: 15px; color: #333; font-size: 0.9rem;">
                                            <div style="display: flex; align-items: center; gap: 8px;">
                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; font-size: 0.8rem;"></i>
                                                <span>上海市浦东新区</span>
                                            </div>
                                        </td>
                                        <td style="padding: 15px; color: #333; font-size: 0.9rem;">
                                            <div style="display: flex; align-items: center; gap: 8px;">
                                                <i class="fab fa-apple" style="color: #333; font-size: 0.9rem;"></i>
                                                <span>iOS · Safari</span>
                                            </div>
                                        </td>
                                        <td style="padding: 15px; color: #6c757d; font-size: 0.9rem;">192.168.1.102</td>
                                        <td style="padding: 15px;">
                                            <span style="padding: 4px 12px; background: #f8d7da; color: #721c24; border-radius: 12px; font-size: 0.8rem; font-weight: 500;">
                                                <i class="fas fa-exclamation-triangle"></i> 异常
                                            </span>
                                        </td>
                                </tr>
                            </tbody>
                        </table>
                        </div>
                    </div>

                    <!-- 设备管理 -->
                    <div style="background: white; border-radius: 12px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="color: #333; margin: 0; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-devices" style="color: #17a2b8;"></i>
                                设备管理
                            </h3>
                            <button onclick="logoutAllDevices()" style="padding: 8px 16px; background: #dc3545; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem; transition: background 0.3s;">
                                <i class="fas fa-sign-out-alt"></i> 全部下线
                            </button>
                                </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                            <!-- 当前设备 -->
                            <div style="border: 2px solid #e8f5e8; border-radius: 12px; padding: 20px; background: #f8fff8;">
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                                    <div style="display: flex; align-items: center; gap: 12px;">
                                        <div style="width: 45px; height: 45px; background: #28a745; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                            <i class="fab fa-windows" style="color: white; font-size: 1.2rem;"></i>
                            </div>
                                        <div>
                                            <div style="font-weight: 600; color: #333;">Windows · Chrome</div>
                                            <div style="font-size: 0.8rem; color: #28a745;">当前设备</div>
                                </div>
                            </div>
                                    <span style="padding: 4px 8px; background: #28a745; color: white; border-radius: 12px; font-size: 0.75rem;">
                                        在线
                                    </span>
                        </div>
                                <div style="display: flex; flex-direction: column; gap: 8px; margin-bottom: 15px; font-size: 0.9rem; color: #6c757d;">
                                    <div style="display: flex; justify-content: space-between;">
                                        <span>最后登录：</span>
                                        <span style="color: #333;">2024-06-01 09:12</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between;">
                                        <span>IP地址：</span>
                                        <span style="color: #333;">192.168.1.100</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between;">
                                        <span>浏览器：</span>
                                        <span style="color: #333;">Chrome 115.0</span>
                                    </div>
                                </div>
                                <button disabled style="width: 100%; padding: 8px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 6px; font-size: 0.9rem; cursor: not-allowed;">
                                    当前设备
                                </button>
                            </div>

                            <!-- 其他设备 -->
                            <div style="border: 2px solid #e9ecef; border-radius: 12px; padding: 20px; background: #fafafa;">
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                                    <div style="display: flex; align-items: center; gap: 12px;">
                                        <div style="width: 45px; height: 45px; background: #6c757d; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                            <i class="fab fa-android" style="color: white; font-size: 1.2rem;"></i>
                                        </div>
                                        <div>
                                            <div style="font-weight: 600; color: #333;">Android · 微信小程序</div>
                                            <div style="font-size: 0.8rem; color: #6c757d;">已离线</div>
                                        </div>
                                    </div>
                                    <span style="padding: 4px 8px; background: #6c757d; color: white; border-radius: 12px; font-size: 0.75rem;">
                                        离线
                                    </span>
                                </div>
                                <div style="display: flex; flex-direction: column; gap: 8px; margin-bottom: 15px; font-size: 0.9rem; color: #6c757d;">
                                    <div style="display: flex; justify-content: space-between;">
                                        <span>最后登录：</span>
                                        <span style="color: #333;">2024-05-30 20:45</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between;">
                                        <span>IP地址：</span>
                                        <span style="color: #333;">192.168.1.101</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between;">
                                        <span>位置：</span>
                                        <span style="color: #333;">北京市海淀区</span>
                                    </div>
                                </div>
                                <button onclick="logoutDevice('android')" style="width: 100%; padding: 8px; background: #dc3545; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem; transition: background 0.3s;">
                                    <i class="fas fa-sign-out-alt"></i> 下线设备
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 安全建议 -->
                    <div style="background: linear-gradient(135deg, #f8f9fa, #e9ecef); border-radius: 12px; padding: 25px; margin-top: 25px; border: 1px solid #e9ecef;">
                        <h3 style="color: #333; margin-bottom: 20px; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-lightbulb" style="color: #ffc107;"></i>
                            安全建议
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                            <div style="display: flex; align-items: start; gap: 15px;">
                                <div style="width: 40px; height: 40px; background: #667eea; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                    <i class="fas fa-key" style="color: white; font-size: 1rem;"></i>
                                </div>
                                <div>
                                    <div style="font-weight: 500; color: #333; margin-bottom: 5px;">定期更换密码</div>
                                    <div style="font-size: 0.9rem; color: #6c757d; line-height: 1.5;">建议每3-6个月更换一次密码，使用复杂密码组合。</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: start; gap: 15px;">
                                <div style="width: 40px; height: 40px; background: #28a745; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                    <i class="fas fa-shield-check" style="color: white; font-size: 1rem;"></i>
                                </div>
                                <div>
                                    <div style="font-weight: 500; color: #333; margin-bottom: 5px;">启用二次验证</div>
                                    <div style="font-size: 0.9rem; color: #6c757d; line-height: 1.5;">开启手机和邮箱验证，提高账户安全性。</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: start; gap: 15px;">
                                <div style="width: 40px; height: 40px; background: #17a2b8; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                    <i class="fas fa-eye" style="color: white; font-size: 1rem;"></i>
                                </div>
                                <div>
                                    <div style="font-weight: 500; color: #333; margin-bottom: 5px;">监控登录活动</div>
                                    <div style="font-size: 0.9rem; color: #6c757d; line-height: 1.5;">定期查看登录历史，发现异常及时处理。</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: start; gap: 15px;">
                                <div style="width: 40px; height: 40px; background: #fd7e14; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                    <i class="fas fa-wifi" style="color: white; font-size: 1rem;"></i>
                                </div>
                                <div>
                                    <div style="font-weight: 500; color: #333; margin-bottom: 5px;">注意网络安全</div>
                                    <div style="font-size: 0.9rem; color: #6c757d; line-height: 1.5;">避免在公共网络下登录敏感账户。</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <script>
                        function changePhone() {
                            alert('更换手机号功能：将打开手机号更换流程');
                        }

                        function changeEmail() {
                            alert('更换邮箱功能：将打开邮箱更换流程');
                        }

                        function enableTOTP() {
                            alert('启用动态令牌功能：将打开二维码扫描页面');
                        }

                        function exportLoginHistory() {
                            alert('导出登录历史功能：将生成CSV文件');
                        }

                        function logoutDevice(deviceId) {
                            if (confirm('确定要下线该设备吗？')) {
                                alert(`设备 ${deviceId} 已下线`);
                            }
                        }

                        function logoutAllDevices() {
                            if (confirm('确定要下线所有其他设备吗？此操作将强制其他设备重新登录。')) {
                                alert('所有其他设备已下线');
                            }
                        }
                    </script>
                </div>
                <div class="main-content" id="page-teaching" style="display:none">
                    <div class="page-header">
                        <div class="header-left">
                            <h1><i class="fas fa-chalkboard-teacher"></i> 教学管理</h1>
                            <p class="page-desc">管理您的在线课程，培养更多专业技术人才</p>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button onclick="showTeachingReport()" style="display: flex; align-items: center; gap: 8px; padding: 10px 16px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">
                                <i class="fas fa-chart-bar"></i>
                                教学报告
                            </button>
                            <button onclick="createNewCourse()" style="display: flex; align-items: center; gap: 8px; padding: 10px 16px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">
                                <i class="fas fa-plus"></i>
                                创建课程
                            </button>
                        </div>
                    </div>

                    <!-- 教学统计 -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 25px;">
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">总课程数</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-book"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">12</div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">活跃课程</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #28a745, #20c997); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-play-circle"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">8</div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">总学员数</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #17a2b8, #6f42c1); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-users"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">186</div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">教学收入</span>
                                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #ffc107, #fd7e14); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                                    <i class="fas fa-dollar-sign"></i>
                                </div>
                            </div>
                            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">¥15,680</div>
                        </div>
                    </div>

                    <!-- 课程管理 -->
                    <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 25px;">
                        <h3 style="color: #333; margin-bottom: 20px; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-graduation-cap" style="color: #667eea;"></i>
                            我的课程
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                            <div style="border: 1px solid #e9ecef; border-radius: 8px; overflow: hidden; transition: all 0.3s;">
                                <div style="position: relative; background: linear-gradient(135deg, #667eea, #764ba2); height: 120px; display: flex; align-items: center; justify-content: center; color: white;">
                                    <div style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 0.75rem;">
                                        进行中
                                    </div>
                                    <i class="fas fa-tools" style="font-size: 2rem; opacity: 0.7;"></i>
                                </div>
                                <div style="padding: 15px;">
                                    <h4 style="color: #333; margin-bottom: 8px; font-size: 1.1rem;">空压机维修技术精讲</h4>
                                    <p style="color: #6c757d; font-size: 0.9rem; margin-bottom: 12px; line-height: 1.5;">涵盖空压机常见故障诊断、维修技巧和预防性保养方法，适合初中级技术人员学习。</p>
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; font-size: 0.85rem; color: #6c757d;">
                                        <span>学员：45人</span>
                                        <span>评分：4.8分</span>
                                    </div>
                                    <div style="width: 100%; height: 6px; background: #f8f9fa; border-radius: 3px; margin-bottom: 12px;">
                                        <div style="width: 75%; height: 100%; background: #667eea; border-radius: 3px;"></div>
                                    </div>
                                    <div style="display: flex; gap: 8px;">
                                        <button style="flex: 1; padding: 8px; background: #667eea; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.85rem;">管理课程</button>
                                        <button style="padding: 8px 12px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 4px; cursor: pointer; font-size: 0.85rem;">查看数据</button>
                                    </div>
                                </div>
                            </div>
                            <div style="border: 1px solid #e9ecef; border-radius: 8px; overflow: hidden; transition: all 0.3s;">
                                <div style="position: relative; background: linear-gradient(135deg, #28a745, #20c997); height: 120px; display: flex; align-items: center; justify-content: center; color: white;">
                                    <div style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 0.75rem;">
                                        草稿
                                    </div>
                                    <i class="fas fa-snowflake" style="font-size: 2rem; opacity: 0.7;"></i>
                                </div>
                                <div style="padding: 15px;">
                                    <h4 style="color: #333; margin-bottom: 8px; font-size: 1.1rem;">制冷设备故障排除</h4>
                                    <p style="color: #6c757d; font-size: 0.9rem; margin-bottom: 12px; line-height: 1.5;">制冷系统原理讲解、常见故障分析和快速排除方法，提高设备运行效率。</p>
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; font-size: 0.85rem; color: #6c757d;">
                                        <span>预计学员：30人</span>
                                        <span>完成度：60%</span>
                                    </div>
                                    <div style="width: 100%; height: 6px; background: #f8f9fa; border-radius: 3px; margin-bottom: 12px;">
                                        <div style="width: 60%; height: 100%; background: #28a745; border-radius: 3px;"></div>
                                    </div>
                                    <div style="display: flex; gap: 8px;">
                                        <button style="flex: 1; padding: 8px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.85rem;">继续编辑</button>
                                        <button style="padding: 8px 12px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 4px; cursor: pointer; font-size: 0.85rem;">预览</button>
                                    </div>
                                </div>
                            </div>
                            <div style="border: 1px solid #e9ecef; border-radius: 8px; overflow: hidden; transition: all 0.3s;">
                                <div style="position: relative; background: linear-gradient(135deg, #17a2b8, #6f42c1); height: 120px; display: flex; align-items: center; justify-content: center; color: white;">
                                    <div style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 0.75rem;">
                                        已完结
                                    </div>
                                    <i class="fas fa-cogs" style="font-size: 2rem; opacity: 0.7;"></i>
                                </div>
                                <div style="padding: 15px;">
                                    <h4 style="color: #333; margin-bottom: 8px; font-size: 1.1rem;">PLC编程入门到精通</h4>
                                    <p style="color: #6c757d; font-size: 0.9rem; margin-bottom: 12px; line-height: 1.5;">从PLC基础概念到实际项目应用，全面掌握可编程逻辑控制器的使用技巧。</p>
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; font-size: 0.85rem; color: #6c757d;">
                                        <span>学员：68人</span>
                                        <span>评分：4.9分</span>
                                    </div>
                                    <div style="width: 100%; height: 6px; background: #f8f9fa; border-radius: 3px; margin-bottom: 12px;">
                                        <div style="width: 100%; height: 100%; background: #17a2b8; border-radius: 3px;"></div>
                                    </div>
                                    <div style="display: flex; gap: 8px;">
                                        <button style="flex: 1; padding: 8px; background: #17a2b8; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.85rem;">查看详情</button>
                                        <button style="padding: 8px 12px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 4px; cursor: pointer; font-size: 0.85rem;">复制课程</button>
                                    </div>
                                </div>
                            </div>
                            <div style="border: 1px solid #e9ecef; border-radius: 8px; overflow: hidden; transition: all 0.3s;">
                                <div style="position: relative; background: linear-gradient(135deg, #ffc107, #fd7e14); height: 120px; display: flex; align-items: center; justify-content: center; color: white;">
                                    <div style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 0.75rem;">
                                        进行中
                                    </div>
                                    <i class="fas fa-fire" style="font-size: 2rem; opacity: 0.7;"></i>
                                </div>
                                <div style="padding: 15px;">
                                    <h4 style="color: #333; margin-bottom: 8px; font-size: 1.1rem;">锅炉运行与维护</h4>
                                    <p style="color: #6c757d; font-size: 0.9rem; margin-bottom: 12px; line-height: 1.5;">工业锅炉的安全运行、日常维护和应急处理，确保设备稳定高效运行。</p>
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; font-size: 0.85rem; color: #6c757d;">
                                        <span>学员：33人</span>
                                        <span>评分：4.7分</span>
                                    </div>
                                    <div style="width: 100%; height: 6px; background: #f8f9fa; border-radius: 3px; margin-bottom: 12px;">
                                        <div style="width: 85%; height: 100%; background: #ffc107; border-radius: 3px;"></div>
                                    </div>
                                    <div style="display: flex; gap: 8px;">
                                        <button onclick="manageCourse('course1')" style="flex: 1; padding: 8px; background: #ffc107; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.85rem;">管理课程</button>
                                        <button onclick="viewCourseData('course1')" style="padding: 8px 12px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 4px; cursor: pointer; font-size: 0.85rem;">查看数据</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 学员管理 -->
                    <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 25px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="color: #333; margin: 0; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-user-graduate" style="color: #667eea;"></i>
                                学员管理
                            </h3>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <select style="padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                                    <option>全部课程</option>
                                    <option>空压机维修技术精讲</option>
                                    <option>PLC编程入门到精通</option>
                                    <option>锅炉运行与维护</option>
                                </select>
                                <select style="padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                                    <option>全部状态</option>
                                    <option>学习中</option>
                                    <option>已完成</option>
                                    <option>暂停学习</option>
                                </select>
                                <input type="text" placeholder="搜索学员..." style="padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem; width: 180px;">
                            </div>
                        </div>
                        
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="border-bottom: 2px solid #f0f0f0;">
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">学员</th>
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">课程</th>
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">学习进度</th>
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">最后学习时间</th>
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">状态</th>
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <div style="width: 32px; height: 32px; border-radius: 50%; background: linear-gradient(135deg, #667eea, #764ba2); display: flex; align-items: center; justify-content: center; color: white; font-size: 0.9rem; font-weight: bold;">李</div>
                                            <div>
                                                <div style="font-weight: 500; color: #333;">李明</div>
                                                <div style="font-size: 0.8rem; color: #6c757d;">ID: 202401001</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.9rem; color: #333;">空压机维修技术精讲</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <div style="flex: 1; height: 6px; background: #f8f9fa; border-radius: 3px;">
                                                <div style="width: 85%; height: 100%; background: #28a745; border-radius: 3px;"></div>
                                            </div>
                                            <span style="font-size: 0.85rem; color: #6c757d; min-width: 40px;">85%</span>
                                        </div>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.85rem; color: #6c757d;">2024-06-01 14:30</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.8rem; font-weight: 500; background: #d4edda; color: #155724;">学习中</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; gap: 5px;">
                                            <button style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer;">详情</button>
                                            <button style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: none; background: #667eea; color: white; cursor: pointer;">消息</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <div style="width: 32px; height: 32px; border-radius: 50%; background: linear-gradient(135deg, #28a745, #20c997); display: flex; align-items: center; justify-content: center; color: white; font-size: 0.9rem; font-weight: bold;">王</div>
                                            <div>
                                                <div style="font-weight: 500; color: #333;">王强</div>
                                                <div style="font-size: 0.8rem; color: #6c757d;">ID: 202401002</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.9rem; color: #333;">PLC编程入门到精通</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <div style="flex: 1; height: 6px; background: #f8f9fa; border-radius: 3px;">
                                                <div style="width: 100%; height: 100%; background: #17a2b8; border-radius: 3px;"></div>
                                            </div>
                                            <span style="font-size: 0.85rem; color: #6c757d; min-width: 40px;">100%</span>
                                        </div>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.85rem; color: #6c757d;">2024-05-30 16:20</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.8rem; font-weight: 500; background: #cce5ff; color: #0066cc;">已完成</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; gap: 5px;">
                                            <button style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer;">详情</button>
                                            <button style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: none; background: #28a745; color: white; cursor: pointer;">证书</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <div style="width: 32px; height: 32px; border-radius: 50%; background: linear-gradient(135deg, #17a2b8, #6f42c1); display: flex; align-items: center; justify-content: center; color: white; font-size: 0.9rem; font-weight: bold;">张</div>
                                            <div>
                                                <div style="font-weight: 500; color: #333;">张华</div>
                                                <div style="font-size: 0.8rem; color: #6c757d;">ID: 202401003</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.9rem; color: #333;">锅炉运行与维护</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <div style="flex: 1; height: 6px; background: #f8f9fa; border-radius: 3px;">
                                                <div style="width: 45%; height: 100%; background: #ffc107; border-radius: 3px;"></div>
                                            </div>
                                            <span style="font-size: 0.85rem; color: #6c757d; min-width: 40px;">45%</span>
                                        </div>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="font-size: 0.85rem; color: #6c757d;">2024-05-28 09:15</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.8rem; font-weight: 500; background: #fff3cd; color: #856404;">暂停学习</span>
                                    </td>
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; gap: 5px;">
                                            <button style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer;">详情</button>
                                            <button style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: none; background: #fd7e14; color: white; cursor: pointer;">提醒</button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- 教学数据分析 -->
                    <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <h3 style="color: #333; margin-bottom: 20px; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-chart-line" style="color: #667eea;"></i>
                            教学数据分析
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                            <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; text-align: center;">
                                <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem; margin: 0 auto 15px;">
                                    <i class="fas fa-chart-pie"></i>
                                </div>
                                <h4 style="color: #333; margin-bottom: 10px;">课程完成率分析</h4>
                                <p style="color: #6c757d; font-size: 0.9rem;">查看各课程的学员完成情况和学习效果统计</p>
                                <button style="padding: 8px 16px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; margin-top: 10px;">查看详情</button>
                            </div>
                            <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; text-align: center;">
                                <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #28a745, #20c997); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem; margin: 0 auto 15px;">
                                    <i class="fas fa-star"></i>
                                </div>
                                <h4 style="color: #333; margin-bottom: 10px;">课程评价统计</h4>
                                <p style="color: #6c757d; font-size: 0.9rem;">学员对课程内容和教学质量的反馈评价汇总</p>
                                <button style="padding: 8px 16px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; margin-top: 10px;">查看详情</button>
                            </div>
                            <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; text-align: center;">
                                <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #ffc107, #fd7e14); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem; margin: 0 auto 15px;">
                                    <i class="fas fa-coins"></i>
                                </div>
                                <h4 style="color: #333; margin-bottom: 10px;">收入趋势分析</h4>
                                <p style="color: #6c757d; font-size: 0.9rem;">教学收入变化趋势和热门课程收益分析</p>
                                <button style="padding: 8px 16px; background: #ffc107; color: white; border: none; border-radius: 6px; cursor: pointer; margin-top: 10px;">查看详情</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 教学管理弹窗 -->
                <div id="createCourseModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; align-items: center; justify-content: center;">
                    <div style="background: white; border-radius: 12px; width: 90%; max-width: 600px; max-height: 90vh; overflow-y: auto; position: relative;">
                        <div style="padding: 20px 25px; border-bottom: 1px solid #e9ecef;">
                            <h3 style="margin: 0; color: #333; font-size: 1.3rem;">创建新课程</h3>
                            <button onclick="closeCreateCourseModal()" style="position: absolute; top: 15px; right: 20px; background: none; border: none; font-size: 1.5rem; color: #6c757d; cursor: pointer;">×</button>
                        </div>
                        <form id="createCourseForm" style="padding: 25px;">
                            <!-- 课程表单内容与teaching.html保持一致 -->
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                                <div class="form-group">
                                    <label class="form-label">课程名称</label>
                                    <input type="text" class="form-input" placeholder="请输入课程名称" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">课程类型</label>
                                    <select class="form-input" required>
                                        <option value="">请选择</option>
                                        <option value="online">在线课程</option>
                                        <option value="live">直播课程</option>
                                        <option value="practical">实操培训</option>
                                        <option value="certification">认证培训</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">课程描述</label>
                                <textarea class="form-input" rows="3" placeholder="请输入课程描述，包括学习目标、适用人群等" required></textarea>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                                <div class="form-group">
                                    <label class="form-label">课程价格 (元)</label>
                                    <input type="number" class="form-input" placeholder="0" min="0" step="1" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">预计课时</label>
                                    <input type="number" class="form-input" placeholder="8" min="1" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">难度等级</label>
                                    <select class="form-input" required>
                                        <option value="">请选择</option>
                                        <option value="beginner">初级</option>
                                        <option value="intermediate">中级</option>
                                        <option value="advanced">高级</option>
                                    </select>
                                </div>
                            </div>
                            <div style="display: flex; gap: 10px; margin-top: 25px;">
                                <button type="button" onclick="closeCreateCourseModal()" style="flex: 1; padding: 12px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer;">取消</button>
                                <button type="submit" style="flex: 1; padding: 12px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer;">创建课程</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- 直播课程弹窗 -->
                <div id="liveClassModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; align-items: center; justify-content: center;">
                    <div style="background: white; border-radius: 12px; width: 90%; max-width: 500px; max-height: 90vh; overflow-y: auto; position: relative;">
                        <div style="padding: 20px 25px; border-bottom: 1px solid #e9ecef;">
                            <h3 style="margin: 0; color: #333; font-size: 1.3rem;">创建直播课程</h3>
                            <button onclick="closeLiveClassModal()" style="position: absolute; top: 15px; right: 20px; background: none; border: none; font-size: 1.5rem; color: #6c757d; cursor: pointer;">×</button>
                        </div>
                        <form id="liveClassForm" style="padding: 25px;">
                            <!-- 直播表单内容与teaching.html保持一致 -->
                            <div class="form-group">
                                <label class="form-label">直播标题</label>
                                <input type="text" class="form-input" placeholder="请输入直播标题" required>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                <div class="form-group">
                                    <label class="form-label">直播日期</label>
                                    <input type="date" class="form-input" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">直播时间</label>
                                    <input type="time" class="form-input" required>
                                </div>
                            </div>
                            <div style="display: flex; gap: 10px; margin-top: 25px;">
                                <button type="button" onclick="closeLiveClassModal()" style="flex: 1; padding: 12px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer;">取消</button>
                                <button type="submit" style="flex: 1; padding: 12px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer;">创建直播</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- 学员管理弹窗 -->
                <div id="studentsModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; align-items: center; justify-content: center;">
                    <div style="background: white; border-radius: 12px; width: 90%; max-width: 800px; max-height: 90vh; overflow-y: auto; position: relative;">
                        <div style="padding: 20px 25px; border-bottom: 1px solid #e9ecef;">
                            <h3 style="margin: 0; color: #333; font-size: 1.3rem;">学员管理</h3>
                            <button onclick="closeStudentsModal()" style="position: absolute; top: 15px; right: 20px; background: none; border: none; font-size: 1.5rem; color: #6c757d; cursor: pointer;">×</button>
                        </div>
                        <div style="padding: 25px;">
                            <!-- 学员管理表格内容与teaching.html保持一致 -->
                            <table style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr style="border-bottom: 2px solid #f0f0f0;">
                                        <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">学员</th>
                                        <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">学习进度</th>
                                        <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">最后学习时间</th>
                                        <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">状态</th>
                                        <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">操作</th>
                                    </tr>
                                </thead>
                                <tbody id="studentsTableBody">
                                    <!-- 学员数据将由JavaScript动态填充 -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>





                <!-- 我的企业管理页面 -->
                <div class="main-content" id="page-company-manage" style="display:none">
                    <div class="page-header">
                        <h1><i class="fas fa-cogs"></i> 我的企业</h1>
                        <p class="page-desc">管理您所属的企业信息和成员权限</p>
                        <div style="display: flex; gap: 10px; margin-top: 15px;">
                            <button onclick="showCreateNewCompanyModal()" style="display: flex; align-items: center; gap: 8px; padding: 10px 20px; background: #28a745; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 0.9rem;">
                                <i class="fas fa-plus"></i> 创建新企业
                            </button>
                            <button onclick="showJoinCompanyModal()" style="display: flex; align-items: center; gap: 8px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 0.9rem;">
                                <i class="fas fa-user-plus"></i> 申请加入企业
                            </button>
                        </div>
                    </div>

                    <!-- 企业状态概览 -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
                        <div style="background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); text-align: center;">
                            <div style="font-size: 2rem; color: #28a745; margin-bottom: 10px;" id="ownedCompanyCount">2</div>
                            <div style="color: #333; font-weight: 600;">我创建的企业</div>
                        </div>
                        <div style="background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); text-align: center;">
                            <div style="font-size: 2rem; color: #007bff; margin-bottom: 10px;" id="joinedCompanyCount">1</div>
                            <div style="color: #333; font-weight: 600;">我加入的企业</div>
                        </div>
                        <div style="background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); text-align: center;">
                            <div style="font-size: 2rem; color: #fd7e14; margin-bottom: 10px;" id="pendingCompanyCount">1</div>
                            <div style="color: #333; font-weight: 600;">待审核申请</div>
                        </div>
                        <div style="background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); text-align: center;">
                            <div style="font-size: 2rem; color: #6f42c1; margin-bottom: 10px;" id="totalCompanyCount">4</div>
                            <div style="color: #333; font-weight: 600;">企业总数</div>
                        </div>
                    </div>

                    <!-- 企业列表 -->
                    <div style="background: white; border-radius: 12px; padding: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="color: #333; margin: 0;">我的企业列表</h3>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <select id="companyStatusFilter" style="padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;" onchange="filterCompanies()">
                                    <option value="all">全部状态</option>
                                    <option value="owner">我创建的</option>
                                    <option value="member">我加入的</option>
                                    <option value="pending">待审核</option>
                                </select>
                                <button onclick="refreshCompanyList()" style="padding: 8px 12px; background: #f8f9fa; border: 1px solid #e0e3ea; border-radius: 6px; cursor: pointer; color: #6c757d;">
                                    <i class="fas fa-sync-alt"></i> 刷新
                                </button>
                            </div>
                        </div>
                        <div id="companyList" style="display: grid; gap: 15px;">
                            <!-- 企业列表将通过JavaScript动态生成 -->
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- 通用弹窗 -->
    <!-- 编辑服务弹窗 -->
    <div class="modal-overlay" id="editServiceModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">编辑服务</h3>
                <button class="modal-close" onclick="closeModal('editServiceModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editServiceForm">
                    <div class="form-group">
                        <label class="form-label">服务名称 *</label>
                        <input type="text" class="form-control" id="serviceName" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">服务类型 *</label>
                            <select class="form-select" id="serviceType" required>
                                <option value="">请选择服务类型</option>
                                <option value="repair">设备维修</option>
                                <option value="maintenance">设备保养</option>
                                <option value="inspection">巡检服务</option>
                                <option value="installation">设备安装</option>
                                <option value="consulting">技术咨询</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">服务价格 *</label>
                            <input type="number" class="form-control" id="servicePrice" min="0" step="0.01" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">服务描述 *</label>
                        <textarea class="form-textarea" id="serviceDescription" required placeholder="请详细描述您提供的服务内容、专业技能、工作经验等..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">服务区域</label>
                        <input type="text" class="form-control" id="serviceArea" placeholder="如：北京市、上海市等">
                    </div>
                    <div class="form-group">
                        <label class="form-label">服务图片</label>
                        <div class="upload-area" onclick="uploadServiceImage(this)">
                            <i class="fas fa-cloud-upload-alt upload-icon"></i>
                            <div>点击上传服务相关图片</div>
                            <div style="font-size: 0.85rem; color: #6c757d; margin-top: 5px;">支持 JPG、PNG 格式，建议尺寸 800x600</div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeModal('editServiceModal')">取消</button>
                <button class="btn-save" onclick="saveService()">保存</button>
            </div>
        </div>
    </div>

    <!-- 订单详情弹窗 -->
    <div class="modal-overlay" id="orderDetailModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">订单详情</h3>
                <button class="modal-close" onclick="closeModal('orderDetailModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="orderDetailContent">
                    <!-- 订单详情内容将通过JavaScript动态填充 -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeModal('orderDetailModal')">关闭</button>
            </div>
        </div>
    </div>

    <!-- 工单操作弹窗 -->
    <div class="modal-overlay" id="orderActionModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="orderActionTitle">工单操作</h3>
                <button class="modal-close" onclick="closeModal('orderActionModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="orderActionContent">
                    <!-- 工单操作内容将通过JavaScript动态填充 -->
                </div>
            </div>
            <div class="modal-footer" id="orderActionFooter">
                <!-- 按钮将通过JavaScript动态填充 -->
            </div>
        </div>
    </div>

    <!-- 新增分类弹窗 -->
    <div class="modal-overlay" id="newCategoryModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">新增知识分类</h3>
                <button class="modal-close" onclick="closeModal('newCategoryModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="newCategoryForm">
                    <div class="form-group">
                        <label class="form-label">分类名称 *</label>
                        <input type="text" class="form-control" id="categoryName" required placeholder="请输入分类名称">
                    </div>
                    <div class="form-group">
                        <label class="form-label">分类描述</label>
                        <textarea class="form-textarea" id="categoryDescription" placeholder="请输入分类描述..." style="min-height: 100px;"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">分类图标</label>
                            <select class="form-select" id="categoryIcon">
                                <option value="fas fa-tools">🔧 设备维修</option>
                                <option value="fas fa-calendar-check">📅 保养指南</option>
                                <option value="fas fa-search">🔍 巡检规范</option>
                                <option value="fas fa-exclamation-triangle">⚠️ 常见故障</option>
                                <option value="fas fa-shield-alt">🛡️ 安全规程</option>
                                <option value="fas fa-book">📚 技术标准</option>
                                <option value="fas fa-file-alt">📄 操作手册</option>
                                <option value="fas fa-graduation-cap">🎓 培训资料</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">排序权重</label>
                            <input type="number" class="form-control" id="categorySort" value="0" min="0" placeholder="数字越大排序越靠前">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeModal('newCategoryModal')">取消</button>
                <button class="btn-save" onclick="createCategory()">创建分类</button>
            </div>
        </div>
    </div>

    <!-- 编辑分类弹窗 -->
    <div class="modal-overlay" id="editCategoryModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">编辑知识分类</h3>
                <button class="modal-close" onclick="closeModal('editCategoryModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editCategoryForm">
                    <div class="form-group">
                        <label class="form-label">分类名称 *</label>
                        <input type="text" class="form-control" id="editCategoryName" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">分类描述</label>
                        <textarea class="form-textarea" id="editCategoryDescription" style="min-height: 100px;"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">分类图标</label>
                            <select class="form-select" id="editCategoryIcon">
                                <option value="fas fa-tools">🔧 设备维修</option>
                                <option value="fas fa-calendar-check">📅 保养指南</option>
                                <option value="fas fa-search">🔍 巡检规范</option>
                                <option value="fas fa-exclamation-triangle">⚠️ 常见故障</option>
                                <option value="fas fa-shield-alt">🛡️ 安全规程</option>
                                <option value="fas fa-book">📚 技术标准</option>
                                <option value="fas fa-file-alt">📄 操作手册</option>
                                <option value="fas fa-graduation-cap">🎓 培训资料</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">排序权重</label>
                            <input type="number" class="form-control" id="editCategorySort" min="0">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeModal('editCategoryModal')">取消</button>
                <button class="btn-save" onclick="updateCategory()">保存修改</button>
            </div>
        </div>
    </div>

    <!-- 文档详情查看弹窗 -->
    <div class="modal-overlay" id="documentDetailModal">
        <div class="modal" style="max-width: 800px;">
            <div class="modal-header">
                <h3 class="modal-title" id="documentDetailTitle">文档详情</h3>
                <button class="modal-close" onclick="closeModal('documentDetailModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="documentDetailContent">
                    <!-- 文档详情内容将通过JavaScript动态填充 -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeModal('documentDetailModal')">关闭</button>
                <button class="btn-save" id="documentEditBtn" onclick="">编辑文档</button>
            </div>
        </div>
    </div>

    <!-- 重新提交文档弹窗 -->
    <div class="modal-overlay" id="resubmitDocumentModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">重新提交文档</h3>
                <button class="modal-close" onclick="closeModal('resubmitDocumentModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div style="background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                    <h4 style="color: #721c24; margin: 0 0 10px 0;">
                        <i class="fas fa-times-circle"></i> 审核未通过原因
                    </h4>
                    <div id="rejectReasonContent" style="color: #721c24; line-height: 1.6;">
                        <!-- 拒绝原因将通过JavaScript动态填充 -->
                    </div>
                </div>
                <form id="resubmitDocumentForm">
                    <div class="form-group">
                        <label class="form-label">文档标题 *</label>
                        <input type="text" class="form-control" id="resubmitTitle" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">修改说明 *</label>
                        <textarea class="form-textarea" id="resubmitDescription" required placeholder="请说明您针对审核意见做了哪些修改..." style="min-height: 120px;"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">重新上传文档</label>
                        <div class="upload-area" onclick="uploadResubmitFile(this)">
                            <i class="fas fa-cloud-upload-alt upload-icon"></i>
                            <div>点击重新上传文档</div>
                            <div style="font-size: 0.85rem; color: #6c757d; margin-top: 5px;">支持 PDF、DOC、JPG、PNG 等格式</div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeModal('resubmitDocumentModal')">取消</button>
                <button class="btn-save" onclick="submitResubmitDocument()">重新提交</button>
            </div>
        </div>
    </div>

    <!-- 批量导出弹窗 -->
    <div class="modal-overlay" id="batchExportModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">批量导出文档</h3>
                <button class="modal-close" onclick="closeModal('batchExportModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">导出范围</label>
                    <div style="display: flex; flex-direction: column; gap: 10px; margin-top: 10px;">
                        <div style="display: flex; align-items: center; gap: 8px;" onclick="this.querySelector('input').checked = true;">
                            <input type="radio" name="exportRange" value="selected" checked>
                            <span style="color: #333; font-size: 14px;">仅导出选中的文档 (0个)</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;" onclick="this.querySelector('input').checked = true;">
                            <input type="radio" name="exportRange" value="current">
                            <span style="color: #333; font-size: 14px;">导出当前页面的所有文档</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;" onclick="this.querySelector('input').checked = true;">
                            <input type="radio" name="exportRange" value="all">
                            <span style="color: #333; font-size: 14px;">导出所有文档</span>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">导出格式</label>
                        <select class="form-select" id="exportFormat">
                            <option value="zip">ZIP压缩包</option>
                            <option value="pdf">合并为PDF</option>
                            <option value="excel">导出清单Excel</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">文件命名</label>
                        <select class="form-select" id="exportNaming">
                            <option value="original">保持原文件名</option>
                            <option value="category">按分类_文件名</option>
                            <option value="date">按日期_文件名</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <div style="display: flex; align-items: center; gap: 8px;" onclick="var cb = this.querySelector('input'); cb.checked = !cb.checked;">
                        <input type="checkbox" id="includePrivate">
                        <span style="color: #333; font-size: 14px;">包含私有文档</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeModal('batchExportModal')">取消</button>
                <button class="btn-save" onclick="startBatchExport()">开始导出</button>
            </div>
        </div>
    </div>

    <!-- 创建新企业弹窗 -->
    <div class="modal-overlay" id="createNewCompanyModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">创建新企业</h3>
                <button class="modal-close" onclick="closeModal('createNewCompanyModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div style="background: #f8f9fa; border-radius: 8px; padding: 15px; margin-bottom: 20px; border-left: 4px solid #28a745;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                        <i class="fas fa-info-circle" style="color: #28a745;"></i>
                        <strong style="color: #333;">企业创建说明</strong>
                    </div>
                    <div style="color: #6c757d; font-size: 0.9rem; line-height: 1.5;">
                        创建企业需要提供完整的企业信息和资质证明，审核通过后您将成为该企业的管理员，可以邀请员工加入。
                    </div>
                </div>
                <form id="createNewCompanyForm">
                    <div class="form-group">
                        <label class="form-label">企业名称 *</label>
                        <input type="text" class="form-control" id="newCompanyName" required placeholder="请输入企业全称">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">统一社会信用代码 *</label>
                            <input type="text" class="form-control" id="newCompanyCreditCode" required placeholder="18位统一社会信用代码">
                        </div>
                        <div class="form-group">
                            <label class="form-label">企业类型 *</label>
                            <select class="form-select" id="newCompanyType" required>
                                <option value="">请选择企业类型</option>
                                <option value="limited">有限责任公司</option>
                                <option value="stock">股份有限公司</option>
                                <option value="partnership">合伙企业</option>
                                <option value="sole">个人独资企业</option>
                                <option value="other">其他</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">企业地址 *</label>
                        <input type="text" class="form-control" id="newCompanyAddress" required placeholder="请输入企业详细地址">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">联系电话 *</label>
                            <input type="tel" class="form-control" id="newCompanyPhone" required placeholder="企业联系电话">
                        </div>
                        <div class="form-group">
                            <label class="form-label">企业邮箱</label>
                            <input type="email" class="form-control" id="newCompanyEmail" placeholder="企业邮箱">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">主营业务 *</label>
                        <textarea class="form-textarea" id="newCompanyBusiness" required placeholder="请描述企业的主营业务范围和服务内容..." style="min-height: 100px;"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">营业执照 *</label>
                        <div class="upload-area" onclick="uploadCompanyFile(this, 'license')">
                            <i class="fas fa-cloud-upload-alt upload-icon"></i>
                            <div>点击上传营业执照</div>
                            <div style="font-size: 0.85rem; color: #6c757d; margin-top: 5px;">支持jpg/png/pdf，大小不超过10M</div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeModal('createNewCompanyModal')">取消</button>
                <button class="btn-save" onclick="submitNewCompany()">提交申请</button>
            </div>
        </div>
    </div>

    <!-- 申请加入企业弹窗 -->
    <div class="modal-overlay" id="joinCompanyModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">申请加入企业</h3>
                <button class="modal-close" onclick="closeModal('joinCompanyModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div style="background: #e7f3ff; border-radius: 8px; padding: 15px; margin-bottom: 20px; border-left: 4px solid #007bff;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                        <i class="fas fa-info-circle" style="color: #007bff;"></i>
                        <strong style="color: #333;">加入企业说明</strong>
                    </div>
                    <div style="color: #6c757d; font-size: 0.9rem; line-height: 1.5;">
                        您可以通过企业名称或邀请码申请加入企业，申请提交后需要企业管理员审核通过。
                    </div>
                </div>
                <form id="joinCompanyForm">
                    <div class="form-group">
                        <label class="form-label">加入方式 *</label>
                        <select class="form-select" id="joinMethod" required onchange="toggleJoinMethod()">
                            <option value="">请选择加入方式</option>
                            <option value="name">通过企业名称</option>
                            <option value="code">通过邀请码</option>
                        </select>
                    </div>
                    <div class="form-group" id="companyNameGroup" style="display: none;">
                        <label class="form-label">企业名称 *</label>
                        <input type="text" class="form-control" id="joinCompanyName" placeholder="请输入要加入的企业名称">
                        <div style="font-size: 0.85rem; color: #6c757d; margin-top: 5px;">
                            <i class="fas fa-search"></i> 支持模糊搜索，输入关键词会显示匹配的企业
                        </div>
                    </div>
                    <div class="form-group" id="inviteCodeGroup" style="display: none;">
                        <label class="form-label">邀请码 *</label>
                        <input type="text" class="form-control" id="joinInviteCode" placeholder="请输入企业邀请码">
                        <div style="font-size: 0.85rem; color: #6c757d; margin-top: 5px;">
                            <i class="fas fa-key"></i> 邀请码由企业管理员提供
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">申请职位</label>
                        <select class="form-select" id="applyPosition">
                            <option value="">请选择申请职位</option>
                            <option value="technician">技术员</option>
                            <option value="engineer">工程师</option>
                            <option value="supervisor">主管</option>
                            <option value="manager">经理</option>
                            <option value="other">其他</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">申请理由</label>
                        <textarea class="form-textarea" id="joinReason" placeholder="请简单说明您的申请理由和个人优势..." style="min-height: 100px;"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeModal('joinCompanyModal')">取消</button>
                <button class="btn-save" onclick="submitJoinApplication()">提交申请</button>
            </div>
        </div>
    </div>

    <!-- 企业详情弹窗 -->
    <div class="modal-overlay" id="companyDetailModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="companyDetailTitle">企业详情</h3>
                <button class="modal-close" onclick="closeModal('companyDetailModal')">&times;</button>
            </div>
            <div class="modal-body" id="companyDetailContent">
                <!-- 企业详情内容将通过JavaScript动态填充 -->
            </div>
            <div class="modal-footer" id="companyDetailFooter">
                <!-- 按钮将通过JavaScript动态填充 -->
            </div>
        </div>
    </div>

    <!-- 发布知识弹窗 -->
    <div class="modal-overlay" id="publishKnowledgeModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">发布知识</h3>
                <button class="modal-close" onclick="closeModal('publishKnowledgeModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="publishKnowledgeForm">
                    <div class="form-group">
                        <label class="form-label">知识标题 *</label>
                        <input type="text" class="form-control" id="knowledgeTitle" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">知识分类 *</label>
                            <select class="form-select" id="knowledgeCategory" required>
                                <option value="">请选择分类</option>
                                <option value="maintenance">设备维护</option>
                                <option value="troubleshooting">故障排除</option>
                                <option value="installation">安装指南</option>
                                <option value="safety">安全规范</option>
                                <option value="tools">工具使用</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">适用设备</label>
                            <input type="text" class="form-control" id="applicableEquipment" placeholder="如：空压机、制冷设备等">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">知识内容 *</label>
                        <textarea class="form-textarea" id="knowledgeContent" required placeholder="请详细描述知识内容，包括操作步骤、注意事项等..." style="min-height: 150px;"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">标签</label>
                        <input type="text" class="form-control" id="knowledgeTags" placeholder="用逗号分隔多个标签，如：维修,保养,空压机">
                    </div>
                    <div class="form-group">
                        <label class="form-label">相关文档/图片</label>
                        <div class="upload-area" onclick="uploadKnowledgeFile(this)">
                            <i class="fas fa-cloud-upload-alt upload-icon"></i>
                            <div>点击上传相关文档或图片</div>
                            <div style="font-size: 0.85rem; color: #6c757d; margin-top: 5px;">支持 PDF、DOC、JPG、PNG 等格式</div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">公开设置</label>
                            <select class="form-select" id="knowledgeVisibility">
                                <option value="public">公开</option>
                                <option value="private">仅自己可见</option>
                                <option value="company">仅企业内部</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">难度等级</label>
                            <select class="form-select" id="knowledgeDifficulty">
                                <option value="beginner">初级</option>
                                <option value="intermediate">中级</option>
                                <option value="advanced">高级</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeModal('publishKnowledgeModal')">取消</button>
                <button class="btn-save" onclick="publishKnowledge()">发布</button>
            </div>
        </div>
    </div>

    <!-- 个人档案编辑弹窗 -->
    <div class="modal-overlay" id="editProfileModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">编辑个人资料</h3>
                <button class="modal-close" onclick="closeModal('editProfileModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editProfileForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">姓名 *</label>
                            <input type="text" class="form-control" id="profileName" value="张三" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">性别</label>
                            <select class="form-select" id="profileGender">
                                <option value="male" selected>男</option>
                                <option value="female">女</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">手机号 *</label>
                            <input type="tel" class="form-control" id="profilePhone" value="138****8888" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">邮箱</label>
                            <input type="email" class="form-control" id="profileEmail" value="zhangsan@example.com">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">所在地区</label>
                        <input type="text" class="form-control" id="profileLocation" value="北京市朝阳区">
                    </div>
                    <div class="form-group">
                        <label class="form-label">专业技能</label>
                        <textarea class="form-textarea" id="profileSkills" placeholder="请描述您的专业技能和工作经验...">空压机维修与保养、制冷设备安装调试、电气系统故障诊断</textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">从业年限</label>
                            <select class="form-select" id="profileExperience">
                                <option value="1-3">1-3年</option>
                                <option value="3-5" selected>3-5年</option>
                                <option value="5-10">5-10年</option>
                                <option value="10+">10年以上</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">服务半径(km)</label>
                            <input type="number" class="form-control" id="profileServiceRadius" value="50" min="1" max="500">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">个人简介</label>
                        <textarea class="form-textarea" id="profileBio" placeholder="请简单介绍一下自己...">拥有8年空压机维修经验，精通各类螺杆式、活塞式空压机的故障诊断与维修，服务过多家大型制造企业。</textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeModal('editProfileModal')">取消</button>
                <button class="btn-save" onclick="saveProfile()">保存</button>
            </div>
        </div>
    </div>

    <!-- 协助操作弹窗 -->
    <div class="modal-overlay" id="assistActionModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="assistActionTitle">协助操作</h3>
                <button class="modal-close" onclick="closeModal('assistActionModal')">&times;</button>
            </div>
            <div class="modal-body" id="assistActionContent">
                <!-- 动态内容 -->
            </div>
            <div class="modal-footer" id="assistActionFooter">
                <!-- 动态按钮 -->
            </div>
        </div>
    </div>

    <!-- 认证申请弹窗 -->
    <div class="modal-overlay" id="authModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="authTitle">认证申请</h3>
                <button class="modal-close" onclick="closeModal('authModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="authDescription" style="color: #6c757d; margin-bottom: 20px;"></div>
                <form id="authForm">
                    <div class="form-group">
                        <label class="form-label">真实姓名 *</label>
                        <input type="text" class="form-control" id="authRealName" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">身份证号 *</label>
                        <input type="text" class="form-control" id="authIdNumber" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">联系电话 *</label>
                        <input type="tel" class="form-control" id="authPhone" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">相关证书或资质</label>
                        <div class="upload-area" onclick="uploadAuthFile(this)">
                            <i class="fas fa-id-card upload-icon"></i>
                            <div>点击上传证件照片</div>
                            <div style="font-size: 0.85rem; color: #6c757d; margin-top: 5px;">支持身份证、证书等图片</div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeModal('authModal')">取消</button>
                <button class="btn-save" onclick="submitAuthentication()">提交认证</button>
            </div>
        </div>
    </div>

    <!-- 添加商品弹窗 -->
    <div class="modal-overlay" id="addProductModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">添加新商品</h3>
                <button class="modal-close" onclick="closeModal('addProductModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addProductForm">
                    <div class="form-group">
                        <label class="form-label">商品名称 <span style="color: #dc3545;">*</span></label>
                        <input type="text" class="form-control" name="productName" required placeholder="请输入商品名称">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">商品分类 <span style="color: #dc3545;">*</span></label>
                        <select name="productCategory" required class="form-control">
                            <option value="">请选择分类</option>
                            <option value="repair">维修服务</option>
                            <option value="maintenance">保养服务</option>
                            <option value="inspection">巡检服务</option>
                            <option value="installation">安装调试</option>
                            <option value="consultation">技术咨询</option>
                            <option value="emergency">应急服务</option>
                        </select>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="form-group">
                            <label class="form-label">起始价格 <span style="color: #dc3545;">*</span></label>
                            <input type="number" class="form-control" name="productPrice" required placeholder="最低价格" min="0" step="1">
                        </div>
                        <div class="form-group">
                            <label class="form-label">结束价格</label>
                            <input type="number" class="form-control" name="productPriceMax" placeholder="最高价格(可选)" min="0" step="1">
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="form-group">
                            <label class="form-label">服务周期</label>
                            <select name="servicePeriod" class="form-control">
                                <option value="">请选择服务周期</option>
                                <option value="immediate">立即服务</option>
                                <option value="1-3days">1-3天</option>
                                <option value="3-7days">3-7天</option>
                                <option value="1-2weeks">1-2周</option>
                                <option value="custom">协商确定</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">服务区域</label>
                            <input type="text" class="form-control" name="serviceArea" placeholder="如：北京市及周边">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">商品描述 <span style="color: #dc3545;">*</span></label>
                        <textarea name="productDescription" required placeholder="请详细描述您提供的服务内容、优势特点等" class="form-control" rows="4"></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">服务优势</label>
                        <div class="advantages-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 12px; margin-top: 12px;">
                            <label class="advantage-item" style="display: flex; align-items: center; gap: 10px; padding: 12px 16px; background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; font-size: 0.9rem; font-weight: normal;">
                                <input type="checkbox" name="advantages" value="professional" style="display: none;">
                                <span class="advantage-icon" style="width: 20px; height: 20px; border: 2px solid #dee2e6; border-radius: 4px; display: flex; align-items: center; justify-content: center; background: white; transition: all 0.3s ease; flex-shrink: 0;">
                                    <i class="fas fa-check" style="font-size: 12px; color: white; opacity: 0; transition: opacity 0.2s ease;"></i>
                                </span>
                                <span style="color: #495057;">专业技术团队</span>
                            </label>
                            <label class="advantage-item" style="display: flex; align-items: center; gap: 10px; padding: 12px 16px; background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; font-size: 0.9rem; font-weight: normal;">
                                <input type="checkbox" name="advantages" value="fast" style="display: none;">
                                <span class="advantage-icon" style="width: 20px; height: 20px; border: 2px solid #dee2e6; border-radius: 4px; display: flex; align-items: center; justify-content: center; background: white; transition: all 0.3s ease; flex-shrink: 0;">
                                    <i class="fas fa-check" style="font-size: 12px; color: white; opacity: 0; transition: opacity 0.2s ease;"></i>
                                </span>
                                <span style="color: #495057;">快速响应</span>
                            </label>
                            <label class="advantage-item" style="display: flex; align-items: center; gap: 10px; padding: 12px 16px; background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; font-size: 0.9rem; font-weight: normal;">
                                <input type="checkbox" name="advantages" value="warranty" style="display: none;">
                                <span class="advantage-icon" style="width: 20px; height: 20px; border: 2px solid #dee2e6; border-radius: 4px; display: flex; align-items: center; justify-content: center; background: white; transition: all 0.3s ease; flex-shrink: 0;">
                                    <i class="fas fa-check" style="font-size: 12px; color: white; opacity: 0; transition: opacity 0.2s ease;"></i>
                                </span>
                                <span style="color: #495057;">质保服务</span>
                            </label>
                            <label class="advantage-item" style="display: flex; align-items: center; gap: 10px; padding: 12px 16px; background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; font-size: 0.9rem; font-weight: normal;">
                                <input type="checkbox" name="advantages" value="24h" style="display: none;">
                                <span class="advantage-icon" style="width: 20px; height: 20px; border: 2px solid #dee2e6; border-radius: 4px; display: flex; align-items: center; justify-content: center; background: white; transition: all 0.3s ease; flex-shrink: 0;">
                                    <i class="fas fa-check" style="font-size: 12px; color: white; opacity: 0; transition: opacity 0.2s ease;"></i>
                                </span>
                                <span style="color: #495057;">24小时服务</span>
                            </label>
                            <label class="advantage-item" style="display: flex; align-items: center; gap: 10px; padding: 12px 16px; background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; font-size: 0.9rem; font-weight: normal;">
                                <input type="checkbox" name="advantages" value="experience" style="display: none;">
                                <span class="advantage-icon" style="width: 20px; height: 20px; border: 2px solid #dee2e6; border-radius: 4px; display: flex; align-items: center; justify-content: center; background: white; transition: all 0.3s ease; flex-shrink: 0;">
                                    <i class="fas fa-check" style="font-size: 12px; color: white; opacity: 0; transition: opacity 0.2s ease;"></i>
                                </span>
                                <span style="color: #495057;">丰富经验</span>
                            </label>
                        </div>
                        <style>
                            .advantage-item:hover {
                                background: #e9ecef !important;
                                border-color: #667eea !important;
                                transform: translateY(-1px);
                                box-shadow: 0 2px 8px rgba(102, 126, 234, 0.15);
                            }
                            
                            .advantage-item input[type="checkbox"]:checked + .advantage-icon {
                                background: #667eea !important;
                                border-color: #667eea !important;
                            }
                            
                            .advantage-item input[type="checkbox"]:checked + .advantage-icon i {
                                opacity: 1 !important;
                            }
                            
                            .advantage-item input[type="checkbox"]:checked ~ span {
                                color: #667eea !important;
                                font-weight: 500 !important;
                            }
                            
                            .advantage-item input[type="checkbox"]:checked {
                                background: #f0f4ff !important;
                                border-color: #667eea !important;
                            }
                            
                            @media (max-width: 600px) {
                                .advantages-grid {
                                    grid-template-columns: 1fr !important;
                                }
                            }
                        </style>
                    </div>

                    <div class="form-group">
                        <label class="form-label">商品图片</label>
                        <div class="upload-area" onclick="uploadProductImage(this)" style="margin-top: 8px;">
                            <i class="fas fa-cloud-upload-alt" style="font-size: 2rem; color: #6c757d; margin-bottom: 10px;"></i>
                            <div style="color: #333; margin-bottom: 5px;">点击上传商品图片</div>
                            <div style="font-size: 0.85rem; color: #6c757d;">支持JPG、PNG格式，最多5张</div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeModal('addProductModal')">取消</button>
                <button class="btn-save" onclick="saveProduct()">保存商品</button>
            </div>
        </div>
    </div>

    <script>
    // 弹窗管理函数
    function openModal(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.style.display = 'flex';
            document.body.classList.add('modal-open');
        }
    }

    function closeModal(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.style.display = 'none';
            document.body.classList.remove('modal-open');
        }
    }

    // 点击模态框背景关闭
    document.addEventListener('click', function(e) {
        if (e.target.classList.contains('modal-overlay')) {
            e.target.style.display = 'none';
            document.body.classList.remove('modal-open');
        }
    });

    // 服务管理相关函数
    function editService(serviceId, serviceName, serviceType, servicePrice) {
        // 填充表单数据
        document.getElementById('serviceName').value = serviceName || '';
        document.getElementById('serviceType').value = serviceType || '';
        document.getElementById('servicePrice').value = servicePrice || '';
        
        // 存储服务ID用于保存时使用
        document.getElementById('editServiceForm').dataset.serviceId = serviceId;
        
        openModal('editServiceModal');
    }

    function saveService() {
        const form = document.getElementById('editServiceForm');
        const serviceId = form.dataset.serviceId;
        
        // 获取表单数据
        const serviceName = document.getElementById('serviceName').value;
        const serviceType = document.getElementById('serviceType').value;
        const servicePrice = document.getElementById('servicePrice').value;
        const serviceDescription = document.getElementById('serviceDescription').value;
        const serviceArea = document.getElementById('serviceArea').value;
        
        // 验证必填字段
        if (!serviceName || !serviceType || !servicePrice || !serviceDescription) {
            alert('请填写所有必填字段');
            return;
        }
        
        // 模拟保存
        console.log('保存服务:', { serviceId, serviceName, serviceType, servicePrice, serviceDescription, serviceArea });
        alert('服务信息保存成功！');
        closeModal('editServiceModal');
        
        // 这里可以添加实际的保存逻辑和页面刷新
    }

    function toggleServiceStatus(serviceId, currentStatus) {
        const newStatus = currentStatus === '上架' ? '下架' : '上架';
        if (confirm(`确定要${newStatus}这个服务吗？`)) {
            alert(`服务已${newStatus}！`);
            // 这里可以添加实际的状态切换逻辑
        }
    }

    function uploadServiceImage(element) {
        const fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.accept = '.jpg,.jpeg,.png';
        fileInput.multiple = true;
        fileInput.onchange = function(e) {
            const files = Array.from(e.target.files);
            if (files.length > 0) {
                element.innerHTML = `
                    <i class="fas fa-check-circle" style="font-size: 1.5rem; color: #28a745; margin-bottom: 10px;"></i>
                    <div style="color: #28a745; margin-bottom: 5px;">已选择 ${files.length} 个文件</div>
                    <div style="font-size: 0.85rem; color: #6c757d;">${files.map(f => f.name).join(', ')}</div>
                `;
                element.style.borderColor = '#28a745';
                element.style.backgroundColor = '#f8fff9';
            }
        };
        fileInput.click();
    }

    // 订单详情相关函数
    function showOrderDetail(orderId, orderType) {
        // 模拟订单数据
        const orderData = {
            'SP20240601001': {
                id: 'SP20240601001',
                customer: '北京机械制造厂',
                contact: '李经理 | 138-0001-0001',
                service: '空压机维修服务',
                amount: 1200,
                status: '处理中',
                createTime: '2024-06-01 09:30',
                description: '螺杆式空压机出现异响，压力不稳定，需要专业技师上门检查维修。',
                address: '北京市朝阳区工业园区A座',
                urgency: '紧急',
                equipment: 'SA-75A螺杆式空压机'
            },
            'SP20240531008': {
                id: 'SP20240531008',
                customer: '上海化工公司',
                contact: '王总 | 138-0002-0002',
                service: '设备保养服务',
                amount: 650,
                status: '已完成',
                createTime: '2024-05-31 14:20',
                description: '对生产线制冷设备进行定期保养维护，包括清洁、润滑、检查等项目。',
                address: '上海市浦东新区化工园区B区',
                urgency: '一般',
                equipment: '工业制冷机组 | CF-50'
            },
            'SP20240530015': {
                id: 'SP20240530015',
                customer: '广州电子科技',
                contact: '张工 | 138-0003-0003',
                service: '巡检服务',
                amount: 350,
                status: '进行中',
                createTime: '2024-05-30 16:45',
                description: '对厂区内各类设备进行定期巡检，及时发现潜在问题，预防设备故障。',
                address: '广州市天河区科技园C座',
                urgency: '一般',
                equipment: '空压机、通风设备等'
            },
            'RO20240601001': {
                id: 'RO20240601001',
                customer: '北京机械制造厂',
                contact: '李经理 | 138-0001-0001',
                equipment: '螺杆式空压机 | SA-75A',
                fault: '设备异响，压力不稳定，可能是轴承磨损或管路堵塞',
                priority: '紧急',
                status: '待处理',
                createTime: '2024-06-01 14:30',
                address: '北京市朝阳区工业园区A座3楼',
                description: '客户反映空压机运行时有明显异响，输出压力波动较大，影响生产线正常运行。'
            }
        };

        const order = orderData[orderId];
        if (!order) {
            alert('订单信息不存在');
            return;
        }

        let content = '';
        if (orderType === 'shop') {
            content = `
                <div class="detail-item">
                    <div class="detail-label">订单编号</div>
                    <div class="detail-value">${order.id}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">客户信息</div>
                    <div class="detail-value">${order.customer}<br><small>${order.contact}</small></div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">服务内容</div>
                    <div class="detail-value">${order.service}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">订单金额</div>
                    <div class="detail-value" style="color: #28a745; font-size: 1.2rem;">¥${order.amount}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">订单状态</div>
                    <div class="detail-value">
                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.8rem; background: #fff3cd; color: #856404;">${order.status}</span>
                    </div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">创建时间</div>
                    <div class="detail-value">${order.createTime}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">服务地址</div>
                    <div class="detail-value">${order.address}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">需求描述</div>
                    <div class="detail-value">${order.description}</div>
                </div>
            `;
        } else if (orderType === 'repair') {
            content = `
                <div class="detail-item">
                    <div class="detail-label">工单编号</div>
                    <div class="detail-value">${order.id}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">客户信息</div>
                    <div class="detail-value">${order.customer}<br><small>${order.contact}</small></div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">设备信息</div>
                    <div class="detail-value">${order.equipment}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">故障描述</div>
                    <div class="detail-value">${order.fault}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">优先级</div>
                    <div class="detail-value">
                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.8rem; background: #f8d7da; color: #721c24;">${order.priority}</span>
                    </div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">工单状态</div>
                    <div class="detail-value">
                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.8rem; background: #fff3cd; color: #856404;">${order.status}</span>
                    </div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">创建时间</div>
                    <div class="detail-value">${order.createTime}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">服务地址</div>
                    <div class="detail-value">${order.address}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">详细描述</div>
                    <div class="detail-value">${order.description}</div>
                </div>
            `;
        }

        document.getElementById('orderDetailContent').innerHTML = content;
        openModal('orderDetailModal');
    }

    // 工单操作相关函数
    function showOrderAction(actionType, orderId) {
        const titleMap = {
            'accept': '接受工单',
            'progress': '更新进度',
            'complete': '完成工单',
            'evaluate': '服务评价'
        };

        document.getElementById('orderActionTitle').textContent = titleMap[actionType] || '工单操作';

        let content = '';
        let footer = '';

        switch (actionType) {
            case 'accept':
                content = `
                    <div class="detail-item">
                        <div class="detail-label">工单编号</div>
                        <div class="detail-value">${orderId}</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">预计完成时间 *</label>
                        <input type="datetime-local" class="form-control" id="estimatedTime" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">服务报价 *</label>
                        <input type="number" class="form-control" id="servicePrice" placeholder="请输入服务报价" min="0" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">接单备注</label>
                        <textarea class="form-textarea" id="acceptNote" placeholder="请说明您的服务优势和注意事项..."></textarea>
                    </div>
                `;
                footer = `
                    <button class="btn-cancel" onclick="closeModal('orderActionModal')">取消</button>
                    <button class="btn-save" onclick="confirmAcceptOrder('${orderId}')">确认接单</button>
                `;
                break;

            case 'progress':
                content = `
                    <div class="detail-item">
                        <div class="detail-label">工单编号</div>
                        <div class="detail-value">${orderId}</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">进度状态 *</label>
                        <select class="form-select" id="progressStatus" required>
                            <option value="">请选择进度状态</option>
                            <option value="on_way">前往现场</option>
                            <option value="diagnosing">故障诊断中</option>
                            <option value="repairing">维修进行中</option>
                            <option value="testing">测试验收中</option>
                            <option value="completed">维修完成</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">进度描述 *</label>
                        <textarea class="form-textarea" id="progressDescription" required placeholder="请详细描述当前工作进度和发现的问题..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">现场照片</label>
                        <div class="upload-area" onclick="uploadProgressImage(this)">
                            <i class="fas fa-camera upload-icon"></i>
                            <div>点击上传现场照片</div>
                            <div style="font-size: 0.85rem; color: #6c757d; margin-top: 5px;">支持 JPG、PNG 格式</div>
                        </div>
                    </div>
                `;
                footer = `
                    <button class="btn-cancel" onclick="closeModal('orderActionModal')">取消</button>
                    <button class="btn-save" onclick="updateOrderProgress('${orderId}')">更新进度</button>
                `;
                break;

            case 'evaluate':
                content = `
                    <div class="detail-item">
                        <div class="detail-label">订单编号</div>
                        <div class="detail-value">${orderId}</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">服务评分 *</label>
                        <div style="display: flex; gap: 10px; align-items: center; margin-top: 8px;">
                            <div class="rating-stars" id="serviceRating">
                                ${[1,2,3,4,5].map(i => `<i class="far fa-star" data-rating="${i}" onclick="setRating(${i})" style="cursor: pointer; font-size: 1.5rem; color: #ddd; transition: color 0.2s;"></i>`).join('')}
                            </div>
                            <span id="ratingText" style="color: #6c757d; font-size: 0.9rem;">请选择评分</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">评价内容</label>
                        <textarea class="form-textarea" id="evaluationContent" placeholder="请分享您对此次服务的评价和建议..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">服务标签</label>
                        <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px;">
                            ${['技术专业', '响应及时', '服务态度好', '解决彻底', '价格合理', '其他'].map(tag => 
                                `<label style="display: flex; align-items: center; gap: 5px; padding: 5px 10px; background: #f8f9fa; border-radius: 6px; font-size: 0.85rem; cursor: pointer;">
                                    <input type="checkbox" value="${tag}" name="serviceTags" style="margin: 0;">
                                    ${tag}
                                </label>`
                            ).join('')}
                        </div>
                    </div>
                `;
                footer = `
                    <button class="btn-cancel" onclick="closeModal('orderActionModal')">取消</button>
                    <button class="btn-save" onclick="submitEvaluation('${orderId}')">提交评价</button>
                `;
                break;
        }

        document.getElementById('orderActionContent').innerHTML = content;
        document.getElementById('orderActionFooter').innerHTML = footer;
        openModal('orderActionModal');
    }

    function confirmAcceptOrder(orderId) {
        const estimatedTime = document.getElementById('estimatedTime').value;
        const servicePrice = document.getElementById('servicePrice').value;
        const acceptNote = document.getElementById('acceptNote').value;

        if (!estimatedTime || !servicePrice) {
            alert('请填写所有必填字段');
            return;
        }

        console.log('接受工单:', { orderId, estimatedTime, servicePrice, acceptNote });
        alert('工单接受成功！客户将收到通知。');
        closeModal('orderActionModal');
    }

    function updateOrderProgress(orderId) {
        const progressStatus = document.getElementById('progressStatus').value;
        const progressDescription = document.getElementById('progressDescription').value;

        if (!progressStatus || !progressDescription) {
            alert('请填写所有必填字段');
            return;
        }

        console.log('更新进度:', { orderId, progressStatus, progressDescription });
        alert('进度更新成功！');
        closeModal('orderActionModal');
    }

    function setRating(rating) {
        const stars = document.querySelectorAll('#serviceRating i');
        const ratingText = document.getElementById('ratingText');
        
        stars.forEach((star, index) => {
            if (index < rating) {
                star.className = 'fas fa-star';
                star.style.color = '#ffc107';
            } else {
                star.className = 'far fa-star';
                star.style.color = '#ddd';
            }
        });

        const ratingTexts = ['', '很差', '一般', '良好', '很好', '优秀'];
        ratingText.textContent = ratingTexts[rating];
        ratingText.dataset.rating = rating;
    }

    function submitEvaluation(orderId) {
        const rating = document.getElementById('ratingText').dataset.rating;
        const content = document.getElementById('evaluationContent').value;
        const tags = Array.from(document.querySelectorAll('input[name="serviceTags"]:checked')).map(cb => cb.value);

        if (!rating) {
            alert('请选择评分');
            return;
        }

        console.log('提交评价:', { orderId, rating, content, tags });
        alert('评价提交成功！');
        closeModal('orderActionModal');
    }

    function uploadProgressImage(element) {
        const fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.accept = '.jpg,.jpeg,.png';
        fileInput.multiple = true;
        fileInput.onchange = function(e) {
            const files = Array.from(e.target.files);
            if (files.length > 0) {
                element.innerHTML = `
                    <i class="fas fa-check-circle" style="font-size: 1.5rem; color: #28a745; margin-bottom: 10px;"></i>
                    <div style="color: #28a745; margin-bottom: 5px;">已选择 ${files.length} 张照片</div>
                    <div style="font-size: 0.85rem; color: #6c757d;">${files.map(f => f.name).join(', ')}</div>
                `;
                element.style.borderColor = '#28a745';
                element.style.backgroundColor = '#f8fff9';
            }
        };
        fileInput.click();
    }

    // 协助管理相关函数
    function submitAssistRequest() {
        // 获取表单数据
        const assistType = selectedAssistType;
        const urgency = selectedUrgency;
        const expert = selectedExpert;
        
        if (!assistType) {
            alert('请选择协助方式');
            return;
        }
        if (!expert) {
            alert('请选择专家');
            return;
        }
        
        // 模拟提交
        console.log('提交协助申请:', { assistType, urgency, expert });
        alert('协助申请已提交！专家将在5分钟内联系您。');
    }

    function showAssistAction(actionType, assistId) {
        const titleMap = {
            'accept': '接受协助',
            'reject': '拒绝协助',
            'complete': '完成协助',
            'evaluate': '协助评价'
        };

        document.getElementById('assistActionTitle').textContent = titleMap[actionType] || '协助操作';

        let content = '';
        let footer = '';

        switch (actionType) {
            case 'accept':
                content = `
                    <div class="detail-item">
                        <div class="detail-label">协助编号</div>
                        <div class="detail-value">${assistId}</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">协助方式 *</label>
                        <select class="form-select" id="assistMethod" required>
                            <option value="">请选择协助方式</option>
                            <option value="video">视频协助</option>
                            <option value="audio">语音协助</option>
                            <option value="text">文字协助</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">预计时长 *</label>
                        <select class="form-select" id="estimatedDuration" required>
                            <option value="">请选择预计时长</option>
                            <option value="30">30分钟</option>
                            <option value="60">1小时</option>
                            <option value="120">2小时</option>
                            <option value="240">4小时</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">接单备注</label>
                        <textarea class="form-textarea" id="acceptAssistNote" placeholder="请说明您的专业优势和协助计划..."></textarea>
                    </div>
                `;
                footer = `
                    <button class="btn-cancel" onclick="closeModal('assistActionModal')">取消</button>
                    <button class="btn-save" onclick="confirmAcceptAssist('${assistId}')">确认接单</button>
                `;
                break;

            case 'complete':
                content = `
                    <div class="detail-item">
                        <div class="detail-label">协助编号</div>
                        <div class="detail-value">${assistId}</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">实际时长</label>
                        <input type="number" class="form-control" id="actualDuration" placeholder="请输入实际协助时长（分钟）" min="1">
                    </div>
                    <div class="form-group">
                        <label class="form-label">解决方案总结 *</label>
                        <textarea class="form-textarea" id="solutionSummary" required placeholder="请详细描述问题的解决方案和操作步骤..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">知识文档</label>
                        <div class="upload-area" onclick="uploadAssistDoc(this)">
                            <i class="fas fa-file-upload upload-icon"></i>
                            <div>点击上传相关文档</div>
                            <div style="font-size: 0.85rem; color: #6c757d; margin-top: 5px;">支持 PDF、DOC、图片格式</div>
                        </div>
                    </div>
                `;
                footer = `
                    <button class="btn-cancel" onclick="closeModal('assistActionModal')">取消</button>
                    <button class="btn-save" onclick="completeAssist('${assistId}')">完成协助</button>
                `;
                break;
        }

        document.getElementById('assistActionContent').innerHTML = content;
        document.getElementById('assistActionFooter').innerHTML = footer;
        openModal('assistActionModal');
    }

    function confirmAcceptAssist(assistId) {
        const assistMethod = document.getElementById('assistMethod').value;
        const estimatedDuration = document.getElementById('estimatedDuration').value;
        const acceptAssistNote = document.getElementById('acceptAssistNote').value;

        if (!assistMethod || !estimatedDuration) {
            alert('请填写所有必填字段');
            return;
        }

        console.log('接受协助:', { assistId, assistMethod, estimatedDuration, acceptAssistNote });
        alert('协助已接受！系统将为您安排协助时间。');
        closeModal('assistActionModal');
    }

    function completeAssist(assistId) {
        const actualDuration = document.getElementById('actualDuration').value;
        const solutionSummary = document.getElementById('solutionSummary').value;

        if (!solutionSummary) {
            alert('请填写解决方案总结');
            return;
        }

        console.log('完成协助:', { assistId, actualDuration, solutionSummary });
        alert('协助已完成！客户将收到解决方案总结。');
        closeModal('assistActionModal');
    }

    function uploadAssistDoc(element) {
        const fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.accept = '.pdf,.doc,.docx,.jpg,.jpeg,.png';
        fileInput.multiple = true;
        fileInput.onchange = function(e) {
            const files = Array.from(e.target.files);
            if (files.length > 0) {
                element.innerHTML = `
                    <i class="fas fa-check-circle" style="font-size: 1.5rem; color: #28a745; margin-bottom: 10px;"></i>
                    <div style="color: #28a745; margin-bottom: 5px;">已选择 ${files.length} 个文档</div>
                    <div style="font-size: 0.85rem; color: #6c757d;">${files.map(f => f.name).join(', ')}</div>
                `;
                element.style.borderColor = '#28a745';
                element.style.backgroundColor = '#f8fff9';
            }
        };
        fileInput.click();
    }

    // 认证相关函数
    function startAuthentication(authType) {
        const authTypeMap = {
            'real': '实名认证',
            'repair': '维修认证',
            'expert': '专家认证',
            'shop': '商家认证'
        };

        const authData = {
            authType,
            title: authTypeMap[authType],
            description: '请按照要求提交相关材料，我们将在1-3个工作日内完成审核。'
        };

        // 填充认证弹窗数据
        document.getElementById('authTitle').textContent = authData.title;
        document.getElementById('authDescription').textContent = authData.description;
        document.getElementById('authForm').dataset.authType = authType;

        openModal('authModal');
    }

    function submitAuthentication() {
        const authType = document.getElementById('authForm').dataset.authType;
        const realName = document.getElementById('authRealName').value;
        const idNumber = document.getElementById('authIdNumber').value;
        const phone = document.getElementById('authPhone').value;

        if (!realName || !idNumber || !phone) {
            alert('请填写所有必填字段');
            return;
        }

        console.log('提交认证申请:', { authType, realName, idNumber, phone });
        alert('认证申请已提交！我们将在1-3个工作日内完成审核。');
        closeModal('authModal');
    }

    function uploadAuthFile(element) {
        const fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.accept = '.jpg,.jpeg,.png,.pdf';
        fileInput.multiple = true;
        fileInput.onchange = function(e) {
            const files = Array.from(e.target.files);
            if (files.length > 0) {
                element.innerHTML = `
                    <i class="fas fa-check-circle" style="font-size: 1.5rem; color: #28a745; margin-bottom: 10px;"></i>
                    <div style="color: #28a745; margin-bottom: 5px;">已选择 ${files.length} 个文件</div>
                    <div style="font-size: 0.85rem; color: #6c757d;">${files.map(f => f.name).join(', ')}</div>
                `;
                element.style.borderColor = '#28a745';
                element.style.backgroundColor = '#f8fff9';
            }
        };
        fileInput.click();
    }

    // 知识管理相关函数
    function showPublishKnowledgeModal() {
        openModal('publishKnowledgeModal');
    }

    function publishKnowledge() {
        const title = document.getElementById('knowledgeTitle').value;
        const category = document.getElementById('knowledgeCategory').value;
        const content = document.getElementById('knowledgeContent').value;

        if (!title || !category || !content) {
            alert('请填写所有必填字段');
            return;
        }

        const knowledgeData = {
            title,
            category,
            content,
            equipment: document.getElementById('applicableEquipment').value,
            tags: document.getElementById('knowledgeTags').value,
            visibility: document.getElementById('knowledgeVisibility').value,
            difficulty: document.getElementById('knowledgeDifficulty').value
        };

        console.log('发布知识:', knowledgeData);
        alert('知识发布成功！');
        closeModal('publishKnowledgeModal');
        
        // 清空表单
        document.getElementById('publishKnowledgeForm').reset();
    }

    function uploadKnowledgeFile(element) {
        const fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.accept = '.pdf,.doc,.docx,.jpg,.jpeg,.png';
        fileInput.multiple = true;
        fileInput.onchange = function(e) {
            const files = Array.from(e.target.files);
            if (files.length > 0) {
                element.innerHTML = `
                    <i class="fas fa-check-circle" style="font-size: 1.5rem; color: #28a745; margin-bottom: 10px;"></i>
                    <div style="color: #28a745; margin-bottom: 5px;">已选择 ${files.length} 个文件</div>
                    <div style="font-size: 0.85rem; color: #6c757d;">${files.map(f => f.name).join(', ')}</div>
                `;
                element.style.borderColor = '#28a745';
                element.style.backgroundColor = '#f8fff9';
            }
        };
        fileInput.click();
    }

    // 知识库管理相关函数
    let knowledgeCurrentPage = 1;
    const knowledgeTotalPages = 5;

    function showNewCategoryModal() {
        openModal('newCategoryModal');
    }

    function editCategory(categoryName) {
        // 模拟获取分类数据
        const categoryData = getCategoryData(categoryName);
        
        document.getElementById('editCategoryName').value = categoryData.name;
        document.getElementById('editCategoryDescription').value = categoryData.description;
        document.getElementById('editCategoryIcon').value = categoryData.icon;
        document.getElementById('editCategorySort').value = categoryData.sort;
        
        // 存储当前编辑的分类名
        document.getElementById('editCategoryForm').dataset.categoryName = categoryName;
        
        openModal('editCategoryModal');
    }

    function deleteCategory(categoryName) {
        if (confirm('确定要删除分类"' + categoryName + '"吗？删除后该分类下的所有文档将移至"未分类"。')) {
            showToast('分类"' + categoryName + '"已删除', '#dc3545');
            // 这里可以添加实际的删除逻辑
        }
    }

    function searchKnowledge() {
        const keyword = document.getElementById('knowledgeSearchInput').value.trim();
        if (keyword) {
            showToast('正在搜索：' + keyword, '#667eea');
            // 这里可以添加实际的搜索逻辑
        } else {
            showToast('请输入搜索关键词', '#ffc107');
        }
    }

    function resetSearch() {
        document.getElementById('knowledgeSearchInput').value = '';
        // 重置所有筛选条件
        const selects = document.querySelectorAll('#page-knowledge select');
        selects.forEach(select => {
            if (select.options[0]) select.selectedIndex = 0;
        });
        showToast('搜索条件已重置', '#28a745');
    }

    function showBatchExportModal() {
        openModal('batchExportModal');
    }

    function viewDocument(docId) {
        // 模拟获取文档数据
        const docData = getDocumentData(docId);
        
        document.getElementById('documentDetailTitle').textContent = docData.title;
        document.getElementById('documentDetailContent').innerHTML = generateDocumentDetailHTML(docData);
        document.getElementById('documentEditBtn').onclick = function() {
            closeModal('documentDetailModal');
            editDocument(docId);
        };
        
        openModal('documentDetailModal');
    }

    function editDocument(docId) {
        const modal = document.createElement('div');
        modal.className = 'modal-overlay';
        modal.style.display = 'flex';
        
        var modalHTML = '<div class="modal" style="max-width: 600px;">' +
            '<div class="modal-header">' +
                '<h3 class="modal-title">编辑文档 - ' + docId + '</h3>' +
                '<button class="modal-close" onclick="this.closest(\'.modal-overlay\').remove()">&times;</button>' +
            '</div>' +
            '<div class="modal-body">' +
                '<form>' +
                    '<div class="form-group">' +
                        '<label class="form-label">文档标题 *</label>' +
                        '<input type="text" class="form-control" value="螺杆式空压机常见故障诊断与处理方法" required>' +
                    '</div>' +
                    '<div class="form-row">' +
                        '<div class="form-group">' +
                            '<label class="form-label">知识分类 *</label>' +
                            '<select class="form-select" required>' +
                                '<option value="设备维修" selected>设备维修</option>' +
                                '<option value="保养指南">保养指南</option>' +
                                '<option value="巡检规范">巡检规范</option>' +
                                '<option value="常见故障">常见故障</option>' +
                            '</select>' +
                        '</div>' +
                        '<div class="form-group">' +
                            '<label class="form-label">可见性</label>' +
                            '<select class="form-select">' +
                                '<option value="public" selected>公开</option>' +
                                '<option value="private">私有</option>' +
                            '</select>' +
                        '</div>' +
                    '</div>' +
                    '<div class="form-group">' +
                        '<label class="form-label">文档描述</label>' +
                        '<textarea class="form-textarea" placeholder="请简要描述文档内容..." style="min-height: 100px;">详细介绍各种故障现象、原因分析及解决方案</textarea>' +
                    '</div>' +
                    '<div class="form-group">' +
                        '<label class="form-label">标签</label>' +
                        '<input type="text" class="form-control" value="空压机,故障诊断,维修" placeholder="用逗号分隔多个标签">' +
                    '</div>' +
                '</form>' +
            '</div>' +
            '<div class="modal-footer">' +
                '<button class="btn-cancel" onclick="this.closest(\'.modal-overlay\').remove()">取消</button>' +
                '<button class="btn-save" onclick="saveDocumentEdit(\'' + docId + '\'); this.closest(\'.modal-overlay\').remove();">保存修改</button>' +
            '</div>' +
        '</div>';
        
        modal.innerHTML = modalHTML;
        document.body.appendChild(modal);
    }

    function saveDocumentEdit(docId) {
        showToast('文档修改已保存', '#28a745');
    }

    function deleteDocument(docId) {
        if (confirm('确定要删除这个文档吗？删除后无法恢复。')) {
            showToast('文档已删除', '#dc3545');
            // 这里可以添加实际的删除逻辑
        }
    }

    function resubmitDocument(docId) {
        // 模拟获取文档数据和拒绝原因
        const docData = getDocumentData(docId);
        const rejectReason = getRejectReason(docId);
        
        document.getElementById('resubmitTitle').value = docData.title;
        document.getElementById('rejectReasonContent').innerHTML = rejectReason;
        
        // 存储当前重新提交的文档ID
        document.getElementById('resubmitDocumentForm').dataset.docId = docId;
        
        openModal('resubmitDocumentModal');
    }

    // 新增分类
    function createCategory() {
        const name = document.getElementById('categoryName').value.trim();
        const description = document.getElementById('categoryDescription').value.trim();
        const icon = document.getElementById('categoryIcon').value;
        const sort = document.getElementById('categorySort').value;

        if (!name) {
            showToast('请输入分类名称', '#ffc107');
            return;
        }

        const categoryData = { name, description, icon, sort };
        console.log('创建分类:', categoryData);
        
        showToast('分类"' + name + '"创建成功！', '#28a745');
        closeModal('newCategoryModal');
        
        // 清空表单
        document.getElementById('newCategoryForm').reset();
    }

    // 更新分类
    function updateCategory() {
        const categoryName = document.getElementById('editCategoryForm').dataset.categoryName;
        const name = document.getElementById('editCategoryName').value.trim();
        const description = document.getElementById('editCategoryDescription').value.trim();
        const icon = document.getElementById('editCategoryIcon').value;
        const sort = document.getElementById('editCategorySort').value;

        if (!name) {
            showToast('请输入分类名称', '#ffc107');
            return;
        }

        const categoryData = { name, description, icon, sort };
        console.log('更新分类:', categoryName, categoryData);
        
        showToast('分类"' + name + '"更新成功！', '#28a745');
        closeModal('editCategoryModal');
    }

    // 重新提交文档
    function submitResubmitDocument() {
        const docId = document.getElementById('resubmitDocumentForm').dataset.docId;
        const title = document.getElementById('resubmitTitle').value.trim();
        const description = document.getElementById('resubmitDescription').value.trim();

        if (!title || !description) {
            showToast('请填写所有必填字段', '#ffc107');
            return;
        }

        const resubmitData = { docId, title, description };
        console.log('重新提交文档:', resubmitData);
        
        showToast('文档已重新提交审核！', '#28a745');
        closeModal('resubmitDocumentModal');
        
        // 清空表单
        document.getElementById('resubmitDocumentForm').reset();
    }

    // 开始批量导出
    function startBatchExport() {
        const exportRange = document.querySelector('input[name="exportRange"]:checked').value;
        const exportFormat = document.getElementById('exportFormat').value;
        const exportNaming = document.getElementById('exportNaming').value;
        const includePrivate = document.getElementById('includePrivate').checked;

        const exportData = { exportRange, exportFormat, exportNaming, includePrivate };
        console.log('批量导出设置:', exportData);
        
        showToast('正在准备导出文件，请稍候...', '#667eea');
        closeModal('batchExportModal');
        
        // 模拟导出进度
        setTimeout(() => {
            showToast('文件导出完成！正在下载...', '#28a745');
        }, 2000);
    }

    // 上传重新提交的文件
    function uploadResubmitFile(element) {
        const fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.accept = '.pdf,.doc,.docx,.jpg,.jpeg,.png';
        fileInput.onchange = function(e) {
            const file = e.target.files[0];
            if (file) {
                element.innerHTML = `
                    <i class="fas fa-check-circle" style="font-size: 1.5rem; color: #28a745; margin-bottom: 10px;"></i>
                    <div style="color: #28a745; margin-bottom: 5px;">文件已选择</div>
                    <div style="font-size: 0.85rem; color: #6c757d;">${file.name}</div>
                `;
                element.style.borderColor = '#28a745';
                element.style.backgroundColor = '#f8fff9';
            }
        };
        fileInput.click();
    }

    function knowledgeGoToPage(page) {
        if (page < 1 || page > knowledgeTotalPages) return;
        knowledgeCurrentPage = page;
        showToast('正在加载第' + page + '页数据...', '#667eea');
        setTimeout(() => {
            updateKnowledgePagination();
            showToast('第' + page + '页数据加载完成！', '#28a745');
        }, 800);
    }

    function knowledgePrevPage() {
        if (knowledgeCurrentPage > 1) {
            knowledgeGoToPage(knowledgeCurrentPage - 1);
        }
    }

    function knowledgeNextPage() {
        if (knowledgeCurrentPage < knowledgeTotalPages) {
            knowledgeGoToPage(knowledgeCurrentPage + 1);
        }
    }

    function updateKnowledgePagination() {
        const currentPageSpan = document.getElementById('knowledgeCurrentPage');
        if (currentPageSpan) {
            currentPageSpan.textContent = knowledgeCurrentPage;
        }
        
        const paginationContainer = document.getElementById('knowledgePagination');
        if (paginationContainer) {
            paginationContainer.innerHTML = `
                <button onclick="knowledgePrevPage()" style="padding: 6px 12px; border: 1px solid #e0e3ea; background: ${knowledgeCurrentPage === 1 ? '#f8f9fa' : 'white'}; color: #6c757d; border-radius: 6px; cursor: ${knowledgeCurrentPage === 1 ? 'not-allowed' : 'pointer'}; font-size: 0.85rem;" ${knowledgeCurrentPage === 1 ? 'disabled' : ''}>
                    <i class="fas fa-chevron-left"></i> 上一页
                </button>
                ${generateKnowledgePageButtons()}
                <button onclick="knowledgeNextPage()" style="padding: 6px 12px; border: 1px solid #e0e3ea; background: ${knowledgeCurrentPage === knowledgeTotalPages ? '#f8f9fa' : 'white'}; color: ${knowledgeCurrentPage === knowledgeTotalPages ? '#6c757d' : '#667eea'}; border-radius: 6px; cursor: ${knowledgeCurrentPage === knowledgeTotalPages ? 'not-allowed' : 'pointer'}; font-size: 0.85rem;" ${knowledgeCurrentPage === knowledgeTotalPages ? 'disabled' : ''}>
                    下一页 <i class="fas fa-chevron-right"></i>
                </button>
            `;
        }
    }

    function generateKnowledgePageButtons() {
        let buttons = '';
        for (let i = 1; i <= knowledgeTotalPages; i++) {
            const isActive = i === knowledgeCurrentPage;
            buttons += `
                <button onclick="knowledgeGoToPage(${i})" style="padding: 6px 12px; ${isActive ? 'background: #667eea; color: white; border: none;' : 'border: 1px solid #e0e3ea; background: white; color: #6c757d;'} border-radius: 6px; cursor: pointer; font-size: 0.85rem;">${i}</button>
            `;
        }
        return buttons;
    }

    function showToast(message, color) {
        color = color || '#667eea';
        const toast = document.createElement('div');
        toast.style.cssText = 'position: fixed; top: 20px; right: 20px; background: ' + color + 
            '; color: white; padding: 15px 20px; border-radius: 8px; z-index: 10000; box-shadow: 0 4px 12px rgba(0,0,0,0.2);';
        toast.innerHTML = '<i class="fas fa-info-circle"></i> ' + message;
        document.body.appendChild(toast);
        setTimeout(() => toast.remove(), 3000);
    }

    // 模拟数据获取函数
    function getCategoryData(categoryName) {
        const categories = {
            '设备维修': {
                name: '设备维修',
                description: '设备故障诊断、维修方法、零配件更换等技术文档',
                icon: 'fas fa-tools',
                sort: 10
            },
            '保养指南': {
                name: '保养指南',
                description: '定期保养计划、操作规程、安全注意事项等文档',
                icon: 'fas fa-calendar-check',
                sort: 9
            },
            '巡检规范': {
                name: '巡检规范',
                description: '设备巡检标准、检查项目、记录表格等规范文档',
                icon: 'fas fa-search',
                sort: 8
            },
            '常见故障': {
                name: '常见故障',
                description: '设备常见故障现象、原因分析、解决方案等资料',
                icon: 'fas fa-exclamation-triangle',
                sort: 7
            }
        };
        return categories[categoryName] || {
            name: categoryName,
            description: '',
            icon: 'fas fa-folder',
            sort: 0
        };
    }

    function getDocumentData(docId) {
        const documents = {
            'DOC001': {
                id: 'DOC001',
                title: '螺杆式空压机常见故障诊断与处理方法',
                description: '详细介绍各种故障现象、原因分析及解决方案',
                category: '常见故障',
                type: 'PDF',
                size: '2.5MB',
                uploadTime: '2024-06-01 10:30',
                author: '张工程师',
                views: 156,
                downloads: 89,
                points: 623,
                status: '已通过',
                visibility: '公开'
            },
            'DOC002': {
                id: 'DOC002',
                title: '工业设备年度保养计划与操作规范',
                description: '包含设备清单、保养周期、操作步骤等',
                category: '保养指南',
                type: 'DOCX',
                size: '1.8MB',
                uploadTime: '2024-05-30 14:20',
                author: '李技师',
                views: 234,
                downloads: 127,
                points: 1103,
                status: '审核中',
                visibility: '公开'
            },
            'DOC003': {
                id: 'DOC003',
                title: '设备巡检记录表格及填写说明',
                description: '标准化巡检表格模板和详细填写指导',
                category: '巡检规范',
                type: 'XLSX',
                size: '0.5MB',
                uploadTime: '2024-05-28 16:45',
                author: '王主管',
                views: 0,
                downloads: 0,
                points: 0,
                status: '无需审核',
                visibility: '私有'
            },
            'DOC004': {
                id: 'DOC004',
                title: '设备故障排查视频教程',
                description: '实际操作演示，详细故障排查步骤',
                category: '设备维修',
                type: 'MP4',
                size: '45.2MB',
                uploadTime: '2024-05-20 15:30',
                author: '赵师傅',
                views: 0,
                downloads: 0,
                points: 0,
                status: '未通过',
                visibility: '公开'
            }
        };
        return documents[docId] || {
            id: docId,
            title: '未知文档',
            description: '文档信息获取失败',
            category: '未分类',
            type: 'Unknown',
            size: '0KB',
            uploadTime: '未知',
            author: '未知',
            views: 0,
            downloads: 0,
            points: 0,
            status: '未知',
            visibility: '未知'
        };
    }

    function getRejectReason(docId) {
        const rejectReasons = {
            'DOC004': `
                <div style="margin-bottom: 10px;"><strong>审核时间：</strong>2024-05-21 09:30</div>
                <div style="margin-bottom: 10px;"><strong>审核员：</strong>平台管理员</div>
                <div style="margin-bottom: 15px;"><strong>拒绝原因：</strong></div>
                <div style="background: white; padding: 15px; border-radius: 6px; border-left: 4px solid #dc3545;">
                    1. 视频内容不够清晰，部分操作步骤无法看清<br/>
                    2. 缺少必要的安全提醒和注意事项<br/>
                    3. 建议增加字幕说明，提高视频质量<br/>
                    4. 请确保内容符合平台技术标准
                </div>
            `
        };
        return rejectReasons[docId] || '暂无拒绝原因信息';
    }

    function generateDocumentDetailHTML(docData) {
        const statusColor = {
            '已通过': '#28a745',
            '审核中': '#ffc107',
            '未通过': '#dc3545',
            '无需审核': '#6c757d'
        };

        const visibilityIcon = {
            '公开': 'fas fa-globe',
            '私有': 'fas fa-lock'
        };

        return `
            <div class="document-detail">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div>
                        <div class="detail-item">
                            <div class="detail-label">文档ID</div>
                            <div class="detail-value">${docData.id}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">文档分类</div>
                            <div class="detail-value">${docData.category}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">文件类型</div>
                            <div class="detail-value">${docData.type}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">文件大小</div>
                            <div class="detail-value">${docData.size}</div>
                        </div>
                    </div>
                    <div>
                        <div class="detail-item">
                            <div class="detail-label">上传时间</div>
                            <div class="detail-value">${docData.uploadTime}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">上传者</div>
                            <div class="detail-value">${docData.author}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">可见性</div>
                            <div class="detail-value">
                                <i class="${visibilityIcon[docData.visibility]}" style="margin-right: 5px;"></i>
                                ${docData.visibility}
                            </div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">审核状态</div>
                            <div class="detail-value" style="color: ${statusColor[docData.status] || '#6c757d'};">
                                ${docData.status}
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="detail-item">
                    <div class="detail-label">文档描述</div>
                    <div class="detail-value">${docData.description}</div>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 20px;">
                    <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                        <div style="font-size: 1.5rem; font-weight: bold; color: #667eea;">${docData.views}</div>
                        <div style="font-size: 0.85rem; color: #6c757d;">浏览次数</div>
                    </div>
                    <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                        <div style="font-size: 1.5rem; font-weight: bold; color: #28a745;">${docData.downloads}</div>
                        <div style="font-size: 0.85rem; color: #6c757d;">下载次数</div>
                    </div>
                    <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                        <div style="font-size: 1.5rem; font-weight: bold; color: #ffc107;">${docData.points}</div>
                        <div style="font-size: 0.85rem; color: #6c757d;">获得积分</div>
                    </div>
                </div>
            </div>
        `;
    }

    // 侧边栏折叠/展开
    function toggleSidebar() {
        const sidebar = document.getElementById('sidebar');
        sidebar.classList.toggle('collapsed');
        // 切换折叠按钮方向
        const icon = sidebar.querySelector('.sidebar-toggle i');
        if (sidebar.classList.contains('collapsed')) {
            icon.classList.remove('fa-angle-double-left');
            icon.classList.add('fa-angle-double-right');
        } else {
            icon.classList.remove('fa-angle-double-right');
            icon.classList.add('fa-angle-double-left');
        }
    }
    // 一级菜单展开/收起二级菜单
    function toggleMenu(link) {
        const parent = link.parentElement;
        const submenu = parent.querySelector('.submenu');
        const arrow = link.querySelector('.submenu-arrow');
        if (submenu) {
            if (submenu.style.display === 'block') {
                submenu.style.display = 'none';
                arrow.style.transform = 'rotate(0deg)';
            } else {
                // 只展开一个，收起其他
                document.querySelectorAll('.menu-item.has-children .submenu').forEach(s => s.style.display = 'none');
                document.querySelectorAll('.submenu-arrow').forEach(a => a.style.transform = 'rotate(0deg)');
                submenu.style.display = 'block';
                arrow.style.transform = 'rotate(180deg)';
            }
        }
    }
    // 初始化：默认展开第一个
    document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.menu-item.has-children .submenu').forEach((s, i) => {
            s.style.display = i === 0 ? 'block' : 'none';
        });
        document.querySelectorAll('.submenu-arrow').forEach((a, i) => {
            a.style.transform = i === 0 ? 'rotate(180deg)' : 'rotate(0deg)';
        });
    });

    // 菜单项跳转映射
    const menuMap = {
        '工作台': 'dashboard',
        '店铺管理': 'shop',
        '教学管理': 'teaching',
        '维修工单': 'repair-order',
        '安装工单': 'install-order',
        '调试工单': 'debug-order',
        '发起协助': 'assist-launch',
        '协助记录': 'assist-record',
        '协助工单': 'assist-order',
        '知识库': 'knowledge',
        '实名认证': 'auth-real',
        '维修认证': 'auth-repair',
        '专家认证': 'auth-expert',
        '商家认证': 'auth-shop',
        '我的企业': 'company-manage',
        '个人档案': 'profile',
        '密码重置': 'password',
        '安全设置': 'security'
    };
    function showPage(pageKey) {
        document.querySelectorAll('.main-content').forEach(div => div.style.display = 'none');
        const page = document.getElementById('page-' + pageKey);
        if(page) {
            page.style.display = 'block';
            
            // 如果是企业管理页面，初始化企业数据
            if (pageKey === 'company-manage') {
                setTimeout(() => {
                    initCompanyManagement();
                }, 100);
            }
        }
    }
    function activeMenuByText(text) {
        document.querySelectorAll('.menu-item').forEach(i => i.classList.remove('active'));
        document.querySelectorAll('.menu-item').forEach(item => {
            if(item.innerText.trim() === text) item.classList.add('active');
        });
    }
    window.addEventListener('DOMContentLoaded', function() {
        // 默认显示首页
        showPage('dashboard');
        document.querySelectorAll('.menu-item').forEach(item => {
            const text = item.innerText.trim();
            if(menuMap[text]) {
                item.style.cursor = 'pointer';
                item.onclick = function() {
                    document.querySelectorAll('.menu-item').forEach(i => i.classList.remove('active'));
                    item.classList.add('active');
                    showPage(menuMap[text]);
                };
            }
        });
        // 右上角下拉菜单跳转
        document.querySelectorAll('.dropdown-item').forEach(item => {
            item.onclick = function(e) {
                e.preventDefault();
                const text = item.innerText.trim();
                if(menuMap[text]) {
                    showPage(menuMap[text]);
                    activeMenuByText(text);
                }
            };
        });
    });

    // 提现弹窗功能
    function showWithdrawModal() {
        document.getElementById('withdrawModal').style.display = 'flex';
    }

    function hideWithdrawModal() {
        document.getElementById('withdrawModal').style.display = 'none';
    }

    function setWithdrawAmount(amount) {
        document.getElementById('withdrawAmount').value = amount;
    }

    // 切换文档可见性
    function toggleVisibility(button, currentStatus) {
        const row = button.closest('tr');
        const visibilityCell = row.cells[2]; // 可见性列
        const auditCell = row.cells[3]; // 审核状态列
        const pointsCell = row.cells[7]; // 积分列
        const viewsCell = row.cells[6]; // 浏览/下载列
        
        if (currentStatus === 'public') {
            // 从公开改为私有
            visibilityCell.innerHTML = '<span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #f8d7da; color: #721c24; white-space: nowrap;"><i class="fas fa-lock" style="margin-right: 3px;"></i>私有</span>';
            auditCell.innerHTML = '<span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #e9ecef; color: #6c757d; white-space: nowrap;"><i class="fas fa-minus" style="margin-right: 3px;"></i>无需审核</span>';
            button.textContent = '设公开';
            button.style.color = '#17a2b8';
            button.style.borderColor = '#17a2b8';
            button.onclick = function() { toggleVisibility(this, 'private'); };
            
            // 私有文档不显示浏览下载数据和积分
            viewsCell.innerHTML = '<div style="font-size: 0.8rem; color: #6c757d;"><div>- / -</div></div>';
            pointsCell.innerHTML = '<div style="font-size: 0.85rem; color: #6c757d; font-weight: 500;"><i class="fas fa-coins"></i> 0</div>';
        } else {
            // 从私有改为公开，提交审核
            visibilityCell.innerHTML = '<span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #d4edda; color: #155724; white-space: nowrap;"><i class="fas fa-globe" style="margin-right: 3px;"></i>公开</span>';
            auditCell.innerHTML = '<span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #fff3cd; color: #856404; white-space: nowrap;"><i class="fas fa-clock" style="margin-right: 3px;"></i>审核中</span>';
            button.textContent = '设私有';
            button.style.color = '#28a745';
            button.style.borderColor = '#28a745';
            button.onclick = function() { toggleVisibility(this, 'public'); };
            
            // 审核中的文档暂时不显示数据和积分
            viewsCell.innerHTML = '<div style="font-size: 0.8rem; color: #6c757d;"><div>- / -</div></div>';
            pointsCell.innerHTML = '<div style="font-size: 0.85rem; color: #6c757d; font-weight: 500;"><i class="fas fa-coins"></i> 0</div>';
            
            // 显示提交审核成功提示
            alert('文档已提交审核，审核通过后将对其他用户可见并开始获得积分奖励！');
        }
    }

    // 显示审核拒绝原因弹窗
    function showRejectReason() {
        document.getElementById('rejectReasonModal').style.display = 'flex';
    }

    function hideRejectReasonModal() {
        document.getElementById('rejectReasonModal').style.display = 'none';
    }

    // 认证相关功能函数
    
    // 续签认证
    function renewCertification() {
        alert('认证续签申请已提交，我们将在1-2个工作日内为您处理续签事宜。续签成功后有效期将自动延长！');
    }
    
    // 查看认证证书
    function viewCertificate(type) {
        const certTypes = {
            'real': '实名认证证书',
            'repair': '维修技师认证证书', 
            'expert': '专家认证证书',
            'shop': '个人商家认证证书'
        };
        
        // 创建证书预览弹窗
        const modal = document.createElement('div');
        modal.style.cssText = `
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.5); display: flex; justify-content: center; 
            align-items: center; z-index: 10000;
        `;
        
        const content = document.createElement('div');
        content.style.cssText = `
            background: white; border-radius: 12px; padding: 30px; max-width: 500px; 
            width: 90%; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        `;
        
        content.innerHTML = `
            <div style="margin-bottom: 20px;">
                <i class="fas fa-certificate" style="font-size: 3rem; color: #667eea; margin-bottom: 15px;"></i>
                <h3 style="color: #333; margin-bottom: 10px;">${certTypes[type]}</h3>
                <p style="color: #6c757d; font-size: 0.9rem;">证书编号：KG-${type.toUpperCase()}-${Math.random().toString(36).substr(2, 8).toUpperCase()}</p>
            </div>
            <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; margin-bottom: 20px; border-left: 4px solid #667eea;">
                <p style="color: #333; font-size: 0.9rem; margin-bottom: 5px;"><strong>认证持有人：</strong>张三</p>
                <p style="color: #333; font-size: 0.9rem; margin-bottom: 5px;"><strong>发证日期：</strong>${new Date().toLocaleDateString()}</p>
                <p style="color: #333; font-size: 0.9rem;"><strong>有效期限：</strong>长期有效</p>
            </div>
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button onclick="downloadCertificate('${type}')" style="padding: 10px 20px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer;">
                    <i class="fas fa-download"></i> 下载证书
                </button>
                <button onclick="this.closest('[style*=fixed]').remove()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 6px; cursor: pointer;">
                    关闭
                </button>
            </div>
        `;
        
        modal.appendChild(content);
        document.body.appendChild(modal);
        
        // 点击背景关闭
        modal.addEventListener('click', function(e) {
            if (e.target === modal) {
                modal.remove();
            }
        });
    }
    
    // 下载认证证书
    function downloadCertificate(type) {
        const certTypes = {
            'real': '实名认证证书',
            'repair': '维修技师认证证书', 
            'expert': '专家认证证书',
            'shop': '个人商家认证证书'
        };
        
        // 模拟下载
        const link = document.createElement('a');
        link.href = '#'; // 实际应用中这里应该是证书文件的URL
        link.download = `${certTypes[type]}_张三_${new Date().toISOString().split('T')[0]}.pdf`;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        
        alert(`${certTypes[type]}下载成功！`);
    }
    
    // 查看拒绝原因
    function viewRejectReason(certType, reason) {
        // 创建拒绝原因弹窗
        const modal = document.createElement('div');
        modal.style.cssText = `
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.5); display: flex; justify-content: center; 
            align-items: center; z-index: 10000;
        `;
        
        const content = document.createElement('div');
        content.style.cssText = `
            background: white; border-radius: 12px; padding: 30px; max-width: 600px; 
            width: 90%; box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        `;
        
        content.innerHTML = `
            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px;">
                <div style="width: 50px; height: 50px; background: #dc3545; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white;">
                    <i class="fas fa-times-circle" style="font-size: 1.5rem;"></i>
                </div>
                <div>
                    <h3 style="color: #333; margin-bottom: 5px;">${certType}审核未通过</h3>
                    <p style="color: #6c757d; font-size: 0.9rem;">请根据以下反馈意见进行修改后重新提交</p>
                </div>
            </div>
            <div style="background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <h4 style="color: #721c24; margin-bottom: 10px; font-size: 1rem;">
                    <i class="fas fa-exclamation-triangle"></i> 拒绝原因
                </h4>
                <p style="color: #721c24; line-height: 1.6; font-size: 0.95rem;">${reason}</p>
            </div>
            <div style="background: #d1ecf1; border: 1px solid #bee5eb; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                <h5 style="color: #0c5460; margin-bottom: 8px; font-size: 0.9rem;">
                    <i class="fas fa-lightbulb"></i> 修改建议
                </h5>
                <ul style="color: #0c5460; font-size: 0.85rem; line-height: 1.5; margin: 0; padding-left: 20px;">
                    <li>请确保上传的图片或文档清晰可见，格式正确</li>
                    <li>填写信息要真实完整，专业描述要详细具体</li>
                    <li>相关证书或证明材料要在有效期内</li>
                    <li>如有疑问可联系客服寻求帮助</li>
                </ul>
            </div>
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button onclick="this.closest('[style*=fixed]').remove(); document.body.style.overflow = '';" style="padding: 10px 20px; background: #dc3545; color: white; border: none; border-radius: 6px; cursor: pointer;">
                    我知道了
                </button>
                <button onclick="this.closest('[style*=fixed]').remove(); document.body.style.overflow = ''; location.reload();" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 6px; cursor: pointer;">
                    重新申请
                </button>
            </div>
        `;
        
        modal.appendChild(content);
        document.body.appendChild(modal);
        
        // 点击背景关闭
        modal.addEventListener('click', function(e) {
            if (e.target === modal) {
                modal.remove();
            }
        });
    }

    // 点击弹窗背景关闭弹窗
    document.addEventListener('click', function(e) {
        const withdrawModal = document.getElementById('withdrawModal');
        const rejectModal = document.getElementById('rejectReasonModal');
        
        if (e.target === withdrawModal) {
            hideWithdrawModal();
        }
        if (e.target === rejectModal) {
            hideRejectReasonModal();
        }
    });

    // 企业管理相关功能
    function goToEnterprise() {
        // 跳转到企业空间主页
        window.location.href = '../enterprise/index.html';
    }

    function searchCompany() {
        const keyword = document.getElementById('companySearchInput').value.trim();
        if (!keyword) {
            alert('请输入搜索关键词');
            return;
        }
        alert('正在搜索企业：' + keyword);
        // 这里可以添加实际的搜索逻辑
    }

    function quickSearch(keyword) {
        document.getElementById('companySearchInput').value = keyword;
        searchCompany();
    }

    function applyJoinCompany(companyId, event) {
        event.stopPropagation();
        if (confirm('确定要申请加入这家企业吗？')) {
            alert('申请已提交，企业管理员会在3-5个工作日内处理您的申请。');
        }
    }

    function viewCompanyDetail(companyId) {
        alert('查看企业详情：' + companyId);
    }

         // 安装工单相关功能
     function showInstallAction(action, orderId) {
         // 创建全屏弹窗，确保覆盖整个视口
         const modal = document.createElement('div');
         modal.className = 'global-modal';
         modal.id = 'tempInstallActionModal';
         modal.style.cssText = `
             position: fixed !important; 
             top: 0 !important; 
             left: 0 !important; 
             width: 100vw !important; 
             height: 100vh !important;
             background-color: rgba(0,0,0,0.6) !important; 
             display: flex !important; 
             justify-content: center !important; 
             align-items: center !important;
             z-index: 999999 !important;
             margin: 0 !important;
             padding: 0 !important;
         `;
        
        let title, content;
        // 根据工单ID获取相应的数据
        const orderData = {
            'IO20240601001': {
                customer: '北京科技大厦',
                contact: '李经理',
                phone: '138-0001-0001', 
                equipment: '中央空调系统',
                model: 'VRV-X',
                address: '北京市朝阳区CBD核心区',
                urgent: '紧急',
                createTime: '2024-06-01 10:00'
            },
            'IO20240531005': {
                customer: '上海工业园区',
                contact: '王总',
                phone: '139-0002-0002',
                equipment: '新风系统', 
                model: 'ERV-500',
                address: '上海市浦东新区张江园区',
                urgent: '高',
                createTime: '2024-05-31 14:30'
            },
            'IO20240530008': {
                customer: '广州制造基地',
                contact: '张工',
                phone: '136-0003-0003',
                equipment: '冷库制冷设备',
                model: 'CR-2000', 
                address: '广州市天河区科技园',
                urgent: '普通',
                createTime: '2024-05-30 09:15'
            }
        };
        
        const order = orderData[orderId] || orderData['IO20240601001'];
        
        switch(action) {
            case 'accept':
                title = '接单确认';
                content = `
                    <div style="margin-bottom: 20px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #667eea;">
                                <div style="font-size: 0.85rem; color: #6c757d; margin-bottom: 5px; font-weight: 500;">工单编号</div>
                                <div style="font-size: 0.95rem; color: #333; font-weight: 600;">${orderId}</div>
                            </div>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #667eea;">
                                <div style="font-size: 0.85rem; color: #6c757d; margin-bottom: 5px; font-weight: 500;">客户名称</div>
                                <div style="font-size: 0.95rem; color: #333; font-weight: 600;">${order.customer}</div>
                            </div>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #667eea;">
                                <div style="font-size: 0.85rem; color: #6c757d; margin-bottom: 5px; font-weight: 500;">设备类型</div>
                                <div style="font-size: 0.95rem; color: #333; font-weight: 600;">${order.equipment}</div>
                            </div>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #667eea;">
                                <div style="font-size: 0.85rem; color: #6c757d; margin-bottom: 5px; font-weight: 500;">安装地址</div>
                                <div style="font-size: 0.95rem; color: #333; font-weight: 600;">${order.address}</div>
                            </div>
                        </div>
                    </div>
                    
                    <form id="acceptInstallForm">
                        <div style="display: flex; gap: 20px; margin-bottom: 20px;">
                            <div style="flex: 1;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #333;">预计开始时间</label>
                                <input type="datetime-local" name="startTime" required style="width: 100%; padding: 10px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                            </div>
                            <div style="flex: 1;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #333;">预计完成时间</label>
                                <input type="datetime-local" name="endTime" required style="width: 100%; padding: 10px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 20px; margin-bottom: 20px;">
                            <div style="flex: 1;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #333;">安装人员</label>
                                <select name="installer" required style="width: 100%; padding: 10px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                                    <option value="">请选择安装人员</option>
                                    <option value="tech001">张师傅 (高级技师)</option>
                                    <option value="tech002">李师傅 (中级技师)</option>
                                    <option value="tech003">王师傅 (高级技师)</option>
                                    <option value="team001">专业安装团队A</option>
                                </select>
                            </div>
                            <div style="flex: 1;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #333;">联系电话</label>
                                <input type="tel" name="contactPhone" placeholder="请输入联系电话" required style="width: 100%; padding: 10px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #333;">特殊要求说明</label>
                            <textarea name="requirements" rows="3" placeholder="请填写安装过程中的特殊要求或注意事项..." style="width: 100%; padding: 10px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;"></textarea>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #333;">所需工具清单</label>
                            <textarea name="tools" rows="2" placeholder="请列出安装所需的专用工具和设备..." style="width: 100%; padding: 10px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;"></textarea>
                        </div>
                        
                        <div style="display: flex; justify-content: flex-end; margin-top: 25px;">
                            <button type="button" onclick="closeInstallModal()" style="background: #6c757d; color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-size: 0.9rem; font-weight: 500; margin-right: 10px;">取消</button>
                            <button type="submit" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-size: 0.9rem; font-weight: 500;">确认接单</button>
                        </div>
                    </form>
                `;
                break;
                
            case 'progress':
                title = '安装进度更新';
                content = `
                    <div style="margin-bottom: 20px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #667eea;">
                                <div style="font-size: 0.85rem; color: #6c757d; margin-bottom: 5px; font-weight: 500;">工单编号</div>
                                <div style="font-size: 0.95rem; color: #333; font-weight: 600;">${orderId}</div>
                            </div>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #667eea;">
                                <div style="font-size: 0.85rem; color: #6c757d; margin-bottom: 5px; font-weight: 500;">当前状态</div>
                                <div style="font-size: 0.95rem; color: #333; font-weight: 600;"><span style="padding: 6px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: 500; background: #d1ecf1; color: #0c5460;">安装中</span></div>
                            </div>
                        </div>
                    </div>
                    
                    <form id="progressInstallForm">
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #333;">进度更新</label>
                            <select name="progressStatus" required style="width: 100%; padding: 10px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                                <option value="">请选择当前进度</option>
                                <option value="material_check">材料检查</option>
                                <option value="site_survey">现场勘查</option>
                                <option value="equipment_install">设备安装</option>
                                <option value="pipeline_connect">管道连接</option>
                                <option value="system_debug">系统调试</option>
                                <option value="final_test">最终测试</option>
                                <option value="completed">安装完成</option>
                            </select>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #333;">进度说明</label>
                            <textarea name="progressNote" rows="3" placeholder="请详细描述当前安装进度和完成情况..." required style="width: 100%; padding: 10px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;"></textarea>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #333;">现场照片上传</label>
                            <div onclick="uploadInstallPhoto(this)" style="border: 2px dashed #e0e3ea; border-radius: 8px; padding: 30px; text-align: center; cursor: pointer; transition: all 0.3s; background: #f8f9fa;" onmouseover="this.style.borderColor='#667eea'; this.style.background='#f0f4ff'" onmouseout="this.style.borderColor='#e0e3ea'; this.style.background='#f8f9fa'">
                                <i class="fas fa-camera" style="font-size: 2rem; color: #667eea; margin-bottom: 10px;"></i>
                                <div style="color: #667eea; font-weight: 500; margin-bottom: 5px;">点击上传现场照片</div>
                                <div style="color: #6c757d; font-size: 0.85rem;">支持 JPG、PNG 格式，最大 5MB</div>
                            </div>
                        </div>
                        
                        <div style="display: flex; justify-content: flex-end; margin-top: 25px;">
                            <button type="button" onclick="closeInstallModal()" style="background: #6c757d; color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-size: 0.9rem; font-weight: 500; margin-right: 10px;">取消</button>
                            <button type="submit" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-size: 0.9rem; font-weight: 500;">更新进度</button>
                        </div>
                    </form>
                `;
                break;
                
            case 'evaluate':
                title = '安装服务评价';
                content = `
                    <div style="margin-bottom: 20px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #667eea;">
                                <div style="font-size: 0.85rem; color: #6c757d; margin-bottom: 5px; font-weight: 500;">工单编号</div>
                                <div style="font-size: 0.95rem; color: #333; font-weight: 600;">${orderId}</div>
                            </div>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #667eea;">
                                <div style="font-size: 0.85rem; color: #6c757d; margin-bottom: 5px; font-weight: 500;">完成时间</div>
                                <div style="font-size: 0.95rem; color: #333; font-weight: 600;">2024-05-30 16:30</div>
                            </div>
                        </div>
                    </div>
                    
                    <form id="evaluateInstallForm">
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #333;">服务质量评分</label>
                            <div style="display: flex; gap: 5px; margin: 10px 0;">
                                <span class="star" onclick="setInstallRating('service', 1)" style="color: #ddd; font-size: 1.5rem; cursor: pointer;">★</span>
                                <span class="star" onclick="setInstallRating('service', 2)" style="color: #ddd; font-size: 1.5rem; cursor: pointer;">★</span>
                                <span class="star" onclick="setInstallRating('service', 3)" style="color: #ddd; font-size: 1.5rem; cursor: pointer;">★</span>
                                <span class="star" onclick="setInstallRating('service', 4)" style="color: #ddd; font-size: 1.5rem; cursor: pointer;">★</span>
                                <span class="star" onclick="setInstallRating('service', 5)" style="color: #ddd; font-size: 1.5rem; cursor: pointer;">★</span>
                                <span style="margin-left: 10px; color: #6c757d; font-size: 0.9rem;">请点击星星评分</span>
                            </div>
                            <input type="hidden" name="serviceRating" id="serviceRating">
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #333;">安装效果评价</label>
                            <textarea name="effectEvaluation" rows="3" placeholder="请评价设备安装效果、运行状况等..." style="width: 100%; padding: 10px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;"></textarea>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #333;">服务建议</label>
                            <textarea name="suggestions" rows="3" placeholder="请提出改进建议或其他意见..." style="width: 100%; padding: 10px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;"></textarea>
                        </div>
                        
                        <div style="display: flex; justify-content: flex-end; margin-top: 25px;">
                            <button type="button" onclick="closeInstallModal()" style="background: #6c757d; color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-size: 0.9rem; font-weight: 500; margin-right: 10px;">取消</button>
                            <button type="submit" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-size: 0.9rem; font-weight: 500;">提交评价</button>
                        </div>
                    </form>
                `;
                break;
        }
        
                 modal.innerHTML = `
             <div style="
                 background-color: #fefefe !important; 
                 border-radius: 12px !important; 
                 width: 90% !important; 
                 max-width: 600px !important; 
                 max-height: 90vh !important; 
                 overflow-y: auto !important; 
                 box-shadow: 0 8px 32px rgba(0,0,0,0.2) !important;
                 position: relative !important;
                 margin: 0 !important;
             ">
                 <div style="padding: 20px 25px; border-bottom: 1px solid #e9ecef; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 12px 12px 0 0;">
                     <h2 style="margin: 0; font-size: 1.3rem; font-weight: 600;">${title}</h2>
                     <span onclick="closeInstallModal()" style="color: white; font-size: 28px; font-weight: bold; cursor: pointer; width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: background 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.background='transparent'">&times;</span>
                 </div>
                 <div style="padding: 25px;">
                     ${content}
                 </div>
             </div>
         `;
        
                 document.body.appendChild(modal);
         document.body.style.overflow = 'hidden'; // 防止背景滚动
         
         // 点击背景关闭弹窗
         modal.addEventListener('click', function(e) {
             if (e.target === modal) {
                 closeInstallModal();
             }
         });
         
         // 绑定表单提交事件
         const form = modal.querySelector('form');
         if (form) {
             form.addEventListener('submit', function(e) {
                 e.preventDefault();
                 handleInstallSubmit(action, orderId);
             });
         }
    }

    function showInstallDetail(orderId) {
        // 模拟获取工单详情数据
        const orderData = {
            'IO20240601001': {
                id: 'IO20240601001',
                status: '待安装',
                customer: { name: '北京科技大厦', contact: '李经理', phone: '138-0001-0001', address: '北京市朝阳区CBD核心区A座18层' },
                equipment: { type: '中央空调系统', model: 'VRV-X', brand: '大金' },
                createTime: '2024-06-01 10:00'
            },
            'IO20240531005': {
                id: 'IO20240531005',
                status: '安装中',
                customer: { name: '上海工业园区', contact: '王总', phone: '139-0002-0002', address: '上海市浦东新区张江园区B区' },
                equipment: { type: '新风系统', model: 'ERV-500', brand: '松下' },
                createTime: '2024-05-31 14:30'
            },
            'IO20240530008': {
                id: 'IO20240530008',
                status: '已完成',
                customer: { name: '广州制造基地', contact: '张工', phone: '136-0003-0003', address: '广州市天河区科技园C栋' },
                equipment: { type: '冷库制冷设备', model: 'CR-2000', brand: '美的' },
                createTime: '2024-05-30 09:15'
            }
        };
        
        const order = orderData[orderId] || orderData['IO20240601001'];
        
                 const modal = document.createElement('div');
         modal.className = 'global-modal';
         modal.id = 'tempInstallDetailModal';
         modal.style.cssText = `
             position: fixed !important; 
             top: 0 !important; 
             left: 0 !important; 
             width: 100vw !important; 
             height: 100vh !important;
             background-color: rgba(0,0,0,0.6) !important; 
             display: flex !important; 
             justify-content: center !important; 
             align-items: center !important;
             z-index: 999999 !important;
             margin: 0 !important;
             padding: 0 !important;
         `;
        
                 modal.innerHTML = `
             <div style="
                 background-color: #fefefe !important; 
                 border-radius: 12px !important; 
                 width: 90% !important; 
                 max-width: 800px !important; 
                 max-height: 90vh !important; 
                 overflow-y: auto !important; 
                 box-shadow: 0 8px 32px rgba(0,0,0,0.2) !important;
                 position: relative !important;
                 margin: 0 !important;
             ">
                 <div style="padding: 20px 25px; border-bottom: 1px solid #e9ecef; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 12px 12px 0 0;">
                     <h2 style="margin: 0; font-size: 1.3rem; font-weight: 600;">工单详情</h2>
                     <span onclick="closeInstallModal()" style="color: white; font-size: 28px; font-weight: bold; cursor: pointer; width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: background 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.background='transparent'">&times;</span>
                 </div>
                 <div style="padding: 25px;">
                     <div style="margin-bottom: 25px;">
                         <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                             <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #667eea;">
                                 <div style="font-size: 0.85rem; color: #6c757d; margin-bottom: 5px; font-weight: 500;">工单编号</div>
                                 <div style="font-size: 0.95rem; color: #333; font-weight: 600;">${order.id}</div>
                             </div>
                             <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #667eea;">
                                 <div style="font-size: 0.85rem; color: #6c757d; margin-bottom: 5px; font-weight: 500;">工单状态</div>
                                 <div style="font-size: 0.95rem; color: #333; font-weight: 600;">${order.status}</div>
                             </div>
                             <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #667eea;">
                                 <div style="font-size: 0.85rem; color: #6c757d; margin-bottom: 5px; font-weight: 500;">创建时间</div>
                                 <div style="font-size: 0.95rem; color: #333; font-weight: 600;">${order.createTime}</div>
                             </div>
                         </div>
                     </div>
                     
                     <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-bottom: 25px;">
                         <div>
                             <h4 style="color: #333; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                                 <i class="fas fa-user" style="color: #667eea;"></i>
                                 客户信息
                             </h4>
                             <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                                 <div style="margin-bottom: 10px;">
                                     <strong>客户名称：</strong>${order.customer.name}
                                 </div>
                                 <div style="margin-bottom: 10px;">
                                     <strong>联系人：</strong>${order.customer.contact}
                                 </div>
                                 <div style="margin-bottom: 10px;">
                                     <strong>联系电话：</strong>${order.customer.phone}
                                 </div>
                                 <div>
                                     <strong>安装地址：</strong>${order.customer.address}
                                 </div>
                             </div>
                         </div>
                         
                         <div>
                             <h4 style="color: #333; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                                 <i class="fas fa-cog" style="color: #667eea;"></i>
                                 设备信息
                             </h4>
                             <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                                 <div style="margin-bottom: 10px;">
                                     <strong>设备类型：</strong>${order.equipment.type}
                                 </div>
                                 <div style="margin-bottom: 10px;">
                                     <strong>设备型号：</strong>${order.equipment.model}
                                 </div>
                                 <div>
                                     <strong>设备品牌：</strong>${order.equipment.brand}
                                 </div>
                             </div>
                         </div>
                     </div>
                     
                     <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 25px;">
                         <button onclick="closeInstallModal()" style="background: #6c757d; color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-size: 0.9rem; font-weight: 500;">关闭</button>
                         <button onclick="exportInstallOrder('${order.id}')" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-size: 0.9rem; font-weight: 500;">
                             <i class="fas fa-download"></i> 导出详情
                         </button>
                     </div>
                 </div>
             </div>
         `;
                 
         document.body.appendChild(modal);
         document.body.style.overflow = 'hidden'; // 防止背景滚动
         
         // 点击背景关闭弹窗
         modal.addEventListener('click', function(e) {
             if (e.target === modal) {
                 closeInstallModal();
             }
         });
     }

    function setInstallRating(type, rating) {
        const stars = event.target.parentElement.querySelectorAll('.star');
        stars.forEach((star, index) => {
            if (index < rating) {
                star.style.color = '#ffc107';
            } else {
                star.style.color = '#ddd';
            }
        });
        document.getElementById(type + 'Rating').value = rating;
    }

    function uploadInstallPhoto(element) {
        const fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.accept = '.jpg,.jpeg,.png';
        fileInput.multiple = true;
        fileInput.onchange = function(e) {
            const files = Array.from(e.target.files);
            if (files.length > 0) {
                // 模拟上传成功
                element.innerHTML = `
                    <i class="fas fa-check-circle" style="font-size: 2rem; color: #28a745; margin-bottom: 10px;"></i>
                    <div style="color: #28a745; font-weight: 500; margin-bottom: 5px;">已上传 ${files.length} 张照片</div>
                    <div style="color: #6c757d; font-size: 0.85rem;">${files.map(f => f.name).join(', ')}</div>
                    <div style="margin-top: 10px;">
                        <button type="button" onclick="uploadInstallPhoto(this.parentElement.parentElement)" style="background: #667eea; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.8rem;">重新上传</button>
                    </div>
                `;
                element.style.borderColor = '#28a745';
                element.style.backgroundColor = '#f8fff9';
            }
        };
        fileInput.click();
    }

    function exportInstallOrder(orderId) {
        // 模拟导出工单详情
        const exportBtn = event.target;
        const originalText = exportBtn.innerHTML;
        exportBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 导出中...';
        exportBtn.disabled = true;
        
        setTimeout(() => {
            // 创建虚拟下载链接
            const link = document.createElement('a');
            link.href = '#'; // 实际应用中这里应该是文件的URL
            link.download = `安装工单详情_${orderId}_${new Date().toISOString().split('T')[0]}.pdf`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            exportBtn.innerHTML = originalText;
            exportBtn.disabled = false;
            
            // 显示成功提示
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed; top: 20px; right: 20px; z-index: 9999999;
                background: #28a745; color: white; padding: 15px 20px;
                border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                font-size: 0.9rem; font-weight: 500;
            `;
            toast.innerHTML = `<i class="fas fa-check-circle"></i> 工单详情已导出成功！`;
            document.body.appendChild(toast);
            
            setTimeout(() => toast.remove(), 3000);
        }, 1000);
    }

    function closeInstallModal() {
        const modals = document.querySelectorAll('#tempInstallActionModal, #tempInstallDetailModal');
        modals.forEach(modal => {
            if (modal) {
                modal.remove();
            }
        });
        document.body.style.overflow = ''; // 恢复背景滚动
    }

    function handleInstallSubmit(action, orderId) {
        const form = document.querySelector('#tempInstallActionModal form');
        if (!form.checkValidity()) {
            form.reportValidity();
            return;
        }
        
        // 模拟提交延迟
        const submitBtn = form.querySelector('button[type="submit"]');
        const originalText = submitBtn.innerHTML;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 提交中...';
        submitBtn.disabled = true;
        
        setTimeout(() => {
            let message = '';
            let details = '';
            
            switch(action) {
                case 'accept':
                    const installer = form.installer.value;
                    const startTime = form.startTime.value;
                    message = `✅ 工单 ${orderId} 接单成功！`;
                    details = `安装人员：${form.querySelector('select[name="installer"] option:checked').text}\n预计开始时间：${startTime}\n客户将收到短信通知`;
                    break;
                case 'progress':
                    const progressStatus = form.progressStatus.value;
                    message = `✅ 工单 ${orderId} 进度更新成功！`;
                    details = `当前进度：${form.querySelector('select[name="progressStatus"] option:checked').text}\n进度信息已同步给客户`;
                    break;
                case 'evaluate':
                    const rating = document.getElementById('serviceRating').value;
                    message = `✅ 工单 ${orderId} 评价提交成功！`;
                    details = `服务评分：${rating}星\n感谢您的宝贵反馈`;
                    break;
            }
            
            // 创建成功提示弹窗
            const successModal = document.createElement('div');
            successModal.style.cssText = `
                position: fixed !important; top: 0 !important; left: 0 !important;
                width: 100vw !important; height: 100vh !important;
                background-color: rgba(0,0,0,0.6) !important; display: flex !important;
                justify-content: center !important; align-items: center !important;
                z-index: 9999999 !important;
            `;
            successModal.innerHTML = `
                <div style="background: white; border-radius: 12px; padding: 30px; max-width: 400px; width: 90%; text-align: center; box-shadow: 0 8px 32px rgba(0,0,0,0.2);">
                    <div style="color: #28a745; font-size: 3rem; margin-bottom: 15px;">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h3 style="color: #333; margin-bottom: 15px; font-size: 1.2rem;">${message}</h3>
                    <p style="color: #6c757d; line-height: 1.6; margin-bottom: 20px; white-space: pre-line;">${details}</p>
                    <button onclick="this.closest('div[style*=\"fixed\"]').remove()" style="background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: 500;">
                        确定
                    </button>
                </div>
            `;
            document.body.appendChild(successModal);
            
            closeInstallModal();
            
            // 模拟更新页面数据
            if (action === 'accept') {
                const row = document.querySelector(`tr:has(span:contains("${orderId}"))`);
                if (row) {
                    const statusCell = row.querySelector('td:nth-child(5) span');
                    if (statusCell) {
                        statusCell.textContent = '安装中';
                        statusCell.style.background = '#d1ecf1';
                        statusCell.style.color = '#0c5460';
                    }
                }
            }
        }, 1500);
    }

    function cancelApplication(appId) {
        if (confirm('确定要撤回这个申请吗？')) {
            alert('申请已撤回');
            // 这里可以添加实际的撤回逻辑
        }
    }

    // 企业创建状态管理
    let companyApplicationStatus = 'draft'; // draft: 草稿, pending: 待审核, approved: 已通过, rejected: 已拒绝

    // 多企业管理数据
    let userCompanies = [
        {
            id: 'comp001',
            name: '北京工业设备有限公司',
            type: 'limited',
            status: 'approved',
            role: 'owner',
            joinDate: '2024-01-15',
            memberCount: 25,
            description: '专业从事工业设备维修和保养服务',
            address: '北京市朝阳区工业园区88号',
            phone: '010-88888888',
            email: 'info@bjgy.com'
        },
        {
            id: 'comp002',
            name: '上海制造技术服务中心',
            type: 'limited',
            status: 'approved',
            role: 'owner',
            joinDate: '2024-03-20',
            memberCount: 15,
            description: '提供制造业技术支持和设备维护服务',
            address: '上海市浦东新区张江高科技园区',
            phone: '021-66666666',
            email: 'service@shzz.com'
        },
        {
            id: 'comp003',
            name: '深圳智能设备科技有限公司',
            type: 'limited',
            status: 'approved',
            role: 'member',
            joinDate: '2024-05-10',
            memberCount: 50,
            position: '高级工程师',
            description: '智能设备研发、生产和维护一体化服务',
            address: '深圳市南山区科技园南区',
            phone: '0755-88888888',
            email: 'tech@szzn.com'
        },
        {
            id: 'comp004',
            name: '广州机械维修服务公司',
            type: 'limited',
            status: 'pending',
            role: 'pending',
            joinDate: '2024-06-01',
            memberCount: 8,
            description: '专业机械设备维修和技术咨询服务',
            address: '广州市天河区工业大道',
            phone: '020-77777777',
            email: 'repair@gzjx.com'
        }
    ];

    // 企业管理功能
    function showCreateNewCompanyModal() {
        openModal('createNewCompanyModal');
    }

    function showJoinCompanyModal() {
        openModal('joinCompanyModal');
    }

    function toggleJoinMethod() {
        const method = document.getElementById('joinMethod').value;
        const nameGroup = document.getElementById('companyNameGroup');
        const codeGroup = document.getElementById('inviteCodeGroup');
        
        if (method === 'name') {
            nameGroup.style.display = 'block';
            codeGroup.style.display = 'none';
        } else if (method === 'code') {
            nameGroup.style.display = 'none';
            codeGroup.style.display = 'block';
        } else {
            nameGroup.style.display = 'none';
            codeGroup.style.display = 'none';
        }
    }

    function uploadCompanyFile(element, type) {
        const fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.accept = type === 'license' ? '.jpg,.jpeg,.png,.pdf' : '.jpg,.jpeg,.png';
        fileInput.onchange = function(e) {
            const file = e.target.files[0];
            if (file) {
                element.innerHTML = '<i class="fas fa-check-circle" style="font-size: 1.5rem; color: #28a745; margin-bottom: 10px;"></i>' +
                    '<div style="color: #28a745; margin-bottom: 5px;">' + file.name + '</div>' +
                    '<div style="font-size: 0.85rem; color: #6c757d;">上传成功</div>';
                element.style.borderColor = '#28a745';
                element.style.backgroundColor = '#f8fff9';
            }
        };
        fileInput.click();
    }

    function submitNewCompany() {
        const formData = {
            name: document.getElementById('newCompanyName').value,
            creditCode: document.getElementById('newCompanyCreditCode').value,
            type: document.getElementById('newCompanyType').value,
            address: document.getElementById('newCompanyAddress').value,
            phone: document.getElementById('newCompanyPhone').value,
            email: document.getElementById('newCompanyEmail').value,
            business: document.getElementById('newCompanyBusiness').value
        };

        // 基本验证
        if (!formData.name || !formData.creditCode || !formData.type || !formData.address || !formData.phone || !formData.business) {
            showToast('请填写所有必填信息', '#dc3545');
            return;
        }

        showToast('正在提交企业创建申请...', '#667eea');
        
        setTimeout(() => {
            // 添加新企业到列表（待审核状态）
            const newCompany = {
                id: 'comp' + (userCompanies.length + 1).toString().padStart(3, '0'),
                name: formData.name,
                type: formData.type,
                status: 'pending',
                role: 'owner',
                joinDate: new Date().toISOString().split('T')[0],
                memberCount: 1,
                description: formData.business,
                address: formData.address,
                phone: formData.phone,
                email: formData.email
            };
            
            userCompanies.push(newCompany);
            closeModal('createNewCompanyModal');
            refreshCompanyList();
            updateCompanyStats();
            showToast('企业创建申请已提交，我们将在3-5个工作日内完成审核', '#28a745');
        }, 1500);
    }

    function submitJoinApplication() {
        const method = document.getElementById('joinMethod').value;
        const companyName = document.getElementById('joinCompanyName').value;
        const inviteCode = document.getElementById('joinInviteCode').value;
        const position = document.getElementById('applyPosition').value;
        const reason = document.getElementById('joinReason').value;

        if (!method) {
            showToast('请选择加入方式', '#dc3545');
            return;
        }

        if (method === 'name' && !companyName) {
            showToast('请输入企业名称', '#dc3545');
            return;
        }

        if (method === 'code' && !inviteCode) {
            showToast('请输入邀请码', '#dc3545');
            return;
        }

        showToast('正在提交加入申请...', '#667eea');
        
        setTimeout(() => {
            closeModal('joinCompanyModal');
            showToast('加入申请已提交，请等待企业管理员审核', '#28a745');
        }, 1500);
    }

    function refreshCompanyList() {
        const companyList = document.getElementById('companyList');
        const filter = document.getElementById('companyStatusFilter').value;
        
        let filteredCompanies = userCompanies;
        if (filter !== 'all') {
            filteredCompanies = userCompanies.filter(company => {
                switch (filter) {
                    case 'owner': return company.role === 'owner';
                    case 'member': return company.role === 'member';
                    case 'pending': return company.status === 'pending';
                    default: return true;
                }
            });
        }

        companyList.innerHTML = filteredCompanies.map(company => generateCompanyCard(company)).join('');
    }

    function generateCompanyCard(company) {
        const statusConfig = {
            'approved': { color: '#28a745', text: '正常运营', icon: 'fas fa-check-circle' },
            'pending': { color: '#ffc107', text: '待审核', icon: 'fas fa-clock' },
            'rejected': { color: '#dc3545', text: '审核未通过', icon: 'fas fa-times-circle' }
        };

        const roleConfig = {
            'owner': { color: '#667eea', text: '创始人', icon: 'fas fa-crown' },
            'member': { color: '#17a2b8', text: company.position || '员工', icon: 'fas fa-user' },
            'pending': { color: '#ffc107', text: '申请中', icon: 'fas fa-hourglass-half' }
        };

        const status = statusConfig[company.status];
        const role = roleConfig[company.role];

        return `
            <div style="border: 1px solid #e9ecef; border-radius: 12px; padding: 20px; background: white; transition: all 0.3s;">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                    <div style="flex: 1;">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                            <h4 style="color: #333; margin: 0; font-size: 1.1rem;">${company.name}</h4>
                            <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: ${status.color}20; color: ${status.color};">
                                <i class="${status.icon}" style="margin-right: 3px;"></i>${status.text}
                            </span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 15px; color: #6c757d; font-size: 0.9rem; margin-bottom: 8px;">
                            <span><i class="${role.icon}" style="color: ${role.color}; margin-right: 5px;"></i>${role.text}</span>
                            <span><i class="fas fa-calendar" style="margin-right: 5px;"></i>${company.joinDate} 加入</span>
                            <span><i class="fas fa-users" style="margin-right: 5px;"></i>${company.memberCount} 人</span>
                        </div>
                        <div style="color: #6c757d; font-size: 0.85rem; line-height: 1.4;">
                            ${company.description}
                        </div>
                    </div>
                    <div style="display: flex; gap: 8px; margin-left: 15px;">
                        <button onclick="viewCompanyDetail('${company.id}')" style="padding: 8px 16px; background: #f8f9fa; color: #6c757d; border: 1px solid #e0e3ea; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                            <i class="fas fa-eye"></i> 查看
                        </button>
                        ${(company.role === 'owner' || company.role === 'admin') && company.status === 'approved' ? 
                            `<button onclick="manageCompany('${company.id}')" style="padding: 8px 16px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                                <i class="fas fa-cog"></i> 管理
                            </button>` : 
                            company.status === 'pending' ? 
                            `<button onclick="cancelApplication('${company.id}')" style="padding: 8px 16px; background: #dc3545; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                                <i class="fas fa-times"></i> 撤回
                            </button>` : ''
                        }
                    </div>
                </div>
            </div>
        `;
    }

    function filterCompanies() {
        refreshCompanyList();
    }

    function updateCompanyStats() {
        const owned = userCompanies.filter(c => c.role === 'owner').length;
        const joined = userCompanies.filter(c => c.role === 'member').length;
        const pending = userCompanies.filter(c => c.status === 'pending').length;
        const total = userCompanies.length;

        document.getElementById('ownedCompanyCount').textContent = owned;
        document.getElementById('joinedCompanyCount').textContent = joined;
        document.getElementById('pendingCompanyCount').textContent = pending;
        document.getElementById('totalCompanyCount').textContent = total;
    }

    function viewCompanyDetail(companyId) {
        const company = userCompanies.find(c => c.id === companyId);
        if (!company) return;

        document.getElementById('companyDetailTitle').textContent = company.name + ' - 详情';
        
        const statusConfig = {
            'approved': { color: '#28a745', text: '正常运营', icon: 'fas fa-check-circle' },
            'pending': { color: '#ffc107', text: '待审核', icon: 'fas fa-clock' },
            'rejected': { color: '#dc3545', text: '审核未通过', icon: 'fas fa-times-circle' }
        };

        const roleConfig = {
            'owner': { color: '#667eea', text: '创始人', icon: 'fas fa-crown' },
            'member': { color: '#17a2b8', text: company.position || '员工', icon: 'fas fa-user' },
            'pending': { color: '#ffc107', text: '申请中', icon: 'fas fa-hourglass-half' }
        };

        const status = statusConfig[company.status];
        const role = roleConfig[company.role];

        document.getElementById('companyDetailContent').innerHTML = `
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                <div>
                    <div style="background: #f8f9fa; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
                        <h5 style="color: #333; margin-bottom: 10px; font-size: 1rem;">基本信息</h5>
                        <div style="color: #6c757d; font-size: 0.9rem; line-height: 1.6;">
                            <div style="margin-bottom: 8px;"><strong>企业名称：</strong>${company.name}</div>
                            <div style="margin-bottom: 8px;"><strong>企业类型：</strong>${company.type}</div>
                            <div style="margin-bottom: 8px;"><strong>成员数量：</strong>${company.memberCount} 人</div>
                            <div><strong>加入时间：</strong>${company.joinDate}</div>
                        </div>
                    </div>
                </div>
                <div>
                    <div style="background: #f8f9fa; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
                        <h5 style="color: #333; margin-bottom: 10px; font-size: 1rem;">状态信息</h5>
                        <div style="color: #6c757d; font-size: 0.9rem; line-height: 1.6;">
                            <div style="margin-bottom: 8px;">
                                <strong>企业状态：</strong>
                                <span style="color: ${status.color};">
                                    <i class="${status.icon}"></i> ${status.text}
                                </span>
                            </div>
                            <div style="margin-bottom: 8px;">
                                <strong>我的角色：</strong>
                                <span style="color: ${role.color};">
                                    <i class="${role.icon}"></i> ${role.text}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div style="background: #f8f9fa; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
                <h5 style="color: #333; margin-bottom: 10px; font-size: 1rem;">联系信息</h5>
                <div style="color: #6c757d; font-size: 0.9rem; line-height: 1.6;">
                    <div style="margin-bottom: 8px;"><strong>企业地址：</strong>${company.address}</div>
                    <div style="margin-bottom: 8px;"><strong>联系电话：</strong>${company.phone}</div>
                    <div style="margin-bottom: 8px;"><strong>企业邮箱：</strong>${company.email}</div>
                </div>
            </div>
            <div style="background: #f8f9fa; border-radius: 8px; padding: 15px;">
                <h5 style="color: #333; margin-bottom: 10px; font-size: 1rem;">企业简介</h5>
                <div style="color: #6c757d; font-size: 0.9rem; line-height: 1.6;">
                    ${company.description}
                </div>
            </div>
        `;

        let footerButtons = '<button class="btn-cancel" onclick="closeModal(\'companyDetailModal\')">关闭</button>';
        
        if ((company.role === 'owner' || company.role === 'admin') && company.status === 'approved') {
            footerButtons = `
                <button class="btn-cancel" onclick="closeModal('companyDetailModal')">关闭</button>
                <button class="btn-save" onclick="manageCompany('${company.id}')">管理企业</button>
            `;
        }

        document.getElementById('companyDetailFooter').innerHTML = footerButtons;
        openModal('companyDetailModal');
    }

    function manageCompany(companyId) {
        const company = userCompanies.find(c => c.id === companyId);
        if (!company) return;

        // 检查用户是否有管理权限
        if (company.role !== 'owner' && company.role !== 'admin') {
            showToast('您没有管理该企业的权限', '#dc3545');
            return;
        }

        showToast('正在跳转到 ' + company.name + ' 管理界面...', '#667eea');
        
        // 保存当前企业信息到sessionStorage，供企业空间使用
        sessionStorage.setItem('currentCompany', JSON.stringify(company));
        
        setTimeout(() => {
            // 跳转到企业空间
            window.location.href = '../enterprise/index.html';
        }, 1000);
    }

    function cancelApplication(companyId) {
        if (confirm('确定要撤回这个企业申请吗？')) {
            userCompanies = userCompanies.filter(c => c.id !== companyId);
            refreshCompanyList();
            updateCompanyStats();
            showToast('申请已撤回', '#28a745');
        }
    }

    // 页面加载时初始化企业管理数据
    function initCompanyManagement() {
        console.log('初始化企业管理数据...');
        refreshCompanyList();
        updateCompanyStats();
    }

    function uploadFile(element) {
        // 如果是待审核状态，不允许上传
        if (companyApplicationStatus === 'pending') {
            showToast('申请正在审核中，无法修改资料', '#ffc107');
            return;
        }
        
        // 创建文件输入元素
        const fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.accept = '.jpg,.jpeg,.png,.pdf';
        fileInput.onchange = function(e) {
            const file = e.target.files[0];
            if (file) {
                // 模拟上传成功
                element.innerHTML = '<i class="fas fa-check-circle" style="font-size: 1.5rem; color: #28a745; margin-bottom: 10px;"></i>' +
                    '<div style="color: #28a745; margin-bottom: 5px;">' + file.name + '</div>' +
                    '<div style="font-size: 0.85rem; color: #6c757d;">上传成功</div>';
                element.style.borderColor = '#28a745';
                element.style.backgroundColor = '#f8fff9';
            }
        };
        fileInput.click();
    }

    // 企业创建表单提交处理
    function initCompanyCreateForm() {
        // 使用延迟初始化，确保DOM元素可以被找到
        setTimeout(() => {
            const companyForm = document.querySelector('#page-company-create form');
            if (companyForm) {
                // 移除可能存在的旧事件监听器
                companyForm.removeEventListener('submit', handleCompanyFormSubmit);
                companyForm.addEventListener('submit', handleCompanyFormSubmit);
                
                // 保存草稿按钮
                const draftBtn = companyForm.querySelector('button[type="button"]');
                if (draftBtn) {
                    draftBtn.removeEventListener('click', handleDraftBtnClick);
                    draftBtn.addEventListener('click', handleDraftBtnClick);
                }
                
                console.log('企业创建表单初始化成功');
            } else {
                console.log('未找到企业创建表单');
            }
        }, 100);
    }
    
    // 表单提交处理函数
    function handleCompanyFormSubmit(e) {
        e.preventDefault();
        
        if (companyApplicationStatus === 'pending') {
            showToast('申请正在审核中，无法重复提交', '#ffc107');
            return;
        }
        
        // 模拟提交过程
        showToast('正在提交申请...', '#667eea');
        
        setTimeout(() => {
            companyApplicationStatus = 'pending';
            updateCompanyUIStatus();
            showToast('企业创建申请已提交，我们将在3-5个工作日内完成审核，请保持联系方式畅通。', '#28a745');
        }, 1500);
    }
    
    // 草稿按钮点击处理函数
    function handleDraftBtnClick() {
        if (companyApplicationStatus === 'pending') {
            // 撤回申请
            withdrawCompanyApplication();
        } else {
            // 保存草稿
            saveCompanyDraft();
        }
    }

    // 撤回企业申请
    function withdrawCompanyApplication() {
        if (confirm('确定要撤回申请吗？撤回后可以重新编辑和提交。')) {
            showToast('正在撤回申请...', '#667eea');
            
            setTimeout(() => {
                companyApplicationStatus = 'draft';
                updateCompanyUIStatus();
                showToast('申请已撤回，您可以重新编辑和提交', '#28a745');
            }, 1000);
        }
    }

    // 保存企业草稿
    function saveCompanyDraft() {
        if (companyApplicationStatus === 'pending') {
            showToast('申请正在审核中，无法修改', '#ffc107');
            return;
        }
        
        showToast('草稿已保存', '#28a745');
    }

    // 更新企业创建UI状态
    function updateCompanyUIStatus() {
        const companyPage = document.getElementById('page-company-create');
        if (!companyPage || companyPage.style.display === 'none') return;
        
        const form = companyPage.querySelector('form');
        const inputs = form.querySelectorAll('input, select, textarea');
        const uploadAreas = form.querySelectorAll('[onclick*="uploadFile"]');
        const submitBtn = form.querySelector('button[type="submit"]');
        const draftBtn = form.querySelector('button[type="button"]');
        
        // 更新企业创建步骤指示器
        updateCompanyStepIndicator();
        
        if (companyApplicationStatus === 'pending') {
            // 待审核状态：禁用所有表单元素
            inputs.forEach(input => {
                input.disabled = true;
                input.style.backgroundColor = '#f8f9fa';
                input.style.color = '#6c757d';
            });
            
            uploadAreas.forEach(area => {
                area.style.pointerEvents = 'none';
                area.style.opacity = '0.6';
            });
            
            // 更新按钮
            submitBtn.style.display = 'none';
            draftBtn.innerHTML = '<i class="fas fa-undo"></i> 撤回申请';
            draftBtn.style.background = '#ffc107';
            draftBtn.style.color = 'white';
            draftBtn.style.border = 'none';
            
            // 添加状态提示
            addCompanyStatusNotice();
            
        } else {
            // 草稿状态：启用所有表单元素
            inputs.forEach(input => {
                input.disabled = false;
                input.style.backgroundColor = 'white';
                input.style.color = '#333';
            });
            
            uploadAreas.forEach(area => {
                area.style.pointerEvents = 'auto';
                area.style.opacity = '1';
            });
            
            // 恢复按钮
            submitBtn.style.display = 'flex';
            draftBtn.innerHTML = '<i class="fas fa-save"></i> 保存草稿';
            draftBtn.style.background = '#f8f9fa';
            draftBtn.style.color = '#6c757d';
            draftBtn.style.border = '1px solid #e9ecef';
            
            // 移除状态提示
            removeCompanyStatusNotice();
        }
    }

    // 更新企业创建步骤指示器
    function updateCompanyStepIndicator() {
        const companyPage = document.getElementById('page-company-create');
        if (!companyPage) return;
        
        const steps = companyPage.querySelectorAll('[style*="display: flex; flex-direction: column; align-items: center"]');
        const lines = companyPage.querySelectorAll('[style*="flex: 1; height: 3px"]');
        
        if (companyApplicationStatus === 'pending') {
            // 步骤2激活
            if (steps[1]) {
                const circle = steps[1].querySelector('div');
                const text = steps[1].querySelector('div:last-child');
                if (circle) {
                    circle.style.background = '#ffc107';
                    circle.style.color = 'white';
                    circle.style.border = 'none';
                    circle.style.boxShadow = '0 4px 12px rgba(255, 193, 7, 0.3)';
                }
                if (text) {
                    text.style.color = '#ffc107';
                    text.style.fontWeight = '600';
                }
            }
            if (lines[0]) {
                lines[0].style.background = '#ffc107';
            }
        } else {
            // 步骤1激活
            if (steps[1]) {
                const circle = steps[1].querySelector('div');
                const text = steps[1].querySelector('div:last-child');
                if (circle) {
                    circle.style.background = '#e9ecef';
                    circle.style.color = '#6c757d';
                    circle.style.border = '3px solid #dee2e6';
                    circle.style.boxShadow = 'none';
                }
                if (text) {
                    text.style.color = '#6c757d';
                    text.style.fontWeight = '600';
                }
            }
            if (lines[0]) {
                lines[0].style.background = '#e9ecef';
            }
        }
    }

    // 添加企业状态提示
    function addCompanyStatusNotice() {
        const companyPage = document.getElementById('page-company-create');
        if (!companyPage || document.getElementById('companyStatusNotice')) return;
        
        const notice = document.createElement('div');
        notice.id = 'companyStatusNotice';
        notice.style.cssText = 'background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; padding: 15px; margin-bottom: 20px; color: #856404;';
        notice.innerHTML = '<div style="display: flex; align-items: center; gap: 10px;">' +
            '<i class="fas fa-clock" style="font-size: 1.2rem;"></i>' +
            '<div>' +
                '<div style="font-weight: 600; margin-bottom: 5px;">申请审核中</div>' +
                '<div style="font-size: 0.9rem;">您的企业创建申请正在审核中，预计3-5个工作日完成。审核期间无法修改申请信息，如需修改请先撤回申请。</div>' +
            '</div>' +
        '</div>';
        
        const form = companyPage.querySelector('form');
        form.insertBefore(notice, form.firstChild);
    }

    // 移除企业状态提示
    function removeCompanyStatusNotice() {
        const notice = document.getElementById('companyStatusNotice');
        if (notice) {
            notice.remove();
        }
    }

    // 个人档案页面相关函数  
    function saveProfile() {
        const profileData = {
            name: document.getElementById('profileName').value,
            gender: document.getElementById('profileGender').value,
            phone: document.getElementById('profilePhone').value,
            email: document.getElementById('profileEmail').value,
            location: document.getElementById('profileLocation').value,
            skills: document.getElementById('profileSkills').value,
            experience: document.getElementById('profileExperience').value,
            serviceRadius: document.getElementById('profileServiceRadius').value,
            bio: document.getElementById('profileBio').value
        };

        console.log('保存个人资料:', profileData);
        alert('个人资料保存成功！');
        closeModal('editProfileModal');
    }

    function exportProfile() {
        if (confirm('确定要导出个人档案吗？')) {
            // 模拟导出
            const link = document.createElement('a');
            link.href = '#'; // 实际应用中这里应该是文件的URL
            link.download = `个人档案_张三_${new Date().toISOString().split('T')[0]}.pdf`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            alert('个人档案导出成功！');
        }
    }

    function changeAvatar() {
        const fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.accept = '.jpg,.jpeg,.png';
        fileInput.onchange = function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    // 更新头像显示
                    const avatarImg = document.querySelector('#page-profile img[alt="头像"]');
                    if (avatarImg) {
                        avatarImg.src = e.target.result;
                    }
                    alert('头像上传成功！');
                };
                reader.readAsDataURL(file);
            }
        };
        fileInput.click();
    }

    // 店铺管理相关函数
    function showAddProductModal() {
        openModal('addProductModal');
    }

    function saveProduct() {
        const form = document.getElementById('addProductForm');
        const formData = new FormData(form);
        
        // 验证必填字段
        const required = ['productName', 'productCategory', 'productPrice', 'productDescription'];
        for (let field of required) {
            if (!formData.get(field)) {
                alert('请填写所有必填字段');
                return;
            }
        }
        
        console.log('保存商品:', Object.fromEntries(formData));
        alert('商品添加成功！页面将刷新显示新商品。');
        closeModal('addProductModal');
        form.reset();
        
        // 可以在这里添加重新加载商品列表的逻辑
        // 或者动态添加新商品到页面中
    }



    // 商品文件上传
    function uploadProductImage(element) {
        const fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.accept = '.jpg,.jpeg,.png';
        fileInput.multiple = true;
        fileInput.onchange = function(e) {
            const files = Array.from(e.target.files);
            if (files.length > 0) {
                element.innerHTML = `
                    <i class="fas fa-check-circle" style="font-size: 1.5rem; color: #28a745; margin-bottom: 10px;"></i>
                    <div style="color: #28a745; margin-bottom: 5px;">已选择 ${files.length} 张图片</div>
                    <div style="font-size: 0.85rem; color: #6c757d;">点击可重新选择</div>
                `;
                element.style.borderColor = '#28a745';
                element.style.backgroundColor = '#f8fff9';
            }
        };
        fileInput.click();
    }

    

    // 联系客户
    function contactCustomer(phone) {
        if (confirm(`确定要联系客户吗？\n电话：${phone}`)) {
            // 这里可以集成电话拨打功能
            window.open(`tel:${phone}`);
        }
    }

    // 教学管理相关功能
    function createNewCourse() {
        document.getElementById('createCourseModal').style.display = 'flex';
    }

    function showTeachingReport() {
        alert('显示教学报告');
        // 这里可以添加显示报告的逻辑
    }

    function showCreateCourseModal() {
        document.getElementById('createCourseModal').style.display = 'flex';
    }

    function closeCreateCourseModal() {
        document.getElementById('createCourseModal').style.display = 'none';
        document.getElementById('createCourseForm').reset();
    }

    function showLiveClassModal() {
        document.getElementById('liveClassModal').style.display = 'flex';
        // 设置默认日期为今天
        const dateInput = document.querySelector('#liveClassModal input[type="date"]');
        const today = new Date().toISOString().split('T')[0];
        dateInput.value = today;
    }

    function closeLiveClassModal() {
        document.getElementById('liveClassModal').style.display = 'none';
        document.getElementById('liveClassForm').reset();
    }

    function manageStudents(courseId) {
        document.getElementById('studentsModal').style.display = 'flex';
        loadStudentData(courseId);
    }

    function closeStudentsModal() {
        document.getElementById('studentsModal').style.display = 'none';
    }

    function loadStudentData(courseId) {
        // 模拟学员数据
        const students = [
            { id: 1, name: '李明', avatar: '李', progress: 85, lastStudy: '2024-06-01 14:30', status: 'learning' },
            { id: 2, name: '王华', avatar: '王', progress: 60, lastStudy: '2024-05-30 16:20', status: 'learning' },
            { id: 3, name: '张伟', avatar: '张', progress: 100, lastStudy: '2024-05-28 10:15', status: 'completed' },
            { id: 4, name: '刘强', avatar: '刘', progress: 25, lastStudy: '2024-05-25 09:30', status: 'paused' }
        ];
        
        const tbody = document.getElementById('studentsTableBody');
        tbody.innerHTML = students.map(student => {
            const statusMap = {
                learning: { text: '学习中', class: 'success' },
                completed: { text: '已完成', class: 'primary' },
                paused: { text: '暂停学习', class: 'warning' }
            };
            
            const statusInfo = statusMap[student.status];
            const statusBg = statusInfo.class === 'success' ? '#d4edda' : statusInfo.class === 'primary' ? '#d1ecf1' : '#fff3cd';
            const statusColor = statusInfo.class === 'success' ? '#155724' : statusInfo.class === 'primary' ? '#0c5460' : '#856404';
            
            return `
                <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                    <td style="padding: 12px 8px;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div style="width: 32px; height: 32px; border-radius: 50%; background: linear-gradient(135deg, #667eea, #764ba2); display: flex; align-items: center; justify-content: center; color: white; font-size: 0.9rem; font-weight: bold;">${student.avatar}</div>
                            <div>
                                <div style="font-weight: 500; color: #333;">${student.name}</div>
                                <div style="font-size: 0.8rem; color: #6c757d;">ID: ${student.id.toString().padStart(9, '20240100')}</div>
                            </div>
                        </div>
                    </td>
                    <td style="padding: 12px 8px;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div style="flex: 1; height: 6px; background: #f8f9fa; border-radius: 3px;">
                                <div style="width: ${student.progress}%; height: 100%; background: #28a745; border-radius: 3px;"></div>
                            </div>
                            <span style="font-size: 0.85rem; color: #6c757d; min-width: 40px;">${student.progress}%</span>
                        </div>
                    </td>
                    <td style="padding: 12px 8px;">
                        <span style="font-size: 0.85rem; color: #6c757d;">${student.lastStudy}</span>
                    </td>
                    <td style="padding: 12px 8px;">
                        <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.8rem; font-weight: 500; background: ${statusBg}; color: ${statusColor};">${statusInfo.text}</span>
                    </td>
                    <td style="padding: 12px 8px;">
                        <div style="display: flex; gap: 5px;">
                            <button onclick="viewStudentDetail(${student.id})" style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer;">详情</button>
                            <button onclick="contactStudent(${student.id})" style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: none; background: #667eea; color: white; cursor: pointer;">联系</button>
                        </div>
                    </td>
                </tr>
            `;
        }).join('');
    }

    function viewStudentDetail(studentId) {
        alert(`查看学员详情：${studentId}\n\n这里会显示学员的详细学习记录、作业完成情况、考试成绩等信息。`);
    }

    function contactStudent(studentId) {
        alert(`联系学员：${studentId}\n\n这里会打开消息发送界面或显示学员联系方式。`);
    }

    function editCourse(courseId) {
        // 这里可以预填充课程数据到创建课程表单中
        showCreateCourseModal();
        
        // 模拟填充数据
        setTimeout(() => {
            const form = document.getElementById('createCourseForm');
            if (courseId === 'course1') {
                form.querySelector('input[placeholder="请输入课程名称"]').value = '空压机维修技术入门';
                form.querySelector('select').value = 'online';
                form.querySelector('textarea').value = '从零开始学习空压机维修技术，包含基础理论、常见故障诊断和维修实操。';
                form.querySelector('input[type="number"]').value = '299';
            }
            
            // 更改弹窗标题
            document.querySelector('#createCourseModal h3').textContent = '编辑课程';
            document.querySelector('#createCourseModal button[type="submit"]').textContent = '保存修改';
        }, 100);
    }

    function viewCourse(courseId) {
        previewCourse(courseId);
    }

    function deleteCourse(courseId) {
        if (confirm('确定要删除这个课程吗？删除后无法恢复，所有相关的学员数据也将被清除。')) {
            alert(`课程 ${courseId} 已删除！`);
            // 这里可以添加删除课程的逻辑
        }
    }

    function exportTeachingData() {
        // 模拟数据导出
        const data = {
            timestamp: new Date().toISOString(),
            totalCourses: 18,
            totalStudents: 1256,
            totalRevenue: 15680,
            courses: [
                { name: '空压机维修技术入门', students: 156, revenue: 4500 },
                { name: 'PLC编程实战培训', students: 89, revenue: 5300 },
                { name: '制冷设备维护实操', students: 0, revenue: 0 }
            ]
        };
        
        const dataStr = JSON.stringify(data, null, 2);
        const dataBlob = new Blob([dataStr], { type: 'application/json' });
        const url = URL.createObjectURL(dataBlob);
        const link = document.createElement('a');
        link.href = url;
        link.download = `教学数据_${new Date().toISOString().split('T')[0]}.json`;
        link.click();
        URL.revokeObjectURL(url);
        
        alert('教学数据已导出！');
    }

    // 课程管理相关函数
    function manageCourse(courseId) {
        document.getElementById('manageCourseModal').style.display = 'flex';
        // 根据课程ID加载对应数据
        loadCourseManagementData(courseId);
    }

    function closeManageCourseModal() {
        document.getElementById('manageCourseModal').style.display = 'none';
    }

    function loadCourseManagementData(courseId) {
        // 模拟加载课程管理数据
        const courseData = {
            course1: {
                studentCount: '156',
                completionRate: '89%',
                revenue: '¥46,644',
                status: '已发布',
                createTime: '2024-05-15',
                updateTime: '2024-06-01',
                rating: '4.9★'
            },
            course2: {
                studentCount: '89',
                completionRate: '76%',
                revenue: '¥53,211',
                status: '已发布',
                createTime: '2024-04-20',
                updateTime: '2024-05-28',
                rating: '4.8★'
            }
        };

        const data = courseData[courseId] || courseData.course1;
        
        document.getElementById('courseStudentCount').textContent = data.studentCount;
        document.getElementById('courseCompletionRate').textContent = data.completionRate;
        document.getElementById('courseRevenue').textContent = data.revenue;
        document.getElementById('courseStatus').textContent = data.status;
        document.getElementById('courseCreateTime').textContent = data.createTime;
        document.getElementById('courseUpdateTime').textContent = data.updateTime;
        document.getElementById('courseRating').textContent = data.rating;
    }

    function viewCourseData(courseId) {
        document.getElementById('viewCourseDataModal').style.display = 'flex';
    }

    function closeViewCourseDataModal() {
        document.getElementById('viewCourseDataModal').style.display = 'none';
    }

    function exportCourseData() {
        const period = document.getElementById('dataAnalysisPeriod').value;
        const periodText = {
            'week': '本周',
            'month': '本月', 
            'quarter': '本季度',
            'year': '本年度'
        }[period];
        
        // 模拟导出
        const reportData = `课程数据分析报告 - ${periodText}\n\n` +
            `学习数据概览：\n` +
            `- 平均观看完成率：89%\n` +
            `- 平均学习时长：24分钟\n` +
            `- 回看率：15%\n` +
            `- 互动评论数：68\n\n` +
            `学员学习分析：\n` +
            `- 已完成：89人 (57%)\n` +
            `- 学习中：45人 (29%)\n` +
            `- 暂停学习：22人 (14%)\n\n` +
            `章节难度分析：\n` +
            `- 第1章基础理论：96%\n` +
            `- 第2章故障诊断：78%\n` +
            `- 第3章实操维修：64%\n`;
        
        const blob = new Blob([reportData], { type: 'text/plain;charset=utf-8' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `课程数据分析-${periodText}.txt`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        alert(`课程数据报告已导出！文件名：课程数据分析-${periodText}.txt`);
    }

    function previewCourse(courseId) {
        document.getElementById('previewCourseModal').style.display = 'flex';
        // 根据课程ID加载预览数据
        loadCoursePreviewData(courseId);
    }

    function closePreviewCourseModal() {
        document.getElementById('previewCourseModal').style.display = 'none';
    }

    function loadCoursePreviewData(courseId) {
        // 模拟课程预览数据
        const courseData = {
            course1: {
                title: '空压机维修技术入门',
                desc: '从零开始学习空压机维修技术，包含基础理论、常见故障诊断和维修实操'
            },
            course2: {
                title: 'PLC编程实战培训',
                desc: '通过实际项目案例学习PLC编程，掌握西门子S7-1200编程技巧'
            },
            course3: {
                title: '制冷设备维护实操',
                desc: '现场实操培训，学习制冷设备的日常维护、故障诊断和维修技术'
            }
        };

        const data = courseData[courseId] || courseData.course1;
        
        document.getElementById('previewCourseTitle').textContent = data.title;
        document.getElementById('previewCourseDesc').textContent = data.desc;
    }

    function editCourseDetails() {
        alert('编辑课程信息功能\n\n这里会打开课程信息编辑表单，包括：\n- 课程标题\n- 课程描述\n- 价格设置\n- 难度等级\n- 适用人群等');
        closeManageCourseModal();
    }

    function manageCourseContent() {
        alert('管理课程内容功能\n\n这里会打开课程内容管理界面，包括：\n- 章节管理\n- 视频上传\n- 资料添加\n- 作业设置等');
        closeManageCourseModal();
    }

    function courseSettings() {
        alert('课程设置功能\n\n这里会打开课程高级设置，包括：\n- 发布设置\n- 学员权限\n- 评论设置\n- 证书配置等');
        closeManageCourseModal();
    }

    function copyCourse() {
        if (confirm('确定要复制这个课程吗？\n\n复制后将创建一个内容相同的新课程，您可以在此基础上进行修改。')) {
            alert('课程复制成功！\n\n新课程已创建，课程名称为"[副本]原课程名称"，状态为草稿。');
            closeManageCourseModal();
        }
    }

    function publishCourse() {
        if (confirm('确定要发布这个课程吗？\n\n发布后学员就可以看到和购买这个课程了。')) {
            alert('课程发布成功！\n\n课程已成功发布，学员现在可以搜索到并购买您的课程。');
            closePreviewCourseModal();
        }
    }

    // 销售报告相关函数
    function showSalesReport() {
        document.getElementById('salesReportModal').style.display = 'flex';
    }

    function closeSalesReportModal() {
        document.getElementById('salesReportModal').style.display = 'none';
    }

    function exportSalesReport() {
        const period = document.getElementById('salesReportPeriod').value;
        const periodText = {
            'week': '本周',
            'month': '本月', 
            'quarter': '本季度',
            'year': '本年度'
        }[period];
        
        // 模拟导出
        const reportData = `销售数据报告 - ${periodText}\n\n` +
            `数据概览：\n` +
            `- 总销售额：¥28,680\n` +
            `- 总订单数：131个\n` +
            `- 活跃客户：68家\n` +
            `- 客户评分：4.8分\n\n` +
            `热销服务TOP4：\n` +
            `1. 空压机维修服务 - 45单，¥13,500，4.9★，+18%\n` +
            `2. 巡检服务 - 36单，¥7,200，4.7★，+12%\n` +
            `3. 设备保养服务 - 28单，¥5,600，4.6★，+8%\n` +
            `4. 安装调试 - 22单，¥2,380，4.8★，+5%\n\n` +
            `客户分析：\n` +
            `- 制造企业：36家 (53%)\n` +
            `- 化工企业：20家 (29%)\n` +
            `- 其他行业：12家 (18%)\n\n` +
            `经营建议：\n` +
            `- 优势保持：空压机维修和巡检服务表现优秀\n` +
            `- 提升空间：设备保养服务客户满意度相对较低\n` +
            `- 发展机会：可考虑拓展锅炉、制冷设备等新的维修服务项目`;
        
        const dataBlob = new Blob([reportData], { type: 'text/plain;charset=utf-8' });
        const url = URL.createObjectURL(dataBlob);
        const link = document.createElement('a');
        link.href = url;
        link.download = `销售数据报告_${periodText}_${new Date().toISOString().split('T')[0]}.txt`;
        link.click();
        URL.revokeObjectURL(url);
        
        alert('销售报告已导出！');
    }

    // 教学报告相关函数
    function showTeachingReport() {
        document.getElementById('teachingReportModal').style.display = 'flex';
    }

    function closeTeachingReportModal() {
        document.getElementById('teachingReportModal').style.display = 'none';
    }

    function exportReport() {
        const period = document.getElementById('reportPeriod').value;
        const periodText = {
            'week': '本周',
            'month': '本月', 
            'quarter': '本季度',
            'year': '本年度'
        }[period];
        
        // 模拟导出
        const reportData = `教学数据报告 - ${periodText}\n\n` +
            `数据概览：\n` +
            `- 总课程数：18门\n` +
            `- 总学员数：1,256人\n` +
            `- 总收益：¥15,680\n` +
            `- 平均评分：4.8分\n\n` +
            `课程表现TOP3：\n` +
            `1. 空压机维修技术入门 - 156人，89%完成率，4.9★\n` +
            `2. PLC编程实战培训 - 89人，76%完成率，4.8★\n` +
            `3. 锅炉运行与维护 - 68人，82%完成率，4.7★\n\n` +
            `改进建议：\n` +
            `- 优势保持：空压机维修和PLC编程课程表现优异\n` +
            `- 需要关注：制冷设备维护课程完成率偏低\n` +
            `- 发展机会：可考虑开设工业4.0相关课程`;
        
        const blob = new Blob([reportData], { type: 'text/plain;charset=utf-8' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `教学数据报告_${periodText}_${new Date().toISOString().split('T')[0]}.txt`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        alert(`${periodText}教学报告已导出！`);
    }

    function exportStudentData() {
        alert('学员数据已导出！\n\n导出内容包括：学员列表、学习进度、完成情况等详细数据。');
    }

    // 表单提交处理
    document.addEventListener('DOMContentLoaded', function() {
        // 初始化企业创建表单
        initCompanyCreateForm();
        
        // 初始化企业管理数据
        initCompanyManagement();
        
        // 创建课程表单提交
        const createCourseForm = document.getElementById('createCourseForm');
        if (createCourseForm) {
            createCourseForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = new FormData(this);
                const courseData = {
                    name: formData.get('name'),
                    type: formData.get('type'),
                    description: formData.get('description'),
                    price: formData.get('price'),
                    hours: formData.get('hours'),
                    level: formData.get('level')
                };
                
                console.log('课程数据：', courseData);
                alert('课程创建成功！');
                closeCreateCourseModal();
            });
        }

        // 直播课程表单提交
        const liveClassForm = document.getElementById('liveClassForm');
        if (liveClassForm) {
            liveClassForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = new FormData(this);
                const liveData = {
                    title: formData.get('title'),
                    date: formData.get('date'),
                    time: formData.get('time'),
                    duration: formData.get('duration'),
                    description: formData.get('description')
                };
                
                console.log('直播数据：', liveData);
                alert('直播课程创建成功！');
                closeLiveClassModal();
            });
        }
    });
    </script>

    <!-- 管理课程弹窗 -->
    <div id="manageCourseModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; align-items: center; justify-content: center;">
        <div style="background: white; border-radius: 12px; width: 90%; max-width: 800px; max-height: 90vh; overflow-y: auto; position: relative;">
            <div style="padding: 20px 25px; border-bottom: 1px solid #e9ecef; display: flex; justify-content: space-between; align-items: center;">
                <h3 style="margin: 0; color: #333; font-size: 1.3rem; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-cog" style="color: #ffc107;"></i>
                    课程管理
                </h3>
                <button onclick="closeManageCourseModal()" style="background: none; border: none; font-size: 1.5rem; color: #6c757d; cursor: pointer;">×</button>
            </div>
            
            <div style="padding: 25px;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
                    <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                        <i class="fas fa-users" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.8;"></i>
                        <div style="font-size: 1.6rem; font-weight: bold; margin-bottom: 5px;" id="courseStudentCount">156</div>
                        <div style="font-size: 0.9rem; opacity: 0.9;">总学员数</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #28a745, #20c997); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                        <i class="fas fa-chart-line" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.8;"></i>
                        <div style="font-size: 1.6rem; font-weight: bold; margin-bottom: 5px;" id="courseCompletionRate">89%</div>
                        <div style="font-size: 0.9rem; opacity: 0.9;">完成率</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #ffc107, #fd7e14); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                        <i class="fas fa-dollar-sign" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.8;"></i>
                        <div style="font-size: 1.6rem; font-weight: bold; margin-bottom: 5px;" id="courseRevenue">¥46,644</div>
                        <div style="font-size: 0.9rem; opacity: 0.9;">总收益</div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem;">课程操作</h4>
                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            <button onclick="editCourseDetails()" style="padding: 12px 16px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-edit"></i> 编辑课程信息
                            </button>
                            <button onclick="manageCourseContent()" style="padding: 12px 16px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-book"></i> 管理课程内容
                            </button>
                            <button onclick="courseSettings()" style="padding: 12px 16px; background: #17a2b8; color: white; border: none; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-cog"></i> 课程设置
                            </button>
                            <button onclick="copyCourse()" style="padding: 12px 16px; background: #6f42c1; color: white; border: none; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-copy"></i> 复制课程
                            </button>
                        </div>
                    </div>
                    
                    <div>
                        <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem;">课程状态</h4>
                        <div style="background: #f8f9fa; border-radius: 8px; padding: 15px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span style="color: #6c757d;">发布状态</span>
                                <span style="color: #28a745; font-weight: 500;" id="courseStatus">已发布</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span style="color: #6c757d;">创建时间</span>
                                <span style="color: #333;" id="courseCreateTime">2024-05-15</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span style="color: #6c757d;">最后更新</span>
                                <span style="color: #333;" id="courseUpdateTime">2024-06-01</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: #6c757d;">课程评分</span>
                                <span style="color: #ffc107; font-weight: 500;" id="courseRating">4.9★</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 查看课程数据弹窗 -->
    <div id="viewCourseDataModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; align-items: center; justify-content: center;">
        <div style="background: white; border-radius: 12px; width: 95%; max-width: 1000px; max-height: 90vh; overflow-y: auto; position: relative;">
            <div style="padding: 20px 25px; border-bottom: 1px solid #e9ecef; display: flex; justify-content: space-between; align-items: center;">
                <h3 style="margin: 0; color: #333; font-size: 1.3rem; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-chart-bar" style="color: #17a2b8;"></i>
                    课程数据分析
                </h3>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <select id="dataAnalysisPeriod" style="padding: 6px 10px; border: 1px solid #e9ecef; border-radius: 6px; font-size: 0.9rem;">
                        <option value="week">本周</option>
                        <option value="month" selected>本月</option>
                        <option value="quarter">本季度</option>
                        <option value="year">本年度</option>
                    </select>
                    <button onclick="exportCourseData()" style="padding: 6px 12px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                        <i class="fas fa-download"></i> 导出
                    </button>
                    <button onclick="closeViewCourseDataModal()" style="background: none; border: none; font-size: 1.5rem; color: #6c757d; cursor: pointer;">×</button>
                </div>
            </div>
            
            <div style="padding: 25px;">
                <!-- 学习数据概览 -->
                <div style="margin-bottom: 30px;">
                    <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-chart-pie" style="color: #667eea;"></i>
                        学习数据概览
                    </h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div style="background: white; border: 1px solid #e9ecef; border-radius: 10px; padding: 20px; text-align: center;">
                            <i class="fas fa-play-circle" style="font-size: 2rem; color: #28a745; margin-bottom: 10px;"></i>
                            <div style="font-size: 1.6rem; font-weight: bold; color: #333; margin-bottom: 5px;">89%</div>
                            <div style="color: #6c757d; font-size: 0.9rem;">平均观看完成率</div>
                        </div>
                        <div style="background: white; border: 1px solid #e9ecef; border-radius: 10px; padding: 20px; text-align: center;">
                            <i class="fas fa-clock" style="font-size: 2rem; color: #17a2b8; margin-bottom: 10px;"></i>
                            <div style="font-size: 1.6rem; font-weight: bold; color: #333; margin-bottom: 5px;">24分钟</div>
                            <div style="color: #6c757d; font-size: 0.9rem;">平均学习时长</div>
                        </div>
                        <div style="background: white; border: 1px solid #e9ecef; border-radius: 10px; padding: 20px; text-align: center;">
                            <i class="fas fa-redo" style="font-size: 2rem; color: #ffc107; margin-bottom: 10px;"></i>
                            <div style="font-size: 1.6rem; font-weight: bold; color: #333; margin-bottom: 5px;">15%</div>
                            <div style="color: #6c757d; font-size: 0.9rem;">回看率</div>
                        </div>
                        <div style="background: white; border: 1px solid #e9ecef; border-radius: 10px; padding: 20px; text-align: center;">
                            <i class="fas fa-comments" style="font-size: 2rem; color: #6f42c1; margin-bottom: 10px;"></i>
                            <div style="font-size: 1.6rem; font-weight: bold; color: #333; margin-bottom: 5px;">68</div>
                            <div style="color: #6c757d; font-size: 0.9rem;">互动评论数</div>
                        </div>
                    </div>
                </div>

                <!-- 学员学习进度 -->
                <div style="margin-bottom: 30px;">
                    <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-users-cog" style="color: #28a745;"></i>
                        学员学习分析
                    </h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="background: white; border: 1px solid #e9ecef; border-radius: 10px; padding: 20px;">
                            <h5 style="color: #333; margin-bottom: 15px; font-size: 1rem;">学习进度分布</h5>
                            <div style="margin-bottom: 15px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span style="color: #6c757d; font-size: 0.9rem;">已完成</span>
                                    <span style="color: #28a745; font-weight: 500;">89人 (57%)</span>
                                </div>
                                <div style="width: 100%; height: 8px; background: #f8f9fa; border-radius: 4px;">
                                    <div style="width: 57%; height: 100%; background: #28a745; border-radius: 4px;"></div>
                                </div>
                            </div>
                            <div style="margin-bottom: 15px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span style="color: #6c757d; font-size: 0.9rem;">学习中</span>
                                    <span style="color: #17a2b8; font-weight: 500;">45人 (29%)</span>
                                </div>
                                <div style="width: 100%; height: 8px; background: #f8f9fa; border-radius: 4px;">
                                    <div style="width: 29%; height: 100%; background: #17a2b8; border-radius: 4px;"></div>
                                </div>
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span style="color: #6c757d; font-size: 0.9rem;">暂停学习</span>
                                    <span style="color: #ffc107; font-weight: 500;">22人 (14%)</span>
                                </div>
                                <div style="width: 100%; height: 8px; background: #f8f9fa; border-radius: 4px;">
                                    <div style="width: 14%; height: 100%; background: #ffc107; border-radius: 4px;"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div style="background: white; border: 1px solid #e9ecef; border-radius: 10px; padding: 20px;">
                            <h5 style="color: #333; margin-bottom: 15px; font-size: 1rem;">章节难度分析</h5>
                            <div style="space-y: 10px;">
                                <div style="margin-bottom: 12px;">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                        <span style="color: #6c757d; font-size: 0.9rem;">第1章：基础理论</span>
                                        <span style="color: #28a745; font-weight: 500;">96%</span>
                                    </div>
                                    <div style="width: 100%; height: 6px; background: #f8f9fa; border-radius: 3px;">
                                        <div style="width: 96%; height: 100%; background: #28a745; border-radius: 3px;"></div>
                                    </div>
                                </div>
                                <div style="margin-bottom: 12px;">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                        <span style="color: #6c757d; font-size: 0.9rem;">第2章：故障诊断</span>
                                        <span style="color: #17a2b8; font-weight: 500;">78%</span>
                                    </div>
                                    <div style="width: 100%; height: 6px; background: #f8f9fa; border-radius: 3px;">
                                        <div style="width: 78%; height: 100%; background: #17a2b8; border-radius: 3px;"></div>
                                    </div>
                                </div>
                                <div style="margin-bottom: 12px;">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                        <span style="color: #6c757d; font-size: 0.9rem;">第3章：实操维修</span>
                                        <span style="color: #ffc107; font-weight: 500;">64%</span>
                                    </div>
                                    <div style="width: 100%; height: 6px; background: #f8f9fa; border-radius: 3px;">
                                        <div style="width: 64%; height: 100%; background: #ffc107; border-radius: 3px;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 学员反馈统计 -->
                <div>
                    <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-star" style="color: #ffc107;"></i>
                        学员反馈统计
                    </h4>
                    <div style="background: #f8f9fa; border-radius: 10px; padding: 20px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                            <div style="background: white; border-left: 4px solid #28a745; border-radius: 6px; padding: 15px;">
                                <div style="color: #28a745; font-weight: 600; margin-bottom: 8px; display: flex; align-items: center; gap: 8px;">
                                    <i class="fas fa-thumbs-up"></i> 好评内容
                                </div>
                                <div style="color: #6c757d; font-size: 0.9rem; line-height: 1.5;">
                                    "讲解非常详细"、"实操性强"、"老师经验丰富"
                                </div>
                            </div>
                            <div style="background: white; border-left: 4px solid #ffc107; border-radius: 6px; padding: 15px;">
                                <div style="color: #ffc107; font-weight: 600; margin-bottom: 8px; display: flex; align-items: center; gap: 8px;">
                                    <i class="fas fa-lightbulb"></i> 改进建议
                                </div>
                                <div style="color: #6c757d; font-size: 0.9rem; line-height: 1.5;">
                                    "希望增加更多案例"、"视频清晰度可以更高"
                                </div>
                            </div>
                            <div style="background: white; border-left: 4px solid #17a2b8; border-radius: 6px; padding: 15px;">
                                <div style="color: #17a2b8; font-weight: 600; margin-bottom: 8px; display: flex; align-items: center; gap: 8px;">
                                    <i class="fas fa-chart-line"></i> 评分趋势
                                </div>
                                <div style="color: #6c757d; font-size: 0.9rem; line-height: 1.5;">
                                    本月评分较上月提升0.2分，总体呈上升趋势
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 课程预览弹窗 -->
    <div id="previewCourseModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; align-items: center; justify-content: center;">
        <div style="background: white; border-radius: 12px; width: 90%; max-width: 800px; max-height: 90vh; overflow-y: auto; position: relative;">
            <div style="padding: 20px 25px; border-bottom: 1px solid #e9ecef; display: flex; justify-content: space-between; align-items: center;">
                <h3 style="margin: 0; color: #333; font-size: 1.3rem; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-eye" style="color: #17a2b8;"></i>
                    课程预览
                </h3>
                <button onclick="closePreviewCourseModal()" style="background: none; border: none; font-size: 1.5rem; color: #6c757d; cursor: pointer;">×</button>
            </div>
            
            <div style="padding: 25px;">
                <div style="background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 12px; padding: 30px; color: white; margin-bottom: 30px; text-align: center;">
                    <h2 style="margin: 0 0 10px 0; font-size: 1.8rem;" id="previewCourseTitle">空压机维修技术入门</h2>
                    <p style="margin: 0 0 20px 0; opacity: 0.9; font-size: 1.1rem;" id="previewCourseDesc">从零开始学习空压机维修技术，包含基础理论、常见故障诊断和维修实操</p>
                    <div style="display: flex; justify-content: center; gap: 30px; flex-wrap: wrap;">
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold;">12课时</div>
                            <div style="font-size: 0.9rem; opacity: 0.8;">总课时</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold;">4.9★</div>
                            <div style="font-size: 0.9rem; opacity: 0.8;">课程评分</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold;">¥299</div>
                            <div style="font-size: 0.9rem; opacity: 0.8;">课程价格</div>
                        </div>
                    </div>
                </div>

                <div style="margin-bottom: 30px;">
                    <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem;">课程大纲</h4>
                    <div style="background: white; border: 1px solid #e9ecef; border-radius: 10px; overflow: hidden;">
                        <div style="background: #f8f9fa; padding: 15px; border-bottom: 1px solid #e9ecef;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <i class="fas fa-play-circle" style="color: #28a745;"></i>
                                    <span style="font-weight: 500;">第1章：空压机基础理论</span>
                                </div>
                                <span style="color: #6c757d; font-size: 0.9rem;">45分钟</span>
                            </div>
                        </div>
                        <div style="background: #f8f9fa; padding: 15px; border-bottom: 1px solid #e9ecef;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <i class="fas fa-play-circle" style="color: #28a745;"></i>
                                    <span style="font-weight: 500;">第2章：常见故障诊断方法</span>
                                </div>
                                <span style="color: #6c757d; font-size: 0.9rem;">60分钟</span>
                            </div>
                        </div>
                        <div style="background: #f8f9fa; padding: 15px; border-bottom: 1px solid #e9ecef;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <i class="fas fa-play-circle" style="color: #28a745;"></i>
                                    <span style="font-weight: 500;">第3章：实际维修操作演示</span>
                                </div>
                                <span style="color: #6c757d; font-size: 0.9rem;">90分钟</span>
                            </div>
                        </div>
                        <div style="background: #f8f9fa; padding: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <i class="fas fa-play-circle" style="color: #28a745;"></i>
                                    <span style="font-weight: 500;">第4章：预防性维护与保养</span>
                                </div>
                                <span style="color: #6c757d; font-size: 0.9rem;">45分钟</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button onclick="editCourse('current')" style="padding: 12px 24px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-edit"></i> 编辑课程
                    </button>
                    <button onclick="publishCourse()" style="padding: 12px 24px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-rocket"></i> 发布课程
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 销售报告弹窗 -->
    <div id="salesReportModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; align-items: center; justify-content: center;">
        <div style="background: white; border-radius: 12px; width: 95%; max-width: 1000px; max-height: 90vh; overflow-y: auto; position: relative;">
            <div style="padding: 20px 25px; border-bottom: 1px solid #e9ecef; display: flex; justify-content: space-between; align-items: center;">
                <h3 style="margin: 0; color: #333; font-size: 1.3rem; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-chart-line" style="color: #28a745;"></i>
                    销售数据报告
                </h3>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <select id="salesReportPeriod" style="padding: 6px 10px; border: 1px solid #e9ecef; border-radius: 6px; font-size: 0.9rem;">
                        <option value="week">本周</option>
                        <option value="month" selected>本月</option>
                        <option value="quarter">本季度</option>
                        <option value="year">本年度</option>
                    </select>
                    <button onclick="exportSalesReport()" style="padding: 6px 12px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                        <i class="fas fa-download"></i> 导出
                    </button>
                    <button onclick="closeSalesReportModal()" style="background: none; border: none; font-size: 1.5rem; color: #6c757d; cursor: pointer;">×</button>
                </div>
            </div>
            
            <div style="padding: 25px;">
                <!-- 报告概览 -->
                <div style="margin-bottom: 30px;">
                    <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-tachometer-alt" style="color: #17a2b8;"></i>
                        数据概览
                    </h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div style="background: linear-gradient(135deg, #28a745, #20c997); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                            <i class="fas fa-dollar-sign" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.8;"></i>
                            <div style="font-size: 1.8rem; font-weight: bold; margin-bottom: 5px;">¥28,680</div>
                            <div style="font-size: 0.9rem; opacity: 0.9;">总销售额</div>
                            <div style="font-size: 0.8rem; margin-top: 5px; opacity: 0.8;">
                                <i class="fas fa-arrow-up"></i> +12.5% 较上月
                            </div>
                        </div>
                        <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                            <i class="fas fa-shopping-cart" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.8;"></i>
                            <div style="font-size: 1.8rem; font-weight: bold; margin-bottom: 5px;">131</div>
                            <div style="font-size: 0.9rem; opacity: 0.9;">总订单数</div>
                            <div style="font-size: 0.8rem; margin-top: 5px; opacity: 0.8;">
                                <i class="fas fa-arrow-up"></i> +18 较上月
                            </div>
                        </div>
                        <div style="background: linear-gradient(135deg, #ffc107, #fd7e14); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                            <i class="fas fa-users" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.8;"></i>
                            <div style="font-size: 1.8rem; font-weight: bold; margin-bottom: 5px;">68</div>
                            <div style="font-size: 0.9rem; opacity: 0.9;">活跃客户</div>
                            <div style="font-size: 0.8rem; margin-top: 5px; opacity: 0.8;">
                                <i class="fas fa-arrow-up"></i> +12 较上月
                            </div>
                        </div>
                        <div style="background: linear-gradient(135deg, #dc3545, #c82333); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                            <i class="fas fa-star" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.8;"></i>
                            <div style="font-size: 1.8rem; font-weight: bold; margin-bottom: 5px;">4.8</div>
                            <div style="font-size: 0.9rem; opacity: 0.9;">客户评分</div>
                            <div style="font-size: 0.8rem; margin-top: 5px; opacity: 0.8;">
                                <i class="fas fa-arrow-up"></i> +0.3 较上月
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 商品销售分析 -->
                <div style="margin-bottom: 30px;">
                    <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-shopping-bag" style="color: #28a745;"></i>
                        商品销售分析
                    </h4>
                    <div style="background: white; border: 1px solid #e9ecef; border-radius: 10px; padding: 20px;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="border-bottom: 2px solid #f0f0f0;">
                                    <th style="padding: 12px 8px; text-align: left; color: #28a745; font-weight: 600; font-size: 0.9rem;">服务项目</th>
                                    <th style="padding: 12px 8px; text-align: center; color: #28a745; font-weight: 600; font-size: 0.9rem;">销售量</th>
                                    <th style="padding: 12px 8px; text-align: center; color: #28a745; font-weight: 600; font-size: 0.9rem;">销售额</th>
                                    <th style="padding: 12px 8px; text-align: center; color: #28a745; font-weight: 600; font-size: 0.9rem;">客户满意度</th>
                                    <th style="padding: 12px 8px; text-align: center; color: #28a745; font-weight: 600; font-size: 0.9rem;">增长趋势</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="border-bottom: 1px solid #f8f9fa;">
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <div style="width: 8px; height: 8px; background: #28a745; border-radius: 50%;"></div>
                                            <span style="font-weight: 500;">空压机维修服务</span>
                                        </div>
                                    </td>
                                    <td style="padding: 12px 8px; text-align: center;">45</td>
                                    <td style="padding: 12px 8px; text-align: center; color: #28a745; font-weight: 500;">¥13,500</td>
                                    <td style="padding: 12px 8px; text-align: center;">
                                        <span style="color: #ffc107;">4.9★</span>
                                    </td>
                                    <td style="padding: 12px 8px; text-align: center;">
                                        <span style="color: #28a745; font-size: 0.8rem;">
                                            <i class="fas fa-arrow-up"></i> +18%
                                        </span>
                                    </td>
                                </tr>
                                <tr style="border-bottom: 1px solid #f8f9fa;">
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <div style="width: 8px; height: 8px; background: #17a2b8; border-radius: 50%;"></div>
                                            <span style="font-weight: 500;">巡检服务</span>
                                        </div>
                                    </td>
                                    <td style="padding: 12px 8px; text-align: center;">36</td>
                                    <td style="padding: 12px 8px; text-align: center; color: #28a745; font-weight: 500;">¥7,200</td>
                                    <td style="padding: 12px 8px; text-align: center;">
                                        <span style="color: #ffc107;">4.7★</span>
                                    </td>
                                    <td style="padding: 12px 8px; text-align: center;">
                                        <span style="color: #28a745; font-size: 0.8rem;">
                                            <i class="fas fa-arrow-up"></i> +12%
                                        </span>
                                    </td>
                                </tr>
                                <tr style="border-bottom: 1px solid #f8f9fa;">
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <div style="width: 8px; height: 8px; background: #ffc107; border-radius: 50%;"></div>
                                            <span style="font-weight: 500;">设备保养服务</span>
                                        </div>
                                    </td>
                                    <td style="padding: 12px 8px; text-align: center;">28</td>
                                    <td style="padding: 12px 8px; text-align: center; color: #28a745; font-weight: 500;">¥5,600</td>
                                    <td style="padding: 12px 8px; text-align: center;">
                                        <span style="color: #ffc107;">4.6★</span>
                                    </td>
                                    <td style="padding: 12px 8px; text-align: center;">
                                        <span style="color: #28a745; font-size: 0.8rem;">
                                            <i class="fas fa-arrow-up"></i> +8%
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <div style="width: 8px; height: 8px; background: #6f42c1; border-radius: 50%;"></div>
                                            <span style="font-weight: 500;">安装调试</span>
                                        </div>
                                    </td>
                                    <td style="padding: 12px 8px; text-align: center;">22</td>
                                    <td style="padding: 12px 8px; text-align: center; color: #28a745; font-weight: 500;">¥2,380</td>
                                    <td style="padding: 12px 8px; text-align: center;">
                                        <span style="color: #ffc107;">4.8★</span>
                                    </td>
                                    <td style="padding: 12px 8px; text-align: center;">
                                        <span style="color: #28a745; font-size: 0.8rem;">
                                            <i class="fas fa-arrow-up"></i> +5%
                                        </span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- 客户分析 -->
                <div style="margin-bottom: 30px;">
                    <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-user-friends" style="color: #fd7e14;"></i>
                        客户分析
                    </h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="background: white; border: 1px solid #e9ecef; border-radius: 10px; padding: 20px;">
                            <h5 style="color: #333; margin-bottom: 15px; font-size: 1rem;">客户类型分布</h5>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                <span style="color: #6c757d; font-size: 0.9rem;">制造企业</span>
                                <span style="color: #28a745; font-weight: 500;">36家 (53%)</span>
                            </div>
                            <div style="width: 100%; height: 8px; background: #f8f9fa; border-radius: 4px; margin-bottom: 15px;">
                                <div style="width: 53%; height: 100%; background: #28a745; border-radius: 4px;"></div>
                            </div>
                            
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                <span style="color: #6c757d; font-size: 0.9rem;">化工企业</span>
                                <span style="color: #17a2b8; font-weight: 500;">20家 (29%)</span>
                            </div>
                            <div style="width: 100%; height: 8px; background: #f8f9fa; border-radius: 4px; margin-bottom: 15px;">
                                <div style="width: 29%; height: 100%; background: #17a2b8; border-radius: 4px;"></div>
                            </div>
                            
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                <span style="color: #6c757d; font-size: 0.9rem;">其他行业</span>
                                <span style="color: #ffc107; font-weight: 500;">12家 (18%)</span>
                            </div>
                            <div style="width: 100%; height: 8px; background: #f8f9fa; border-radius: 4px;">
                                <div style="width: 18%; height: 100%; background: #ffc107; border-radius: 4px;"></div>
                            </div>
                        </div>
                        
                        <div style="background: white; border: 1px solid #e9ecef; border-radius: 10px; padding: 20px;">
                            <h5 style="color: #333; margin-bottom: 15px; font-size: 1rem;">客户购买频次</h5>
                            <div style="margin-bottom: 15px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span style="color: #6c757d; font-size: 0.9rem;">首次购买</span>
                                    <span style="color: #667eea; font-weight: 500;">28%</span>
                                </div>
                                <div style="width: 100%; height: 6px; background: #f8f9fa; border-radius: 3px;">
                                    <div style="width: 28%; height: 100%; background: #667eea; border-radius: 3px;"></div>
                                </div>
                            </div>
                            <div style="margin-bottom: 15px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span style="color: #6c757d; font-size: 0.9rem;">回购客户</span>
                                    <span style="color: #28a745; font-weight: 500;">45%</span>
                                </div>
                                <div style="width: 100%; height: 6px; background: #f8f9fa; border-radius: 3px;">
                                    <div style="width: 45%; height: 100%; background: #28a745; border-radius: 3px;"></div>
                                </div>
                            </div>
                            <div style="margin-bottom: 15px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span style="color: #6c757d; font-size: 0.9rem;">老客户</span>
                                    <span style="color: #ffc107; font-weight: 500;">27%</span>
                                </div>
                                <div style="width: 100%; height: 6px; background: #f8f9fa; border-radius: 3px;">
                                    <div style="width: 27%; height: 100%; background: #ffc107; border-radius: 3px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 经营建议 -->
                <div>
                    <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-lightbulb" style="color: #ffc107;"></i>
                        经营建议
                    </h4>
                    <div style="background: #f8f9fa; border-radius: 10px; padding: 20px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
                            <div style="background: white; border-left: 4px solid #28a745; border-radius: 6px; padding: 15px;">
                                <div style="color: #28a745; font-weight: 600; margin-bottom: 8px;">
                                    <i class="fas fa-thumbs-up"></i> 优势保持
                                </div>
                                <div style="color: #6c757d; font-size: 0.9rem; line-height: 1.5;">
                                    空压机维修和巡检服务表现优秀，客户满意度高，建议加大推广力度。
                                </div>
                            </div>
                            <div style="background: white; border-left: 4px solid #ffc107; border-radius: 6px; padding: 15px;">
                                <div style="color: #ffc107; font-weight: 600; margin-bottom: 8px;">
                                    <i class="fas fa-exclamation-triangle"></i> 提升空间
                                </div>
                                <div style="color: #6c757d; font-size: 0.9rem; line-height: 1.5;">
                                    设备保养服务客户满意度相对较低，建议优化服务流程和质量。
                                </div>
                            </div>
                            <div style="background: white; border-left: 4px solid #17a2b8; border-radius: 6px; padding: 15px;">
                                <div style="color: #17a2b8; font-weight: 600; margin-bottom: 8px;">
                                    <i class="fas fa-rocket"></i> 发展机会
                                </div>
                                <div style="color: #6c757d; font-size: 0.9rem; line-height: 1.5;">
                                    可考虑拓展锅炉、制冷设备等新的维修服务项目，扩大服务范围。
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 教学报告弹窗 -->
    <div id="teachingReportModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; align-items: center; justify-content: center;">
        <div style="background: white; border-radius: 12px; width: 95%; max-width: 1000px; max-height: 90vh; overflow-y: auto; position: relative;">
            <div style="padding: 20px 25px; border-bottom: 1px solid #e9ecef; display: flex; justify-content: space-between; align-items: center;">
                <h3 style="margin: 0; color: #333; font-size: 1.3rem; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-chart-bar" style="color: #667eea;"></i>
                    教学数据报告
                </h3>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <select id="reportPeriod" style="padding: 6px 10px; border: 1px solid #e9ecef; border-radius: 6px; font-size: 0.9rem;">
                        <option value="week">本周</option>
                        <option value="month" selected>本月</option>
                        <option value="quarter">本季度</option>
                        <option value="year">本年度</option>
                    </select>
                    <button onclick="exportReport()" style="padding: 6px 12px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                        <i class="fas fa-download"></i> 导出
                    </button>
                    <button onclick="closeTeachingReportModal()" style="background: none; border: none; font-size: 1.5rem; color: #6c757d; cursor: pointer;">×</button>
                </div>
            </div>
            
            <div style="padding: 25px;">
                <!-- 报告概览 -->
                <div style="margin-bottom: 30px;">
                    <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-tachometer-alt" style="color: #17a2b8;"></i>
                        数据概览
                    </h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                            <i class="fas fa-graduation-cap" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.8;"></i>
                            <div style="font-size: 1.8rem; font-weight: bold; margin-bottom: 5px;">18</div>
                            <div style="font-size: 0.9rem; opacity: 0.9;">总课程数</div>
                            <div style="font-size: 0.8rem; margin-top: 5px; opacity: 0.8;">
                                <i class="fas fa-arrow-up"></i> +3 较上月
                            </div>
                        </div>
                        <div style="background: linear-gradient(135deg, #28a745, #20c997); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                            <i class="fas fa-users" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.8;"></i>
                            <div style="font-size: 1.8rem; font-weight: bold; margin-bottom: 5px;">1,256</div>
                            <div style="font-size: 0.9rem; opacity: 0.9;">总学员数</div>
                            <div style="font-size: 0.8rem; margin-top: 5px; opacity: 0.8;">
                                <i class="fas fa-arrow-up"></i> +89 较上月
                            </div>
                        </div>
                        <div style="background: linear-gradient(135deg, #ffc107, #fd7e14); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                            <i class="fas fa-coins" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.8;"></i>
                            <div style="font-size: 1.8rem; font-weight: bold; margin-bottom: 5px;">¥15,680</div>
                            <div style="font-size: 0.9rem; opacity: 0.9;">总收益</div>
                            <div style="font-size: 0.8rem; margin-top: 5px; opacity: 0.8;">
                                <i class="fas fa-arrow-up"></i> +28.5% 较上月
                            </div>
                        </div>
                        <div style="background: linear-gradient(135deg, #dc3545, #c82333); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                            <i class="fas fa-star" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.8;"></i>
                            <div style="font-size: 1.8rem; font-weight: bold; margin-bottom: 5px;">4.8</div>
                            <div style="font-size: 0.9rem; opacity: 0.9;">平均评分</div>
                            <div style="font-size: 0.8rem; margin-top: 5px; opacity: 0.8;">
                                <i class="fas fa-arrow-up"></i> +0.2 较上月
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 课程表现分析 -->
                <div style="margin-bottom: 30px;">
                    <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-chart-line" style="color: #28a745;"></i>
                        课程表现分析
                    </h4>
                    <div style="background: white; border: 1px solid #e9ecef; border-radius: 10px; padding: 20px;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="border-bottom: 2px solid #f0f0f0;">
                                    <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">课程名称</th>
                                    <th style="padding: 12px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.9rem;">学员数</th>
                                    <th style="padding: 12px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.9rem;">完成率</th>
                                    <th style="padding: 12px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.9rem;">评分</th>
                                    <th style="padding: 12px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.9rem;">收益</th>
                                    <th style="padding: 12px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.9rem;">趋势</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="border-bottom: 1px solid #f8f9fa;">
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <div style="width: 8px; height: 8px; background: #28a745; border-radius: 50%;"></div>
                                            <span style="font-weight: 500;">空压机维修技术入门</span>
                                        </div>
                                    </td>
                                    <td style="padding: 12px 8px; text-align: center;">156</td>
                                    <td style="padding: 12px 8px; text-align: center;">
                                        <span style="color: #28a745; font-weight: 500;">89%</span>
                                    </td>
                                    <td style="padding: 12px 8px; text-align: center;">
                                        <span style="color: #ffc107;">4.9★</span>
                                    </td>
                                    <td style="padding: 12px 8px; text-align: center; color: #28a745; font-weight: 500;">¥4,680</td>
                                    <td style="padding: 12px 8px; text-align: center;">
                                        <span style="color: #28a745; font-size: 0.8rem;">
                                            <i class="fas fa-arrow-up"></i> +15%
                                        </span>
                                    </td>
                                </tr>
                                <tr style="border-bottom: 1px solid #f8f9fa;">
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <div style="width: 8px; height: 8px; background: #17a2b8; border-radius: 50%;"></div>
                                            <span style="font-weight: 500;">PLC编程实战培训</span>
                                        </div>
                                    </td>
                                    <td style="padding: 12px 8px; text-align: center;">89</td>
                                    <td style="padding: 12px 8px; text-align: center;">
                                        <span style="color: #28a745; font-weight: 500;">76%</span>
                                    </td>
                                    <td style="padding: 12px 8px; text-align: center;">
                                        <span style="color: #ffc107;">4.8★</span>
                                    </td>
                                    <td style="padding: 12px 8px; text-align: center; color: #28a745; font-weight: 500;">¥5,330</td>
                                    <td style="padding: 12px 8px; text-align: center;">
                                        <span style="color: #28a745; font-size: 0.8rem;">
                                            <i class="fas fa-arrow-up"></i> +22%
                                        </span>
                                    </td>
                                </tr>
                                <tr style="border-bottom: 1px solid #f8f9fa;">
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <div style="width: 8px; height: 8px; background: #ffc107; border-radius: 50%;"></div>
                                            <span style="font-weight: 500;">制冷设备维护实操</span>
                                        </div>
                                    </td>
                                    <td style="padding: 12px 8px; text-align: center;">45</td>
                                    <td style="padding: 12px 8px; text-align: center;">
                                        <span style="color: #dc3545; font-weight: 500;">45%</span>
                                    </td>
                                    <td style="padding: 12px 8px; text-align: center;">
                                        <span style="color: #ffc107;">4.2★</span>
                                    </td>
                                    <td style="padding: 12px 8px; text-align: center; color: #28a745; font-weight: 500;">¥2,025</td>
                                    <td style="padding: 12px 8px; text-align: center;">
                                        <span style="color: #dc3545; font-size: 0.8rem;">
                                            <i class="fas fa-arrow-down"></i> -8%
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding: 12px 8px;">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <div style="width: 8px; height: 8px; background: #6f42c1; border-radius: 50%;"></div>
                                            <span style="font-weight: 500;">锅炉运行与维护</span>
                                        </div>
                                    </td>
                                    <td style="padding: 12px 8px; text-align: center;">68</td>
                                    <td style="padding: 12px 8px; text-align: center;">
                                        <span style="color: #28a745; font-weight: 500;">82%</span>
                                    </td>
                                    <td style="padding: 12px 8px; text-align: center;">
                                        <span style="color: #ffc107;">4.7★</span>
                                    </td>
                                    <td style="padding: 12px 8px; text-align: center; color: #28a745; font-weight: 500;">¥3,645</td>
                                    <td style="padding: 12px 8px; text-align: center;">
                                        <span style="color: #28a745; font-size: 0.8rem;">
                                            <i class="fas fa-arrow-up"></i> +12%
                                        </span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- 学员学习统计 -->
                <div style="margin-bottom: 30px;">
                    <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-user-graduate" style="color: #fd7e14;"></i>
                        学员学习统计
                    </h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="background: white; border: 1px solid #e9ecef; border-radius: 10px; padding: 20px;">
                            <h5 style="color: #333; margin-bottom: 15px; font-size: 1rem;">学习活跃度</h5>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                <span style="color: #6c757d; font-size: 0.9rem;">活跃学员</span>
                                <span style="color: #28a745; font-weight: 500;">856人 (68%)</span>
                            </div>
                            <div style="width: 100%; height: 8px; background: #f8f9fa; border-radius: 4px; margin-bottom: 15px;">
                                <div style="width: 68%; height: 100%; background: #28a745; border-radius: 4px;"></div>
                            </div>
                            
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                <span style="color: #6c757d; font-size: 0.9rem;">偶尔学习</span>
                                <span style="color: #ffc107; font-weight: 500;">285人 (23%)</span>
                            </div>
                            <div style="width: 100%; height: 8px; background: #f8f9fa; border-radius: 4px; margin-bottom: 15px;">
                                <div style="width: 23%; height: 100%; background: #ffc107; border-radius: 4px;"></div>
                            </div>
                            
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                <span style="color: #6c757d; font-size: 0.9rem;">暂停学习</span>
                                <span style="color: #dc3545; font-weight: 500;">115人 (9%)</span>
                            </div>
                            <div style="width: 100%; height: 8px; background: #f8f9fa; border-radius: 4px;">
                                <div style="width: 9%; height: 100%; background: #dc3545; border-radius: 4px;"></div>
                            </div>
                        </div>
                        
                        <div style="background: white; border: 1px solid #e9ecef; border-radius: 10px; padding: 20px;">
                            <h5 style="color: #333; margin-bottom: 15px; font-size: 1rem;">学习时长分布</h5>
                            <div style="margin-bottom: 15px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span style="color: #6c757d; font-size: 0.9rem;">0-1小时/天</span>
                                    <span style="color: #667eea; font-weight: 500;">45%</span>
                                </div>
                                <div style="width: 100%; height: 6px; background: #f8f9fa; border-radius: 3px;">
                                    <div style="width: 45%; height: 100%; background: #667eea; border-radius: 3px;"></div>
                                </div>
                            </div>
                            <div style="margin-bottom: 15px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span style="color: #6c757d; font-size: 0.9rem;">1-2小时/天</span>
                                    <span style="color: #28a745; font-weight: 500;">32%</span>
                                </div>
                                <div style="width: 100%; height: 6px; background: #f8f9fa; border-radius: 3px;">
                                    <div style="width: 32%; height: 100%; background: #28a745; border-radius: 3px;"></div>
                                </div>
                            </div>
                            <div style="margin-bottom: 15px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span style="color: #6c757d; font-size: 0.9rem;">2-3小时/天</span>
                                    <span style="color: #ffc107; font-weight: 500;">18%</span>
                                </div>
                                <div style="width: 100%; height: 6px; background: #f8f9fa; border-radius: 3px;">
                                    <div style="width: 18%; height: 100%; background: #ffc107; border-radius: 3px;"></div>
                                </div>
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span style="color: #6c757d; font-size: 0.9rem;">3小时以上/天</span>
                                    <span style="color: #dc3545; font-weight: 500;">5%</span>
                                </div>
                                <div style="width: 100%; height: 6px; background: #f8f9fa; border-radius: 3px;">
                                    <div style="width: 5%; height: 100%; background: #dc3545; border-radius: 3px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 收益分析 -->
                <div style="margin-bottom: 30px;">
                    <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-chart-pie" style="color: #6f42c1;"></i>
                        收益分析
                    </h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="background: white; border: 1px solid #e9ecef; border-radius: 10px; padding: 20px;">
                            <h5 style="color: #333; margin-bottom: 15px; font-size: 1rem;">月度收益趋势</h5>
                            <div style="text-align: center; color: #6c757d; margin: 30px 0;">
                                <i class="fas fa-chart-line" style="font-size: 3rem; margin-bottom: 15px; opacity: 0.3;"></i>
                                <div style="font-size: 0.9rem;">收益呈上升趋势</div>
                                <div style="font-size: 1.2rem; color: #28a745; font-weight: 600; margin-top: 10px;">+28.5%</div>
                            </div>
                            <div style="background: #f8f9fa; border-radius: 6px; padding: 15px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span style="color: #6c757d; font-size: 0.85rem;">上月收益</span>
                                    <span style="color: #333; font-weight: 500;">¥12,200</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span style="color: #6c757d; font-size: 0.85rem;">本月收益</span>
                                    <span style="color: #28a745; font-weight: 600;">¥15,680</span>
                                </div>
                            </div>
                        </div>
                        
                        <div style="background: white; border: 1px solid #e9ecef; border-radius: 10px; padding: 20px;">
                            <h5 style="color: #333; margin-bottom: 15px; font-size: 1rem;">课程类型收益占比</h5>
                            <div style="margin-bottom: 15px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="width: 12px; height: 12px; background: #667eea; border-radius: 2px;"></div>
                                        <span style="color: #6c757d; font-size: 0.9rem;">在线课程</span>
                                    </div>
                                    <span style="color: #333; font-weight: 500;">52%</span>
                                </div>
                                <div style="width: 100%; height: 6px; background: #f8f9fa; border-radius: 3px;">
                                    <div style="width: 52%; height: 100%; background: #667eea; border-radius: 3px;"></div>
                                </div>
                            </div>
                            <div style="margin-bottom: 15px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="width: 12px; height: 12px; background: #28a745; border-radius: 2px;"></div>
                                        <span style="color: #6c757d; font-size: 0.9rem;">直播课程</span>
                                    </div>
                                    <span style="color: #333; font-weight: 500;">28%</span>
                                </div>
                                <div style="width: 100%; height: 6px; background: #f8f9fa; border-radius: 3px;">
                                    <div style="width: 28%; height: 100%; background: #28a745; border-radius: 3px;"></div>
                                </div>
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="width: 12px; height: 12px; background: #ffc107; border-radius: 2px;"></div>
                                        <span style="color: #6c757d; font-size: 0.9rem;">实操培训</span>
                                    </div>
                                    <span style="color: #333; font-weight: 500;">20%</span>
                                </div>
                                <div style="width: 100%; height: 6px; background: #f8f9fa; border-radius: 3px;">
                                    <div style="width: 20%; height: 100%; background: #ffc107; border-radius: 3px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 改进建议 -->
                <div>
                    <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-lightbulb" style="color: #ffc107;"></i>
                        改进建议
                    </h4>
                    <div style="background: #f8f9fa; border-radius: 10px; padding: 20px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
                            <div style="background: white; border-left: 4px solid #28a745; border-radius: 6px; padding: 15px;">
                                <div style="color: #28a745; font-weight: 600; margin-bottom: 8px;">
                                    <i class="fas fa-thumbs-up"></i> 优势保持
                                </div>
                                <div style="color: #6c757d; font-size: 0.9rem; line-height: 1.5;">
                                    "空压机维修"和"PLC编程"课程表现优异，学员反馈良好，建议继续优化内容深度。
                                </div>
                            </div>
                            <div style="background: white; border-left: 4px solid #ffc107; border-radius: 6px; padding: 15px;">
                                <div style="color: #ffc107; font-weight: 600; margin-bottom: 8px;">
                                    <i class="fas fa-exclamation-triangle"></i> 需要关注
                                </div>
                                <div style="color: #6c757d; font-size: 0.9rem; line-height: 1.5;">
                                    "制冷设备维护"课程完成率偏低，建议调整课程难度或增加互动环节。
                                </div>
                            </div>
                            <div style="background: white; border-left: 4px solid #17a2b8; border-radius: 6px; padding: 15px;">
                                <div style="color: #17a2b8; font-weight: 600; margin-bottom: 8px;">
                                    <i class="fas fa-rocket"></i> 发展机会
                                </div>
                                <div style="color: #6c757d; font-size: 0.9rem; line-height: 1.5;">
                                    可考虑开设"工业4.0"、"智能制造"等新兴技术课程，市场需求较大。
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
    // ======== 调试工单相关函数 ========
    
    // 调试工单数据
    const debugOrderData = {
        'DO20240601001': {
            customer: '智能制造公司',
            contact: '刘工',
            phone: '138-0001-0001',
            equipment: 'PLC控制系统',
            model: 'S7-1500',
            debugType: '生产线自动化程序调试',
            address: '上海市浦东新区张江高科技园区',
            createTime: '2024-06-01 11:00',
            status: '待调试'
        },
        'DO20240531006': {
            customer: '精密仪器厂',
            contact: '陈总',
            phone: '139-0002-0002',
            equipment: '变频器',
            model: 'ABB-ACS880',
            debugType: '电机控制参数优化调试',
            address: '北京市朝阳区科技园区',
            createTime: '2024-05-31 15:30',
            status: '调试中'
        },
        'DO20240530009': {
            customer: '自动化设备厂',
            contact: '王工',
            phone: '136-0003-0003',
            equipment: '传感器系统',
            model: 'IFM-IO-Link',
            debugType: '数据采集系统调试验证',
            address: '深圳市南山区高新技术产业园',
            createTime: '2024-05-30 16:45',
            status: '已完成'
        }
    };

    // 调试工单接单弹窗
    function showDebugAccept(orderId) {
        const orderInfo = debugOrderData[orderId];
        if (!orderInfo) return;

        const modal = document.createElement('div');
        modal.className = 'global-modal';
        modal.style.cssText = `
            position: fixed !important; top: 0 !important; left: 0 !important;
            width: 100vw !important; height: 100vh !important;
            background-color: rgba(0,0,0,0.6) !important; display: flex !important;
            justify-content: center !important; align-items: center !important;
            z-index: 999999 !important;
        `;
        
        modal.innerHTML = `
            <div style="background: white; border-radius: 12px; width: 90%; max-width: 600px; max-height: 90vh; overflow-y: auto; position: relative;">
                <div style="padding: 20px 25px; border-bottom: 1px solid #e9ecef; display: flex; justify-content: space-between; align-items: center;">
                    <h3 style="margin: 0; color: #333; font-size: 1.3rem; display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-wrench" style="color: #667eea;"></i>
                        接受调试工单
                    </h3>
                    <button onclick="closeDebugModal()" style="background: none; border: none; font-size: 1.5rem; color: #6c757d; cursor: pointer;">×</button>
                </div>
                
                <div style="padding: 25px;">
                    <form id="debugAcceptForm" onsubmit="handleDebugSubmit(event, 'accept', '${orderId}')">
                        <!-- 工单信息 -->
                        <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                            <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem;">
                                <i class="fas fa-info-circle" style="color: #17a2b8;"></i> 工单信息
                            </h4>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                <div><strong>工单编号：</strong>#${orderId}</div>
                                <div><strong>客户：</strong>${orderInfo.customer}</div>
                                <div><strong>设备：</strong>${orderInfo.equipment}</div>
                                <div><strong>型号：</strong>${orderInfo.model}</div>
                                <div style="grid-column: 1/-1;"><strong>调试内容：</strong>${orderInfo.debugType}</div>
                                <div style="grid-column: 1/-1;"><strong>服务地址：</strong>${orderInfo.address}</div>
                            </div>
                        </div>

                        <!-- 调试安排 -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem;">
                                <i class="fas fa-calendar-alt" style="color: #ffc107;"></i> 调试安排
                            </h4>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">预计开始时间 <span style="color: #dc3545;">*</span></label>
                                    <input name="startTime" type="datetime-local" required 
                                           style="width: 100%; padding: 12px; border: 1px solid #e0e3ea; border-radius: 6px;">
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">预计完成时间 <span style="color: #dc3545;">*</span></label>
                                    <input name="endTime" type="datetime-local" required
                                           style="width: 100%; padding: 12px; border: 1px solid #e0e3ea; border-radius: 6px;">
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">调试工程师 <span style="color: #dc3545;">*</span></label>
                                    <select name="engineer" required style="width: 100%; padding: 12px; border: 1px solid #e0e3ea; border-radius: 6px;">
                                        <option value="">请选择调试工程师</option>
                                        <option value="zhang">张工程师 - PLC专家</option>
                                        <option value="li">李工程师 - 电气自动化</option>
                                        <option value="wang">王工程师 - 传感器系统</option>
                                        <option value="zhao">赵工程师 - 变频控制</option>
                                    </select>
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">联系电话</label>
                                    <input name="contactPhone" type="tel" placeholder="工程师联系电话"
                                           style="width: 100%; padding: 12px; border: 1px solid #e0e3ea; border-radius: 6px;">
                                </div>
                            </div>
                        </div>

                        <!-- 调试要求 -->
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">特殊要求说明</label>
                            <textarea name="requirements" placeholder="请描述调试的特殊要求、注意事项等..."
                                      style="width: 100%; padding: 12px; border: 1px solid #e0e3ea; border-radius: 6px; min-height: 80px; resize: vertical;"></textarea>
                        </div>

                        <!-- 所需工具清单 -->
                        <div style="margin-bottom: 25px;">
                            <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">所需工具和设备</label>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox" name="tools" value="multimeter"> 万用表
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox" name="tools" value="oscilloscope"> 示波器
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox" name="tools" value="laptop"> 编程设备
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox" name="tools" value="cables"> 连接线缆
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox" name="tools" value="software"> 调试软件
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox" name="tools" value="other"> 其他工具
                                </label>
                            </div>
                        </div>

                        <!-- 提交按钮 -->
                        <div style="display: flex; gap: 10px; justify-content: flex-end;">
                            <button type="button" onclick="closeDebugModal()" 
                                    style="padding: 12px 20px; border: 1px solid #e0e3ea; background: white; color: #6c757d; border-radius: 6px; cursor: pointer;">
                                取消
                            </button>
                            <button type="submit" 
                                    style="padding: 12px 20px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500;">
                                确认接单
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        `;
        
        document.body.appendChild(modal);
        
        // 点击背景关闭
        modal.addEventListener('click', function(e) {
            if (e.target === modal) closeDebugModal();
        });
        
        // ESC键关闭
                 document.addEventListener('keydown', function(e) {
             if (e.key === 'Escape') closeDebugModal();
         });
     }

     // 调试工单进度更新弹窗
     function showDebugProgress(orderId) {
         const orderInfo = debugOrderData[orderId];
         if (!orderInfo) return;

         const modal = document.createElement('div');
         modal.className = 'global-modal';
         modal.style.cssText = `
             position: fixed !important; top: 0 !important; left: 0 !important;
             width: 100vw !important; height: 100vh !important;
             background-color: rgba(0,0,0,0.6) !important; display: flex !important;
             justify-content: center !important; align-items: center !important;
             z-index: 999999 !important;
         `;
         
         modal.innerHTML = `
             <div style="background: white; border-radius: 12px; width: 90%; max-width: 500px; max-height: 90vh; overflow-y: auto;">
                 <div style="padding: 20px 25px; border-bottom: 1px solid #e9ecef; display: flex; justify-content: space-between; align-items: center;">
                     <h3 style="margin: 0; color: #333; font-size: 1.3rem; display: flex; align-items: center; gap: 10px;">
                         <i class="fas fa-tasks" style="color: #17a2b8;"></i>
                         更新调试进度
                     </h3>
                     <button onclick="closeDebugModal()" style="background: none; border: none; font-size: 1.5rem; color: #6c757d; cursor: pointer;">×</button>
                 </div>
                 
                 <div style="padding: 25px;">
                     <form onsubmit="handleDebugSubmit(event, 'progress', '${orderId}')">
                         <div style="background: #f8f9fa; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                             <strong>工单：</strong>#${orderId} - ${orderInfo.customer}
                         </div>

                         <div style="margin-bottom: 20px;">
                             <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">当前进度状态 <span style="color: #dc3545;">*</span></label>
                             <select name="progressStatus" required style="width: 100%; padding: 12px; border: 1px solid #e0e3ea; border-radius: 6px;">
                                 <option value="">请选择进度状态</option>
                                 <option value="prepare">准备阶段</option>
                                 <option value="debug">正在调试</option>
                                 <option value="test">测试验证</option>
                                 <option value="optimize">参数优化</option>
                                 <option value="complete">调试完成</option>
                             </select>
                         </div>

                         <div style="margin-bottom: 20px;">
                             <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">进度说明</label>
                             <textarea name="progressDescription" placeholder="请描述当前调试进度、遇到的问题或完成的工作..."
                                       style="width: 100%; padding: 12px; border: 1px solid #e0e3ea; border-radius: 6px; min-height: 100px; resize: vertical;"></textarea>
                         </div>

                         <div style="margin-bottom: 25px;">
                             <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">现场照片</label>
                             <div onclick="uploadDebugPhoto(this)" style="border: 2px dashed #e9ecef; border-radius: 8px; padding: 30px; text-align: center; cursor: pointer; transition: all 0.3s;">
                                 <i class="fas fa-camera" style="font-size: 2rem; color: #6c757d; margin-bottom: 10px;"></i>
                                 <div style="color: #6c757d; margin-bottom: 5px;">点击上传现场照片</div>
                                 <div style="font-size: 0.85rem; color: #adb5bd;">支持 JPG、PNG 格式，最多5张</div>
                             </div>
                         </div>

                         <div style="display: flex; gap: 10px; justify-content: flex-end;">
                             <button type="button" onclick="closeDebugModal()" style="padding: 12px 20px; border: 1px solid #e0e3ea; background: white; color: #6c757d; border-radius: 6px; cursor: pointer;">取消</button>
                             <button type="submit" style="padding: 12px 20px; background: #17a2b8; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500;">更新进度</button>
                         </div>
                     </form>
                 </div>
             </div>
         `;
         
         document.body.appendChild(modal);
         modal.addEventListener('click', function(e) {
             if (e.target === modal) closeDebugModal();
         });
     }

     // 调试报告查看弹窗
     function showDebugReport(orderId) {
         const orderInfo = debugOrderData[orderId];
         if (!orderInfo) return;

         const modal = document.createElement('div');
         modal.className = 'global-modal';
         modal.style.cssText = `
             position: fixed !important; top: 0 !important; left: 0 !important;
             width: 100vw !important; height: 100vh !important;
             background-color: rgba(0,0,0,0.6) !important; display: flex !important;
             justify-content: center !important; align-items: center !important;
             z-index: 999999 !important;
         `;
         
         modal.innerHTML = `
             <div style="background: white; border-radius: 12px; width: 95%; max-width: 800px; max-height: 90vh; overflow-y: auto;">
                 <div style="padding: 20px 25px; border-bottom: 1px solid #e9ecef; display: flex; justify-content: space-between; align-items: center;">
                     <h3 style="margin: 0; color: #333; font-size: 1.3rem; display: flex; align-items: center; gap: 10px;">
                         <i class="fas fa-file-alt" style="color: #28a745;"></i>
                         调试完成报告
                     </h3>
                     <div style="display: flex; gap: 10px;">
                         <button onclick="exportDebugReport('${orderId}')" style="padding: 8px 15px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer;">
                             <i class="fas fa-download"></i> 导出PDF
                         </button>
                         <button onclick="closeDebugModal()" style="background: none; border: none; font-size: 1.5rem; color: #6c757d; cursor: pointer;">×</button>
                     </div>
                 </div>
                 
                 <div style="padding: 25px;">
                     <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                         <div style="background: #f8f9fa; border-radius: 8px; padding: 20px;">
                             <h4 style="color: #333; margin-bottom: 15px;">基本信息</h4>
                             <div style="line-height: 1.8;">
                                 <div><strong>工单编号：</strong>#${orderId}</div>
                                 <div><strong>客户：</strong>${orderInfo.customer}</div>
                                 <div><strong>设备：</strong>${orderInfo.equipment} ${orderInfo.model}</div>
                                 <div><strong>完成时间：</strong>2024-06-02 16:30</div>
                             </div>
                         </div>
                         <div style="background: #f8f9fa; border-radius: 8px; padding: 20px;">
                             <h4 style="color: #333; margin-bottom: 15px;">调试结果</h4>
                             <div style="line-height: 1.8;">
                                 <div><strong>状态：</strong><span style="color: #28a745;">✅ 调试成功</span></div>
                                 <div><strong>耗时：</strong>4.5小时</div>
                                 <div><strong>工程师：</strong>张工程师</div>
                                 <div><strong>验收：</strong>客户已确认</div>
                             </div>
                         </div>
                     </div>

                     <div style="margin-bottom: 25px;">
                         <h4 style="color: #333; margin-bottom: 15px;">调试内容详情</h4>
                         <div style="background: white; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px;">
                             <div style="margin-bottom: 15px;">
                                 <strong style="color: #17a2b8;">1. 问题诊断</strong>
                                 <p style="margin: 8px 0; line-height: 1.6;">检测发现PLC程序逻辑存在缺陷，部分传感器信号处理不当，导致生产线自动化程序运行不稳定。</p>
                             </div>
                             <div style="margin-bottom: 15px;">
                                 <strong style="color: #17a2b8;">2. 解决方案</strong>
                                 <p style="margin: 8px 0; line-height: 1.6;">重新编写程序逻辑，优化传感器信号滤波算法，增加异常处理机制，提升系统稳定性。</p>
                             </div>
                             <div style="margin-bottom: 15px;">
                                 <strong style="color: #17a2b8;">3. 测试验证</strong>
                                 <p style="margin: 8px 0; line-height: 1.6;">进行连续8小时运行测试，系统运行稳定，各项参数正常，生产效率提升15%。</p>
                             </div>
                             <div>
                                 <strong style="color: #17a2b8;">4. 优化建议</strong>
                                 <p style="margin: 8px 0; line-height: 1.6;">建议定期检查传感器状态，建立预防性维护计划，可进一步提升设备可靠性。</p>
                             </div>
                         </div>
                     </div>

                     <div style="margin-bottom: 25px;">
                         <h4 style="color: #333; margin-bottom: 15px;">现场照片</h4>
                         <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                             <div style="background: #f8f9fa; border-radius: 8px; padding: 15px; text-align: center;">
                                 <i class="fas fa-image" style="font-size: 2rem; color: #6c757d; margin-bottom: 8px;"></i>
                                 <div style="font-size: 0.85rem; color: #6c757d;">调试前现场</div>
                             </div>
                             <div style="background: #f8f9fa; border-radius: 8px; padding: 15px; text-align: center;">
                                 <i class="fas fa-image" style="font-size: 2rem; color: #6c757d; margin-bottom: 8px;"></i>
                                 <div style="font-size: 0.85rem; color: #6c757d;">程序调试中</div>
                             </div>
                             <div style="background: #f8f9fa; border-radius: 8px; padding: 15px; text-align: center;">
                                 <i class="fas fa-image" style="font-size: 2rem; color: #6c757d; margin-bottom: 8px;"></i>
                                 <div style="font-size: 0.85rem; color: #6c757d;">测试验证</div>
                             </div>
                             <div style="background: #f8f9fa; border-radius: 8px; padding: 15px; text-align: center;">
                                 <i class="fas fa-image" style="font-size: 2rem; color: #6c757d; margin-bottom: 8px;"></i>
                                 <div style="font-size: 0.85rem; color: #6c757d;">完成后现场</div>
                             </div>
                         </div>
                     </div>

                     <div style="background: #d4edda; border: 1px solid #c3e6cb; border-radius: 8px; padding: 20px;">
                         <h4 style="color: #155724; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                             <i class="fas fa-check-circle"></i> 客户验收确认
                         </h4>
                         <p style="color: #155724; margin: 0; line-height: 1.6;">客户已确认调试效果满意，设备运行稳定，生产效率得到显著提升。感谢专业的技术服务！</p>
                     </div>
                 </div>
             </div>
         `;
         
         document.body.appendChild(modal);
                   modal.addEventListener('click', function(e) {
              if (e.target === modal) closeDebugModal();
          });
      }

      // 调试工单详情查看弹窗
      function showDebugDetail(orderId) {
          const orderInfo = debugOrderData[orderId];
          if (!orderInfo) return;

          const modal = document.createElement('div');
          modal.className = 'global-modal';
          modal.style.cssText = `
              position: fixed !important; top: 0 !important; left: 0 !important;
              width: 100vw !important; height: 100vh !important;
              background-color: rgba(0,0,0,0.6) !important; display: flex !important;
              justify-content: center !important; align-items: center !important;
              z-index: 999999 !important;
          `;
          
          modal.innerHTML = `
              <div style="background: white; border-radius: 12px; width: 90%; max-width: 700px; max-height: 90vh; overflow-y: auto;">
                  <div style="padding: 20px 25px; border-bottom: 1px solid #e9ecef; display: flex; justify-content: space-between; align-items: center;">
                      <h3 style="margin: 0; color: #333; font-size: 1.3rem; display: flex; align-items: center; gap: 10px;">
                          <i class="fas fa-info-circle" style="color: #667eea;"></i>
                          调试工单详情
                      </h3>
                      <div style="display: flex; gap: 10px;">
                          <button onclick="exportDebugOrder('${orderId}')" style="padding: 8px 15px; background: #17a2b8; color: white; border: none; border-radius: 6px; cursor: pointer;">
                              <i class="fas fa-download"></i> 导出
                          </button>
                          <button onclick="closeDebugModal()" style="background: none; border: none; font-size: 1.5rem; color: #6c757d; cursor: pointer;">×</button>
                      </div>
                  </div>
                  
                  <div style="padding: 25px;">
                      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                          <div style="background: #f8f9fa; border-radius: 8px; padding: 20px;">
                              <h4 style="color: #333; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                                  <i class="fas fa-building" style="color: #667eea;"></i>
                                  客户信息
                              </h4>
                              <div style="line-height: 1.8;">
                                  <div><strong>公司名称：</strong>${orderInfo.customer}</div>
                                  <div><strong>联系人：</strong>${orderInfo.contact}</div>
                                  <div><strong>联系电话：</strong>${orderInfo.phone}</div>
                                  <div><strong>服务地址：</strong>${orderInfo.address}</div>
                              </div>
                          </div>
                          <div style="background: #f8f9fa; border-radius: 8px; padding: 20px;">
                              <h4 style="color: #333; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                                  <i class="fas fa-cogs" style="color: #28a745;"></i>
                                  设备信息
                              </h4>
                              <div style="line-height: 1.8;">
                                  <div><strong>设备类型：</strong>${orderInfo.equipment}</div>
                                  <div><strong>设备型号：</strong>${orderInfo.model}</div>
                                  <div><strong>调试内容：</strong>${orderInfo.debugType}</div>
                                  <div><strong>重要程度：</strong><span style="color: #dc3545;">高</span></div>
                              </div>
                          </div>
                      </div>

                      <div style="margin-bottom: 25px;">
                          <h4 style="color: #333; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                              <i class="fas fa-file-alt" style="color: #ffc107;"></i>
                              工单详情
                          </h4>
                          <div style="background: white; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px;">
                              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                                  <div><strong>工单编号：</strong>#${orderId}</div>
                                  <div><strong>创建时间：</strong>${orderInfo.createTime}</div>
                                  <div><strong>当前状态：</strong><span style="padding: 3px 8px; border-radius: 12px; font-size: 0.85rem; background: #d1ecf1; color: #0c5460;">${orderInfo.status}</span></div>
                                  <div><strong>预计耗时：</strong>4-6小时</div>
                              </div>
                              <div style="border-top: 1px solid #f0f0f0; padding-top: 15px;">
                                  <strong>调试要求：</strong>
                                  <p style="margin: 8px 0; line-height: 1.6; color: #6c757d;">
                                      需要对生产线PLC控制系统进行全面调试，确保自动化程序稳定运行。包括传感器信号检测、逻辑控制优化、异常处理完善等。要求调试完成后系统能够连续稳定运行24小时以上。
                                  </p>
                              </div>
                          </div>
                      </div>

                      <div style="margin-bottom: 25px;">
                          <h4 style="color: #333; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                              <i class="fas fa-history" style="color: #17a2b8;"></i>
                              服务记录
                          </h4>
                          <div style="background: white; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px;">
                              <div style="display: flex; gap: 15px; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #f0f0f0;">
                                  <div style="width: 40px; height: 40px; background: #667eea; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.9rem; flex-shrink: 0;">1</div>
                                  <div>
                                      <div style="font-weight: 500; color: #333; margin-bottom: 5px;">工单创建</div>
                                      <div style="color: #6c757d; font-size: 0.9rem;">${orderInfo.createTime} - 客户提交调试需求</div>
                                  </div>
                              </div>
                              <div style="display: flex; gap: 15px; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #f0f0f0;">
                                  <div style="width: 40px; height: 40px; background: #28a745; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.9rem; flex-shrink: 0;">2</div>
                                  <div>
                                      <div style="font-weight: 500; color: #333; margin-bottom: 5px;">工程师分配</div>
                                      <div style="color: #6c757d; font-size: 0.9rem;">2024-06-01 12:30 - 张工程师接单</div>
                                  </div>
                              </div>
                              <div style="display: flex; gap: 15px;">
                                  <div style="width: 40px; height: 40px; background: #6c757d; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.9rem; flex-shrink: 0;">3</div>
                                  <div>
                                      <div style="font-weight: 500; color: #333; margin-bottom: 5px;">等待开始调试</div>
                                      <div style="color: #6c757d; font-size: 0.9rem;">预计开始时间：2024-06-02 09:00</div>
                                  </div>
                              </div>
                          </div>
                      </div>

                      <div style="background: #f8f9fa; border-radius: 8px; padding: 20px;">
                          <h4 style="color: #333; margin-bottom: 15px;">联系方式</h4>
                          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                              <div>
                                  <strong>客户联系人：</strong>${orderInfo.contact}
                                  <div style="margin-top: 5px;">
                                      <a href="tel:${orderInfo.phone}" style="color: #667eea; text-decoration: none;">
                                          <i class="fas fa-phone"></i> ${orderInfo.phone}
                                      </a>
                                  </div>
                              </div>
                              <div>
                                  <strong>服务工程师：</strong>张工程师
                                  <div style="margin-top: 5px;">
                                      <a href="tel:138-8888-8888" style="color: #667eea; text-decoration: none;">
                                          <i class="fas fa-phone"></i> 138-8888-8888
                                      </a>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          `;
          
          document.body.appendChild(modal);
          modal.addEventListener('click', function(e) {
              if (e.target === modal) closeDebugModal();
          });
      }

      // 关闭调试工单弹窗
      function closeDebugModal() {
          const modal = document.querySelector('.global-modal');
          if (modal) modal.remove();
      }

      // 处理调试工单表单提交
      function handleDebugSubmit(event, action, orderId) {
          event.preventDefault();
          const form = event.target;
          
          // 验证表单
          if (!form.checkValidity()) {
              form.reportValidity();
              return;
          }
          
          // 显示提交中状态
          const submitBtn = form.querySelector('button[type="submit"]');
          const originalText = submitBtn.innerHTML;
          submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 提交中...';
          submitBtn.disabled = true;
          
          setTimeout(() => {
              let message = '';
              let details = '';
              
              switch(action) {
                  case 'accept':
                      const engineer = form.engineer.value;
                      const startTime = form.startTime.value;
                      message = `✅ 调试工单 ${orderId} 接单成功！`;
                      details = `调试工程师：${form.querySelector('select[name="engineer"] option:checked').text}\n预计开始时间：${startTime}\n客户将收到短信通知`;
                      break;
                  case 'progress':
                      const progressStatus = form.progressStatus.value;
                      message = `✅ 调试工单 ${orderId} 进度更新成功！`;
                      details = `当前进度：${form.querySelector('select[name="progressStatus"] option:checked').text}\n进度信息已同步给客户`;
                      break;
              }
              
              // 创建成功提示弹窗
              const successModal = document.createElement('div');
              successModal.style.cssText = `
                  position: fixed !important; top: 0 !important; left: 0 !important;
                  width: 100vw !important; height: 100vh !important;
                  background-color: rgba(0,0,0,0.6) !important; display: flex !important;
                  justify-content: center !important; align-items: center !important;
                  z-index: 9999999 !important;
              `;
              successModal.innerHTML = `
                  <div style="background: white; border-radius: 12px; padding: 30px; max-width: 400px; width: 90%; text-align: center; box-shadow: 0 8px 32px rgba(0,0,0,0.2);">
                      <div style="color: #28a745; font-size: 3rem; margin-bottom: 15px;">
                          <i class="fas fa-check-circle"></i>
                      </div>
                      <h3 style="color: #333; margin-bottom: 15px; font-size: 1.2rem;">${message}</h3>
                      <p style="color: #6c757d; line-height: 1.6; margin-bottom: 20px; white-space: pre-line;">${details}</p>
                      <button onclick="this.closest('div[style*=\"fixed\"]').remove()" style="background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: 500;">
                          确定
                      </button>
                  </div>
              `;
              document.body.appendChild(successModal);
              
              closeDebugModal();
              
              // 模拟更新页面状态
              if (action === 'accept') {
                  updateDebugOrderStatus(orderId, '调试中');
              }
          }, 1500);
      }

      // 更新调试工单状态
      function updateDebugOrderStatus(orderId, newStatus) {
          const rows = document.querySelectorAll('tr');
          for (let row of rows) {
              const orderSpan = row.querySelector(`span:contains("#${orderId}")`);
              if (orderSpan && orderSpan.textContent.includes(orderId)) {
                  const statusCell = row.querySelector('td:nth-child(5) span');
                  if (statusCell) {
                      statusCell.textContent = newStatus;
                      statusCell.style.background = '#d1ecf1';
                      statusCell.style.color = '#0c5460';
                  }
                  break;
              }
          }
      }

      // 上传调试照片
      function uploadDebugPhoto(element) {
          const fileInput = document.createElement('input');
          fileInput.type = 'file';
          fileInput.accept = '.jpg,.jpeg,.png';
          fileInput.multiple = true;
          fileInput.onchange = function(e) {
              const files = Array.from(e.target.files);
              if (files.length > 0) {
                  element.innerHTML = `
                      <i class="fas fa-check-circle" style="font-size: 1.5rem; color: #28a745; margin-bottom: 10px;"></i>
                      <div style="color: #28a745; margin-bottom: 5px;">已选择 ${files.length} 张照片</div>
                      <div style="font-size: 0.85rem; color: #6c757d;">点击可重新选择</div>
                  `;
                  element.style.borderColor = '#28a745';
                  element.style.backgroundColor = '#f8fff9';
              }
          };
          fileInput.click();
      }

      // 导出调试工单数据
      function exportDebugData() {
          const currentDate = new Date().toISOString().split('T')[0];
          const toast = document.createElement('div');
          toast.style.cssText = `
              position: fixed; top: 20px; right: 20px; background: #28a745; color: white;
              padding: 15px 20px; border-radius: 8px; z-index: 10000;
              box-shadow: 0 4px 12px rgba(0,0,0,0.2);
          `;
          toast.innerHTML = `
              <i class="fas fa-download"></i> 调试工单数据导出中...
          `;
          document.body.appendChild(toast);
          
          setTimeout(() => {
              toast.innerHTML = `
                  <i class="fas fa-check-circle"></i> 调试工单数据已导出！
              `;
              setTimeout(() => toast.remove(), 2000);
          }, 1500);
          
          console.log('导出调试工单数据:', { date: currentDate, count: 3 });
      }

      // 导出调试报告
      function exportDebugReport(orderId) {
          const orderInfo = debugOrderData[orderId];
          const toast = document.createElement('div');
          toast.style.cssText = `
              position: fixed; top: 20px; right: 20px; background: #17a2b8; color: white;
              padding: 15px 20px; border-radius: 8px; z-index: 10000;
              box-shadow: 0 4px 12px rgba(0,0,0,0.2);
          `;
          toast.innerHTML = `
              <i class="fas fa-file-pdf"></i> 调试报告生成中...
          `;
          document.body.appendChild(toast);
          
          setTimeout(() => {
              toast.innerHTML = `
                  <i class="fas fa-check-circle"></i> 调试报告已导出！
              `;
              setTimeout(() => toast.remove(), 2000);
          }, 1500);
          
          console.log('导出调试报告:', { orderId, customer: orderInfo.customer });
      }

      // 导出调试工单详情
      function exportDebugOrder(orderId) {
          const orderInfo = debugOrderData[orderId];
          const toast = document.createElement('div');
          toast.style.cssText = `
              position: fixed; top: 20px; right: 20px; background: #667eea; color: white;
              padding: 15px 20px; border-radius: 8px; z-index: 10000;
              box-shadow: 0 4px 12px rgba(0,0,0,0.2);
          `;
          toast.innerHTML = `
              <i class="fas fa-download"></i> 工单详情导出中...
          `;
          document.body.appendChild(toast);
          
          setTimeout(() => {
              toast.innerHTML = `
                  <i class="fas fa-check-circle"></i> 工单详情已导出！
              `;
              setTimeout(() => toast.remove(), 2000);
          }, 1500);
          
          console.log('导出工单详情:', { orderId, customer: orderInfo.customer });
      }

      // ======== 调试工单筛选、搜索和分页功能 ========
      
      // 当前分页状态
      let currentDebugPage = 1;
      let debugPageSize = 10;
      let debugTotalRecords = 67;
      let debugFilteredRecords = 67;

      // 筛选调试工单
      function filterDebugOrders() {
          const statusFilter = document.getElementById('debug-status-filter').value;
          const deviceFilter = document.getElementById('debug-device-filter').value;
          const typeFilter = document.getElementById('debug-type-filter').value;
          
          // 显示筛选中提示
          showDebugFilterLoading();
          
          setTimeout(() => {
              // 模拟筛选逻辑
              let filteredCount = debugTotalRecords;
              
              if (statusFilter || deviceFilter || typeFilter) {
                  // 根据筛选条件计算结果数量
                  if (statusFilter === '待调试') filteredCount = 5;
                  else if (statusFilter === '调试中') filteredCount = 3;
                  else if (statusFilter === '已完成') filteredCount = 59;
                  else if (deviceFilter === 'PLC控制系统') filteredCount = 25;
                  else if (deviceFilter === '变频器') filteredCount = 20;
                  else if (deviceFilter === '传感器系统') filteredCount = 15;
                  else if (typeFilter === '程序调试') filteredCount = 30;
                  else if (typeFilter === '参数优化') filteredCount = 20;
                  else filteredCount = Math.floor(Math.random() * 40) + 10;
              }
              
              debugFilteredRecords = filteredCount;
              currentDebugPage = 1;
              
              updateDebugPagination();
              showDebugFilterSuccess(filteredCount);
              
          }, 800);
      }

      // 搜索调试工单
      function searchDebugOrders() {
          const searchInput = document.getElementById('debug-search-input');
          const searchTerm = searchInput.value.trim();
          
          if (!searchTerm) {
              showDebugToast('请输入搜索关键词', 'warning');
              return;
          }
          
          // 显示搜索中提示
          showDebugSearchLoading();
          
          setTimeout(() => {
              // 模拟搜索结果
              let searchResults = 0;
              if (searchTerm.toLowerCase().includes('do')) {
                  searchResults = Math.floor(Math.random() * 10) + 1;
              } else if (searchTerm.includes('2024')) {
                  searchResults = Math.floor(Math.random() * 20) + 5;
              } else {
                  searchResults = Math.floor(Math.random() * 5);
              }
              
              debugFilteredRecords = searchResults;
              currentDebugPage = 1;
              
              updateDebugPagination();
              showDebugSearchSuccess(searchResults, searchTerm);
              
          }, 1000);
      }

      // 跳转到指定页面
      function goToDebugPage(page) {
          const totalPages = Math.ceil(debugFilteredRecords / debugPageSize);
          
          if (page < 1 || page > totalPages) return;
          
          currentDebugPage = page;
          updateDebugPagination();
          
          // 显示页面跳转提示
          showDebugToast(`已跳转到第 ${page} 页`, 'info');
          
          // 滚动到表格顶部
          const tableContainer = document.querySelector('table').closest('div');
          tableContainer.scrollIntoView({ behavior: 'smooth' });
      }

      // 更新分页信息
      function updateDebugPagination() {
          const totalPages = Math.ceil(debugFilteredRecords / debugPageSize);
          
          // 更新分页信息文本
          document.getElementById('debug-total-count').textContent = debugFilteredRecords;
          document.getElementById('debug-current-page').textContent = currentDebugPage;
          document.getElementById('debug-total-pages').textContent = totalPages;
          
          // 更新分页按钮
          updateDebugPaginationButtons(totalPages);
      }

      // 更新分页按钮
      function updateDebugPaginationButtons(totalPages) {
          const buttonsContainer = document.getElementById('debug-pagination-buttons');
          
          let buttonsHTML = '';
          
          // 上一页按钮
          if (currentDebugPage > 1) {
              buttonsHTML += `<button onclick="goToDebugPage(${currentDebugPage - 1})" style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;"><i class="fas fa-angle-left"></i> 上一页</button>`;
          } else {
              buttonsHTML += `<button style="padding: 8px 12px; border: 1px solid #e0e3ea; background: #f8f9fa; color: #6c757d; border-radius: 6px; cursor: not-allowed;" disabled><i class="fas fa-angle-left"></i> 上一页</button>`;
          }
          
          // 页码按钮
          for (let i = 1; i <= Math.min(totalPages, 7); i++) {
              if (i === currentDebugPage) {
                  buttonsHTML += `<button onclick="goToDebugPage(${i})" style="padding: 8px 12px; border: 1px solid #667eea; background: #667eea; color: white; border-radius: 6px; cursor: pointer;">${i}</button>`;
              } else {
                  buttonsHTML += `<button onclick="goToDebugPage(${i})" style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;">${i}</button>`;
              }
          }
          
          if (totalPages > 7) {
              buttonsHTML += `<span style="padding: 8px 12px; color: #6c757d;">...</span>`;
              buttonsHTML += `<button onclick="goToDebugPage(${totalPages})" style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;">${totalPages}</button>`;
          }
          
          // 下一页按钮
          if (currentDebugPage < totalPages) {
              buttonsHTML += `<button onclick="goToDebugPage(${currentDebugPage + 1})" style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;">下一页 <i class="fas fa-angle-right"></i></button>`;
          } else {
              buttonsHTML += `<button style="padding: 8px 12px; border: 1px solid #e0e3ea; background: #f8f9fa; color: #6c757d; border-radius: 6px; cursor: not-allowed;" disabled>下一页 <i class="fas fa-angle-right"></i></button>`;
          }
          
          buttonsContainer.innerHTML = buttonsHTML;
      }

      // 显示筛选加载状态
      function showDebugFilterLoading() {
          showDebugToast('<i class="fas fa-spinner fa-spin"></i> 正在筛选调试工单...', 'info');
      }

      // 显示筛选成功
      function showDebugFilterSuccess(count) {
          showDebugToast(`✅ 筛选完成，找到 ${count} 条调试工单`, 'success');
      }

      // 显示搜索加载状态
      function showDebugSearchLoading() {
          showDebugToast('<i class="fas fa-spinner fa-spin"></i> 正在搜索调试工单...', 'info');
      }

      // 显示搜索成功
      function showDebugSearchSuccess(count, term) {
          if (count > 0) {
              showDebugToast(`✅ 搜索完成，找到 ${count} 条包含"${term}"的调试工单`, 'success');
          } else {
              showDebugToast(`❌ 未找到包含"${term}"的调试工单`, 'warning');
          }
      }

             // 显示调试工单Toast提示
       function showDebugToast(message, type = 'info') {
           const toast = document.createElement('div');
           
           let bgColor = '#17a2b8';
           if (type === 'success') bgColor = '#28a745';
           else if (type === 'warning') bgColor = '#ffc107';
           else if (type === 'error') bgColor = '#dc3545';
           
           toast.style.cssText = `
               position: fixed; top: 20px; right: 20px; background: ${bgColor}; color: white;
               padding: 15px 20px; border-radius: 8px; z-index: 10000;
               box-shadow: 0 4px 12px rgba(0,0,0,0.2); max-width: 400px;
               font-size: 0.9rem; line-height: 1.4;
           `;
           toast.innerHTML = message;
           document.body.appendChild(toast);
           
           setTimeout(() => toast.remove(), 3000);
       }

       // ======== 协助记录详情和报告功能 ========
       
       // 协助记录数据
       const assistRecordData = {
           'AS20240530015': {
               title: 'PLC程序优化协助',
               description: '西门子S7-1200程序调试',
               type: '远程协助',
               customer: '王程序员',
               company: '广州电子有限公司',
               income: '¥300',
               rating: '★★★★★ (5.0分)',
               duration: '2小时15分钟',
               completedTime: '2024-05-30 16:45',
               problem: '西门子S7-1200 PLC程序调试，需要优化程序逻辑和参数设置。',
               solution: '通过远程协助，帮助用户优化了PLC程序逻辑，调整了关键参数，解决了程序运行中的问题。',
               feedback: '专家技术很专业，解决问题很及时，非常感谢！'
           },
           'AS20240529022': {
               title: '变频器参数设置协助',
               description: 'ABB变频器调试参数优化',
               type: '视频协助',
               customer: '赵技术员',
               company: '深圳制造科技',
               income: '¥180',
               rating: '★★★★☆ (4.5分)',
               duration: '1小时30分钟',
               completedTime: '2024-05-29 14:20',
               problem: 'ABB变频器参数设置不当，需要专业指导进行参数优化。',
               solution: '通过视频协助，指导用户正确设置变频器参数，优化运行效果。',
               feedback: '解决了我们的问题，服务很专业！'
           },
           'AS20240528033': {
               title: '设备安装指导协助',
               description: '中央空调新风系统安装',
               type: '语音协助',
               customer: '刘安装工',
               company: '杭州建筑工程',
               income: '¥250',
               rating: '★★★★★ (5.0分)',
               duration: '3小时20分钟',
               completedTime: '2024-05-28 11:45',
               problem: '中央空调新风系统安装过程中遇到技术难题，需要专业指导。',
               solution: '通过语音协助，详细指导安装步骤和注意事项，确保安装质量。',
               feedback: '指导很详细，安装很顺利，非常感谢！'
           },
           'AS20240527044': {
               title: '数控机床故障诊断',
               description: 'FANUC系统报警处理',
               type: '远程协助',
               customer: '陈师傅',
               company: '苏州精密机械',
               income: '¥400',
               rating: '★★★★☆ (4.8分)',
               duration: '1小时45分钟',
               completedTime: '2024-05-27 16:30',
               problem: 'FANUC数控系统出现报警，机床无法正常运行，需要专业诊断。',
               solution: '通过远程协助，快速定位故障原因，指导排除故障，恢复机床正常运行。',
               feedback: '故障解决很快，技术水平很高！'
           }
       };

       // 显示协助详情
       function showAssistDetail(assistId) {
           const assistInfo = assistRecordData[assistId];
           if (!assistInfo) return;
           
           const modal = document.createElement('div');
           modal.style.cssText = `
               position: fixed !important; top: 0 !important; left: 0 !important;
               width: 100vw !important; height: 100vh !important;
               background-color: rgba(0,0,0,0.6) !important; display: flex !important;
               justify-content: center !important; align-items: center !important;
               z-index: 9999999 !important;
           `;
           modal.className = 'global-modal';
           
           modal.innerHTML = `
               <div style="background: white; border-radius: 12px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto; box-shadow: 0 8px 32px rgba(0,0,0,0.2);">
                   <div style="padding: 25px 30px; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center;">
                       <h3 style="color: #333; margin: 0; font-size: 1.3rem; display: flex; align-items: center; gap: 10px;">
                           <i class="fas fa-info-circle" style="color: #667eea;"></i>
                           协助详情
                       </h3>
                       <button onclick="closeAssistModal()" style="background: none; border: none; font-size: 1.5rem; color: #6c757d; cursor: pointer; padding: 5px;">&times;</button>
                   </div>
                   <div style="padding: 25px 30px;">
                       <div style="display: grid; gap: 20px;">
                           <div style="background: #f8f9fa; border-radius: 8px; padding: 20px;">
                               <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem;">基本信息</h4>
                               <div style="display: grid; gap: 12px;">
                                   <div style="display: flex; justify-content: space-between;">
                                       <span style="color: #6c757d; font-weight: 500;">协助编号：</span>
                                       <span style="color: #333; font-weight: 500;">${assistId}</span>
                                   </div>
                                   <div style="display: flex; justify-content: space-between;">
                                       <span style="color: #6c757d; font-weight: 500;">协助标题：</span>
                                       <span style="color: #333; font-weight: 500;">${assistInfo.title}</span>
                                   </div>
                                   <div style="display: flex; justify-content: space-between;">
                                       <span style="color: #6c757d; font-weight: 500;">协助类型：</span>
                                       <span style="color: #333; font-weight: 500;">${assistInfo.type}</span>
                                   </div>
                                   <div style="display: flex; justify-content: space-between;">
                                       <span style="color: #6c757d; font-weight: 500;">协助对象：</span>
                                       <span style="color: #333; font-weight: 500;">${assistInfo.customer}（${assistInfo.company}）</span>
                                   </div>
                                   <div style="display: flex; justify-content: space-between;">
                                       <span style="color: #6c757d; font-weight: 500;">协助收入：</span>
                                       <span style="color: #28a745; font-weight: 600;">${assistInfo.income}</span>
                                   </div>
                                   <div style="display: flex; justify-content: space-between;">
                                       <span style="color: #6c757d; font-weight: 500;">用户评分：</span>
                                       <span style="color: #ffc107; font-weight: 500;">${assistInfo.rating}</span>
                                   </div>
                                   <div style="display: flex; justify-content: space-between;">
                                       <span style="color: #6c757d; font-weight: 500;">协助时长：</span>
                                       <span style="color: #333; font-weight: 500;">${assistInfo.duration}</span>
                                   </div>
                                   <div style="display: flex; justify-content: space-between;">
                                       <span style="color: #6c757d; font-weight: 500;">完成时间：</span>
                                       <span style="color: #333; font-weight: 500;">${assistInfo.completedTime}</span>
                                   </div>
                               </div>
                           </div>
                           
                           <div>
                               <h4 style="color: #333; margin-bottom: 10px; font-size: 1.1rem;">问题描述</h4>
                               <p style="color: #6c757d; line-height: 1.6; margin: 0; background: #f8f9fa; padding: 15px; border-radius: 6px;">${assistInfo.problem}</p>
                           </div>
                           
                           <div>
                               <h4 style="color: #333; margin-bottom: 10px; font-size: 1.1rem;">解决方案</h4>
                               <p style="color: #6c757d; line-height: 1.6; margin: 0; background: #f8f9fa; padding: 15px; border-radius: 6px;">${assistInfo.solution}</p>
                           </div>
                           
                           <div>
                               <h4 style="color: #333; margin-bottom: 10px; font-size: 1.1rem;">用户评价</h4>
                               <p style="color: #6c757d; line-height: 1.6; margin: 0; background: #e8f5e8; padding: 15px; border-radius: 6px; border-left: 4px solid #28a745;">${assistInfo.feedback}</p>
                           </div>
                       </div>
                   </div>
                   <div style="padding: 20px 30px; border-top: 1px solid #f0f0f0; display: flex; justify-content: flex-end; gap: 10px;">
                       <button onclick="closeAssistModal()" style="padding: 10px 20px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-weight: 500;">关闭</button>
                       <button onclick="exportAssistDetail('${assistId}')" style="padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500;">
                           <i class="fas fa-download"></i> 导出详情
                       </button>
                   </div>
               </div>
           `;
           
           document.body.appendChild(modal);
           modal.addEventListener('click', function(e) {
               if (e.target === modal) closeAssistModal();
           });
       }

       // 显示协助报告
       function showAssistReport(assistId) {
           const assistInfo = assistRecordData[assistId];
           if (!assistInfo) return;
           
           const modal = document.createElement('div');
           modal.style.cssText = `
               position: fixed !important; top: 0 !important; left: 0 !important;
               width: 100vw !important; height: 100vh !important;
               background-color: rgba(0,0,0,0.6) !important; display: flex !important;
               justify-content: center !important; align-items: center !important;
               z-index: 9999999 !important;
           `;
           modal.className = 'global-modal';
           
           modal.innerHTML = `
               <div style="background: white; border-radius: 12px; max-width: 700px; width: 90%; max-height: 80vh; overflow-y: auto; box-shadow: 0 8px 32px rgba(0,0,0,0.2);">
                   <div style="padding: 25px 30px; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center;">
                       <h3 style="color: #333; margin: 0; font-size: 1.3rem; display: flex; align-items: center; gap: 10px;">
                           <i class="fas fa-file-alt" style="color: #17a2b8;"></i>
                           协助报告
                       </h3>
                       <button onclick="closeAssistModal()" style="background: none; border: none; font-size: 1.5rem; color: #6c757d; cursor: pointer; padding: 5px;">&times;</button>
                   </div>
                   <div style="padding: 25px 30px;">
                       <div style="display: grid; gap: 20px;">
                           <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; border-radius: 8px; padding: 20px;">
                               <h4 style="margin: 0 0 10px 0; font-size: 1.2rem;">协助报告 - ${assistId}</h4>
                               <p style="margin: 0; opacity: 0.9; font-size: 0.9rem;">生成时间：${new Date().toLocaleString()}</p>
                           </div>
                           
                           <div style="background: #f8f9fa; border-radius: 8px; padding: 20px;">
                               <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem;">协助概要</h4>
                               <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                   <div>
                                       <span style="color: #6c757d; font-size: 0.9rem;">协助时间：</span>
                                       <div style="color: #333; font-weight: 500;">${assistInfo.completedTime}</div>
                                   </div>
                                   <div>
                                       <span style="color: #6c757d; font-size: 0.9rem;">协助专家：</span>
                                       <div style="color: #333; font-weight: 500;">张工程师</div>
                                   </div>
                                   <div>
                                       <span style="color: #6c757d; font-size: 0.9rem;">协助对象：</span>
                                       <div style="color: #333; font-weight: 500;">${assistInfo.customer}（${assistInfo.company}）</div>
                                   </div>
                                   <div>
                                       <span style="color: #6c757d; font-size: 0.9rem;">协助方式：</span>
                                       <div style="color: #333; font-weight: 500;">${assistInfo.type}</div>
                                   </div>
                               </div>
                           </div>
                           
                           <div>
                               <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem;">问题分析</h4>
                               <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; border-radius: 6px;">
                                   <ul style="margin: 0; padding-left: 20px; color: #856404;">
                                       <li>设备运行异常，需要专业诊断</li>
                                       <li>参数设置不当，影响正常工作</li>
                                       <li>操作人员缺乏相关技术知识</li>
                                   </ul>
                               </div>
                           </div>
                           
                           <div>
                               <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem;">解决方案</h4>
                               <div style="background: #d4edda; border-left: 4px solid #28a745; padding: 15px; border-radius: 6px;">
                                   <ul style="margin: 0; padding-left: 20px; color: #155724;">
                                       <li>通过${assistInfo.type}进行实时指导</li>
                                       <li>详细分析问题根源，制定解决方案</li>
                                       <li>指导正确的操作步骤和参数设置</li>
                                       <li>提供后续维护建议和注意事项</li>
                                   </ul>
                               </div>
                           </div>
                           
                           <div>
                               <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem;">协助结果</h4>
                               <div style="background: #d1ecf1; border-left: 4px solid #17a2b8; padding: 15px; border-radius: 6px;">
                                   <p style="margin: 0; color: #0c5460; line-height: 1.6;">
                                       问题得到圆满解决，设备恢复正常运行。客户对协助效果非常满意，评分${assistInfo.rating}。
                                       协助过程专业高效，达到了预期目标。
                                   </p>
                               </div>
                           </div>
                           
                           <div style="background: #f8f9fa; border-radius: 8px; padding: 20px;">
                               <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem;">服务统计</h4>
                               <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; text-align: center;">
                                   <div>
                                       <div style="color: #667eea; font-size: 1.5rem; font-weight: bold;">${assistInfo.duration}</div>
                                       <div style="color: #6c757d; font-size: 0.85rem;">协助时长</div>
                                   </div>
                                   <div>
                                       <div style="color: #28a745; font-size: 1.5rem; font-weight: bold;">${assistInfo.income}</div>
                                       <div style="color: #6c757d; font-size: 0.85rem;">服务收入</div>
                                   </div>
                                   <div>
                                       <div style="color: #ffc107; font-size: 1.5rem; font-weight: bold;">5.0</div>
                                       <div style="color: #6c757d; font-size: 0.85rem;">客户评分</div>
                                   </div>
                               </div>
                           </div>
                       </div>
                   </div>
                   <div style="padding: 20px 30px; border-top: 1px solid #f0f0f0; display: flex; justify-content: flex-end; gap: 10px;">
                       <button onclick="closeAssistModal()" style="padding: 10px 20px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-weight: 500;">关闭</button>
                       <button onclick="downloadAssistReport('${assistId}')" style="padding: 10px 20px; background: #17a2b8; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500;">
                           <i class="fas fa-download"></i> 下载报告
                       </button>
                   </div>
               </div>
           `;
           
           document.body.appendChild(modal);
           modal.addEventListener('click', function(e) {
               if (e.target === modal) closeAssistModal();
           });
       }

       // 关闭协助弹窗
       function closeAssistModal() {
           const modal = document.querySelector('.global-modal');
           if (modal) modal.remove();
       }

       // 导出协助详情
       function exportAssistDetail(assistId) {
           const assistInfo = assistRecordData[assistId];
           const toast = document.createElement('div');
           toast.style.cssText = `
               position: fixed; top: 20px; right: 20px; background: #667eea; color: white;
               padding: 15px 20px; border-radius: 8px; z-index: 10000;
               box-shadow: 0 4px 12px rgba(0,0,0,0.2);
           `;
           toast.innerHTML = `
               <i class="fas fa-download"></i> 协助详情导出中...
           `;
           document.body.appendChild(toast);
           
           setTimeout(() => {
               toast.innerHTML = `
                   <i class="fas fa-check-circle"></i> 协助详情已导出！
               `;
               setTimeout(() => toast.remove(), 2000);
           }, 1500);
           
           console.log('导出协助详情:', { assistId, customer: assistInfo.customer });
       }

       // 下载协助报告
       function downloadAssistReport(assistId) {
           const assistInfo = assistRecordData[assistId];
           const toast = document.createElement('div');
           toast.style.cssText = `
               position: fixed; top: 20px; right: 20px; background: #17a2b8; color: white;
               padding: 15px 20px; border-radius: 8px; z-index: 10000;
               box-shadow: 0 4px 12px rgba(0,0,0,0.2);
           `;
           toast.innerHTML = `
               <i class="fas fa-file-pdf"></i> 协助报告生成中...
           `;
           document.body.appendChild(toast);
           
           setTimeout(() => {
               toast.innerHTML = `
                   <i class="fas fa-check-circle"></i> 协助报告已下载！
               `;
               setTimeout(() => toast.remove(), 2000);
           }, 1500);
           
           console.log('下载协助报告:', { assistId, customer: assistInfo.customer });
       }

       // ======== 协助记录分页功能 ========
       
       // 协助记录分页状态
       let assistRecordCurrentPage = 1;
       const assistRecordTotalPages = 16;
       const assistRecordItemsPerPage = 10;

       // 协助记录跳转到指定页面
       function assistRecordGoToPage(page) {
           if (page < 1 || page > assistRecordTotalPages) return;
           
           assistRecordCurrentPage = page;
           
           // 显示加载提示
           const loadingToast = document.createElement('div');
           loadingToast.style.cssText = `
               position: fixed; top: 20px; right: 20px; background: #667eea; color: white;
               padding: 15px 20px; border-radius: 8px; z-index: 10000;
               box-shadow: 0 4px 12px rgba(0,0,0,0.2);
           `;
           loadingToast.innerHTML = `
               <i class="fas fa-spinner fa-spin"></i> 正在加载第${page}页数据...
           `;
           document.body.appendChild(loadingToast);
           
           setTimeout(() => {
               // 更新分页按钮状态
               updateAssistRecordPagination();
               
               // 滚动到表格位置
               const assistRecordTable = document.querySelector('#page-assist-record table');
               if (assistRecordTable) {
                   assistRecordTable.scrollIntoView({ behavior: 'smooth', block: 'start' });
               }
               
               loadingToast.innerHTML = `
                   <i class="fas fa-check-circle"></i> 第${page}页数据加载完成！
               `;
               setTimeout(() => loadingToast.remove(), 1500);
               
               console.log(`协助记录跳转到第${page}页`);
           }, 800);
       }

       // 协助记录上一页
       function assistRecordPrevPage() {
           if (assistRecordCurrentPage > 1) {
               assistRecordGoToPage(assistRecordCurrentPage - 1);
           }
       }

       // 协助记录下一页
       function assistRecordNextPage() {
           if (assistRecordCurrentPage < assistRecordTotalPages) {
               assistRecordGoToPage(assistRecordCurrentPage + 1);
           }
       }

       // 更新协助记录分页按钮状态
       function updateAssistRecordPagination() {
           const assistRecordSection = document.querySelector('#page-assist-record');
           if (!assistRecordSection) return;
           
           // 更新分页信息文本
           const pageInfo = assistRecordSection.querySelector('div[style*="共"]');
           if (pageInfo) {
               const totalRecords = 156;
               const startRecord = (assistRecordCurrentPage - 1) * assistRecordItemsPerPage + 1;
               const endRecord = Math.min(assistRecordCurrentPage * assistRecordItemsPerPage, totalRecords);
               
               pageInfo.innerHTML = `
                   共 <span style="color: #333; font-weight: 500;">${totalRecords}</span> 条记录，第 <span style="color: #333; font-weight: 500;">${assistRecordCurrentPage}</span> 页，共 <span style="color: #333; font-weight: 500;">${assistRecordTotalPages}</span> 页
               `;
           }
           
           // 更新分页按钮
           const paginationContainer = assistRecordSection.querySelector('div[style*="display: flex; gap: 5px"]');
           if (paginationContainer) {
               paginationContainer.innerHTML = `
                   <button onclick="assistRecordPrevPage()" style="padding: 6px 12px; border: 1px solid #e0e3ea; background: ${assistRecordCurrentPage === 1 ? '#f8f9fa' : 'white'}; color: #6c757d; border-radius: 6px; cursor: ${assistRecordCurrentPage === 1 ? 'not-allowed' : 'pointer'}; font-size: 0.85rem;" ${assistRecordCurrentPage === 1 ? 'disabled' : ''}>
                       <i class="fas fa-chevron-left"></i> 上一页
                   </button>
                   ${generateAssistRecordPageButtons()}
                   <button onclick="assistRecordNextPage()" style="padding: 6px 12px; border: 1px solid #e0e3ea; background: ${assistRecordCurrentPage === assistRecordTotalPages ? '#f8f9fa' : 'white'}; color: ${assistRecordCurrentPage === assistRecordTotalPages ? '#6c757d' : '#667eea'}; border-radius: 6px; cursor: ${assistRecordCurrentPage === assistRecordTotalPages ? 'not-allowed' : 'pointer'}; font-size: 0.85rem;" ${assistRecordCurrentPage === assistRecordTotalPages ? 'disabled' : ''}>
                       下一页 <i class="fas fa-chevron-right"></i>
                   </button>
               `;
           }
       }

       // 生成协助记录页码按钮
       function generateAssistRecordPageButtons() {
           let buttons = '';
           const maxVisiblePages = 5;
           let startPage = Math.max(1, assistRecordCurrentPage - Math.floor(maxVisiblePages / 2));
           let endPage = Math.min(assistRecordTotalPages, startPage + maxVisiblePages - 1);
           
           if (endPage - startPage + 1 < maxVisiblePages) {
               startPage = Math.max(1, endPage - maxVisiblePages + 1);
           }
           
           if (startPage > 1) {
               buttons += `<button onclick="assistRecordGoToPage(1)" style="padding: 6px 12px; border: 1px solid #e0e3ea; background: white; color: #6c757d; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">1</button>`;
               if (startPage > 2) {
                   buttons += `<span style="padding: 6px 8px; color: #6c757d; font-size: 0.85rem;">...</span>`;
               }
           }
           
           for (let i = startPage; i <= endPage; i++) {
               const isActive = i === assistRecordCurrentPage;
               buttons += `<button onclick="assistRecordGoToPage(${i})" style="padding: 6px 12px; background: ${isActive ? '#667eea' : 'white'}; color: ${isActive ? 'white' : '#6c757d'}; border: ${isActive ? 'none' : '1px solid #e0e3ea'}; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">${i}</button>`;
           }
           
           if (endPage < assistRecordTotalPages) {
               if (endPage < assistRecordTotalPages - 1) {
                   buttons += `<span style="padding: 6px 8px; color: #6c757d; font-size: 0.85rem;">...</span>`;
               }
               buttons += `<button onclick="assistRecordGoToPage(${assistRecordTotalPages})" style="padding: 6px 12px; border: 1px solid #e0e3ea; background: white; color: #6c757d; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">${assistRecordTotalPages}</button>`;
           }
           
           return buttons;
       }

       // ======== 协助工单管理功能 ========
       
       // 协助工单数据
       const assistOrderData = {
           'AS20240601001': {
               title: '空压机异响问题诊断',
               description: '螺杆式空压机启动异响',
               type: '视频协助',
               customer: '张工程师',
               company: '北京机械厂',
               urgency: '紧急',
               price: '¥200',
               status: '待接单',
               createTime: '2024-06-01 10:30',
               problem: '螺杆式空压机在启动时出现异常响声，需要专业技术人员进行诊断和解决。设备型号为SA-37，已运行3年。',
               requirements: '需要有经验的设备维修专家，熟悉螺杆式空压机的工作原理和常见故障。',
               expectedTime: '2-3小时',
               contactPhone: '138-0001-0001'
           },
           'AS20240531008': {
               title: '制冷系统调试指导',
               description: '离心式制冷机组参数调整',
               type: '语音协助',
               customer: '李技术员',
               company: '上海化工',
               urgency: '一般',
               price: '¥150',
               status: '进行中',
               createTime: '2024-05-31 14:20',
               problem: '离心式制冷机组运行参数不稳定，需要专业指导进行参数优化调整。',
               requirements: '需要熟悉制冷系统的专业技术人员，能够指导参数调整。',
               expectedTime: '1-2小时',
               contactPhone: '139-0002-0002'
           },
           'AS20240530015': {
               title: 'PLC程序优化协助',
               description: '西门子S7-1200程序调试',
               type: '远程协助',
               customer: '王程序员',
               company: '广州电子',
               urgency: '不紧急',
               price: '¥300',
               status: '已完成',
               createTime: '2024-05-30 16:45',
               problem: '西门子S7-1200 PLC程序运行不稳定，需要专业人员协助优化程序逻辑。',
               requirements: '需要熟悉西门子PLC编程的专业工程师。',
               expectedTime: '2-4小时',
               contactPhone: '136-0003-0003',
               completedTime: '2024-05-30 19:30',
               solution: '通过远程协助，优化了PLC程序逻辑，调整了关键参数，解决了程序运行不稳定的问题。',
               feedback: '专家技术很专业，解决问题很及时，非常感谢！',
               rating: '★★★★★ (5.0分)'
           }
       };

       // 显示协助工单操作弹窗
       function showAssistOrderAction(action, orderId) {
           const orderInfo = assistOrderData[orderId];
           if (!orderInfo) return;
           
           const modal = document.createElement('div');
           modal.style.cssText = `
               position: fixed !important; top: 0 !important; left: 0 !important;
               width: 100vw !important; height: 100vh !important;
               background-color: rgba(0,0,0,0.6) !important; display: flex !important;
               justify-content: center !important; align-items: center !important;
               z-index: 9999999 !important;
           `;
           modal.className = 'global-modal';
           
           let title = '';
           let content = '';
           let footer = '';
           
           switch(action) {
               case 'accept':
                   title = '接受协助工单';
                   content = `
                       <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                           <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem;">工单信息</h4>
                           <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                               <div><strong>工单编号：</strong>${orderId}</div>
                               <div><strong>协助类型：</strong>${orderInfo.type}</div>
                               <div><strong>紧急程度：</strong><span style="color: ${orderInfo.urgency === '紧急' ? '#dc3545' : orderInfo.urgency === '一般' ? '#ffc107' : '#28a745'};">${orderInfo.urgency}</span></div>
                               <div><strong>协助费用：</strong><span style="color: #28a745; font-weight: 600;">${orderInfo.price}</span></div>
                           </div>
                           <div style="margin-top: 15px;">
                               <strong>问题描述：</strong>
                               <p style="margin: 8px 0; color: #6c757d; line-height: 1.6;">${orderInfo.problem}</p>
                           </div>
                       </div>
                       
                       <div class="form-group" style="margin-bottom: 15px;">
                           <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">协助方式 *</label>
                           <select id="assistMethod" style="width: 100%; padding: 10px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                               <option value="${orderInfo.type}" selected>${orderInfo.type}</option>
                               <option value="视频协助">视频协助</option>
                               <option value="语音协助">语音协助</option>
                               <option value="远程协助">远程协助</option>
                               <option value="文字协助">文字协助</option>
                           </select>
                       </div>
                       
                       <div class="form-group" style="margin-bottom: 15px;">
                           <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">预计时长 *</label>
                           <input type="text" id="estimatedDuration" value="${orderInfo.expectedTime}" style="width: 100%; padding: 10px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;" placeholder="请输入预计协助时长">
                       </div>
                       
                       <div class="form-group" style="margin-bottom: 15px;">
                           <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">接单备注</label>
                           <textarea id="acceptNote" style="width: 100%; padding: 10px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem; resize: vertical; min-height: 80px;" placeholder="请说明您的专业优势和协助计划..."></textarea>
                       </div>
                   `;
                   footer = `
                       <button onclick="closeAssistOrderModal()" style="padding: 10px 20px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-weight: 500;">取消</button>
                       <button onclick="confirmAcceptAssistOrder('${orderId}')" style="padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500;">确认接单</button>
                   `;
                   break;
                   
               case 'complete':
                   title = '完成协助工单';
                   content = `
                       <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                           <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem;">工单信息</h4>
                           <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                               <div><strong>工单编号：</strong>${orderId}</div>
                               <div><strong>协助对象：</strong>${orderInfo.customer}（${orderInfo.company}）</div>
                               <div><strong>协助类型：</strong>${orderInfo.type}</div>
                               <div><strong>协助费用：</strong><span style="color: #28a745; font-weight: 600;">${orderInfo.price}</span></div>
                           </div>
                       </div>
                       
                       <div class="form-group" style="margin-bottom: 15px;">
                           <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">实际时长</label>
                           <input type="text" id="actualDuration" style="width: 100%; padding: 10px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;" placeholder="请输入实际协助时长">
                       </div>
                       
                       <div class="form-group" style="margin-bottom: 15px;">
                           <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">解决方案总结 *</label>
                           <textarea id="solutionSummary" style="width: 100%; padding: 10px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem; resize: vertical; min-height: 100px;" placeholder="请详细描述问题的解决方案和操作步骤..." required></textarea>
                       </div>
                       
                       <div class="form-group" style="margin-bottom: 15px;">
                           <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">协助结果</label>
                           <select id="assistResult" style="width: 100%; padding: 10px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                               <option value="问题完全解决">问题完全解决</option>
                               <option value="问题部分解决">问题部分解决</option>
                               <option value="需要进一步协助">需要进一步协助</option>
                           </select>
                       </div>
                   `;
                   footer = `
                       <button onclick="closeAssistOrderModal()" style="padding: 10px 20px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-weight: 500;">取消</button>
                       <button onclick="completeAssistOrder('${orderId}')" style="padding: 10px 20px; background: #17a2b8; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500;">完成协助</button>
                   `;
                   break;
                   
               case 'evaluate':
                   title = '协助评价';
                   content = `
                       <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                           <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem;">协助结果</h4>
                           <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                               <div><strong>协助编号：</strong>${orderId}</div>
                               <div><strong>协助专家：</strong>张工程师</div>
                               <div><strong>完成时间：</strong>${orderInfo.completedTime || '2024-05-30 19:30'}</div>
                               <div><strong>协助费用：</strong><span style="color: #28a745; font-weight: 600;">${orderInfo.price}</span></div>
                           </div>
                           <div style="margin-top: 15px;">
                               <strong>解决方案：</strong>
                               <p style="margin: 8px 0; color: #6c757d; line-height: 1.6;">${orderInfo.solution || '专业技术协助，问题得到有效解决。'}</p>
                           </div>
                       </div>
                       
                       <div class="form-group" style="margin-bottom: 15px;">
                           <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">服务评分 *</label>
                           <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 10px;">
                               <span style="color: #6c757d;">评分：</span>
                               <div style="display: flex; gap: 5px;">
                                   ${[1,2,3,4,5].map(i => `<span class="star" onclick="setAssistRating(${i})" style="font-size: 1.5rem; color: #ddd; cursor: pointer; transition: color 0.2s;">★</span>`).join('')}
                               </div>
                               <span id="ratingText" style="color: #6c757d; margin-left: 10px;">请选择评分</span>
                           </div>
                           <input type="hidden" id="serviceRating" value="">
                       </div>
                       
                       <div class="form-group" style="margin-bottom: 15px;">
                           <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">评价内容</label>
                           <textarea id="evaluationContent" style="width: 100%; padding: 10px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem; resize: vertical; min-height: 80px;" placeholder="请分享您的协助体验和建议..."></textarea>
                       </div>
                       
                       <div class="form-group" style="margin-bottom: 15px;">
                           <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">服务标签</label>
                           <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px;">
                               ${['技术专业', '响应及时', '服务态度好', '解决彻底', '价格合理', '其他'].map(tag => 
                                   `<label style="display: flex; align-items: center; gap: 5px; padding: 5px 10px; background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 6px; font-size: 0.85rem; cursor: pointer;">
                                       <input type="checkbox" value="${tag}" name="serviceTags" style="margin: 0;">
                                       ${tag}
                                   </label>`
                               ).join('')}
                           </div>
                       </div>
                   `;
                   footer = `
                       <button onclick="closeAssistOrderModal()" style="padding: 10px 20px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-weight: 500;">取消</button>
                       <button onclick="submitAssistOrderEvaluation('${orderId}')" style="padding: 10px 20px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500;">提交评价</button>
                   `;
                   break;
           }
           
           modal.innerHTML = `
               <div style="background: white; border-radius: 12px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto; box-shadow: 0 8px 32px rgba(0,0,0,0.2);">
                   <div style="padding: 25px 30px; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center;">
                       <h3 style="color: #333; margin: 0; font-size: 1.3rem;">${title}</h3>
                       <button onclick="closeAssistOrderModal()" style="background: none; border: none; font-size: 1.5rem; color: #6c757d; cursor: pointer; padding: 5px;">&times;</button>
                   </div>
                   <div style="padding: 25px 30px;">
                       ${content}
                   </div>
                   <div style="padding: 20px 30px; border-top: 1px solid #f0f0f0; display: flex; justify-content: flex-end; gap: 10px;">
                       ${footer}
                   </div>
               </div>
           `;
           
           document.body.appendChild(modal);
           modal.addEventListener('click', function(e) {
               if (e.target === modal) closeAssistOrderModal();
           });
       }

       // 显示协助工单详情
       function showAssistOrderDetail(orderId) {
           const orderInfo = assistOrderData[orderId];
           if (!orderInfo) return;
           
           const modal = document.createElement('div');
           modal.style.cssText = `
               position: fixed !important; top: 0 !important; left: 0 !important;
               width: 100vw !important; height: 100vh !important;
               background-color: rgba(0,0,0,0.6) !important; display: flex !important;
               justify-content: center !important; align-items: center !important;
               z-index: 9999999 !important;
           `;
           modal.className = 'global-modal';
           
           modal.innerHTML = `
               <div style="background: white; border-radius: 12px; max-width: 700px; width: 90%; max-height: 80vh; overflow-y: auto; box-shadow: 0 8px 32px rgba(0,0,0,0.2);">
                   <div style="padding: 25px 30px; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center;">
                       <h3 style="color: #333; margin: 0; font-size: 1.3rem; display: flex; align-items: center; gap: 10px;">
                           <i class="fas fa-info-circle" style="color: #667eea;"></i>
                           协助工单详情
                       </h3>
                       <button onclick="closeAssistOrderModal()" style="background: none; border: none; font-size: 1.5rem; color: #6c757d; cursor: pointer; padding: 5px;">&times;</button>
                   </div>
                   <div style="padding: 25px 30px;">
                       <div style="display: grid; gap: 20px;">
                           <div style="background: #f8f9fa; border-radius: 8px; padding: 20px;">
                               <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem;">基本信息</h4>
                               <div style="display: grid; gap: 12px;">
                                   <div style="display: flex; justify-content: space-between;">
                                       <span style="color: #6c757d; font-weight: 500;">工单编号：</span>
                                       <span style="color: #333; font-weight: 500;">${orderId}</span>
                                   </div>
                                   <div style="display: flex; justify-content: space-between;">
                                       <span style="color: #6c757d; font-weight: 500;">协助标题：</span>
                                       <span style="color: #333; font-weight: 500;">${orderInfo.title}</span>
                                   </div>
                                   <div style="display: flex; justify-content: space-between;">
                                       <span style="color: #6c757d; font-weight: 500;">协助类型：</span>
                                       <span style="color: #333; font-weight: 500;">${orderInfo.type}</span>
                                   </div>
                                   <div style="display: flex; justify-content: space-between;">
                                       <span style="color: #6c757d; font-weight: 500;">发起人：</span>
                                       <span style="color: #333; font-weight: 500;">${orderInfo.customer}（${orderInfo.company}）</span>
                                   </div>
                                   <div style="display: flex; justify-content: space-between;">
                                       <span style="color: #6c757d; font-weight: 500;">紧急程度：</span>
                                       <span style="color: ${orderInfo.urgency === '紧急' ? '#dc3545' : orderInfo.urgency === '一般' ? '#ffc107' : '#28a745'}; font-weight: 500;">${orderInfo.urgency}</span>
                                   </div>
                                   <div style="display: flex; justify-content: space-between;">
                                       <span style="color: #6c757d; font-weight: 500;">协助费用：</span>
                                       <span style="color: #28a745; font-weight: 600;">${orderInfo.price}</span>
                                   </div>
                                   <div style="display: flex; justify-content: space-between;">
                                       <span style="color: #6c757d; font-weight: 500;">当前状态：</span>
                                       <span style="color: #333; font-weight: 500;">${orderInfo.status}</span>
                                   </div>
                                   <div style="display: flex; justify-content: space-between;">
                                       <span style="color: #6c757d; font-weight: 500;">创建时间：</span>
                                       <span style="color: #333; font-weight: 500;">${orderInfo.createTime}</span>
                                   </div>
                                   <div style="display: flex; justify-content: space-between;">
                                       <span style="color: #6c757d; font-weight: 500;">联系电话：</span>
                                       <span style="color: #333; font-weight: 500;">${orderInfo.contactPhone}</span>
                                   </div>
                               </div>
                           </div>
                           
                           <div>
                               <h4 style="color: #333; margin-bottom: 10px; font-size: 1.1rem;">问题描述</h4>
                               <p style="color: #6c757d; line-height: 1.6; margin: 0; background: #f8f9fa; padding: 15px; border-radius: 6px;">${orderInfo.problem}</p>
                           </div>
                           
                           <div>
                               <h4 style="color: #333; margin-bottom: 10px; font-size: 1.1rem;">协助要求</h4>
                               <p style="color: #6c757d; line-height: 1.6; margin: 0; background: #f8f9fa; padding: 15px; border-radius: 6px;">${orderInfo.requirements}</p>
                           </div>
                           
                           ${orderInfo.status === '已完成' && orderInfo.solution ? `
                           <div>
                               <h4 style="color: #333; margin-bottom: 10px; font-size: 1.1rem;">解决方案</h4>
                               <p style="color: #6c757d; line-height: 1.6; margin: 0; background: #d4edda; padding: 15px; border-radius: 6px; border-left: 4px solid #28a745;">${orderInfo.solution}</p>
                           </div>
                           ` : ''}
                           
                           ${orderInfo.status === '已完成' && orderInfo.feedback ? `
                           <div>
                               <h4 style="color: #333; margin-bottom: 10px; font-size: 1.1rem;">客户反馈</h4>
                               <p style="color: #6c757d; line-height: 1.6; margin: 0; background: #e8f5e8; padding: 15px; border-radius: 6px; border-left: 4px solid #28a745;">${orderInfo.feedback}</p>
                               <div style="margin-top: 10px;">
                                   <span style="color: #ffc107; font-weight: 500;">评分：${orderInfo.rating}</span>
                               </div>
                           </div>
                           ` : ''}
                       </div>
                   </div>
                   <div style="padding: 20px 30px; border-top: 1px solid #f0f0f0; display: flex; justify-content: flex-end; gap: 10px;">
                       <button onclick="closeAssistOrderModal()" style="padding: 10px 20px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-weight: 500;">关闭</button>
                       <button onclick="exportAssistOrderDetail('${orderId}')" style="padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500;">
                           <i class="fas fa-download"></i> 导出详情
                       </button>
                   </div>
               </div>
           `;
           
           document.body.appendChild(modal);
           modal.addEventListener('click', function(e) {
               if (e.target === modal) closeAssistOrderModal();
           });
       }

       // 关闭协助工单弹窗
       function closeAssistOrderModal() {
           const modal = document.querySelector('.global-modal');
           if (modal) modal.remove();
       }

       // 确认接受协助工单
       function confirmAcceptAssistOrder(orderId) {
           const assistMethod = document.getElementById('assistMethod').value;
           const estimatedDuration = document.getElementById('estimatedDuration').value;
           const acceptNote = document.getElementById('acceptNote').value;

           if (!assistMethod || !estimatedDuration) {
               alert('请填写所有必填字段');
               return;
           }

           const toast = document.createElement('div');
           toast.style.cssText = `
               position: fixed; top: 20px; right: 20px; background: #667eea; color: white;
               padding: 15px 20px; border-radius: 8px; z-index: 10000;
               box-shadow: 0 4px 12px rgba(0,0,0,0.2);
           `;
           toast.innerHTML = `
               <i class="fas fa-check-circle"></i> 协助工单 ${orderId} 接单成功！
           `;
           document.body.appendChild(toast);

           setTimeout(() => toast.remove(), 3000);
           closeAssistOrderModal();
           
           console.log('接受协助工单:', { orderId, assistMethod, estimatedDuration, acceptNote });
       }

       // 完成协助工单
       function completeAssistOrder(orderId) {
           const actualDuration = document.getElementById('actualDuration').value;
           const solutionSummary = document.getElementById('solutionSummary').value;
           const assistResult = document.getElementById('assistResult').value;

           if (!solutionSummary) {
               alert('请填写解决方案总结');
               return;
           }

           const toast = document.createElement('div');
           toast.style.cssText = `
               position: fixed; top: 20px; right: 20px; background: #17a2b8; color: white;
               padding: 15px 20px; border-radius: 8px; z-index: 10000;
               box-shadow: 0 4px 12px rgba(0,0,0,0.2);
           `;
           toast.innerHTML = `
               <i class="fas fa-check-circle"></i> 协助工单 ${orderId} 已完成！
           `;
           document.body.appendChild(toast);

           setTimeout(() => toast.remove(), 3000);
           closeAssistOrderModal();
           
           console.log('完成协助工单:', { orderId, actualDuration, solutionSummary, assistResult });
       }

       // 设置协助评分
       function setAssistRating(rating) {
           const stars = document.querySelectorAll('.star');
           const ratingText = document.getElementById('ratingText');
           const serviceRating = document.getElementById('serviceRating');
           
           // 清除所有星星的激活状态
           stars.forEach(star => star.style.color = '#ddd');
           
           // 激活选中的星星及之前的星星
           for (let i = 0; i < rating; i++) {
               stars[i].style.color = '#ffc107';
           }
           
           // 设置评分文本
           const ratingTexts = ['很差', '较差', '一般', '良好', '优秀'];
           ratingText.textContent = `${rating}星 - ${ratingTexts[rating - 1]}`;
           serviceRating.value = rating;
       }

       // 提交协助工单评价
       function submitAssistOrderEvaluation(orderId) {
           const serviceRating = document.getElementById('serviceRating').value;
           const evaluationContent = document.getElementById('evaluationContent').value;
           const serviceTags = Array.from(document.querySelectorAll('input[name="serviceTags"]:checked')).map(cb => cb.value);

           if (!serviceRating) {
               alert('请选择服务评分');
               return;
           }

           const toast = document.createElement('div');
           toast.style.cssText = `
               position: fixed; top: 20px; right: 20px; background: #28a745; color: white;
               padding: 15px 20px; border-radius: 8px; z-index: 10000;
               box-shadow: 0 4px 12px rgba(0,0,0,0.2);
           `;
           toast.innerHTML = `
               <i class="fas fa-check-circle"></i> 协助工单 ${orderId} 评价提交成功！
           `;
           document.body.appendChild(toast);

           setTimeout(() => toast.remove(), 3000);
           closeAssistOrderModal();
           
           console.log('提交协助工单评价:', { orderId, serviceRating, evaluationContent, serviceTags });
       }

       // 导出协助工单详情
       function exportAssistOrderDetail(orderId) {
           const orderInfo = assistOrderData[orderId];
           const toast = document.createElement('div');
           toast.style.cssText = `
               position: fixed; top: 20px; right: 20px; background: #667eea; color: white;
               padding: 15px 20px; border-radius: 8px; z-index: 10000;
               box-shadow: 0 4px 12px rgba(0,0,0,0.2);
           `;
           toast.innerHTML = `
               <i class="fas fa-download"></i> 协助工单详情导出中...
           `;
           document.body.appendChild(toast);
           
           setTimeout(() => {
               toast.innerHTML = `
                   <i class="fas fa-check-circle"></i> 协助工单详情已导出！
               `;
               setTimeout(() => toast.remove(), 2000);
           }, 1500);
           
           console.log('导出协助工单详情:', { orderId, customer: orderInfo.customer });
       }

       // ======== 协助工单分页功能 ========
       
       // 协助工单分页状态
       let assistOrderCurrentPage = 1;
       const assistOrderTotalPages = 5;
       const assistOrderItemsPerPage = 10;

       // 协助工单跳转到指定页面
       function assistOrderGoToPage(page) {
           if (page < 1 || page > assistOrderTotalPages) return;
           
           assistOrderCurrentPage = page;
           
           // 显示加载提示
           const loadingToast = document.createElement('div');
           loadingToast.style.cssText = `
               position: fixed; top: 20px; right: 20px; background: #667eea; color: white;
               padding: 15px 20px; border-radius: 8px; z-index: 10000;
               box-shadow: 0 4px 12px rgba(0,0,0,0.2);
           `;
           loadingToast.innerHTML = `
               <i class="fas fa-spinner fa-spin"></i> 正在加载第${page}页数据...
           `;
           document.body.appendChild(loadingToast);
           
           setTimeout(() => {
               // 更新分页按钮状态
               updateAssistOrderPagination();
               
               // 滚动到表格位置
               const assistOrderTable = document.querySelector('#page-assist-order table');
               if (assistOrderTable) {
                   assistOrderTable.scrollIntoView({ behavior: 'smooth', block: 'start' });
               }
               
               loadingToast.innerHTML = `
                   <i class="fas fa-check-circle"></i> 第${page}页数据加载完成！
               `;
               setTimeout(() => loadingToast.remove(), 1500);
               
               console.log(`协助工单跳转到第${page}页`);
           }, 800);
       }

       // 协助工单上一页
       function assistOrderPrevPage() {
           if (assistOrderCurrentPage > 1) {
               assistOrderGoToPage(assistOrderCurrentPage - 1);
           }
       }

       // 协助工单下一页
       function assistOrderNextPage() {
           if (assistOrderCurrentPage < assistOrderTotalPages) {
               assistOrderGoToPage(assistOrderCurrentPage + 1);
           }
       }

       // 更新协助工单分页按钮状态
       function updateAssistOrderPagination() {
           // 更新分页信息文本
           const totalRecords = 48;
           document.getElementById('assistOrderTotalRecords').textContent = totalRecords;
           document.getElementById('assistOrderCurrentPage').textContent = assistOrderCurrentPage;
           document.getElementById('assistOrderTotalPages').textContent = assistOrderTotalPages;
           
           // 更新分页按钮
           const paginationContainer = document.getElementById('assistOrderPagination');
           if (paginationContainer) {
               paginationContainer.innerHTML = `
                   <button onclick="assistOrderPrevPage()" style="padding: 6px 12px; border: 1px solid #e0e3ea; background: ${assistOrderCurrentPage === 1 ? '#f8f9fa' : 'white'}; color: #6c757d; border-radius: 6px; cursor: ${assistOrderCurrentPage === 1 ? 'not-allowed' : 'pointer'}; font-size: 0.85rem;" ${assistOrderCurrentPage === 1 ? 'disabled' : ''}>
                       <i class="fas fa-chevron-left"></i> 上一页
                   </button>
                   ${generateAssistOrderPageButtons()}
                   <button onclick="assistOrderNextPage()" style="padding: 6px 12px; border: 1px solid #e0e3ea; background: ${assistOrderCurrentPage === assistOrderTotalPages ? '#f8f9fa' : 'white'}; color: ${assistOrderCurrentPage === assistOrderTotalPages ? '#6c757d' : '#667eea'}; border-radius: 6px; cursor: ${assistOrderCurrentPage === assistOrderTotalPages ? 'not-allowed' : 'pointer'}; font-size: 0.85rem;" ${assistOrderCurrentPage === assistOrderTotalPages ? 'disabled' : ''}>
                       下一页 <i class="fas fa-chevron-right"></i>
                   </button>
               `;
           }
       }

       // 生成协助工单页码按钮
       function generateAssistOrderPageButtons() {
           let buttons = '';
           const maxVisiblePages = 5;
           let startPage = Math.max(1, assistOrderCurrentPage - Math.floor(maxVisiblePages / 2));
           let endPage = Math.min(assistOrderTotalPages, startPage + maxVisiblePages - 1);
           
           if (endPage - startPage + 1 < maxVisiblePages) {
               startPage = Math.max(1, endPage - maxVisiblePages + 1);
           }
           
           if (startPage > 1) {
               buttons += `<button onclick="assistOrderGoToPage(1)" style="padding: 6px 12px; border: 1px solid #e0e3ea; background: white; color: #6c757d; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">1</button>`;
               if (startPage > 2) {
                   buttons += `<span style="padding: 6px 8px; color: #6c757d; font-size: 0.85rem;">...</span>`;
               }
           }
           
           for (let i = startPage; i <= endPage; i++) {
               const isActive = i === assistOrderCurrentPage;
               buttons += `<button onclick="assistOrderGoToPage(${i})" style="padding: 6px 12px; background: ${isActive ? '#667eea' : 'white'}; color: ${isActive ? 'white' : '#6c757d'}; border: ${isActive ? 'none' : '1px solid #e0e3ea'}; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">${i}</button>`;
           }
           
           if (endPage < assistOrderTotalPages) {
               if (endPage < assistOrderTotalPages - 1) {
                   buttons += `<span style="padding: 6px 8px; color: #6c757d; font-size: 0.85rem;">...</span>`;
               }
               buttons += `<button onclick="assistOrderGoToPage(${assistOrderTotalPages})" style="padding: 6px 12px; border: 1px solid #e0e3ea; background: white; color: #6c757d; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">${assistOrderTotalPages}</button>`;
           }
           
           return buttons;
       }
      </script>
</body>
</html>         / /   Yef[�{t�vsQ�Qpe
 
 