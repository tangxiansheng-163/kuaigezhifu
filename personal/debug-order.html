<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>调试工单管理 - 快哥智服平台</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="main-content">
<div class="page-header">
    <div class="header-left">
        <h1><i class="fas fa-sliders-h"></i> 调试工单管理</h1>
        <p class="page-desc">管理设备调试工单，确保设备运行状态最优</p>
    </div>
</div>

<!-- 统计卡片 -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 25px;">
    <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
            <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">总调试工单</span>
            <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                <i class="fas fa-sliders-h"></i>
            </div>
        </div>
        <div style="font-size: 1.8rem; font-weight: bold; color: #333;">67</div>
    </div>
    <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
            <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">待调试</span>
            <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #ffc107, #fd7e14); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                <i class="fas fa-clock"></i>
            </div>
        </div>
        <div style="font-size: 1.8rem; font-weight: bold; color: #333;">5</div>
    </div>
    <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
            <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">调试中</span>
            <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #17a2b8, #20c997); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                <i class="fas fa-spinner"></i>
            </div>
        </div>
        <div style="font-size: 1.8rem; font-weight: bold; color: #333;">3</div>
    </div>
    <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
            <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">已完成</span>
            <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #28a745, #20c997); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                <i class="fas fa-check-circle"></i>
            </div>
        </div>
        <div style="font-size: 1.8rem; font-weight: bold; color: #333;">59</div>
    </div>
</div>

<!-- 筛选区域 -->
<div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 20px;">
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 15px;">
            <div>
        <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">工单状态</label>
        <select id="debug-status-filter" onchange="filterDebugOrders()" style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
            <option value="">全部状态</option>
            <option value="待调试">待调试</option>
            <option value="调试中">调试中</option>
            <option value="已完成">已完成</option>
            <option value="已取消">已取消</option>
        </select>
    </div>
    <div>
        <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">设备类型</label>
        <select id="debug-device-filter" onchange="filterDebugOrders()" style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
            <option value="">全部设备</option>
            <option value="空调系统">空调系统</option>
            <option value="通风设备">通风设备</option>
            <option value="制冷设备">制冷设备</option>
            <option value="其他">其他</option>
        </select>
    </div>
    <div>
        <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">调试类型</label>
        <select id="debug-type-filter" onchange="filterDebugOrders()" style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
            <option value="">全部类型</option>
            <option value="新设备调试">新设备调试</option>
            <option value="参数优化">参数优化</option>
            <option value="故障调试">故障调试</option>
            <option value="性能测试">性能测试</option>
        </select>
    </div>
</div>
<div style="display: flex; gap: 10px; align-items: end;">
    <div style="flex: 1;">
        <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">工单编号</label>
        <input type="text" id="debug-search-input" placeholder="请输入工单编号..." onkeypress="if(event.key==='Enter') searchDebugOrders()" style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
    </div>
    <button onclick="searchDebugOrders()" style="padding: 8px 20px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">
        <i class="fas fa-search"></i> 搜索
    </button>
</div>
</div>

<!-- 工单列表 -->
<div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h3 style="color: #333; font-size: 1.2rem; display: flex; align-items: center; gap: 10px; margin: 0;">
            <i class="fas fa-list" style="color: #667eea;"></i>
            调试工单列表
        </h3>
        <button onclick="exportDebugData()" style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: #f8f9fa; color: #6c757d; border: 1px solid #e9ecef; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
            <i class="fas fa-download"></i>
            导出数据
        </button>
    </div>
    <table style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr style="border-bottom: 2px solid #f0f0f0;">
                <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">工单号</th>
                <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">客户信息</th>
                <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">设备信息</th>
                <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">调试内容</th>
                <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">状态</th>
                <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">创建时间</th>
                <th style="padding: 12px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">操作</th>
            </tr>
        </thead>
        <tbody>
            <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                <td style="padding: 12px 8px;">
                    <span style="color: #667eea; font-weight: 500;">#DO20240601001</span>
                </td>
                <td style="padding: 12px 8px;">
                    <div>
                        <div style="font-weight: 500; color: #333;">北京数据中心</div>
                        <div style="font-size: 0.8rem; color: #6c757d;">李经理 | 138-0001-0001</div>
                    </div>
                </td>
                <td style="padding: 12px 8px;">
                    <span style="font-size: 0.9rem; color: #333;">精密空调系统 | 型号：PEX-100</span>
                </td>
                <td style="padding: 12px 8px;">
                    <span style="font-size: 0.9rem; color: #333;">温湿度参数优化调试</span>
                </td>
                <td style="padding: 12px 8px;">
                    <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.8rem; font-weight: 500; background: #fff3cd; color: #856404;">待调试</span>
                </td>
                <td style="padding: 12px 8px;">
                    <span style="font-size: 0.85rem; color: #6c757d;">2024-06-01 11:00</span>
                </td>
                <td style="padding: 12px 8px;">
                    <div style="display: flex; gap: 5px;">
                        <button onclick="showDebugAccept('DO20240601001')" style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: none; background: #667eea; color: white; cursor: pointer;">接单</button>
                        <button onclick="showDebugDetail('DO20240601001')" style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer;">详情</button>
                    </div>
                </td>
            </tr>
            <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                <td style="padding: 12px 8px;">
                    <span style="color: #667eea; font-weight: 500;">#DO20240531003</span>
                </td>
                <td style="padding: 12px 8px;">
                    <div>
                        <div style="font-weight: 500; color: #333;">上海制造工厂</div>
                        <div style="font-size: 0.8rem; color: #6c757d;">王总 | 139-0002-0002</div>
                    </div>
                </td>
                <td style="padding: 12px 8px;">
                    <span style="font-size: 0.9rem; color: #333;">工业制冷设备 | 型号：IC-500</span>
                </td>
                <td style="padding: 12px 8px;">
                    <span style="font-size: 0.9rem; color: #333;">制冷效率优化调试</span>
                </td>
                <td style="padding: 12px 8px;">
                    <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.8rem; font-weight: 500; background: #d1ecf1; color: #0c5460;">调试中</span>
                </td>
                <td style="padding: 12px 8px;">
                    <span style="font-size: 0.85rem; color: #6c757d;">2024-05-31 15:30</span>
                </td>
                <td style="padding: 12px 8px;">
                    <div style="display: flex; gap: 5px;">
                        <button onclick="showDebugProgress('DO20240531003')" style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: none; background: #17a2b8; color: white; cursor: pointer;">进度</button>
                        <button onclick="showDebugDetail('DO20240531003')" style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer;">详情</button>
                    </div>
                </td>
            </tr>
            <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                <td style="padding: 12px 8px;">
                    <span style="color: #667eea; font-weight: 500;">#DO20240530006</span>
                </td>
                <td style="padding: 12px 8px;">
                    <div>
                        <div style="font-weight: 500; color: #333;">广州商业中心</div>
                        <div style="font-size: 0.8rem; color: #6c757d;">张工 | 136-0003-0003</div>
                    </div>
                </td>
                <td style="padding: 12px 8px;">
                    <span style="font-size: 0.9rem; color: #333;">中央空调系统 | 型号：VRV-X</span>
                </td>
                <td style="padding: 12px 8px;">
                    <span style="font-size: 0.9rem; color: #333;">系统性能测试调试</span>
                </td>
                <td style="padding: 12px 8px;">
                    <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.8rem; font-weight: 500; background: #d4edda; color: #155724;">已完成</span>
                </td>
                <td style="padding: 12px 8px;">
                    <span style="font-size: 0.85rem; color: #6c757d;">2024-05-30 10:15</span>
                </td>
                <td style="padding: 12px 8px;">
                    <div style="display: flex; gap: 5px;">
                        <button onclick="showDebugReport('DO20240530006')" style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: none; background: #28a745; color: white; cursor: pointer;">报告</button>
                        <button onclick="showDebugDetail('DO20240530006')" style="padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer;">详情</button>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    
    <!-- 分页 -->
    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid #f0f0f0;">
        <div style="color: #6c757d; font-size: 0.9rem;" id="debug-pagination-info">
            共 <span style="color: #333; font-weight: 500;" id="debug-total-count">67</span> 条记录，第 <span style="color: #333; font-weight: 500;" id="debug-current-page">1</span> 页，共 <span style="color: #333; font-weight: 500;" id="debug-total-pages">7</span> 页
        </div>
        <div style="display: flex; gap: 5px;" id="debug-pagination-buttons">
            <button onclick="goToDebugPage(1)" style="padding: 8px 12px; border: 1px solid #e0e3ea; background: #f8f9fa; color: #6c757d; border-radius: 6px; cursor: not-allowed;" disabled>
                <i class="fas fa-angle-left"></i> 上一页
            </button>
            <button onclick="goToDebugPage(1)" style="padding: 8px 12px; border: 1px solid #667eea; background: #667eea; color: white; border-radius: 6px; cursor: pointer;">1</button>
            <button onclick="goToDebugPage(2)" style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;">2</button>
            <button onclick="goToDebugPage(3)" style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;">3</button>
            <span style="padding: 8px 12px; color: #6c757d;">...</span>
            <button onclick="goToDebugPage(7)" style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;">7</button>
            <button onclick="goToDebugPage(2)" style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;">
                下一页 <i class="fas fa-angle-right"></i>
            </button>
        </div>
    </div>
</div>
    </div>

    <script>
    // ======== 调试工单独立页面交互逻辑 ========
    
    // 调试工单数据
    const debugOrderData = {
        'DO20240601001': {
            customer: '北京数据中心',
            contact: '李经理',
            phone: '138-0001-0001',
            equipment: '精密空调系统',
            model: 'PEX-100',
            debugType: '温湿度参数优化调试',
            address: '北京市朝阳区数据中心园区A座',
            createTime: '2024-06-01 11:00',
            status: '待调试'
        },
        'DO20240531003': {
            customer: '上海制造工厂',
            contact: '王总',
            phone: '139-0002-0002',
            equipment: '工业制冷设备',
            model: 'IC-500',
            debugType: '制冷效率优化调试',
            address: '上海市浦东新区工业园区B区',
            createTime: '2024-05-31 15:30',
            status: '调试中'
        },
        'DO20240530006': {
            customer: '广州商业中心',
            contact: '张工',
            phone: '136-0003-0003',
            equipment: '中央空调系统',
            model: 'VRV-X',
            debugType: '系统性能测试调试',
            address: '广州市天河区商业中心大厦',
            createTime: '2024-05-30 10:15',
            status: '已完成'
        }
    };

    // 调试工单接单弹窗
    function showDebugAccept(orderId) {
        const orderInfo = debugOrderData[orderId];
        if (!orderInfo) return;

        const modal = document.createElement('div');
        modal.className = 'global-modal';
        modal.style.cssText = `
            position: fixed !important; top: 0 !important; left: 0 !important;
            width: 100vw !important; height: 100vh !important;
            background-color: rgba(0,0,0,0.6) !important; display: flex !important;
            justify-content: center !important; align-items: center !important;
            z-index: 999999 !important;
        `;
        
        modal.innerHTML = `
            <div style="background: white; border-radius: 12px; width: 90%; max-width: 600px; max-height: 90vh; overflow-y: auto; position: relative;">
                <div style="padding: 20px 25px; border-bottom: 1px solid #e9ecef; display: flex; justify-content: space-between; align-items: center;">
                    <h3 style="margin: 0; color: #333; font-size: 1.3rem; display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-wrench" style="color: #667eea;"></i>
                        接受调试工单
                    </h3>
                    <button onclick="closeDebugModal()" style="background: none; border: none; font-size: 1.5rem; color: #6c757d; cursor: pointer;">×</button>
                </div>
                
                <div style="padding: 25px;">
                    <form id="debugAcceptForm" onsubmit="handleDebugSubmit(event, 'accept', '${orderId}')">
                        <!-- 工单信息 -->
                        <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                            <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem;">
                                <i class="fas fa-info-circle" style="color: #17a2b8;"></i> 工单信息
                            </h4>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                <div><strong>工单编号：</strong>#${orderId}</div>
                                <div><strong>客户：</strong>${orderInfo.customer}</div>
                                <div><strong>设备：</strong>${orderInfo.equipment}</div>
                                <div><strong>型号：</strong>${orderInfo.model}</div>
                                <div style="grid-column: 1/-1;"><strong>调试内容：</strong>${orderInfo.debugType}</div>
                                <div style="grid-column: 1/-1;"><strong>服务地址：</strong>${orderInfo.address}</div>
                            </div>
                        </div>

                        <!-- 调试安排 -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #333; margin-bottom: 15px; font-size: 1.1rem;">
                                <i class="fas fa-calendar-alt" style="color: #ffc107;"></i> 调试安排
                            </h4>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">预计开始时间 <span style="color: #dc3545;">*</span></label>
                                    <input name="startTime" type="datetime-local" required 
                                           style="width: 100%; padding: 12px; border: 1px solid #e0e3ea; border-radius: 6px;">
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">预计完成时间 <span style="color: #dc3545;">*</span></label>
                                    <input name="endTime" type="datetime-local" required
                                           style="width: 100%; padding: 12px; border: 1px solid #e0e3ea; border-radius: 6px;">
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">调试工程师 <span style="color: #dc3545;">*</span></label>
                                    <select name="engineer" required style="width: 100%; padding: 12px; border: 1px solid #e0e3ea; border-radius: 6px;">
                                        <option value="">请选择调试工程师</option>
                                        <option value="zhang">张工程师 - 空调系统专家</option>
                                        <option value="li">李工程师 - 制冷设备专家</option>
                                        <option value="wang">王工程师 - 通风系统专家</option>
                                        <option value="zhao">赵工程师 - 自控系统专家</option>
                                    </select>
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">联系电话</label>
                                    <input name="contactPhone" type="tel" placeholder="工程师联系电话"
                                           style="width: 100%; padding: 12px; border: 1px solid #e0e3ea; border-radius: 6px;">
                                </div>
                            </div>
                        </div>

                        <!-- 调试要求 -->
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">特殊要求说明</label>
                            <textarea name="requirements" placeholder="请描述调试的特殊要求、注意事项等..."
                                      style="width: 100%; padding: 12px; border: 1px solid #e0e3ea; border-radius: 6px; min-height: 80px; resize: vertical;"></textarea>
                        </div>

                        <!-- 所需工具清单 -->
                        <div style="margin-bottom: 25px;">
                            <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">所需工具和设备</label>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox" name="tools" value="thermometer"> 温度计
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox" name="tools" value="pressure_gauge"> 压力表
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox" name="tools" value="multimeter"> 万用表
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox" name="tools" value="oscilloscope"> 示波器
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox" name="tools" value="computer"> 调试电脑
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox" name="tools" value="other"> 其他工具
                                </label>
                            </div>
                        </div>

                        <!-- 提交按钮 -->
                        <div style="display: flex; gap: 10px; justify-content: flex-end;">
                            <button type="button" onclick="closeDebugModal()" 
                                    style="padding: 12px 20px; border: 1px solid #e0e3ea; background: white; color: #6c757d; border-radius: 6px; cursor: pointer;">
                                取消
                            </button>
                            <button type="submit" 
                                    style="padding: 12px 20px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500;">
                                确认接单
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        `;
        
        document.body.appendChild(modal);
        
        // 点击背景关闭
        modal.addEventListener('click', function(e) {
            if (e.target === modal) closeDebugModal();
        });
        
        // ESC键关闭
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') closeDebugModal();
        });
    }

    // 调试工单进度更新弹窗
    function showDebugProgress(orderId) {
        const orderInfo = debugOrderData[orderId];
        if (!orderInfo) return;

        const modal = document.createElement('div');
        modal.className = 'global-modal';
        modal.style.cssText = `
            position: fixed !important; top: 0 !important; left: 0 !important;
            width: 100vw !important; height: 100vh !important;
            background-color: rgba(0,0,0,0.6) !important; display: flex !important;
            justify-content: center !important; align-items: center !important;
            z-index: 999999 !important;
        `;
        
        modal.innerHTML = `
            <div style="background: white; border-radius: 12px; width: 90%; max-width: 500px; max-height: 90vh; overflow-y: auto;">
                <div style="padding: 20px 25px; border-bottom: 1px solid #e9ecef; display: flex; justify-content: space-between; align-items: center;">
                    <h3 style="margin: 0; color: #333; font-size: 1.3rem; display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-tasks" style="color: #17a2b8;"></i>
                        更新调试进度
                    </h3>
                    <button onclick="closeDebugModal()" style="background: none; border: none; font-size: 1.5rem; color: #6c757d; cursor: pointer;">×</button>
                </div>
                
                <div style="padding: 25px;">
                    <form onsubmit="handleDebugSubmit(event, 'progress', '${orderId}')">
                        <div style="background: #f8f9fa; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                            <strong>工单：</strong>#${orderId} - ${orderInfo.customer}
                        </div>

                        <div style="margin-bottom: 20px;">
                            <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">当前进度状态 <span style="color: #dc3545;">*</span></label>
                            <select name="progressStatus" required style="width: 100%; padding: 12px; border: 1px solid #e0e3ea; border-radius: 6px;">
                                <option value="">请选择进度状态</option>
                                <option value="prepare">准备阶段</option>
                                <option value="debug">正在调试</option>
                                <option value="test">测试验证</option>
                                <option value="optimize">参数优化</option>
                                <option value="complete">调试完成</option>
                            </select>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">进度说明</label>
                            <textarea name="progressDescription" placeholder="请描述当前调试进度、遇到的问题或完成的工作..."
                                      style="width: 100%; padding: 12px; border: 1px solid #e0e3ea; border-radius: 6px; min-height: 100px; resize: vertical;"></textarea>
                        </div>

                        <div style="margin-bottom: 25px;">
                            <label style="display: block; color: #333; font-weight: 500; margin-bottom: 8px;">现场照片</label>
                            <div onclick="uploadDebugPhoto(this)" style="border: 2px dashed #e9ecef; border-radius: 8px; padding: 30px; text-align: center; cursor: pointer; transition: all 0.3s;">
                                <i class="fas fa-camera" style="font-size: 2rem; color: #6c757d; margin-bottom: 10px;"></i>
                                <div style="color: #6c757d; margin-bottom: 5px;">点击上传现场照片</div>
                                <div style="font-size: 0.85rem; color: #adb5bd;">支持 JPG、PNG 格式，最多5张</div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 10px; justify-content: flex-end;">
                            <button type="button" onclick="closeDebugModal()" style="padding: 12px 20px; border: 1px solid #e0e3ea; background: white; color: #6c757d; border-radius: 6px; cursor: pointer;">取消</button>
                            <button type="submit" style="padding: 12px 20px; background: #17a2b8; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500;">更新进度</button>
                        </div>
                    </form>
                </div>
            </div>
        `;
        
        document.body.appendChild(modal);
                 modal.addEventListener('click', function(e) {
             if (e.target === modal) closeDebugModal();
         });
     }

     // 调试报告查看弹窗
     function showDebugReport(orderId) {
         const orderInfo = debugOrderData[orderId];
         if (!orderInfo) return;

         const modal = document.createElement('div');
         modal.className = 'global-modal';
         modal.style.cssText = `
             position: fixed !important; top: 0 !important; left: 0 !important;
             width: 100vw !important; height: 100vh !important;
             background-color: rgba(0,0,0,0.6) !important; display: flex !important;
             justify-content: center !important; align-items: center !important;
             z-index: 999999 !important;
         `;
         
         modal.innerHTML = `
             <div style="background: white; border-radius: 12px; width: 95%; max-width: 800px; max-height: 90vh; overflow-y: auto;">
                 <div style="padding: 20px 25px; border-bottom: 1px solid #e9ecef; display: flex; justify-content: space-between; align-items: center;">
                     <h3 style="margin: 0; color: #333; font-size: 1.3rem; display: flex; align-items: center; gap: 10px;">
                         <i class="fas fa-file-alt" style="color: #28a745;"></i>
                         调试完成报告
                     </h3>
                     <div style="display: flex; gap: 10px;">
                         <button onclick="exportDebugReport('${orderId}')" style="padding: 8px 15px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer;">
                             <i class="fas fa-download"></i> 导出PDF
                         </button>
                         <button onclick="closeDebugModal()" style="background: none; border: none; font-size: 1.5rem; color: #6c757d; cursor: pointer;">×</button>
                     </div>
                 </div>
                 
                 <div style="padding: 25px;">
                     <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                         <div style="background: #f8f9fa; border-radius: 8px; padding: 20px;">
                             <h4 style="color: #333; margin-bottom: 15px;">基本信息</h4>
                             <div style="line-height: 1.8;">
                                 <div><strong>工单编号：</strong>#${orderId}</div>
                                 <div><strong>客户：</strong>${orderInfo.customer}</div>
                                 <div><strong>设备：</strong>${orderInfo.equipment} ${orderInfo.model}</div>
                                 <div><strong>完成时间：</strong>2024-06-02 16:30</div>
                             </div>
                         </div>
                         <div style="background: #f8f9fa; border-radius: 8px; padding: 20px;">
                             <h4 style="color: #333; margin-bottom: 15px;">调试结果</h4>
                             <div style="line-height: 1.8;">
                                 <div><strong>状态：</strong><span style="color: #28a745;">✅ 调试成功</span></div>
                                 <div><strong>耗时：</strong>3.5小时</div>
                                 <div><strong>工程师：</strong>张工程师</div>
                                 <div><strong>验收：</strong>客户已确认</div>
                             </div>
                         </div>
                     </div>

                     <div style="margin-bottom: 25px;">
                         <h4 style="color: #333; margin-bottom: 15px;">调试内容详情</h4>
                         <div style="background: white; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px;">
                             <div style="margin-bottom: 15px;">
                                 <strong style="color: #17a2b8;">1. 问题诊断</strong>
                                 <p style="margin: 8px 0; line-height: 1.6;">检测发现${orderInfo.equipment}参数设置不当，运行效率偏低，需要进行全面的参数优化调试。</p>
                             </div>
                             <div style="margin-bottom: 15px;">
                                 <strong style="color: #17a2b8;">2. 解决方案</strong>
                                 <p style="margin: 8px 0; line-height: 1.6;">重新设定运行参数，优化控制逻辑，增加节能模式，提升设备整体运行效率。</p>
                             </div>
                             <div style="margin-bottom: 15px;">
                                 <strong style="color: #17a2b8;">3. 测试验证</strong>
                                 <p style="margin: 8px 0; line-height: 1.6;">进行连续6小时运行测试，系统运行稳定，各项参数正常，能效比提升20%。</p>
                             </div>
                             <div>
                                 <strong style="color: #17a2b8;">4. 优化建议</strong>
                                 <p style="margin: 8px 0; line-height: 1.6;">建议定期检查设备参数，建立预防性维护计划，可进一步延长设备使用寿命。</p>
                             </div>
                         </div>
                     </div>

                     <div style="background: #d4edda; border: 1px solid #c3e6cb; border-radius: 8px; padding: 20px;">
                         <h4 style="color: #155724; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                             <i class="fas fa-check-circle"></i> 客户验收确认
                         </h4>
                         <p style="color: #155724; margin: 0; line-height: 1.6;">客户已确认调试效果满意，设备运行稳定，能效显著提升。感谢专业的技术服务！</p>
                     </div>
                 </div>
             </div>
         `;
         
         document.body.appendChild(modal);
         modal.addEventListener('click', function(e) {
             if (e.target === modal) closeDebugModal();
         });
     }

     // 调试工单详情查看弹窗
     function showDebugDetail(orderId) {
         const orderInfo = debugOrderData[orderId];
         if (!orderInfo) return;

         const modal = document.createElement('div');
         modal.className = 'global-modal';
         modal.style.cssText = `
             position: fixed !important; top: 0 !important; left: 0 !important;
             width: 100vw !important; height: 100vh !important;
             background-color: rgba(0,0,0,0.6) !important; display: flex !important;
             justify-content: center !important; align-items: center !important;
             z-index: 999999 !important;
         `;
         
         modal.innerHTML = `
             <div style="background: white; border-radius: 12px; width: 90%; max-width: 700px; max-height: 90vh; overflow-y: auto;">
                 <div style="padding: 20px 25px; border-bottom: 1px solid #e9ecef; display: flex; justify-content: space-between; align-items: center;">
                     <h3 style="margin: 0; color: #333; font-size: 1.3rem; display: flex; align-items: center; gap: 10px;">
                         <i class="fas fa-info-circle" style="color: #667eea;"></i>
                         调试工单详情
                     </h3>
                     <button onclick="closeDebugModal()" style="background: none; border: none; font-size: 1.5rem; color: #6c757d; cursor: pointer;">×</button>
                 </div>
                 
                 <div style="padding: 25px;">
                     <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                         <div style="background: #f8f9fa; border-radius: 8px; padding: 20px;">
                             <h4 style="color: #333; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                                 <i class="fas fa-building" style="color: #667eea;"></i>
                                 客户信息
                             </h4>
                             <div style="line-height: 1.8;">
                                 <div><strong>公司名称：</strong>${orderInfo.customer}</div>
                                 <div><strong>联系人：</strong>${orderInfo.contact}</div>
                                 <div><strong>联系电话：</strong>${orderInfo.phone}</div>
                                 <div><strong>服务地址：</strong>${orderInfo.address}</div>
                             </div>
                         </div>
                         <div style="background: #f8f9fa; border-radius: 8px; padding: 20px;">
                             <h4 style="color: #333; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                                 <i class="fas fa-cogs" style="color: #28a745;"></i>
                                 设备信息
                             </h4>
                             <div style="line-height: 1.8;">
                                 <div><strong>设备类型：</strong>${orderInfo.equipment}</div>
                                 <div><strong>设备型号：</strong>${orderInfo.model}</div>
                                 <div><strong>调试内容：</strong>${orderInfo.debugType}</div>
                                 <div><strong>重要程度：</strong><span style="color: #dc3545;">高</span></div>
                             </div>
                         </div>
                     </div>

                     <div style="margin-bottom: 25px;">
                         <h4 style="color: #333; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                             <i class="fas fa-file-alt" style="color: #ffc107;"></i>
                             工单详情
                         </h4>
                         <div style="background: white; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px;">
                             <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                                 <div><strong>工单编号：</strong>#${orderId}</div>
                                 <div><strong>创建时间：</strong>${orderInfo.createTime}</div>
                                 <div><strong>当前状态：</strong><span style="padding: 3px 8px; border-radius: 12px; font-size: 0.85rem; background: #d1ecf1; color: #0c5460;">${orderInfo.status}</span></div>
                                 <div><strong>预计耗时：</strong>3-5小时</div>
                             </div>
                             <div style="border-top: 1px solid #f0f0f0; padding-top: 15px;">
                                 <strong>调试要求：</strong>
                                 <p style="margin: 8px 0; line-height: 1.6; color: #6c757d;">
                                     需要对${orderInfo.equipment}进行全面调试优化，确保设备运行效率达到最佳状态。包括参数调整、性能测试、效果验证等。要求调试完成后设备能够稳定高效运行。
                                 </p>
                             </div>
                         </div>
                     </div>

                     <div style="background: #f8f9fa; border-radius: 8px; padding: 20px;">
                         <h4 style="color: #333; margin-bottom: 15px;">联系方式</h4>
                         <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                             <div>
                                 <strong>客户联系人：</strong>${orderInfo.contact}
                                 <div style="margin-top: 5px;">
                                     <a href="tel:${orderInfo.phone}" style="color: #667eea; text-decoration: none;">
                                         <i class="fas fa-phone"></i> ${orderInfo.phone}
                                     </a>
                                 </div>
                             </div>
                             <div>
                                 <strong>服务工程师：</strong>张工程师
                                 <div style="margin-top: 5px;">
                                     <a href="tel:138-8888-8888" style="color: #667eea; text-decoration: none;">
                                         <i class="fas fa-phone"></i> 138-8888-8888
                                     </a>
                                 </div>
                             </div>
                         </div>
                     </div>
                 </div>
             </div>
         `;
         
         document.body.appendChild(modal);
         modal.addEventListener('click', function(e) {
             if (e.target === modal) closeDebugModal();
         });
     }

     // 关闭调试工单弹窗
     function closeDebugModal() {
         const modal = document.querySelector('.global-modal');
         if (modal) modal.remove();
     }

     // 处理调试工单表单提交
     function handleDebugSubmit(event, action, orderId) {
         event.preventDefault();
         const form = event.target;
         
         // 验证表单
         if (!form.checkValidity()) {
             form.reportValidity();
             return;
         }
         
         // 显示提交中状态
         const submitBtn = form.querySelector('button[type="submit"]');
         const originalText = submitBtn.innerHTML;
         submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 提交中...';
         submitBtn.disabled = true;
         
         setTimeout(() => {
             let message = '';
             let details = '';
             
             switch(action) {
                 case 'accept':
                     const engineer = form.engineer.value;
                     const startTime = form.startTime.value;
                     message = `✅ 调试工单 ${orderId} 接单成功！`;
                     details = `调试工程师：${form.querySelector('select[name="engineer"] option:checked').text}\n预计开始时间：${startTime}\n客户将收到短信通知`;
                     break;
                 case 'progress':
                     const progressStatus = form.progressStatus.value;
                     message = `✅ 调试工单 ${orderId} 进度更新成功！`;
                     details = `当前进度：${form.querySelector('select[name="progressStatus"] option:checked').text}\n进度信息已同步给客户`;
                     break;
             }
             
             // 创建成功提示弹窗
             const successModal = document.createElement('div');
             successModal.style.cssText = `
                 position: fixed !important; top: 0 !important; left: 0 !important;
                 width: 100vw !important; height: 100vh !important;
                 background-color: rgba(0,0,0,0.6) !important; display: flex !important;
                 justify-content: center !important; align-items: center !important;
                 z-index: 9999999 !important;
             `;
             successModal.innerHTML = `
                 <div style="background: white; border-radius: 12px; padding: 30px; max-width: 400px; width: 90%; text-align: center; box-shadow: 0 8px 32px rgba(0,0,0,0.2);">
                     <div style="color: #28a745; font-size: 3rem; margin-bottom: 15px;">
                         <i class="fas fa-check-circle"></i>
                     </div>
                     <h3 style="color: #333; margin-bottom: 15px; font-size: 1.2rem;">${message}</h3>
                     <p style="color: #6c757d; line-height: 1.6; margin-bottom: 20px; white-space: pre-line;">${details}</p>
                     <button onclick="this.closest('div[style*=\"fixed\"]').remove()" style="background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: 500;">
                         确定
                     </button>
                 </div>
             `;
             document.body.appendChild(successModal);
             
             closeDebugModal();
             
             // 模拟更新页面状态
             if (action === 'accept') {
                 updateDebugOrderStatus(orderId, '调试中');
             }
         }, 1500);
     }

     // 更新调试工单状态
     function updateDebugOrderStatus(orderId, newStatus) {
         const rows = document.querySelectorAll('tr');
         for (let row of rows) {
             const orderSpan = row.querySelector(`span:contains("#${orderId}")`);
             if (orderSpan && orderSpan.textContent.includes(orderId)) {
                 const statusCell = row.querySelector('td:nth-child(5) span');
                 if (statusCell) {
                     statusCell.textContent = newStatus;
                     statusCell.style.background = '#d1ecf1';
                     statusCell.style.color = '#0c5460';
                 }
                 break;
             }
         }
     }

     // 上传调试照片
     function uploadDebugPhoto(element) {
         const fileInput = document.createElement('input');
         fileInput.type = 'file';
         fileInput.accept = '.jpg,.jpeg,.png';
         fileInput.multiple = true;
         fileInput.onchange = function(e) {
             const files = Array.from(e.target.files);
             if (files.length > 0) {
                 element.innerHTML = `
                     <i class="fas fa-check-circle" style="font-size: 1.5rem; color: #28a745; margin-bottom: 10px;"></i>
                     <div style="color: #28a745; margin-bottom: 5px;">已选择 ${files.length} 张照片</div>
                     <div style="font-size: 0.85rem; color: #6c757d;">点击可重新选择</div>
                 `;
                 element.style.borderColor = '#28a745';
                 element.style.backgroundColor = '#f8fff9';
             }
         };
         fileInput.click();
     }

     // 导出调试工单数据
     function exportDebugData() {
         const currentDate = new Date().toISOString().split('T')[0];
         const toast = document.createElement('div');
         toast.style.cssText = `
             position: fixed; top: 20px; right: 20px; background: #28a745; color: white;
             padding: 15px 20px; border-radius: 8px; z-index: 10000;
             box-shadow: 0 4px 12px rgba(0,0,0,0.2);
         `;
         toast.innerHTML = `
             <i class="fas fa-download"></i> 调试工单数据导出中...
         `;
         document.body.appendChild(toast);
         
         setTimeout(() => {
             toast.innerHTML = `
                 <i class="fas fa-check-circle"></i> 调试工单数据已导出！
             `;
             setTimeout(() => toast.remove(), 2000);
         }, 1500);
         
         console.log('导出调试工单数据:', { date: currentDate, count: 3 });
     }

     // 导出调试报告
     function exportDebugReport(orderId) {
         const orderInfo = debugOrderData[orderId];
         const toast = document.createElement('div');
         toast.style.cssText = `
             position: fixed; top: 20px; right: 20px; background: #17a2b8; color: white;
             padding: 15px 20px; border-radius: 8px; z-index: 10000;
             box-shadow: 0 4px 12px rgba(0,0,0,0.2);
         `;
         toast.innerHTML = `
             <i class="fas fa-file-pdf"></i> 调试报告生成中...
         `;
         document.body.appendChild(toast);
         
         setTimeout(() => {
             toast.innerHTML = `
                 <i class="fas fa-check-circle"></i> 调试报告已导出！
             `;
             setTimeout(() => toast.remove(), 2000);
         }, 1500);
         
         console.log('导出调试报告:', { orderId, customer: orderInfo.customer });
     }

     // ======== 调试工单筛选、搜索和分页功能 ========
     
     // 当前分页状态
     let currentDebugPage = 1;
     let debugPageSize = 10;
     let debugTotalRecords = 67;
     let debugFilteredRecords = 67;

     // 筛选调试工单
     function filterDebugOrders() {
         const statusFilter = document.getElementById('debug-status-filter').value;
         const deviceFilter = document.getElementById('debug-device-filter').value;
         const typeFilter = document.getElementById('debug-type-filter').value;
         
         // 显示筛选中提示
         showDebugFilterLoading();
         
         setTimeout(() => {
             // 模拟筛选逻辑
             let filteredCount = debugTotalRecords;
             
             if (statusFilter || deviceFilter || typeFilter) {
                 // 根据筛选条件计算结果数量
                 if (statusFilter === '待调试') filteredCount = 5;
                 else if (statusFilter === '调试中') filteredCount = 3;
                 else if (statusFilter === '已完成') filteredCount = 59;
                 else if (deviceFilter === '空调系统') filteredCount = 25;
                 else if (deviceFilter === '通风设备') filteredCount = 18;
                 else if (deviceFilter === '制冷设备') filteredCount = 20;
                 else if (typeFilter === '新设备调试') filteredCount = 28;
                 else if (typeFilter === '参数优化') filteredCount = 22;
                 else if (typeFilter === '故障调试') filteredCount = 12;
                 else if (typeFilter === '性能测试') filteredCount = 15;
                 else filteredCount = Math.floor(Math.random() * 40) + 10;
             }
             
             debugFilteredRecords = filteredCount;
             currentDebugPage = 1;
             
             updateDebugPagination();
             showDebugFilterSuccess(filteredCount);
             
         }, 800);
     }

     // 搜索调试工单
     function searchDebugOrders() {
         const searchInput = document.getElementById('debug-search-input');
         const searchTerm = searchInput.value.trim();
         
         if (!searchTerm) {
             showDebugToast('请输入搜索关键词', 'warning');
             return;
         }
         
         // 显示搜索中提示
         showDebugSearchLoading();
         
         setTimeout(() => {
             // 模拟搜索结果
             let searchResults = 0;
             if (searchTerm.toLowerCase().includes('do')) {
                 searchResults = Math.floor(Math.random() * 10) + 1;
             } else if (searchTerm.includes('2024')) {
                 searchResults = Math.floor(Math.random() * 20) + 5;
             } else if (searchTerm.includes('空调') || searchTerm.includes('制冷')) {
                 searchResults = Math.floor(Math.random() * 15) + 3;
             } else {
                 searchResults = Math.floor(Math.random() * 5);
             }
             
             debugFilteredRecords = searchResults;
             currentDebugPage = 1;
             
             updateDebugPagination();
             showDebugSearchSuccess(searchResults, searchTerm);
             
         }, 1000);
     }

     // 跳转到指定页面
     function goToDebugPage(page) {
         const totalPages = Math.ceil(debugFilteredRecords / debugPageSize);
         
         if (page < 1 || page > totalPages) return;
         
         currentDebugPage = page;
         updateDebugPagination();
         
         // 显示页面跳转提示
         showDebugToast(`已跳转到第 ${page} 页`, 'info');
         
         // 滚动到表格顶部
         const tableContainer = document.querySelector('table').closest('div');
         tableContainer.scrollIntoView({ behavior: 'smooth' });
     }

     // 更新分页信息
     function updateDebugPagination() {
         const totalPages = Math.ceil(debugFilteredRecords / debugPageSize);
         
         // 更新分页信息文本
         document.getElementById('debug-total-count').textContent = debugFilteredRecords;
         document.getElementById('debug-current-page').textContent = currentDebugPage;
         document.getElementById('debug-total-pages').textContent = totalPages;
         
         // 更新分页按钮
         updateDebugPaginationButtons(totalPages);
     }

     // 更新分页按钮
     function updateDebugPaginationButtons(totalPages) {
         const buttonsContainer = document.getElementById('debug-pagination-buttons');
         
         let buttonsHTML = '';
         
         // 上一页按钮
         if (currentDebugPage > 1) {
             buttonsHTML += `<button onclick="goToDebugPage(${currentDebugPage - 1})" style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;"><i class="fas fa-angle-left"></i> 上一页</button>`;
         } else {
             buttonsHTML += `<button style="padding: 8px 12px; border: 1px solid #e0e3ea; background: #f8f9fa; color: #6c757d; border-radius: 6px; cursor: not-allowed;" disabled><i class="fas fa-angle-left"></i> 上一页</button>`;
         }
         
         // 页码按钮
         for (let i = 1; i <= Math.min(totalPages, 7); i++) {
             if (i === currentDebugPage) {
                 buttonsHTML += `<button onclick="goToDebugPage(${i})" style="padding: 8px 12px; border: 1px solid #667eea; background: #667eea; color: white; border-radius: 6px; cursor: pointer;">${i}</button>`;
             } else {
                 buttonsHTML += `<button onclick="goToDebugPage(${i})" style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;">${i}</button>`;
             }
         }
         
         if (totalPages > 7) {
             buttonsHTML += `<span style="padding: 8px 12px; color: #6c757d;">...</span>`;
             buttonsHTML += `<button onclick="goToDebugPage(${totalPages})" style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;">${totalPages}</button>`;
         }
         
         // 下一页按钮
         if (currentDebugPage < totalPages) {
             buttonsHTML += `<button onclick="goToDebugPage(${currentDebugPage + 1})" style="padding: 8px 12px; border: 1px solid #e0e3ea; background: white; color: #333; border-radius: 6px; cursor: pointer;">下一页 <i class="fas fa-angle-right"></i></button>`;
         } else {
             buttonsHTML += `<button style="padding: 8px 12px; border: 1px solid #e0e3ea; background: #f8f9fa; color: #6c757d; border-radius: 6px; cursor: not-allowed;" disabled>下一页 <i class="fas fa-angle-right"></i></button>`;
         }
         
         buttonsContainer.innerHTML = buttonsHTML;
     }

     // 显示筛选加载状态
     function showDebugFilterLoading() {
         showDebugToast('<i class="fas fa-spinner fa-spin"></i> 正在筛选调试工单...', 'info');
     }

     // 显示筛选成功
     function showDebugFilterSuccess(count) {
         showDebugToast(`✅ 筛选完成，找到 ${count} 条调试工单`, 'success');
     }

     // 显示搜索加载状态
     function showDebugSearchLoading() {
         showDebugToast('<i class="fas fa-spinner fa-spin"></i> 正在搜索调试工单...', 'info');
     }

     // 显示搜索成功
     function showDebugSearchSuccess(count, term) {
         if (count > 0) {
             showDebugToast(`✅ 搜索完成，找到 ${count} 条包含"${term}"的调试工单`, 'success');
         } else {
             showDebugToast(`❌ 未找到包含"${term}"的调试工单`, 'warning');
         }
     }

     // 显示调试工单Toast提示
     function showDebugToast(message, type = 'info') {
         const toast = document.createElement('div');
         
         let bgColor = '#17a2b8';
         if (type === 'success') bgColor = '#28a745';
         else if (type === 'warning') bgColor = '#ffc107';
         else if (type === 'error') bgColor = '#dc3545';
         
         toast.style.cssText = `
             position: fixed; top: 20px; right: 20px; background: ${bgColor}; color: white;
             padding: 15px 20px; border-radius: 8px; z-index: 10000;
             box-shadow: 0 4px 12px rgba(0,0,0,0.2); max-width: 400px;
             font-size: 0.9rem; line-height: 1.4;
         `;
         toast.innerHTML = message;
         document.body.appendChild(toast);
         
         setTimeout(() => toast.remove(), 3000);
     }
     </script>
</body>
</html> 