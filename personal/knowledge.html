<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>知识库管理 - 快哥智服</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f8f9fa;
            color: #333;
            line-height: 1.6;
        }

        .page-header {
            background: white;
            padding: 25px 30px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .header-left h1 {
            color: #333;
            font-size: 1.8rem;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header-left h1 i {
            color: #667eea;
        }

        .page-desc {
            color: #6c757d;
            font-size: 0.95rem;
            margin: 0;
        }

        button:hover {
            opacity: 0.8;
            transform: translateY(-1px);
        }

        table tr:hover {
            background: #f5f7fa !important;
        }

        .upload-area {
            border: 2px dashed #e0e3ea;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .upload-area:hover {
            border-color: #667eea;
            background: #f8f9fa;
        }
    </style>
</head>
<body>
    <div class="page-header">
        <div class="header-left">
            <h1><i class="fas fa-book"></i> 知识库管理</h1>
            <p class="page-desc">管理您的技术知识库，分享专业经验，获得收益</p>
        </div>
    </div>

    <!-- 统计卡片 -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 25px;">
        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">总内容</span>
                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                    <i class="fas fa-book"></i>
                </div>
            </div>
            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">45</div>
            <div style="font-size: 0.8rem; color: #28a745; margin-top: 8px;">
                <i class="fas fa-arrow-up"></i> +8 本月新增
            </div>
        </div>
        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">总浏览量</span>
                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #ffc107, #fd7e14); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                    <i class="fas fa-eye"></i>
                </div>
            </div>
            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">12,580</div>
            <div style="font-size: 0.8rem; color: #ffc107; margin-top: 8px;">
                <i class="fas fa-arrow-up"></i> +15.2% 较上月
            </div>
        </div>
        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">总收益</span>
                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #28a745, #20c997); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                    <i class="fas fa-coins"></i>
                </div>
            </div>
            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">¥8,960</div>
            <div style="font-size: 0.8rem; color: #28a745; margin-top: 8px;">
                <i class="fas fa-arrow-up"></i> +22.5% 较上月
            </div>
        </div>
        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">平均评分</span>
                <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #17a2b8, #20c997); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                    <i class="fas fa-star"></i>
                </div>
            </div>
            <div style="font-size: 1.8rem; font-weight: bold; color: #333;">4.7</div>
            <div style="font-size: 0.8rem; color: #17a2b8; margin-top: 8px;">
                <i class="fas fa-star"></i> 优秀评价
            </div>
        </div>
    </div>

    <!-- 操作按钮 -->
    <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 20px;">
        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;">
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <button onclick="showUploadModal()" style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                    <i class="fas fa-upload"></i>
                    上传文档
                </button>
                <button onclick="showNewCategoryModal()" style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                    <i class="fas fa-plus"></i>
                    新增分类
                </button>
                <button onclick="showBatchOperationModal()" style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: #17a2b8; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                    <i class="fas fa-cogs"></i>
                    批量操作
                </button>
            </div>
            <div style="display: flex; gap: 10px; align-items: center;">
                <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                        <span style="color: #6c757d; font-size: 0.9rem; font-weight: 500;">可提现余额</span>
                        <div style="width: 35px; height: 35px; background: linear-gradient(135deg, #e83e8c, #fd7e14); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem;">
                            <i class="fas fa-wallet"></i>
                        </div>
                    </div>
                    <div style="font-size: 1.8rem; font-weight: bold; color: #333;">¥89.2</div>
                    <div style="font-size: 0.8rem; color: #dc3545; margin-top: 8px; cursor: pointer;" onclick="showWithdrawModal()">
                        <i class="fas fa-hand-holding-usd"></i> 立即提现
                    </div>
                </div>
            </div>
        </div>

    <!-- 积分收益说明 -->
    <div style="background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 10px; padding: 20px; margin-bottom: 20px; color: white;">
        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
            <div style="width: 50px; height: 50px; background: rgba(255,255,255,0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-star" style="font-size: 1.5rem;"></i>
            </div>
            <div>
                <h3 style="margin: 0 0 5px 0; font-size: 1.3rem;">知识共享积分规则</h3>
                <p style="margin: 0; opacity: 0.9; font-size: 0.9rem;">公开文档需平台审核通过后才能获得积分奖励</p>
            </div>
        </div>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
            <div style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 15px; text-align: center;">
                <div style="font-size: 1.2rem; font-weight: bold; margin-bottom: 5px;">+2积分</div>
                <div style="font-size: 0.85rem; opacity: 0.9;">每次文档被浏览</div>
            </div>
            <div style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 15px; text-align: center;">
                <div style="font-size: 1.2rem; font-weight: bold; margin-bottom: 5px;">+5积分</div>
                <div style="font-size: 0.85rem; opacity: 0.9;">每次文档被下载</div>
            </div>
            <div style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 15px; text-align: center;">
                <div style="font-size: 1.2rem; font-weight: bold; margin-bottom: 5px;">+10积分</div>
                <div style="font-size: 0.85rem; opacity: 0.9;">每次文档被收藏</div>
            </div>
            <div style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 15px; text-align: center;">
                <div style="font-size: 1.2rem; font-weight: bold; margin-bottom: 5px;">10积分=¥0.1</div>
                <div style="font-size: 0.85rem; opacity: 0.9;">积分兑换比例</div>
            </div>
        </div>
    </div>

    <!-- 知识分类管理 -->
    <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 20px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h3 style="color: #333; font-size: 1.2rem; display: flex; align-items: center; gap: 10px; margin: 0;">
                <i class="fas fa-layer-group" style="color: #667eea;"></i>
                知识分类管理
            </h3>
            <button onclick="showNewCategoryModal()" style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                <i class="fas fa-plus"></i>
                新增分类
            </button>
        </div>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
            <div style="border: 1px solid #e0e3ea; border-radius: 8px; padding: 15px; background: #f8f9fa;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <h4 style="color: #333; font-size: 1rem; margin: 0; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-tools" style="color: #667eea;"></i>
                        设备维修
                    </h4>
                    <div style="display: flex; gap: 5px;">
                        <button onclick="editCategory('设备维修')" style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #667eea; background: white; color: #667eea; cursor: pointer;">编辑</button>
                        <button onclick="deleteCategory('设备维修')" style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #dc3545; background: white; color: #dc3545; cursor: pointer;">删除</button>
                    </div>
                </div>
                <p style="color: #6c757d; font-size: 0.85rem; margin: 0 0 10px 0;">设备故障诊断、维修方法、零配件更换等技术文档</p>
                <div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.8rem; color: #6c757d;">
                    <span>文档数量: <strong style="color: #333;">45</strong></span>
                    <span>浏览: <strong style="color: #333;">1,256</strong></span>
                </div>
            </div>
            <div style="border: 1px solid #e0e3ea; border-radius: 8px; padding: 15px; background: #f8f9fa;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <h4 style="color: #333; font-size: 1rem; margin: 0; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-calendar-check" style="color: #28a745;"></i>
                        保养指南
                    </h4>
                    <div style="display: flex; gap: 5px;">
                        <button onclick="editCategory('保养指南')" style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #667eea; background: white; color: #667eea; cursor: pointer;">编辑</button>
                        <button onclick="deleteCategory('保养指南')" style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #dc3545; background: white; color: #dc3545; cursor: pointer;">删除</button>
                    </div>
                </div>
                <p style="color: #6c757d; font-size: 0.85rem; margin: 0 0 10px 0;">定期保养计划、操作规程、安全注意事项等文档</p>
                <div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.8rem; color: #6c757d;">
                    <span>文档数量: <strong style="color: #333;">32</strong></span>
                    <span>浏览: <strong style="color: #333;">956</strong></span>
                </div>
            </div>
            <div style="border: 1px solid #e0e3ea; border-radius: 8px; padding: 15px; background: #f8f9fa;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <h4 style="color: #333; font-size: 1rem; margin: 0; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-search" style="color: #ffc107;"></i>
                        巡检规范
                    </h4>
                    <div style="display: flex; gap: 5px;">
                        <button onclick="editCategory('巡检规范')" style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #667eea; background: white; color: #667eea; cursor: pointer;">编辑</button>
                        <button onclick="deleteCategory('巡检规范')" style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #dc3545; background: white; color: #dc3545; cursor: pointer;">删除</button>
                    </div>
                </div>
                <p style="color: #6c757d; font-size: 0.85rem; margin: 0 0 10px 0;">设备巡检标准、检查项目、记录表格等规范文档</p>
                <div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.8rem; color: #6c757d;">
                    <span>文档数量: <strong style="color: #333;">28</strong></span>
                    <span>浏览: <strong style="color: #333;">734</strong></span>
                </div>
            </div>
            <div style="border: 1px solid #e0e3ea; border-radius: 8px; padding: 15px; background: #f8f9fa;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <h4 style="color: #333; font-size: 1rem; margin: 0; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-exclamation-triangle" style="color: #dc3545;"></i>
                        常见故障
                    </h4>
                    <div style="display: flex; gap: 5px;">
                        <button onclick="editCategory('常见故障')" style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #667eea; background: white; color: #667eea; cursor: pointer;">编辑</button>
                        <button onclick="deleteCategory('常见故障')" style="padding: 3px 6px; font-size: 0.7rem; border-radius: 3px; border: 1px solid #dc3545; background: white; color: #dc3545; cursor: pointer;">删除</button>
                    </div>
                </div>
                <p style="color: #6c757d; font-size: 0.85rem; margin: 0 0 10px 0;">设备常见故障现象、原因分析、解决方案等资料</p>
                <div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.8rem; color: #6c757d;">
                    <span>文档数量: <strong style="color: #333;">67</strong></span>
                    <span>浏览: <strong style="color: #333;">2,156</strong></span>
                </div>
            </div>
        </div>
    </div>

    <!-- 筛选区域 -->
    <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 20px;">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin-bottom: 15px;">
            <div>
                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">可见性</label>
                <select style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                    <option value="">全部文档</option>
                    <option value="public">公开文档</option>
                    <option value="private">私有文档</option>
                </select>
            </div>
            <div>
                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">审核状态</label>
                <select style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                    <option value="">全部状态</option>
                    <option value="approved">已通过</option>
                    <option value="pending">审核中</option>
                    <option value="rejected">未通过</option>
                    <option value="none">无需审核</option>
                </select>
            </div>
            <div>
                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">知识分类</label>
                <select style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                <option>全部分类</option>
                <option>设备维修</option>
                <option>保养指南</option>
                <option>巡检规范</option>
                <option>常见故障</option>
                    <option>安全规程</option>
                    <option>技术标准</option>
                    <option>操作手册</option>
                    <option>培训资料</option>
                </select>
            </div>
            <div>
                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">文档类型</label>
                <select style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                    <option>全部类型</option>
                    <option>PDF文档</option>
                    <option>Word文档</option>
                    <option>Excel表格</option>
                    <option>PPT演示</option>
                    <option>视频文件</option>
                    <option>图片文件</option>
                </select>
            </div>
            <div>
                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">上传时间</label>
                <select style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
                    <option>全部时间</option>
                    <option>今天</option>
                    <option>本周</option>
                    <option>本月</option>
                    <option>近3个月</option>
                    <option>半年内</option>
            </select>
            </div>
        </div>
        <div style="display: flex; gap: 10px; align-items: end;">
            <div style="flex: 1;">
                <label style="display: block; color: #6c757d; font-size: 0.85rem; margin-bottom: 5px; font-weight: 500;">关键词搜索</label>
                <input type="text" placeholder="输入文档标题、描述或标签关键词" style="width: 100%; padding: 8px 12px; border: 1px solid #e0e3ea; border-radius: 6px; font-size: 0.9rem;">
            </div>
            <button onclick="searchKnowledge()" style="padding: 8px 16px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">
                <i class="fas fa-search"></i> 搜索
            </button>
            <button onclick="resetSearch()" style="padding: 8px 16px; background: #f8f9fa; color: #6c757d; border: 1px solid #e0e3ea; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">
                <i class="fas fa-redo"></i> 重置
            </button>
        </div>
    </div>

    <!-- 文档列表 -->
    <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h3 style="color: #333; font-size: 1.2rem; display: flex; align-items: center; gap: 10px; margin: 0;">
                <i class="fas fa-list" style="color: #667eea;"></i>
                我的文档
            </h3>
            <div style="display: flex; gap: 10px;">
                <button onclick="showUploadModal()" style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                    <i class="fas fa-upload"></i>
                    上传文档
                </button>
                <button onclick="showBatchExportModal()" style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: #f8f9fa; color: #6c757d; border: 1px solid #e0e3ea; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                    <i class="fas fa-download"></i>
                    批量导出
                </button>
            </div>
        </div>

        <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse;">
            <thead>
                    <tr style="background: #f8f9fa;">
                        <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.9rem; width: 40px;">
                            <input type="checkbox" style="transform: scale(1.1);">
                        </th>
                        <th style="padding: 10px 8px; text-align: left; color: #667eea; font-weight: 600; font-size: 0.9rem;">文档信息</th>
                        <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.9rem;">可见性</th>
                        <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.9rem;">审核状态</th>
                        <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.9rem;">分类</th>
                        <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.9rem;">类型</th>
                        <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.9rem;">浏览/下载</th>
                        <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.9rem;">获得积分</th>
                        <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.9rem;">上传时间</th>
                        <th style="padding: 10px 8px; text-align: center; color: #667eea; font-weight: 600; font-size: 0.9rem;">操作</th>
                </tr>
            </thead>
            <tbody>
                    <tr style="border-bottom: 1px solid #f8f9fa;" onmouseover="this.style.background='#f5f7fa'" onmouseout="this.style.background='white'">
                        <td style="padding: 10px 8px; text-align: center;">
                            <input type="checkbox" style="transform: scale(1.1);">
                        </td>
                        <td style="padding: 10px 8px; word-wrap: break-word; overflow: hidden;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-file-pdf" style="color: #dc3545; font-size: 1.2rem;"></i>
                                <div>
                                    <div style="font-weight: 500; color: #333; font-size: 0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">空压机故障诊断与维修手册</div>
                                    <div style="font-size: 0.75rem; color: #6c757d; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">详细故障诊断流程和维修操作指南</div>
                                </div>
                            </div>
                        </td>
                        <td style="padding: 10px 8px; text-align: center;">
                            <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #d4edda; color: #155724; white-space: nowrap;">
                                <i class="fas fa-globe" style="margin-right: 3px;"></i>公开
                            </span>
                        </td>
                        <td style="padding: 10px 8px; text-align: center;">
                            <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #d4edda; color: #155724; white-space: nowrap;">
                                <i class="fas fa-check-circle" style="margin-right: 3px;"></i>已通过
                            </span>
                        </td>
                        <td style="padding: 10px 8px; text-align: center;">
                            <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #e3f2fd; color: #1976d2; white-space: nowrap;">设备维修</span>
                        </td>
                        <td style="padding: 10px 8px; text-align: center;">
                            <span style="padding: 3px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #f8d7da; color: #721c24; white-space: nowrap;">PDF</span>
                        </td>
                        <td style="padding: 10px 8px; text-align: center;">
                            <div style="font-size: 0.8rem; color: #6c757d;">
                                <div>156 / 89</div>
                            </div>
                        </td>
                        <td style="padding: 10px 8px; text-align: center;">
                            <div style="font-size: 0.85rem; color: #ffc107; font-weight: 500;">
                                <i class="fas fa-coins"></i> 623
                            </div>
                    </td>
                        <td style="padding: 10px 8px; text-align: center;">
                            <span style="font-size: 0.8rem; color: #6c757d; white-space: nowrap;">06-01<br/>10:30</span>
                    </td>
                        <td style="padding: 10px 8px; text-align: center;">
                            <div style="display: flex; gap: 2px; flex-wrap: wrap; justify-content: center;">
                                <button onclick="viewDocument('DOC001')" style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: none; background: #667eea; color: white; cursor: pointer; white-space: nowrap;">查看</button>
                                <button onclick="editDocument('DOC001')" style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: 1px solid #e0e3ea; background: white; color: #6c757d; cursor: pointer; white-space: nowrap;">编辑</button>
                                <button style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: 1px solid #28a745; background: white; color: #28a745; cursor: pointer; white-space: nowrap;" onclick="toggleVisibility(this, 'public')">设私有</button>
                                <button onclick="deleteDocument('DOC001')" style="padding: 2px 4px; font-size: 0.65rem; border-radius: 3px; border: 1px solid #dc3545; background: white; color: #dc3545; cursor: pointer; white-space: nowrap;">删除</button>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
        
        <!-- 分页 -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid #f0f0f0;">
            <div style="color: #6c757d; font-size: 0.9rem;" id="knowledgePaginationInfo">
                共 <span style="color: #333; font-weight: 500;" id="knowledgeTotalRecords">46</span> 条记录，第 <span style="color: #333; font-weight: 500;" id="knowledgeCurrentPage">1</span> 页，共 <span style="color: #333; font-weight: 500;" id="knowledgeTotalPages">5</span> 页
            </div>
            <div style="display: flex; gap: 5px;" id="knowledgePagination">
                <button onclick="knowledgePrevPage()" style="padding: 6px 12px; border: 1px solid #e0e3ea; background: #f8f9fa; color: #6c757d; border-radius: 6px; cursor: not-allowed; font-size: 0.85rem;" disabled>
                    <i class="fas fa-chevron-left"></i> 上一页
                </button>
                <button onclick="knowledgeGoToPage(1)" style="padding: 6px 12px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">1</button>
                <button onclick="knowledgeGoToPage(2)" style="padding: 6px 12px; border: 1px solid #e0e3ea; background: white; color: #6c757d; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">2</button>
                <button onclick="knowledgeGoToPage(3)" style="padding: 6px 12px; border: 1px solid #e0e3ea; background: white; color: #6c757d; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">3</button>
                <button onclick="knowledgeGoToPage(4)" style="padding: 6px 12px; border: 1px solid #e0e3ea; background: white; color: #6c757d; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">4</button>
                <button onclick="knowledgeGoToPage(5)" style="padding: 6px 12px; border: 1px solid #e0e3ea; background: white; color: #6c757d; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">5</button>
                <button onclick="knowledgeNextPage()" style="padding: 6px 12px; border: 1px solid #e0e3ea; background: white; color: #667eea; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                    下一页 <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        // ======== 知识库管理功能 ========
        
        // 分页状态
        let knowledgeCurrentPage = 1;
        const knowledgeTotalPages = 5;

        // ======== 基础功能 ========
        function showUploadModal() {
            showToast('正在打开文档上传界面...', '#28a745');
        }

        function showNewCategoryModal() {
            showToast('正在打开分类管理界面...', '#667eea');
        }

        function showBatchOperationModal() {
            showToast('正在打开批量操作界面...', '#17a2b8');
        }

        function showBatchExportModal() {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal" style="max-width: 500px;">
                    <div class="modal-header">
                        <h3 class="modal-title">批量导出文档</h3>
                        <button class="modal-close" onclick="this.closest('.modal-overlay').remove()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label class="form-label">导出范围</label>
                            <div style="display: flex; flex-direction: column; gap: 10px; margin-top: 10px;">
                                <div style="display: flex; align-items: center; gap: 8px; cursor: pointer;" onclick="this.querySelector('input').checked = true;">
                                    <input type="radio" name="exportRange" value="selected" checked>
                                    <span style="color: #333; font-size: 14px;">仅导出选中的文档 (0个)</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px; cursor: pointer;" onclick="this.querySelector('input').checked = true;">
                                    <input type="radio" name="exportRange" value="current">
                                    <span style="color: #333; font-size: 14px;">导出当前页面的所有文档</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px; cursor: pointer;" onclick="this.querySelector('input').checked = true;">
                                    <input type="radio" name="exportRange" value="all">
                                    <span style="color: #333; font-size: 14px;">导出所有文档</span>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">导出格式</label>
                                <select class="form-select" id="exportFormat">
                                    <option value="zip">ZIP压缩包</option>
                                    <option value="pdf">合并为PDF</option>
                                    <option value="excel">导出清单Excel</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">文件命名</label>
                                <select class="form-select" id="exportNaming">
                                    <option value="original">保持原文件名</option>
                                    <option value="category">按分类_文件名</option>
                                    <option value="date">按日期_文件名</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div style="display: flex; align-items: center; gap: 8px; cursor: pointer;" onclick="var cb = this.querySelector('input'); cb.checked = !cb.checked;">
                                <input type="checkbox" id="includePrivate">
                                <span style="color: #333; font-size: 14px;">包含私有文档</span>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn-cancel" onclick="this.closest('.modal-overlay').remove()">取消</button>
                        <button class="btn-save" onclick="startBatchExport(); this.closest('.modal-overlay').remove();">开始导出</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function startBatchExport() {
            showToast('批量导出已开始，请稍候...', '#28a745');
        }

        function editCategory(categoryName) {
            showToast('正在编辑分类"' + categoryName + '"...', '#667eea');
        }

        function deleteCategory(categoryName) {
            if (confirm('确定要删除分类"' + categoryName + '"吗？')) {
                showToast('分类"' + categoryName + '"已删除', '#dc3545');
            }
        }

        function searchKnowledge() {
            showToast('正在搜索知识文档...', '#667eea');
        }

        function resetSearch() {
            showToast('筛选条件已重置', '#6c757d');
        }

        function viewDocument(docId) {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal" style="max-width: 700px;">
                    <div class="modal-header">
                        <h3 class="modal-title">文档详情</h3>
                        <button class="modal-close" onclick="this.closest('.modal-overlay').remove()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                            <div>
                                <h4 style="color: #333; margin-bottom: 15px; border-bottom: 2px solid #667eea; padding-bottom: 8px;">基本信息</h4>
                                <div style="space-y: 10px;">
                                    <div style="margin-bottom: 10px;"><strong>文档标题：</strong>螺杆式空压机常见故障诊断与处理方法</div>
                                    <div style="margin-bottom: 10px;"><strong>知识分类：</strong><span style="padding: 3px 8px; background: #e3f2fd; color: #1976d2; border-radius: 12px; font-size: 0.75rem;">设备维修</span></div>
                                    <div style="margin-bottom: 10px;"><strong>文件类型：</strong><span style="padding: 3px 8px; background: #f8d7da; color: #721c24; border-radius: 12px; font-size: 0.75rem;">PDF</span></div>
                                    <div style="margin-bottom: 10px;"><strong>文件大小：</strong>1.2 MB</div>
                                    <div style="margin-bottom: 10px;"><strong>上传时间：</strong>2024-06-01 10:30</div>
                                    <div style="margin-bottom: 10px;"><strong>可见性：</strong><span style="padding: 3px 8px; background: #d4edda; color: #155724; border-radius: 12px; font-size: 0.75rem;">公开</span></div>
                                </div>
                            </div>
                            <div>
                                <h4 style="color: #333; margin-bottom: 15px; border-bottom: 2px solid #28a745; padding-bottom: 8px;">统计数据</h4>
                                <div style="space-y: 10px;">
                                    <div style="margin-bottom: 10px;"><strong>浏览次数：</strong><span style="color: #667eea; font-weight: 600;">623</span></div>
                                    <div style="margin-bottom: 10px;"><strong>下载次数：</strong><span style="color: #28a745; font-weight: 600;">156</span></div>
                                    <div style="margin-bottom: 10px;"><strong>收藏次数：</strong><span style="color: #ffc107; font-weight: 600;">89</span></div>
                                    <div style="margin-bottom: 10px;"><strong>评分：</strong><span style="color: #fd7e14; font-weight: 600;">4.8/5.0</span></div>
                                    <div style="margin-bottom: 10px;"><strong>审核状态：</strong><span style="padding: 3px 8px; background: #d4edda; color: #155724; border-radius: 12px; font-size: 0.75rem;">已通过</span></div>
                                </div>
                            </div>
                        </div>
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #333; margin-bottom: 10px;">文档描述</h4>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #667eea;">
                                详细介绍各种故障现象、原因分析及解决方案。包含常见的启动异响、压力不稳定、温度过高等问题的诊断流程和维修步骤。
                            </div>
                        </div>
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #333; margin-bottom: 10px;">标签</h4>
                            <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                                <span style="padding: 4px 12px; background: #e9ecef; color: #6c757d; border-radius: 12px; font-size: 0.85rem;">空压机</span>
                                <span style="padding: 4px 12px; background: #e9ecef; color: #6c757d; border-radius: 12px; font-size: 0.85rem;">故障诊断</span>
                                <span style="padding: 4px 12px; background: #e9ecef; color: #6c757d; border-radius: 12px; font-size: 0.85rem;">维修</span>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn-cancel" onclick="this.closest('.modal-overlay').remove()">关闭</button>
                        <button class="btn-save" onclick="downloadDocument('${docId}')">下载文档</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function editDocument(docId) {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal" style="max-width: 600px;">
                    <div class="modal-header">
                        <h3 class="modal-title">编辑文档</h3>
                        <button class="modal-close" onclick="this.closest('.modal-overlay').remove()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="form-group">
                                <label class="form-label">文档标题 *</label>
                                <input type="text" class="form-control" value="螺杆式空压机常见故障诊断与处理方法" required>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">知识分类 *</label>
                                    <select class="form-select" required>
                                        <option value="设备维修" selected>设备维修</option>
                                        <option value="保养指南">保养指南</option>
                                        <option value="巡检规范">巡检规范</option>
                                        <option value="常见故障">常见故障</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">可见性</label>
                                    <select class="form-select">
                                        <option value="public" selected>公开</option>
                                        <option value="private">私有</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">文档描述</label>
                                <textarea class="form-textarea" placeholder="请简要描述文档内容..." style="min-height: 100px;">详细介绍各种故障现象、原因分析及解决方案</textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">标签</label>
                                <input type="text" class="form-control" value="空压机,故障诊断,维修" placeholder="用逗号分隔多个标签">
                            </div>
                            <div class="form-group">
                                <label class="form-label">重新上传文档</label>
                                <div style="border: 2px dashed #e0e3ea; border-radius: 8px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.3s;" onclick="this.style.borderColor='#667eea'; this.style.backgroundColor='#f8f9ff';">
                                    <i class="fas fa-cloud-upload-alt" style="font-size: 24px; color: #667eea; margin-bottom: 10px;"></i>
                                    <div style="color: #333; margin-bottom: 5px;">点击上传新文档或拖拽文件到此处</div>
                                    <div style="font-size: 0.85rem; color: #6c757d;">支持 PDF、DOC、DOCX、PPT、PPTX 等格式，最大 10MB</div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button class="btn-cancel" onclick="this.closest('.modal-overlay').remove()">取消</button>
                        <button class="btn-save" onclick="saveDocumentEdit('${docId}'); this.closest('.modal-overlay').remove();">保存修改</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function saveDocumentEdit(docId) {
            showToast('文档修改已保存', '#28a745');
        }

        function deleteDocument(docId) {
            if (confirm('确定要删除这个文档吗？删除后无法恢复。')) {
                showToast('文档已删除', '#dc3545');
            }
        }

        function downloadDocument(docId) {
            showToast('正在准备下载文档...', '#28a745');
        }

        function batchSetVisibility(visibility) {
            const action = visibility === 'public' ? '公开' : '私有';
            showToast('批量设为' + action + '操作完成', visibility === 'public' ? '#28a745' : '#17a2b8');
        }

        function batchExport() {
            showToast('正在准备批量导出...', '#667eea');
        }

        function batchDelete() {
            if (confirm('确定要批量删除选中的文档吗？删除后无法恢复。')) {
                showToast('批量删除操作完成', '#dc3545');
            }
        }

        function closeKnowledgeModal() {
            const modal = document.querySelector('.global-modal');
            if (modal) modal.remove();
        }

        function showWithdrawModal() {
            showToast('正在打开提现申请页面...', '#dc3545');
        }

        function toggleVisibility(button, currentStatus) {
            if (currentStatus === 'public') {
                button.textContent = '设公开';
                button.onclick = function() { toggleVisibility(this, 'private'); };
                button.style.borderColor = '#17a2b8';
                button.style.color = '#17a2b8';
                showToast('文档已设为私有', '#17a2b8');
            } else {
                button.textContent = '设私有';
                button.onclick = function() { toggleVisibility(this, 'public'); };
                button.style.borderColor = '#28a745';
                button.style.color = '#28a745';
                showToast('文档已设为公开，等待审核', '#28a745');
            }
        }

        // 分页功能
        function knowledgeGoToPage(page) {
            if (page < 1 || page > knowledgeTotalPages) return;
            
            knowledgeCurrentPage = page;
            showToast('正在加载第' + page + '页数据...', '#667eea');
            
            setTimeout(() => {
                updateKnowledgePagination();
                showToast('第' + page + '页数据加载完成！', '#28a745');
            }, 800);
        }

        function knowledgePrevPage() {
            if (knowledgeCurrentPage > 1) {
                knowledgeGoToPage(knowledgeCurrentPage - 1);
            }
        }

        function knowledgeNextPage() {
            if (knowledgeCurrentPage < knowledgeTotalPages) {
                knowledgeGoToPage(knowledgeCurrentPage + 1);
            }
        }

        function updateKnowledgePagination() {
            const totalRecords = 46;
            document.getElementById('knowledgeTotalRecords').textContent = totalRecords;
            document.getElementById('knowledgeCurrentPage').textContent = knowledgeCurrentPage;
            document.getElementById('knowledgeTotalPages').textContent = knowledgeTotalPages;
            
            const paginationContainer = document.getElementById('knowledgePagination');
            if (paginationContainer) {
                let buttonsHTML = '';
                
                // 上一页按钮
                const prevDisabled = knowledgeCurrentPage === 1;
                buttonsHTML += '<button onclick="knowledgePrevPage()" style="padding: 6px 12px; border: 1px solid #e0e3ea; background: ' + 
                    (prevDisabled ? '#f8f9fa' : 'white') + '; color: #6c757d; border-radius: 6px; cursor: ' + 
                    (prevDisabled ? 'not-allowed' : 'pointer') + '; font-size: 0.85rem;" ' + 
                    (prevDisabled ? 'disabled' : '') + '><i class="fas fa-chevron-left"></i> 上一页</button>';
                
                // 页码按钮
                for (let i = 1; i <= knowledgeTotalPages; i++) {
                    const isActive = i === knowledgeCurrentPage;
                    buttonsHTML += '<button onclick="knowledgeGoToPage(' + i + ')" style="padding: 6px 12px; background: ' + 
                        (isActive ? '#667eea' : 'white') + '; color: ' + (isActive ? 'white' : '#6c757d') + 
                        '; border: ' + (isActive ? 'none' : '1px solid #e0e3ea') + 
                        '; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">' + i + '</button>';
                }
                
                // 下一页按钮
                const nextDisabled = knowledgeCurrentPage === knowledgeTotalPages;
                buttonsHTML += '<button onclick="knowledgeNextPage()" style="padding: 6px 12px; border: 1px solid #e0e3ea; background: ' + 
                    (nextDisabled ? '#f8f9fa' : 'white') + '; color: ' + (nextDisabled ? '#6c757d' : '#667eea') + 
                    '; border-radius: 6px; cursor: ' + (nextDisabled ? 'not-allowed' : 'pointer') + 
                    '; font-size: 0.85rem;" ' + (nextDisabled ? 'disabled' : '') + 
                    '>下一页 <i class="fas fa-chevron-right"></i></button>';
                
                paginationContainer.innerHTML = buttonsHTML;
            }
        }

        // 显示Toast通知
        function showToast(message, color) {
            color = color || '#667eea';
            const toast = document.createElement('div');
            toast.style.cssText = 'position: fixed; top: 20px; right: 20px; background: ' + color + 
                '; color: white; padding: 15px 20px; border-radius: 8px; z-index: 10000; box-shadow: 0 4px 12px rgba(0,0,0,0.2);';
            toast.innerHTML = '<i class="fas fa-info-circle"></i> ' + message;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }
                        </script>
</body>
</html> 